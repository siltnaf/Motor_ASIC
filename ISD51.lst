A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\OUTPUT\ISD51.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE SRC\ISD51.A51 INCDIR(.\INC) SET(SMALL) DEBUG PRINT(.\ISD51.lst) OBJECT(
                      .\OUTPUT\ISD51.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     $nomod51     
                       2     ;------------------------------------------------------------------------------
                       3     ;  ISD51  In-System Debugger for 8051 based microcontrollers
                       4     ;  Copyright KEIL ELEKTRONIK GmbH and Keil Software, Inc. 2000 - 2003
                       5     ;  Version 2.05
                       6     ;------------------------------------------------------------------------------
                       7     ;  ISD51.A51:  This module needs to be added to the user application
                       8     ;
                       9     ;  Copy this file to your project folder and add the copy to your uVision2
                      10     ;  project.  You can customize several parameters of the ISD51 In-System 
                      11     ;  Monitor within this configuration file.
                      12     ;
                      13     ;  ISD51 V2.00: added new features like user I/O and hardware breakpoints.
                      14     ;  ISD51 V2.02: fixed a problem when single stepping through putchar
                      15     ;
                      16     ;  ISD51 V2.03: adapted for TI AUX Interupt (EAI Bit save/restore added)
                      17     ;  ISD51 V2.04: 'Stop' command did not break program execution on targets that
                      18     ;               do not have hardware breakpoints
                      19     ;  ISD51 V2.05: when ISD51 is not started, getkey return value was not in R7.
                      20     ;------------------------------------------------------------------------------
                      21     
                      22     ;#include "ISD51.H" 
                +1    23     
                +1    24     
                +1    25     
                +1    26     
                +1    27     
                +1    28     
                +1    29     
                +1    30     
                +1    31     
                +1    32     
                +1    33     
                +1    34     
                +1    35     
                +1    36     
                +1    37     
                +1    38     
                +1    39     
                +1    40     
                +1    41     
                +1    42     
                +1    43     
                +1    44     
                +1    45     
                +1    46     
                +1    47     
                +1    48     
                +1    49     
                +1    50     
                +1    51     
                +1    52     
                +1    53     
                +1    54     
                +1    55     
                +1    56     
                +1    57     
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     2

                +1    58     
                +1    59     
                +1    60     
                +1    61     
                +1    62     
                +1    63     
                +1    64     
                +1    65     
                +1    66     
                +1    67     
                +1    68     
  0098          +1    69     sfr  SCON = 0x98;
  0099          +1    70     sfr  SBUF = 0x99;
  00A8          +1    71     sfr  IE   = 0xA8;
                +1    72     
                +1    73     
  0099          +1    74     sbit TI   = SCON^1;
  0098          +1    75     sbit RI   = SCON^0;
                +1    76     
                +1    77     
  00AC          +1    78     sbit ES   = IE^4;
  00AF          +1    79     sbit EA   = IE^7;
                +1    80     
                +1    81     CLR_TI   MACRO             ; Clear Transmit Interrupt Flag 
                +1    82              CLR     TI        ; No CPU register may be changed here
                +1    83              ENDM
                +1    84     
                +1    85     SET_TI   MACRO             ; Set   Transmit Interrupt Flag
                +1    86              SETB    TI        ; No CPU register may be changed here
                +1    87              ENDM
                +1    88     
                +1    89     JNB_TI   MACRO   label     ; Jump if Transmit Interrupt Flag not set
                +1    90              JNB     TI,label  ; PSW may be modified without saving it
                +1    91              ENDM
                +1    92     
                +1    93     WR_SBUF  MACRO             ; Write ACC to SBUF
                +1    94              MOV     SBUF,A    ; ACC and PSW may be modified without saving it
                +1    95              ENDM
                +1    96     
                +1    97     CLR_RI   MACRO             ; Clear Receiver Interrupt Flag 
                +1    98              CLR     RI        ; No CPU register may be changed here
                +1    99              ENDM
                +1   100     
                +1   101     JB_RI    MACRO   label     ; Jump if Receiver Interrupt Flag set
                +1   102              JB      RI,label  ; ACC and PSW may be modified without saving it
                +1   103              ENDM
                +1   104     
                +1   105     JNB_RI   MACRO   label     ; Jump if Receiver Interrupt Flag not set
                +1   106              JNB     RI,label  ; ACC and PSW may be modified without saving it
                +1   107              ENDM
                +1   108     
                +1   109     RD_SBUF  MACRO             ; Return SBUF in ACC
                +1   110              MOV    A,SBUF     ; ACC and PSW may be modified without saving it
                +1   111              ENDM
                +1   112     
                +1   113     CLR_ES   MACRO             ; Disable Serial Interrupt
                +1   114              CLR    ES         ; No CPU register may be changed here
                +1   115              ENDM
                +1   116     
                +1   117     SET_ES   MACRO             ; Enable Serial Interrupt
                +1   118              SETB   ES         ; No CPU register may be changed here
                +1   119              ENDM
                +1   120     
                +1   121     JNB_ES   MACRO   label     ; Jump if Receiver Interrupt Flag not set
                +1   122              JNB     ES,label  ; ACC and PSW may be modified without saving it
                +1   123              ENDM
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     3

                +1   124     
                +1   125     SAVE_ES  MACRO             ; Save Serial Interrupt enable bit to Carry
                +1   126              MOV    C,ES       ; ACC and PSW may be modified without saving it
                +1   127              ENDM
                +1   128     
                +1   129     RESTO_ES MACRO             ; Restore Serial Interrupt enable bit from Carry
                +1   130              MOV    ES,C       ; ACC and PSW may be modified without saving it
                +1   131              ENDM
                +1   132     
  2023          +1   133     SINTRVEC EQU    0x2023       ; Interrupt Vector Address of UART interrupt
                +1   134     
                +1   135     
                +1   136     
                +1   137     
                +1   138     
                +1   139     
                +1   140     
                +1   141     
                +1   142     
                +1   143     
                +1   144     
                +1   145     
                +1   146     
                +1   147     
                +1   148     
                +1   149     
                +1   150     
                +1   151                                
                +1   152     
                +1   153     
                +1   154     
                +1   155     
                +1   156     
                +1   157     
                +1   158     
                +1   159     
                +1   160     
                +1   161     CWRITE  MACRO              ; write new content data to Flash CODE ROM block
                +1   162                                ; Flash block address in DPTR
                +1   163             ENDM
                +1   164     
                +1   165     
                +1   166     
                +1   167     
                +1   168     
                +1   169     
                +1   170     
                +1   171     
                +1   172     
                +1   173     
                +1   174     
                +1   175     
                +1   176     
                +1   177     
                +1   178     
                +1   179                                
                +1   180     
                +1   181     
                +1   182     
                +1   183                                
                +1   184     
                +1   185     
                +1   186     
                +1   187     
                +1   188     
                +1   189     
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     4

                +1   190     
                +1   191     
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1           
                +1   234     
                +1   235     
                +1   236     
                +1   237     
                +1   238     
                +1   239     
                +1   240     
                +1   241     
                +1   242     
                +1   243     
                +1   244     
                +1   245     
                +1   246     
                +1   247     
                +1   248     
                +1   249     
                +1   250     
                +1   251     
                +1   252     
                +1   253     
                +1   254     
                +1   255     
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     5

                +1   256     
                +1   257     
                +1   258     
                +1   259     
                +1   260     
                +1   261     
                +1   262     
                +1   263     
                +1   264     
                     265     
                     266     
                     267     ;------------------------------------------------------------------------------
                     268     ;----------------- !!! Do not modify code sections below !!! ------------------
                     269     ;------------------------------------------------------------------------------
                     270     
                     271     NAME ISD51_CONFIGURATION
                     272     
                     273     
                     274     SBYTE    MACRO             ; Transmit Byte in ACC via serial UART
                     275              JNB_TI $
                     276              CLR_TI
                     277              WR_SBUF           ; MOV SBUF,A
                     278              ENDM
                     279     
                     280     RBYTE    MACRO             ; Read one Byte from serial UART to ACC
                     281              RD_SBUF           ; MOV A,SBUF
                     282              CLR_RI
                     283              ENDM
                     284     
                     285     GBYTE    MACRO             ; Receive one Character from 8051 Serial Interface
                     286              JNB_RI $
                     287              RBYTE
                     288              ENDM
                     289     
                     290     
                     291     
  0080               292     sfr P0     = 0x80;
  0090               293     sfr P1     = 0x90;
  00A0               294     sfr P2     = 0xA0;
  00B0               295     sfr P3     = 0xB0;
  00D0               296     sfr PSW    = 0xD0;
  00E0               297     sfr ACC    = 0xE0;
  00F0               298     sfr B      = 0xF0;
  0081               299     sfr SP     = 0x81;
  0082               300     sfr DPL    = 0x82;
  0083               301     sfr DPH    = 0x83;
  008E               302     sfr AUXR   = 0x8E;
  00E4               303     sfr PH_FMCON  = 0xE4;  // for Philips LPC900 devices
  00E6               304     sfr PH_FMADRL = 0xE6;  // for Philips LPC900 devices
                     305     
  0000               306     sfr UARTFLAG = 0x;
                     307     
  00FF               308     ?ISD?RAMTOP     EQU     0x100-1
  0000               309     ?ISD?CMP_S      EQU     0x0
  FFFF               310     ?ISD?CMP_E      EQU     0xFFFF
                     311     
                     312     EXTRN NUMBER (?ISD?CORE)
                     313     
                     314     PUBLIC ?ISD?RAMTOP
                     315     PUBLIC ?ISD?RESTART
                     316     PUBLIC ?ISD?CMDLOOP
                     317     PUBLIC ?ISD?GETBYTE
                     318     PUBLIC ?ISD?SENDBYTE
                     319     PUBLIC ?ISD?READSFR00
                     320     PUBLIC ?ISD?READSFR01
                     321     PUBLIC ?ISD?READSFR02
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     6

                     322     PUBLIC ?ISD?READSFR03
                     323     PUBLIC ?ISD?READSFR04
                     324     PUBLIC ?ISD?READSFR05
                     325     PUBLIC ?ISD?READSFR06
                     326     PUBLIC ?ISD?READSFR07
                     327     PUBLIC ?ISD?READSFR08
                     328     PUBLIC ?ISD?READSFR09
                     329     PUBLIC ?ISD?READSFR10
                     330     PUBLIC ?ISD?READSFR11
                     331     PUBLIC ?ISD?READSFR12
                     332     PUBLIC ?ISD?READSFR13
                     333     PUBLIC ?ISD?READSFR14
                     334     PUBLIC ?ISD?READSFR15
                     335     PUBLIC ?ISD?READSFR16
                     336     PUBLIC ?ISD?READSFR17
                     337     PUBLIC ?ISD?READSFR18
                     338     PUBLIC ?ISD?WRITESFR00
                     339     PUBLIC ?ISD?WRITESFR01
                     340     PUBLIC ?ISD?WRITESFR02
                     341     PUBLIC ?ISD?WRITESFR03
                     342     
                             
                             
                             
                     346     PUBLIC ?ISD?VERSION
                     347     PUBLIC ?ISD?CMP_S
                     348     PUBLIC ?ISD?CMP_E
                     349     PUBLIC __isd_init
                     350     
                     351     
                     352     PUBLIC ?ISD?CBLK_SIZE  ; block size for FLASH IAP Routine
                     353     
  0000               354     ?ISD?CBLK_SIZE  EQU     0
  0010               355     CBLK            EQU     10H             ; Start address for FLASH buffer
                     356     
  00CD               357     ?ISD?VERSION    EQU     205             ; Version 2.05
                     358     
                     359     
                     360     ?BI?ISD51       SEGMENT BIT
----                 361                     RSEG    ?BI?ISD51
0000                 362     SaveEAI:        DBIT    1               ; Save TI AUX Interrupt Enable bit
                     363     
                     364     
                     365     
                     366     ?PR?ISD51       SEGMENT CODE INBLOCK
                     367     
----                 368                     CSEG AT SINTRVEC    ; Serial Interrupt
2023 020000   F      369                     LJMP    SerialInterrupt
                     370     
                     371     
                     372     
                     373     ;-------- Chip Specific Break Features -----------------------
                     374     PUBLIC          ?ISD?HWBREAKS
                     375     PUBLIC          ?ISD?SETHWBREAK
                     376     
  2000               377     BREAK_CODE      EQU     0x2000
  E800               378     BREAK_XDATA     EQU     0xE800
                     379     
  E802               380     ?ISD?HWBREAKS   EQU     (BREAK_CODE OR BREAK_XDATA) + 2
                     381     
                     382     ;BPCTRL          DATA    0A9H  ; BPCTRL.7  := breakpoint interrupt request
                     383                                   ; BPCTRL.1  := 0=code break, 1=xdata break
                     384                                   ; BPCTRL.0  := breakpoint enable 
                     385     ;BREAKL          DATA    0AAH  ; break low  address
                     386     ;BREAKH          DATA    0ABH  ; break high address
  0093               387     BPCTRL          DATA    093H  ; BPCTRL.7  := breakpoint interrupt request
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     7

                     388                                   ; BPCTRL.1  := 0=code break, 1=xdata break
                     389                                   ; BPCTRL.0  := breakpoint enable 
  0094               390     BREAKL          DATA    094H  ; break low  address
  0095               391     BREAKH          DATA    095H  ; break high address
  0096               392     MEMCTRL         DATA    096H  ; MEMCTRL.7 := breakpoint select
                     393     ;PIREG           DATA    096H  ; PIREG.0   := breakpoint interrupt enable
                     394     ;EICON           DATA    0D8H  ; Extended Interrupt CONtrol register
                     395     ;PFI             BIT     0DCH  ; Interrupt Request Flag for power fail and debug
  00B8               396     PIREG           DATA    0B8H  ; PIREG.0   := breakpoint interrupt enable
  00C0               397     EICON           DATA    0C0H  ; Extended Interrupt CONtrol register
  00C5               398     PFI             BIT     0C5H  ; Interrupt Request Flag for power fail and debug
                     399     
----                 400                     CSEG    AT    201BH       ; interupt vector for breakpoints
201B 0220A3          401                     LJMP    20A3H
                     402     
----                 403                                     CSEG    AT    206BH       ; interupt vector for breakpoints
206B 020000   F      404                     LJMP    HWBreakEntry
                     405     
                     406     
----                 407                     RSEG    ?PR?ISD51
                     408                     USING   0               ; Assume Registerbank 0 for ARx symbols
                     409     
                     410     ; Entry Point for HW Breakpoint
0000 C0D0            411     HWBreakEntry:   PUSH    PSW
0002 C0E0            412                     PUSH    ACC
0004 E593            413                     MOV     A,BPCTRL
0006 20E707          414                     JB      ACC.7,HWBreakpoint
0009 D0E0            415                     POP     ACC
000B D0D0            416                     POP     PSW
000D 02208B          417                     LJMP    208BH            ; Other interrupt sources such as A/D Converter
                     418                                             ; SPI, PFI and (milli)second timer sharing the 
                     419                                             ; interrupt vector at address 33H must be 
                     420                                             ; relocated to address 6BH (interrupt 13)!
                     421     
0010 75D000          422     HWBreakpoint:   MOV     PSW,#0          ; Select Register Bank 0
0013 C000            423                     PUSH    AR0
0015 C001            424                     PUSH    AR1
                     425     ;                MOV     A,MEMCTRL       ; Get Breakpoint reason
0017 7400            426                     MOV     A,#0       ; Get Breakpoint reason
0019 33              427                     RLC     A
001A 747C            428                     MOV     A,#0F8H/2
001C 33              429                     RLC     A               ; 0F8H->Break 0, 0F9H->Break 1
                     430     ;                ORL     BPCTRL,#80H     ; Clear Breakpoint interrupt
001D 53937F          431                     ANL     BPCTRL,#7FH     ; Clear Breakpoint interrupt
0020 C2C5            432                     CLR     PFI
                     433                     SET_TI
0024 8046            435                     SJMP    Send7Bytes
                     436     
                     437     ;--------------------------------------------------------------------------
                     438     ; Command: Set Hardware Break Register
                     439     ;  LOW (?ISD?SETHWBREAK), HIGH (?ISD?SETHWBREAK), BPcode, LOW (bp_addr), HIGH (bp_addr)
                     440     ;     BPcode.0..2  :=  select hardware break register 0..7
                     441     ;     BPcode.3     :=  reserved, currently set to 0
                     442     ;     BPcode.4     :=  0  disable breakpoint,  1 enable breakpoint
                     443     ;     BPcode.5     :=  0  xdata breakpoint,    1 code   breakpoint
                     444     ;     BPcode.6     :=  reserved, currently set to 0
                     445     ;     BPcode.7     :=  reserved, currently set to 0
                     446                   
0026                 447     ?ISD?SETHWBREAK:
0026 C8              448                     XCH     A,R0
0027 C4              449                     SWAP    A
0028 439680          450                     ORL     MEMCTRL,#80H    ; BPSEL=1; select hw breakpoint 1
002B 10E403          451                     JBC     ACC.4,SelectHWbp1
002E 53967F          452                     ANL     MEMCTRL,#7FH    ; BPSEL=0; select hw breakpoint 0
0031 C8              453     SelectHWbp1:    XCH     A,R0
0032 759380          454                     MOV     BPCTRL,#80H     ; disable breakpoint, clear pending breakpoints
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     8

0035 F594            455                     MOV     BREAKL,A
0037 1100     F      456                     ACALL   ?ISD?GETBYTE
0039 F595            457                     MOV     BREAKH,A
003B 8893            458                     MOV     BPCTRL,R0
003D 0100     F      459                     AJMP    ?ISD?CMDLOOP
                     460     ;--------------------------------------------------------------------------
                     461     
                     462     
                     463     
----                 464                     RSEG    ?PR?ISD51
                     465                     USING   0               ; Assume Registerbank 0 for ARx symbols
                     466     
                     467     
                             
                             
                                             
                                             
                                             
                             
                     474     
003F                 475     SerialInterrupt:
003F C0D0            476                     PUSH    PSW
0041 C0E0            477                     PUSH    ACC
                     478                     JNB_RI  NoSerBreak
                     480                     RBYTE                        ; Check for 0A5H Break Code
                     481+1            RD_SBUF           ; MOV A,SBUF
                     483+1            CLR_RI
                     485     
004A F500     F      486                     MOV     _ISD_CHAR,A
                     487     
004C B4A55E          488                     CJNE    A,#0A5H,ReturnI
                     489     
                     490                     SET_TI
0051 75D000          492                     MOV     PSW,#0          ; Select Register Bank 0
0054 C000            493                     PUSH    AR0
0056 C001            494                     PUSH    AR1
0058 8010            495                     SJMP    SoftBreak
                     496     
005A 74FF            497     NoSerBreak:     MOV     A,#0FFH
005C 75D000          498     CallBreak:      MOV     PSW,#0          ; Select Register Bank 0
005F C000            499                     PUSH    AR0
0061 C001            500                     PUSH    AR1
0063 78FF            501                     MOV     R0,#?ISD?RAMTOP
                     502     
0065 8600            503                     MOV     AR0,@R0         ; Load Start Address of Break Table
0067 B8FF29          504                     CJNE    R0,#0xFF,CheckBreaks
                             
                                             
                                             
                             
                             
                             
                                             
                                             
                                             
                             
                             
                                             
                                             
                             
                     519     ; Called when a Breakpoint is reached or in Single Stepping Mode
                     520     
                     521     ; Sends Break-Idenfier, R0, ACC, PSW, PCH, PCL, R1
                     522     
006A 74F7            523     SoftBreak:      MOV     A,#0F7H         ; Send Idenifier
                     524     
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE     9

006C                 525     Send7Bytes:     SBYTE                   ; Send Byte
                     526+1            JNB_TI $
                     528+1            CLR_TI
                     530+1            WR_SBUF           ; MOV SBUF,A
0073 D001            532                     POP     AR1
0075 7805            533                     MOV     R0,#5
0077 D0E0            534     SendStackFrame: POP     ACC
0079 1100     F      535                     ACALL   ?ISD?SENDBYTE
007B D8FA            536                     DJNZ    R0,SendStackFrame
007D E9              537                     MOV     A,R1
007E 1100     F      538     ?ISD?CMDLOOP2:  ACALL   ?ISD?SENDBYTE
                     539     
                     540     ; Wait for Command
                     541     ;  CmdAddrL, CmdAddrH, R0, ACC
                     542     
0080 1100     F      543     ?ISD?CMDLOOP:   ACALL   ?ISD?GETBYTE            ; Command Address
0082 C0E0            544                     PUSH    ACC
0084 1100     F      545                     ACALL   ?ISD?GETBYTE
0086 C0E0            546                     PUSH    ACC
0088 1100     F      547                     ACALL   ?ISD?GETBYTE
008A F8              548                     MOV     R0,A
                     549     ;;;             ACALL   ?ISD?GETBYTE
                     550     ;;;             RET
                     551     
008B                 552     ?ISD?GETBYTE:   GBYTE
                     553+1            JNB_RI $
                     555+1            RBYTE
0092 22              560                     RET
                     561     
                     562     
                     563     ; Check Soft Breaks in Memory
0093 E581            564     CheckBreaks:    MOV     A,SP
0095 24FC            565                     ADD     A,#-4
0097 F9              566                     MOV     R1,A            ; Address to PCH/PCL
0098 800C            567                     SJMP    CheckBreak1
009A 08              568     CheckBreak:     INC     R0
009B 19              569                     DEC     R1
009C E6              570                     MOV     A,@R0           ; Compare Low Part
009D 67              571                     XRL     A,@R1
009E 08              572                     INC     R0
009F 09              573                     INC     R1
00A0 7004            574                     JNZ     CheckBreak1
00A2 E6              575                     MOV     A,@R0           ; Compare High Part
00A3 67              576                     XRL     A,@R1
00A4 60C4            577                     JZ      SoftBreak
00A6 B8FEF1          578     CheckBreak1:    CJNE    R0,#?ISD?RAMTOP-1,CheckBreak
                     579     
00A9 D001            580                     POP     AR1
00AB D000            581     RestartUser:    POP     AR0
                     582     
                     583     
00AD D0E0            584     ReturnI:        POP     ACC
00AF D0D0            585                     POP     PSW
                     586     ;#ifdef TI_MSC1210_BREAKS                               
00B1 439310          587                                     ORL     BPCTRL, #10H   ;set uart transfer completed flag 
                     588     ;#endif
00B4 32              589                     RETI
                     590     
                     591     
                     592     
00B5                 593     ?ISD?SENDBYTE:  SBYTE
                     594+1            JNB_TI $
                     596+1            CLR_TI
                     598+1            WR_SBUF           ; MOV SBUF,A
00BC 22              600                     RET
                     601     
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    10

                     602     ;--------------------------------------------------------------------------
                     603     ; Command: Restart User Program
                     604     ;  LOW (?ISD?RESTART), HIGH (?ISD?RESTART), R0, PCL, PCH, PSW, R1, ACC
                     605     ;
                     606     ;
00BD C0E0            607     ?ISD?RESTART:   PUSH    ACC          ; PCL Content of User Program
00BF 1100     F      608                     ACALL   ?ISD?GETBYTE
00C1 C0E0            609                     PUSH    ACC          ; PCH Content of User Program
00C3 1100     F      610                     ACALL   ?ISD?GETBYTE
00C5 C0E0            611                     PUSH    ACC          ; PSW Content of User Program
00C7 1100     F      612                     ACALL   ?ISD?GETBYTE
00C9 F9              613                     MOV     R1,A         ; R1  Content of User Program
00CA 1100     F      614                     ACALL   ?ISD?GETBYTE ; ACC Content of User Program
00CC C0E0            615                     PUSH    ACC
00CE C000            616                     PUSH    AR0
00D0 78FF            617                     MOV     R0,#?ISD?RAMTOP
00D2 E6              618                     MOV     A,@R0
                     619     
                                             
                                             
                                             
                                             
                                             
                             
                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                             
                             
                                             
                                             
                                             
                                             
                                             
                             
                             
                                             
                                             
                                             
                                             
                                             
                             
                             
                             
                                             
                                             
                                             
                                             
                                             
                             
                             
                                             
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    11

                             
00D3 7002            669                     JNZ     RestartSS
                     670                     CLR_TI
00D7 0100     F      672     RestartSS:      AJMP    RestartUser
                     673     
                     674     
                     675     ;--------------------------------------------------------------------------;
                     676     ; Insert HW Breakpoints
                     677     
                             
                             
                             
                             
                             
                             
                                             
                                             
                                             
                                             
                             
                             
                             
                             
                             
                             
                             
                                             
                             
                             
                     698     ;--------------------------------------------------------------------------
                     699     ; Command: Write SFR DPL, DPH
                     700     ;  LOW (?ISD?WRITESFR00), HIGH (?ISD?WRITESFR00), DPL, DPH
                     701     ;
                     702     ;
00D9                 703     ?ISD?WRITESFR00:
00D9 8882            704                     MOV     DPL,R0
00DB F583            705                     MOV     DPH,A
00DD 0100     F      706                     AJMP    ?ISD?CMDLOOP
                     707     
                     708     ;--------------------------------------------------------------------------
                     709     ; Command: Write SFR SP, B
                     710     ;  LOW (?ISD?WRITESFR01), HIGH (?ISD?WRITESFR01), SP, B
                     711     ;
00DF                 712     ?ISD?WRITESFR01:
00DF 8881            713                     MOV     SP,R0
00E1 F5F0            714                     MOV     B,A
00E3 0100     F      715                     AJMP    ?ISD?CMDLOOP
                     716     
                     717     ;--------------------------------------------------------------------------
                     718     ; Command: Write SFR02:  P0
                     719     ;  LOW (?ISD?WRITESFR02), HIGH (?ISD?WRITESFR02), dummy, P0
                     720     ;
00E5                 721     ?ISD?WRITESFR02:
00E5 F580            722                     MOV     P0,A
00E7 0100     F      723                     AJMP    ?ISD?CMDLOOP
                     724     
                     725     ;--------------------------------------------------------------------------
                     726     ; Command: Write SFR03:  P3
                     727     ;  LOW (?ISD?WRITESFR03), HIGH (?ISD?WRITESFR03), dummy, P3
                     728     ;
00E9                 729     ?ISD?WRITESFR03:
00E9 F5B0            730                     MOV     P3,A
00EB 0100     F      731                     AJMP    ?ISD?CMDLOOP
                     732     
                     733     
                             
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    12

                             
                             
                             
                             
                                             
                                             
                             
                             
                             
                             
                             
                             
                                             
                                             
                             
                     750     
                     751     ;--------------------------------------------------------------------------
                     752     ; 0 Read CPU Core SFR registers:
                     753     ;  LOW (?ISD?READCORESFR), HIGH (?ISD?READCORESFR), dummy, dummy
                     754     ;  Sends: dummy, dummy, B, AUXR, DPL, DPH, SP
00ED E581            755     ?ISD?READSFR00: MOV     A,SP
00EF C083            756                     PUSH    DPH
00F1 C082            757                     PUSH    DPL
00F3 C08E            758                     PUSH    AUXR
00F5 C0F0            759                     PUSH    B
00F7 C0E0            760                     PUSH    ACC   ; Dummy
00F9 C0E0            761                     PUSH    ACC   ; Dummy
00FB 0100     F      762                     AJMP    Send7Bytes
                     763     ;
                     764     ;--------------------------------------------------------------------------
                     765     ; 1 Read CPU Core SFR registers:
                     766     ;  LOW (?ISD?READSFR01), HIGH (?ISD?READSFR01), dummy, dummy
                     767     ;  Sends: S:80, S:84, S:85, S:86, S:87, S:88, S:89
                     768     ;   
00FD                 769     ?ISD?READSFR01:
00FD E589            770                     MOV     A,0x89  ; S:89
00FF C088            771                     PUSH    0x88    ; S:88
0101 C087            772                     PUSH    0x87
0103 C086            773                     PUSH    0x86
0105 C085            774                     PUSH    0x85
0107 C084            775                     PUSH    0x84
0109 C080            776                     PUSH    0x80
010B 0100     F      777                     AJMP    Send7Bytes
                     778     ;
                     779     ;--------------------------------------------------------------------------
                     780     ; 2 Read CPU Core SFR registers:
                     781     ;  LOW (?ISD?READSFR02), HIGH (?ISD?READSFR02), dummy, dummy
                     782     ;  Sends: S:8A, S:8B, S:8C, S:8D, S:8E, S:8F, S:90
                     783     ;  
010D                 784     ?ISD?READSFR02:
010D E590            785                     MOV     A,0x90
010F C08F            786                     PUSH    0x8F    
0111 C08E            787                     PUSH    0x8E
0113 C08D            788                     PUSH    0x8D
0115 C08C            789                     PUSH    0x8C
0117 C08B            790                     PUSH    0x8B
0119 C08A            791                     PUSH    0x8A
011B 0100     F      792                     AJMP    Send7Bytes
                     793     ;
                     794     ;--------------------------------------------------------------------------
                     795     ; 3 Read CPU Core SFR registers:
                     796     ;  LOW (?ISD?READSFR03), HIGH (?ISD?READSFR03), dummy, dummy
                     797     ;  Sends: S:91, S:92, S:93, S:94, S:95, S:96, S:97
                     798     ;   
011D                 799     ?ISD?READSFR03:
011D E597            800                     MOV     A,0x97
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    13

011F C096            801                     PUSH    0x96    
0121 C095            802                     PUSH    0x95
0123 C094            803                     PUSH    0x94
0125 C093            804                     PUSH    0x93
0127 C092            805                     PUSH    0x92
0129 C091            806                     PUSH    0x91
012B 0100     F      807                     AJMP    Send7Bytes
                     808     ;
                     809     ;--------------------------------------------------------------------------
                     810     ; 4 Read CPU Core SFR registers:
                     811     ;  LOW (?ISD?READSFR04), HIGH (?ISD?READSFR04), dummy, dummy
                     812     ;  Sends: S:8A, S:8B, S:8C, S:8D, S:8E, S:8F, S:90
                     813     ;  
012D                 814     ?ISD?READSFR04:
012D E59E            815                     MOV     A,0x9E
012F C09D            816                     PUSH    0x9D    
0131 C09C            817                     PUSH    0x9C
0133 C09B            818                     PUSH    0x9B
0135 C09A            819                     PUSH    0x9A
0137 C099            820                     PUSH    0x99
0139 C098            821                     PUSH    0x98
013B 0100     F      822                     AJMP    Send7Bytes
                     823     ;
                     824     ;--------------------------------------------------------------------------
                     825     ; 5 Read CPU Core SFR registers:
                     826     ;  LOW (?ISD?READSFR05), HIGH (?ISD?READSFR05), dummy, dummy
                     827     ;  
013D                 828     ?ISD?READSFR05:
013D E5A5            829                     MOV     A,0xA5
013F C0A4            830                     PUSH    0xA4    
0141 C0A3            831                     PUSH    0xA3
0143 C0A2            832                     PUSH    0xA2
0145 C0A1            833                     PUSH    0xA1
0147 C0A0            834                     PUSH    0xA0
0149 C09F            835                     PUSH    0x9F
014B 0100     F      836                     AJMP    Send7Bytes
                     837     ;
                     838     ;--------------------------------------------------------------------------
                     839     ; 6 Read CPU Core SFR registers:
                     840     ;  LOW (?ISD?READSFR06), HIGH (?ISD?READSFR06), dummy, dummy
                     841     ;  
014D                 842     ?ISD?READSFR06:
014D E5AC            843                     MOV     A,0xAC
014F C0AB            844                     PUSH    0xAB    
0151 C0AA            845                     PUSH    0xAA
0153 C0A9            846                     PUSH    0xA9
0155 C0A8            847                     PUSH    0xA8
0157 C0A7            848                     PUSH    0xA7
0159 C0A6            849                     PUSH    0xA6
015B 0100     F      850                     AJMP    Send7Bytes
                     851     ;
                     852     ;--------------------------------------------------------------------------
                     853     ; 7 Read CPU Core SFR registers:
                     854     ;  LOW (?ISD?READSFR07), HIGH (?ISD?READSFR07), dummy, dummy
                     855     ;  
015D                 856     ?ISD?READSFR07:
015D E5B3            857                     MOV     A,0xB3
015F C0B2            858                     PUSH    0xB2    
0161 C0B1            859                     PUSH    0xB1
0163 C0B0            860                     PUSH    0xB0
0165 C0AF            861                     PUSH    0xAF
0167 C0AE            862                     PUSH    0xAE
0169 C0AD            863                     PUSH    0xAD
016B 0100     F      864                     AJMP    Send7Bytes
                     865     ;
                     866     ;--------------------------------------------------------------------------
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    14

                     867     ; 8 Read CPU Core SFR registers:
                     868     ;  LOW (?ISD?READSFR08), HIGH (?ISD?READSFR08), dummy, dummy
                     869     ;  
016D                 870     ?ISD?READSFR08:
016D E5BA            871                     MOV     A,0xBA
016F C0B9            872                     PUSH    0xB9    
0171 C0B8            873                     PUSH    0xB8
0173 C0B7            874                     PUSH    0xB7
0175 C0B6            875                     PUSH    0xB6
0177 C0B5            876                     PUSH    0xB5
0179 C0B4            877                     PUSH    0xB4
017B 0100     F      878                     AJMP    Send7Bytes
                     879     ;
                     880     ;--------------------------------------------------------------------------
                     881     ; 9 Read CPU Core SFR registers:
                     882     ;  LOW (?ISD?READSFR09), HIGH (?ISD?READSFR09), dummy, dummy
                     883     ;  
017D                 884     ?ISD?READSFR09:
017D E5C1            885                     MOV     A,0xC1
017F C0C0            886                     PUSH    0xC0    
0181 C0BF            887                     PUSH    0xBF
0183 C0BE            888                     PUSH    0xBE
0185 C0BD            889                     PUSH    0xBD
0187 C0BC            890                     PUSH    0xBC
0189 C0BB            891                     PUSH    0xBB
018B 0100     F      892                     AJMP    Send7Bytes
                     893     ;
                     894     ;--------------------------------------------------------------------------
                     895     ;10 Read CPU Core SFR registers:
                     896     ;  LOW (?ISD?READSFRC8), HIGH (?ISD?READSFRC8), dummy, dummy
                     897     ;  
018D                 898     ?ISD?READSFR10:
018D E5C8            899                     MOV     A,0xC8
018F C0C7            900                     PUSH    0xC7    
0191 C0C6            901                     PUSH    0xC6
0193 C0C5            902                     PUSH    0xC5
0195 C0C4            903                     PUSH    0xC4
0197 C0C3            904                     PUSH    0xC3
0199 C0C2            905                     PUSH    0xC2
019B 0100     F      906                     AJMP    Send7Bytes
                     907     ;
                     908     ;--------------------------------------------------------------------------
                     909     ;11 Read CPU Core SFR registers:
                     910     ;  LOW (?ISD?READSFR11), HIGH (?ISD?READSFR11), dummy, dummy
                     911     ;  
019D                 912     ?ISD?READSFR11:
019D E5CF            913                     MOV     A,0xCF
019F C0CE            914                     PUSH    0xCE    
01A1 C0CD            915                     PUSH    0xCD
01A3 C0CC            916                     PUSH    0xCC
01A5 C0CB            917                     PUSH    0xCB
01A7 C0CA            918                     PUSH    0xCA
01A9 C0C9            919                     PUSH    0xC9
01AB 0100     F      920                     AJMP    Send7Bytes
                     921     ;
                     922     ;--------------------------------------------------------------------------
                     923     ;12 Read CPU Core SFR registers:
                     924     ;  LOW (?ISD?READSFR12), HIGH (?ISD?READSFR12), dummy, dummy
                     925     ;  
01AD                 926     ?ISD?READSFR12:
01AD E5D7            927                     MOV     A,0xD7
01AF C0D6            928                     PUSH    0xD6    
01B1 C0D5            929                     PUSH    0xD5
01B3 C0D4            930                     PUSH    0xD4
01B5 C0D3            931                     PUSH    0xD3
01B7 C0D2            932                     PUSH    0xD2
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    15

01B9 C0D1            933                     PUSH    0xD1
01BB 0100     F      934                     AJMP    Send7Bytes
                     935     ;
                     936     ;--------------------------------------------------------------------------
                     937     ;13 Read CPU Core SFR registers:
                     938     ;  LOW (?ISD?READSFR13), HIGH (?ISD?READSFR13), dummy, dummy
                     939     ;  
01BD                 940     ?ISD?READSFR13:
01BD E5DE            941                     MOV     A,0xDE
01BF C0DD            942                     PUSH    0xDD    
01C1 C0DC            943                     PUSH    0xDC
01C3 C0DB            944                     PUSH    0xDB
01C5 C0DA            945                     PUSH    0xDA
01C7 C0D9            946                     PUSH    0xD9
01C9 C0D8            947                     PUSH    0xD8
01CB 0100     F      948                     AJMP    Send7Bytes
                     949     ;
                     950     ;--------------------------------------------------------------------------
                     951     ;14 Read CPU Core SFR registers:
                     952     ;  LOW (?ISD?READSFR14), HIGH (?ISD?READSFR14), dummy, dummy
                     953     ;  
01CD                 954     ?ISD?READSFR14:
01CD E5E6            955                     MOV     A,0xE6
01CF C0E5            956                     PUSH    0xE5    
01D1 C0E4            957                     PUSH    0xE4
01D3 C0E3            958                     PUSH    0xE3
01D5 C0E2            959                     PUSH    0xE2
01D7 C0E1            960                     PUSH    0xE1
01D9 C0DF            961                     PUSH    0xDF
01DB 0100     F      962                     AJMP    Send7Bytes
                     963     ;
                     964     ;--------------------------------------------------------------------------
                     965     ;15 Read CPU Core SFR registers:
                     966     ;  LOW (?ISD?READSFR15), HIGH (?ISD?READSFR15), dummy, dummy
                     967     ;  
01DD                 968     ?ISD?READSFR15:
01DD E5ED            969                     MOV     A,0xED
01DF C0EC            970                     PUSH    0xEC    
01E1 C0EB            971                     PUSH    0xEB
01E3 C0EA            972                     PUSH    0xEA
01E5 C0E9            973                     PUSH    0xE9
01E7 C0E8            974                     PUSH    0xE8
01E9 C0E7            975                     PUSH    0xE7
01EB 0100     F      976                     AJMP    Send7Bytes
                     977     ;
                     978     ;--------------------------------------------------------------------------
                     979     ;16 Read CPU Core SFR registers:
                     980     ;  LOW (?ISD?READSFR16), HIGH (?ISD?READSFR16), dummy, dummy
                     981     ;  
01ED                 982     ?ISD?READSFR16:
01ED E5F5            983                     MOV     A,0xF5
01EF C0F4            984                     PUSH    0xF4    
01F1 C0F3            985                     PUSH    0xF3
01F3 C0F2            986                     PUSH    0xF2
01F5 C0F1            987                     PUSH    0xF1
01F7 C0EF            988                     PUSH    0xEF
01F9 C0EE            989                     PUSH    0xEE
01FB 0100     F      990                     AJMP    Send7Bytes
                     991     ;
                     992     ;--------------------------------------------------------------------------
                     993     ;17 Read CPU Core SFR registers:
                     994     ;  LOW (?ISD?READSFR17), HIGH (?ISD?READSFR17), dummy, dummy
                     995     ;  
01FD                 996     ?ISD?READSFR17:
01FD E5FC            997                     MOV     A,0xFC
01FF C0FB            998                     PUSH    0xFB    
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    16

0201 C0FA            999                     PUSH    0xFA
0203 C0F9           1000                     PUSH    0xF9
0205 C0F8           1001                     PUSH    0xF8
0207 C0F7           1002                     PUSH    0xF7
0209 C0F6           1003                     PUSH    0xF6
020B 0100     F     1004                     AJMP    Send7Bytes
                    1005     ;
                    1006     ;--------------------------------------------------------------------------
                    1007     ;18 Read CPU Core SFR registers:
                    1008     ;  LOW (?ISD?READSFR18), HIGH (?ISD?READSFR18), dummy, dummy
                    1009     ;  
020D                1010     ?ISD?READSFR18:
020D E5FF           1011                     MOV     A,0xFF
020F C0FE           1012                     PUSH    0xFE
0211 C0FD           1013                     PUSH    0xFD
0213 C0E0           1014                     PUSH    ACC        ; dummy      
0215 C0E0           1015                     PUSH    ACC        ; dummy
0217 C0E0           1016                     PUSH    ACC        ; dummy
0219 C0E0           1017                     PUSH    ACC        ; dummy
021B 0100     F     1018                     AJMP    Send7Bytes
                    1019     ;
                    1020     ;--------------------------------------------------------------------------;
                    1021     ; putchar:  transmit a character via the serial interface
                    1022     
                    1023     PUBLIC _putchar   ; C-Prototype:  char putchar (char c);
                    1024     PUBLIC ?ISD?PUTCHAR, ?ISD?PUTCHAR_END
                    1025     
021D                1026     ?ISD?PUTCHAR:
021D BFA700         1027     _putchar:       CJNE    R7,#0A7H,$+3
0220 5025           1028                     JNC     pc_end
0222 EF             1029                     MOV     A,R7
0223 640A           1030                     XRL     A,#0AH
                    1031                     SAVE_ES
                    1033                     CLR_ES
0229 7009           1035                     JNZ     pc_char
022B 740D           1036                     MOV     A,#0DH
                    1037                     CLR_TI
                    1039                     WR_SBUF
                    1041                     JNB_TI  $
0234 EF             1043     pc_char:        MOV     A,R7
                    1044                     CLR_TI
                    1046                     WR_SBUF
                    1048                     JNB_TI  $
023C 5007           1050                     JNC     pc_char1        ; ISD51 is not initialized
023E 78FF           1051                     MOV     R0,#?ISD?RAMTOP
0240 E6             1052                     MOV     A,@R0
                    1053     
0241 7002           1054                     JNZ     pc_char1
                             
                                             
                             
                    1058                     CLR_TI
0245                1060     pc_char1:
                    1061                     RESTO_ES
0247                1063     ?ISD?PUTCHAR_END:
0247 22             1064     pc_end:         RET     
                    1065     
                    1066     
                    1067     
                    1068     ;--------------------------------------------------------------------------
                    1069     ; _getkey:  waits for a character to be received from the serial port
                    1070     
                    1071     
                    1072     PUBLIC _getkey  ; C-Prototype:  char _getkey (void);
                    1073     
0248                1074     _getkey:        JNB_ES _getkey2
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    17

024B E500     F     1076                     MOV     A,_ISD_CHAR
024D 64A5           1077                     XRL     A,#0A5H
024F 60F7           1078                     JZ      _getkey                ; no character available
0251 74A5           1079                     MOV     A,#0A5H
0253 C500     F     1080                     XCH     A,_ISD_CHAR
0255 FF             1081                     MOV     R7,A
0256 22             1082                     RET
                    1083     
0257                1084     _getkey2:       JNB_RI  $
                    1086                     RD_SBUF
025C B4A505         1088                     CJNE    A,#0A5H,gk_clrRI
025F 120000   F     1089                     CALL    __isd_init
0262 80E4           1090                     SJMP    _getkey
                    1091     
0264 FF             1092     gk_clrRI:       MOV     R7,A
                    1093                     CLR_RI
0267 22             1095                     RET
                    1096                     
                    1097     
                    1098     PUBLIC _iskey   ; C-Prototype:  bit  _iskey (void);
0268                1099     _iskey:         JNB_ES  _iskey2
026B E500     F     1101                     MOV     A,_ISD_CHAR
026D B4A510         1102                     CJNE    A,#0A5H,ik_on
0270 C3             1103                     CLR     C        
0271 22             1104                     RET
                    1105                     
0272 C3             1106     _iskey2:        CLR     C
                    1107                     JNB_RI  ik_end
                    1109                     RD_SBUF
0278 B4A505         1111                     CJNE    A,#0A5H,ik_on
027B 120000   F     1112                     CALL    __isd_init
027E 80E8           1113                     SJMP    _iskey
0280 D3             1114     ik_on:          SETB    C
0281 22             1115     ik_end:         RET
                    1116     
                    1117     
                    1118     ?DT?ISD51       SEGMENT DATA
----                1119                     RSEG    ?DT?ISD51
                    1120     
                    1121     PUBLIC          _ISD_CHAR
0000                1122     _ISD_CHAR:      DS      1                ; current user input character
                    1123     
                    1124     
----                1125                     RSEG    ?PR?ISD51
                    1126     
                    1127     
                    1128     ;--------------------------------------------------------------------------
                    1129     ; __isd_init:  prepare idata RAM for ISD51
0282                1130     __isd_init:     
0282 78FF           1131                     MOV     R0,#?ISD?RAMTOP
0284 76FF           1132                     MOV     @R0,#0xFF
                    1133     
0286 7500A5   F     1134                     MOV     _ISD_CHAR,#0A5H        ; no character available
                    1135     
                    1136                     SET_ES      
028B 22             1138                     RET
028C 00             1139                     NOP
                    1140     
                    1141                     END
                             
                             
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    18

SYMBOL TABLE LISTING
------ ----- -------


N A M E              T Y P E  V A L U E   ATTRIBUTES

?BI?ISD51 . . . . .  B SEG    0001H       REL=UNIT
?DT?ISD51 . . . . .  D SEG    0001H       REL=UNIT
?ISD?CBLK_SIZE. . .  N NUMB   0000H   A   
?ISD?CMDLOOP. . . .  C ADDR   0080H   R   SEG=?PR?ISD51
?ISD?CMDLOOP2 . . .  C ADDR   007EH   R   SEG=?PR?ISD51
?ISD?CMP_E. . . . .  N NUMB   FFFFH   A   
?ISD?CMP_S. . . . .  N NUMB   0000H   A   
?ISD?CORE . . . . .  N ADDR   -----       EXT
?ISD?GETBYTE. . . .  C ADDR   008BH   R   SEG=?PR?ISD51
?ISD?HWBREAKS . . .  N NUMB   E802H   A   
?ISD?PUTCHAR. . . .  C ADDR   021DH   R   SEG=?PR?ISD51
?ISD?PUTCHAR_END. .  C ADDR   0247H   R   SEG=?PR?ISD51
?ISD?RAMTOP . . . .  N NUMB   00FFH   A   
?ISD?READSFR00. . .  C ADDR   00EDH   R   SEG=?PR?ISD51
?ISD?READSFR01. . .  C ADDR   00FDH   R   SEG=?PR?ISD51
?ISD?READSFR02. . .  C ADDR   010DH   R   SEG=?PR?ISD51
?ISD?READSFR03. . .  C ADDR   011DH   R   SEG=?PR?ISD51
?ISD?READSFR04. . .  C ADDR   012DH   R   SEG=?PR?ISD51
?ISD?READSFR05. . .  C ADDR   013DH   R   SEG=?PR?ISD51
?ISD?READSFR06. . .  C ADDR   014DH   R   SEG=?PR?ISD51
?ISD?READSFR07. . .  C ADDR   015DH   R   SEG=?PR?ISD51
?ISD?READSFR08. . .  C ADDR   016DH   R   SEG=?PR?ISD51
?ISD?READSFR09. . .  C ADDR   017DH   R   SEG=?PR?ISD51
?ISD?READSFR10. . .  C ADDR   018DH   R   SEG=?PR?ISD51
?ISD?READSFR11. . .  C ADDR   019DH   R   SEG=?PR?ISD51
?ISD?READSFR12. . .  C ADDR   01ADH   R   SEG=?PR?ISD51
?ISD?READSFR13. . .  C ADDR   01BDH   R   SEG=?PR?ISD51
?ISD?READSFR14. . .  C ADDR   01CDH   R   SEG=?PR?ISD51
?ISD?READSFR15. . .  C ADDR   01DDH   R   SEG=?PR?ISD51
?ISD?READSFR16. . .  C ADDR   01EDH   R   SEG=?PR?ISD51
?ISD?READSFR17. . .  C ADDR   01FDH   R   SEG=?PR?ISD51
?ISD?READSFR18. . .  C ADDR   020DH   R   SEG=?PR?ISD51
?ISD?RESTART. . . .  C ADDR   00BDH   R   SEG=?PR?ISD51
?ISD?SENDBYTE . . .  C ADDR   00B5H   R   SEG=?PR?ISD51
?ISD?SETHWBREAK . .  C ADDR   0026H   R   SEG=?PR?ISD51
?ISD?VERSION. . . .  N NUMB   00CDH   A   
?ISD?WRITESFR00 . .  C ADDR   00D9H   R   SEG=?PR?ISD51
?ISD?WRITESFR01 . .  C ADDR   00DFH   R   SEG=?PR?ISD51
?ISD?WRITESFR02 . .  C ADDR   00E5H   R   SEG=?PR?ISD51
?ISD?WRITESFR03 . .  C ADDR   00E9H   R   SEG=?PR?ISD51
?PR?ISD51 . . . . .  C SEG    028DH       REL=INBLOCK
ACC . . . . . . . .  D ADDR   00E0H   A   
AR0 . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . .  D ADDR   0001H   A   
AUXR. . . . . . . .  D ADDR   008EH   A   
B . . . . . . . . .  D ADDR   00F0H   A   
BPCTRL. . . . . . .  D ADDR   0093H   A   
BREAKH. . . . . . .  D ADDR   0095H   A   
BREAKL. . . . . . .  D ADDR   0094H   A   
BREAK_CODE. . . . .  N NUMB   2000H   A   
BREAK_XDATA . . . .  N NUMB   E800H   A   
CALLBREAK . . . . .  C ADDR   005CH   R   SEG=?PR?ISD51
CBLK. . . . . . . .  N NUMB   0010H   A   
CHECKBREAK. . . . .  C ADDR   009AH   R   SEG=?PR?ISD51
CHECKBREAK1 . . . .  C ADDR   00A6H   R   SEG=?PR?ISD51
CHECKBREAKS . . . .  C ADDR   0093H   R   SEG=?PR?ISD51
DPH . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . .  D ADDR   0082H   A   
EA. . . . . . . . .  B ADDR   00A8H.7 A   
EICON . . . . . . .  D ADDR   00C0H   A   
A51 MACRO ASSEMBLER  ISD51                                                                09/18/2018 01:31:51 PAGE    19

ES. . . . . . . . .  B ADDR   00A8H.4 A   
GK_CLRRI. . . . . .  C ADDR   0264H   R   SEG=?PR?ISD51
HWBREAKENTRY. . . .  C ADDR   0000H   R   SEG=?PR?ISD51
HWBREAKPOINT. . . .  C ADDR   0010H   R   SEG=?PR?ISD51
IE. . . . . . . . .  D ADDR   00A8H   A   
IK_END. . . . . . .  C ADDR   0281H   R   SEG=?PR?ISD51
IK_ON . . . . . . .  C ADDR   0280H   R   SEG=?PR?ISD51
ISD51_CONFIGURATION  N NUMB   -----       
MEMCTRL . . . . . .  D ADDR   0096H   A   
NOSERBREAK. . . . .  C ADDR   005AH   R   SEG=?PR?ISD51
P0. . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . .  D ADDR   00B0H   A   
PC_CHAR . . . . . .  C ADDR   0234H   R   SEG=?PR?ISD51
PC_CHAR1. . . . . .  C ADDR   0245H   R   SEG=?PR?ISD51
PC_END. . . . . . .  C ADDR   0247H   R   SEG=?PR?ISD51
PFI . . . . . . . .  B ADDR   00C0H.5 A   
PH_FMADRL . . . . .  D ADDR   00E6H   A   
PH_FMCON. . . . . .  D ADDR   00E4H   A   
PIREG . . . . . . .  D ADDR   00B8H   A   
PSW . . . . . . . .  D ADDR   00D0H   A   
RESTARTSS . . . . .  C ADDR   00D7H   R   SEG=?PR?ISD51
RESTARTUSER . . . .  C ADDR   00ABH   R   SEG=?PR?ISD51
RETURNI . . . . . .  C ADDR   00ADH   R   SEG=?PR?ISD51
RI. . . . . . . . .  B ADDR   0098H.0 A   
SAVEEAI . . . . . .  B ADDR   0000H.0 R   SEG=?BI?ISD51
SBUF. . . . . . . .  D ADDR   0099H   A   
SCON. . . . . . . .  D ADDR   0098H   A   
SELECTHWBP1 . . . .  C ADDR   0031H   R   SEG=?PR?ISD51
SEND7BYTES. . . . .  C ADDR   006CH   R   SEG=?PR?ISD51
SENDSTACKFRAME. . .  C ADDR   0077H   R   SEG=?PR?ISD51
SERIALINTERRUPT . .  C ADDR   003FH   R   SEG=?PR?ISD51
SINTRVEC. . . . . .  N NUMB   2023H   A   
SOFTBREAK . . . . .  C ADDR   006AH   R   SEG=?PR?ISD51
SP. . . . . . . . .  D ADDR   0081H   A   
TI. . . . . . . . .  B ADDR   0098H.1 A   
UARTFLAG. . . . . .  D ADDR   0000H   A   
_GETKEY . . . . . .  C ADDR   0248H   R   SEG=?PR?ISD51
_GETKEY2. . . . . .  C ADDR   0257H   R   SEG=?PR?ISD51
_ISD_CHAR . . . . .  D ADDR   0000H   R   SEG=?DT?ISD51
_ISKEY. . . . . . .  C ADDR   0268H   R   SEG=?PR?ISD51
_ISKEY2 . . . . . .  C ADDR   0272H   R   SEG=?PR?ISD51
_PUTCHAR. . . . . .  C ADDR   021DH   R   SEG=?PR?ISD51
__ISD_INIT. . . . .  C ADDR   0282H   R   SEG=?PR?ISD51


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
