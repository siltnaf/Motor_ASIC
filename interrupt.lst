C51 COMPILER V9.54   INTERRUPT                                                             09/18/2018 01:31:51 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE INTERRUPT
OBJECT MODULE PLACED IN .\OUTPUT\interrupt.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SRC\interrupt.c WARNINGLEVEL(0) OPTIMIZE(8,SPEED) BROWSE INTVECTOR(0X200
                    -0) INCDIR(.\INC) DEBUG OBJECTEXTEND CODE PRINT(.\interrupt.lst) TABS(2) OBJECT(.\OUTPUT\interrupt.obj)

line level    source

   1          #include "register.h"
   2          #include <intrins.h>
   3          #include "app.h"
   4          #include "initial.h"
   5          
   6          void PWM1_2_3Interrupt(void)  interrupt 9
   7          {
   8   1      
   9   1      }
  10          
  11          void PWM4Interrupt(void)  interrupt 10
  12          {
  13   1      
  14   1      }
  15          
  16          void TIMER0Interrupt(void)  interrupt 1
  17          {
  18   1         
  19   1      }
  20          
  21          void TIMER1Interrupt(void)  interrupt 20
  22          {
  23   1          //p0_1 = ~p0_1; P00= ~P00;
  24   1         P26 = ~P26;
  25   1         
  26   1      }
  27          
  28          void TIMER3Interrupt(void)  interrupt 25
  29          {
  30   1          P00= ~P00;
  31   1      }
  32          
  33          void TIMER4Interrupt(void)  interrupt 17
  34          {
  35   1      
  36   1      }
  37          
  38          //EXI interrupt routine: including comp1(overcurrent protect), timer3(overflow & external flag)
  39          //don't need clear the interrupt ex1 flag
  40          void EX1Interrupt(void) interrupt 2
  41          {
  42   1          //overcurrent protect
  43   1          if(COMP_INT & 0x01 == 0x01)
  44   1          {
  45   2              COMP_INT &= 0xfe;        //clear the interrupt flag
  46   2              ENABLE_TIME0();
  47   2          }
  48   1      
  49   1          //timer3 external flag
  50   1          if(T3CON & 0x40 == 0x40)
  51   1          {
  52   2              T3CON &= 0xbf;  
  53   2          }
  54   1      
C51 COMPILER V9.54   INTERRUPT                                                             09/18/2018 01:31:51 PAGE 2   

  55   1          //timer3 overflow flag
  56   1          if(T3CON & 0x80 == 0x80)
  57   1          {
  58   2              T3CON &= 0x7f;
  59   2          }
  60   1      }
  61          
  62          void UART1Interrupt(void) //interrupt 4
  63          {
  64   1          if(RI0 == 1)
  65   1          {
  66   2              RI0 = 0;
  67   2          }
  68   1      
  69   1          if(TI0 == 1)
  70   1          {
  71   2             TI0 = 0;
  72   2          }
  73   1      }
  74          
  75          void UART2Interrupt(void) interrupt 16
  76          {
  77   1          //receive
  78   1          if((S1CON & 0x01) == 0x01)
  79   1          {
  80   2              S1CON &= 0xfe;
  81   2      //        ucUARTReceiver = S1BUF;
  82   2      //        ucUARTReceiver++;
  83   2      //        ucUARTReceiver++;
  84   2      //        ucReceiveFlag = 1;
  85   2          }
  86   1      
  87   1          //transmit
  88   1          if((S1CON & 0x02) == 0x02)
  89   1          {
  90   2              S1CON &= 0xfd;
  91   2          }
  92   1      }
  93          
  94          void ADCInterrupt(void) interrupt 8
  95          {
  96   1          IADC = 0;             //clr the interrupt flag
  97   1      }
C51 COMPILER V9.54   INTERRUPT                                                             09/18/2018 01:31:51 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION PWM1_2_3Interrupt (BEGIN)
                                           ; SOURCE LINE # 6
                                           ; SOURCE LINE # 9
0000 32                RETI    
             ; FUNCTION PWM1_2_3Interrupt (END)

             ; FUNCTION PWM4Interrupt (BEGIN)
                                           ; SOURCE LINE # 11
                                           ; SOURCE LINE # 14
0000 32                RETI    
             ; FUNCTION PWM4Interrupt (END)

             ; FUNCTION TIMER0Interrupt (BEGIN)
                                           ; SOURCE LINE # 16
                                           ; SOURCE LINE # 19
0000 32                RETI    
             ; FUNCTION TIMER0Interrupt (END)

             ; FUNCTION TIMER1Interrupt (BEGIN)
                                           ; SOURCE LINE # 21
                                           ; SOURCE LINE # 24
0000 B2A6              CPL     P26
                                           ; SOURCE LINE # 26
0002 32                RETI    
             ; FUNCTION TIMER1Interrupt (END)

             ; FUNCTION TIMER3Interrupt (BEGIN)
                                           ; SOURCE LINE # 28
                                           ; SOURCE LINE # 30
0000 B280              CPL     P00
                                           ; SOURCE LINE # 31
0002 32                RETI    
             ; FUNCTION TIMER3Interrupt (END)

             ; FUNCTION TIMER4Interrupt (BEGIN)
                                           ; SOURCE LINE # 33
                                           ; SOURCE LINE # 36
0000 32                RETI    
             ; FUNCTION TIMER4Interrupt (END)

             ; FUNCTION EX1Interrupt (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
                                           ; SOURCE LINE # 40
                                           ; SOURCE LINE # 43
0006 90E0C7            MOV     DPTR,#0E0C7H
0009 E0                MOVX    A,@DPTR
000A 30E006            JNB     ACC.0,?C0007
                                           ; SOURCE LINE # 44
                                           ; SOURCE LINE # 45
000D E0                MOVX    A,@DPTR
000E 54FE              ANL     A,#0FEH
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 46
0011 D28C              SETB    TR0
                                           ; SOURCE LINE # 47
0013         ?C0007:
                                           ; SOURCE LINE # 50
C51 COMPILER V9.54   INTERRUPT                                                             09/18/2018 01:31:51 PAGE 4   

0013 90E0C8            MOV     DPTR,#0E0C8H
0016 E0                MOVX    A,@DPTR
0017 30E004            JNB     ACC.0,?C0008
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 52
001A E0                MOVX    A,@DPTR
001B 54BF              ANL     A,#0BFH
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 53
001E         ?C0008:
                                           ; SOURCE LINE # 56
001E 90E0C8            MOV     DPTR,#0E0C8H
0021 E0                MOVX    A,@DPTR
0022 30E004            JNB     ACC.0,?C0010
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
0025 E0                MOVX    A,@DPTR
0026 547F              ANL     A,#07FH
0028 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 60
0029         ?C0010:
0029 D082              POP     DPL
002B D083              POP     DPH
002D D0E0              POP     ACC
002F 32                RETI    
             ; FUNCTION EX1Interrupt (END)

             ; FUNCTION UART1Interrupt (BEGIN)
                                           ; SOURCE LINE # 62
                                           ; SOURCE LINE # 63
                                           ; SOURCE LINE # 64
0000 309802            JNB     RI0,?C0011
                                           ; SOURCE LINE # 65
                                           ; SOURCE LINE # 66
0003 C298              CLR     RI0
                                           ; SOURCE LINE # 67
0005         ?C0011:
                                           ; SOURCE LINE # 69
0005 309902            JNB     TI0,?C0013
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 71
0008 C299              CLR     TI0
                                           ; SOURCE LINE # 72
                                           ; SOURCE LINE # 73
000A         ?C0013:
000A 22                RET     
             ; FUNCTION UART1Interrupt (END)

             ; FUNCTION UART2Interrupt (BEGIN)
0000 C0E0              PUSH    ACC
                                           ; SOURCE LINE # 75
                                           ; SOURCE LINE # 78
0002 E59B              MOV     A,S1CON
0004 30E003            JNB     ACC.0,?C0014
                                           ; SOURCE LINE # 79
                                           ; SOURCE LINE # 80
0007 539BFE            ANL     S1CON,#0FEH
                                           ; SOURCE LINE # 85
000A         ?C0014:
                                           ; SOURCE LINE # 88
000A E59B              MOV     A,S1CON
C51 COMPILER V9.54   INTERRUPT                                                             09/18/2018 01:31:51 PAGE 5   

000C 30E103            JNB     ACC.1,?C0016
                                           ; SOURCE LINE # 89
                                           ; SOURCE LINE # 90
000F 539BFD            ANL     S1CON,#0FDH
                                           ; SOURCE LINE # 91
                                           ; SOURCE LINE # 92
0012         ?C0016:
0012 D0E0              POP     ACC
0014 32                RETI    
             ; FUNCTION UART2Interrupt (END)

             ; FUNCTION ADCInterrupt (BEGIN)
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 96
0000 C2C0              CLR     IADC
                                           ; SOURCE LINE # 97
0002 32                RETI    
             ; FUNCTION ADCInterrupt (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     93    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
