A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\OUTPUT\lib.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE SRC\lib.A51 INCDIR(.\INC) SET(SMALL) DEBUG PRINT(.\lib.lst) OBJECT(.\OU
                      TPUT\lib.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\lib.SRC generated from: lib.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE lib.c OPTIMIZE(9,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT
                             (.\Listings\lib.lst) TABS(2) SRC(.\Objects\lib.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    LIB
                       8     
  00AC                 9     BSHI_0  DATA    0ACH
  00AD                10     BSHI_1  DATA    0ADH
  00AE                11     BSHI_2  DATA    0AEH
  00AF                12     BSHI_3  DATA    0AFH
  00BC                13     BSHO_0  DATA    0BCH
  00BD                14     BSHO_1  DATA    0BDH
  00BE                15     BSHO_2  DATA    0BEH
  00BF                16     BSHO_3  DATA    0BFH
  00E9                17     MD0     DATA    0E9H
  00EA                18     MD1     DATA    0EAH
  00AB                19     BSHCTL  DATA    0ABH
  00EB                20     MD2     DATA    0EBH
  00EC                21     MD3     DATA    0ECH
  00ED                22     MD4     DATA    0EDH
  00EE                23     MD5     DATA    0EEH
  0083                24     DPH     DATA    083H
  0082                25     DPL     DATA    082H
  00EF                26     ARCON   DATA    0EFH
                      27     ?PR?_BarrelShift?LIB SEGMENT CODE 
                      28     ?DT?_BarrelShift?LIB SEGMENT DATA OVERLAYABLE 
                      29     ?PR?_Div32?LIB       SEGMENT CODE 
                      30     ?DT?_Div32?LIB       SEGMENT DATA OVERLAYABLE 
                      31     ?PR?_Div16?LIB       SEGMENT CODE 
                      32     ?DT?_Div16?LIB       SEGMENT DATA OVERLAYABLE 
                      33     ?PR?_Shift32?LIB     SEGMENT CODE 
                      34     ?DT?_Shift32?LIB     SEGMENT DATA OVERLAYABLE 
                      35     ?PR?_Normalize?LIB   SEGMENT CODE 
                      36     ?DT?_Normalize?LIB   SEGMENT DATA OVERLAYABLE 
                      37     ?PR?_Mul?LIB         SEGMENT CODE 
                      38     ?DT?_Mul?LIB         SEGMENT DATA OVERLAYABLE 
                      39     ?PR?LIB              SEGMENT CODE 
                      40             PUBLIC  _div_remainder
                      41             PUBLIC  _md_error
                      42             PUBLIC  _div_denominator
                      43             PUBLIC  _Mul
                      44             PUBLIC  _Normalize
                      45             PUBLIC  ?_Shift32?BYTE
                      46             PUBLIC  _Shift32
                      47             PUBLIC  _Div16
                      48             PUBLIC  ?_Div32?BYTE
                      49             PUBLIC  _Div32
                      50             PUBLIC  ?_BarrelShift?BYTE
                      51             PUBLIC  _BarrelShift
                      52     
----                  53             XSEG  AT  0DFFBH
DFFB                  54     _div_denominator:   DS   2
                      55     
----                  56             XSEG  AT  0DFFFH
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     2

DFFF                  57           _md_error:   DS   1
                      58     
----                  59             XSEG  AT  0DFFDH
DFFD                  60      _div_remainder:   DS   2
                      61     
----                  62             RSEG  ?DT?_Div32?LIB
0000                  63     ?_Div32?BYTE:
0000                  64       numerator?142:   DS   4
0004                  65             ORG  4
0004                  66     denominator?143:   DS   2
                      67     
----                  68             RSEG  ?DT?_Div16?LIB
0000                  69     ?_Div16?BYTE:
0000                  70       numerator?244:   DS   2
0002                  71             ORG  2
0002                  72     denominator?245:   DS   2
                      73     
----                  74             RSEG  ?DT?_Mul?LIB
0000                  75     ?_Mul?BYTE:
0000                  76     multiplicand?549:   DS   2
0002                  77             ORG  2
0002                  78     multiplicator?550:   DS   2
                      79     
----                  80             RSEG  ?DT?_Normalize?LIB
0000                  81     ?_Normalize?BYTE:
0000                  82             dat?448:   DS   4
                      83     
----                  84             RSEG  ?DT?_BarrelShift?LIB
0000                  85     ?_BarrelShift?BYTE:
0000                  86              in?040:   DS   4
0004                  87             ORG  4
0004                  88             cmd?041:   DS   1
                      89     
----                  90             RSEG  ?DT?_Shift32?LIB
0000                  91     ?_Shift32?BYTE:
0000                  92             dat?346:   DS   4
0004                  93             ORG  4
0004                  94             cmd?347:   DS   1
                      95     ; /*
                      96     ;  * lib.c
                      97     ;  *    Copy Right (c) of Hong Kong Applied Science 
                      98     ;  *      and Technology Research Institute Company Limited
                      99     ;  *  Created on: 
                     100     ;  *      01 June 2016
                     101     ;  *  Author: 
                     102     ;  *      Lori Liu
                     103     ;  *  Last Modified: 
                     104     ;  *      12 August 2016 by Lori Liu
                     105     ;  *  Description: 
                     106     ;  *      lib for JE8MCU
                     107     ;  *  History:
                     108     ;  *      ver 0.1 created by Lori Liu on 12 August 2016     
                     109     ;  */
                     110     ;  
                     111     ;  /***************************************************
                     112     ;  * Includes
                     113     ;  */
                     114     ; #include <stdio.h>
                     115     ; #include <intrins.h>   
                     116     ; #include <absacc.h>
                     117     ; 
                     118     ; #include "lib.h"
                     119     ; 
                     120     ; //#define  _SIM_DEBUG_
                     121     ; /***************************************************
                     122     ;  * Variables
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     3

                     123     ;  */
                     124     ; //barrel shift 
                     125     ; sfr BSHCTL = 0xAB;
                     126     ; sfr BSHI_0 = 0xAC;
                     127     ; sfr BSHI_1 = 0xAD;
                     128     ; sfr BSHI_2 = 0xAE;
                     129     ; sfr BSHI_3 = 0xAF;
                     130     ; sfr BSHO_0 = 0xBC;
                     131     ; sfr BSHO_1 = 0xBD;
                     132     ; sfr BSHO_2 = 0xBE;
                     133     ; sfr BSHO_3 = 0xBF;
                     134     ; 
                     135     ; //multiplication division unit
                     136     ; sfr MD0 = 0xE9;
                     137     ; sfr MD1 = 0xEA;
                     138     ; sfr MD2 = 0xEB;
                     139     ; sfr MD3 = 0xEC;
                     140     ; sfr MD4 = 0xED;
                     141     ; sfr MD5 = 0xEE;
                     142     ; sfr ARCON = 0xEF;
                     143     ; 
                     144     ; //dptr
                     145     ; sfr DPL = 0x82;
                     146     ; sfr DPH = 0x83;
                     147     ; 
                     148     ; volatile U8 xdata _md_error _at_ (0xDFFF);
                     149     ; volatile U16 xdata _div_remainder _at_ (0xDFFD);
                     150     ; volatile U16 xdata _div_denominator _at_ (0xDFFB);
                     151     ; 
                     152     ; //barrel shift
                     153     ; /***************************************************
                     154     ;  * Implements
                     155     ;  */
                     156     ; /*
                     157     ;  * @fn                BarrelShift
                     158     ;  *
                     159     ;  * @brief     BarrelShift
                     160     ;  * 
                     161     ;  * @param     none
                     162     ;  *
                     163     ;  * @return    none
                     164     ;  */
                     165     
----                 166             RSEG  ?PR?LIB
0000                 167     Com0007:
0000                 168     L?0008:
                     169             USING   0
0000                 170     L?0009:
0000 E5EF            171             MOV     A,ARCON
0002 54C0            172             ANL     A,#0C0H
0004 90DFFF          173             MOV     DPTR,#_md_error
0007 F0              174             MOVX    @DPTR,A
0008 22              175             RET     
                     176     ; END OF Com0007
                     177     
                     178     ; S32 BarrelShift(S32 in, S8 cmd)
                     179     
----                 180             RSEG  ?PR?_BarrelShift?LIB
0000                 181     _BarrelShift:
                     182             USING   0
                     183                             ; SOURCE LINE # 71
                     184     ;       MOV     in?040+03H,R7
                     185     ;       MOV     in?040+02H,R6
                     186     ;       MOV     in?040+01H,R5
                     187     ;       MOV     in?040,R4
                     188     ; {
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     4

                     189                             ; SOURCE LINE # 72
                     190     ;   BSHCTL = cmd;
                     191                             ; SOURCE LINE # 73
0000 8500AB   F      192             MOV     BSHCTL,cmd?041
                     193     ; #pragma asm
                     194     ;   mov BSHI_3, r4
0003 8CAF            195               mov BSHI_3, r4
                     196     ;   mov BSHI_2, r5
0005 8DAE            197               mov BSHI_2, r5
                     198     ;   mov BSHI_1, r6
0007 8EAD            199               mov BSHI_1, r6
                     200     ;   mov BSHI_0, r7
0009 8FAC            201               mov BSHI_0, r7
                     202     ;       mov r4,BSHO_3
000B ACBF            203               mov r4,BSHO_3
                     204     ;       mov r5,BSHO_2
000D ADBE            205               mov r5,BSHO_2
                     206     ;       mov r6,BSHO_1
000F AEBD            207               mov r6,BSHO_1
                     208     ;       mov r7,BSHO_0
0011 AFBC            209               mov r7,BSHO_0
                     210     ; #pragma endasm
                     211     ; }
                     212                             ; SOURCE LINE # 84
0013 22              213             RET     
                     214     ; END OF _BarrelShift
                     215     
                     216     ; 
                     217     ; /*
                     218     ;  * @fn                Div32
                     219     ;  *
                     220     ;  * @brief     Div32
                     221     ;  * 
                     222     ;  * @param     none
                     223     ;  *
                     224     ;  * @return    none
                     225     ;  */
                     226     ; S32 Div32(S32 numerator , S16 denominator)
                     227     
----                 228             RSEG  ?PR?_Div32?LIB
0000                 229     _Div32:
                     230             USING   0
                     231                             ; SOURCE LINE # 95
                     232     ;       MOV     numerator?142+03H,R7
                     233     ;       MOV     numerator?142+02H,R6
                     234     ;       MOV     numerator?142+01H,R5
                     235     ;       MOV     numerator?142,R4
                     236     ; {
                     237                             ; SOURCE LINE # 96
                     238     ;       _div_denominator = denominator;
                     239                             ; SOURCE LINE # 97
0000 90DFFB          240             MOV     DPTR,#_div_denominator
0003 E500     F      241             MOV     A,denominator?143
0005 F0              242             MOVX    @DPTR,A
0006 A3              243             INC     DPTR
0007 E500     F      244             MOV     A,denominator?143+01H
0009 F0              245             MOVX    @DPTR,A
                     246     ;       
                     247     ; #pragma asm
                     248     ;   mov MD0, r7
000A 8FE9            249               mov MD0, r7
                     250     ;   mov MD1, r6
000C 8EEA            251               mov MD1, r6
                     252     ;   mov MD2, r5
000E 8DEB            253               mov MD2, r5
                     254     ;   mov MD3, r4
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     5

0010 8CEC            255               mov MD3, r4
                     256     ; 
                     257               
                     258     ;       mov r0, #0xFC
0012 78FC            259               mov r0, #0xFC
                     260     ;       movx a, @r0
0014 E2              261               movx a, @r0
                     262     ;   mov MD4, a
0015 F5ED            263               mov MD4, a
                     264     ;   dec r0
0017 18              265               dec r0
                     266     ;       movx a, @r0
0018 E2              267               movx a, @r0
                     268     ;   mov MD5, a
0019 F5EE            269               mov MD5, a
                     270     ;       nop    ;wait 50
001B 00              271               nop    ;wait 50
                     272     ;   nop
001C 00              273               nop
                     274     ;   nop
001D 00              275               nop
                     276     ;   nop
001E 00              277               nop
                     278     ;   nop
001F 00              279               nop
                     280     ;       nop    
0020 00              281               nop    
                     282     ;   nop
0021 00              283               nop
                     284     ;   nop
0022 00              285               nop
                     286     ;   nop
0023 00              287               nop
                     288     ;   nop
0024 00              289               nop
                     290     ;       nop    ;wait 40
0025 00              291               nop    ;wait 40
                     292     ;   nop
0026 00              293               nop
                     294     ;   nop
0027 00              295               nop
                     296     ;   nop
0028 00              297               nop
                     298     ;   nop
0029 00              299               nop
                     300     ;       nop    
002A 00              301               nop    
                     302     ;   nop
002B 00              303               nop
                     304     ;   nop
002C 00              305               nop
                     306     ;   nop
002D 00              307               nop
                     308     ;   nop
002E 00              309               nop
                     310     ;       nop    ;wait 30
002F 00              311               nop    ;wait 30
                     312     ;   nop
0030 00              313               nop
                     314     ;   nop
0031 00              315               nop
                     316     ;   nop
0032 00              317               nop
                     318     ;   nop
0033 00              319               nop
                     320     ;       nop    
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     6

0034 00              321               nop    
                     322     ;   nop
0035 00              323               nop
                     324     ;   nop
0036 00              325               nop
                     326     ;   nop
0037 00              327               nop
                     328     ;   nop
0038 00              329               nop
                     330     ;       nop    ;wait 20
0039 00              331               nop    ;wait 20
                     332     ;   nop
003A 00              333               nop
                     334     ;   nop
003B 00              335               nop
                     336     ;   nop
003C 00              337               nop
                     338     ;   nop
003D 00              339               nop
                     340     ;       nop    
003E 00              341               nop    
                     342     ;   nop
003F 00              343               nop
                     344     ;   nop
0040 00              345               nop
                     346     ;   nop
0041 00              347               nop
                     348     ;   nop
0042 00              349               nop
                     350     ;       nop    ;wait 10
0043 00              351               nop    ;wait 10
                     352     ;   nop
0044 00              353               nop
                     354     ;   nop
0045 00              355               nop
                     356     ;   nop
0046 00              357               nop
                     358     ;   nop
0047 00              359               nop
                     360     ;       nop    
0048 00              361               nop    
                     362     ;   nop
0049 00              363               nop
                     364     ;   nop
004A 00              365               nop
                     366     ;   nop
004B 00              367               nop
                     368     ;   nop
004C 00              369               nop
                     370     ; #pragma endasm
                     371     ; 
                     372     ;   _md_error = (ARCON&(MD_MDEF|MD_MDOV));
                     373                             ; SOURCE LINE # 163
004D 120000   F      374             LCALL   L?0008
                     375     ; 
                     376     ;  #pragma asm
                     377     ;   mov r7, MD0
0050 AFE9            378               mov r7, MD0
                     379     ;   mov r6, MD1
0052 AEEA            380               mov r6, MD1
                     381     ;   mov r5, MD2
0054 ADEB            382               mov r5, MD2
                     383     ;   mov r4, MD3
0056 ACEC            384               mov r4, MD3
                     385     ; #pragma endasm
                     386     ; 
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     7

                     387     ; #pragma asm
                     388     ;       mov r1, #0xFE
0058 79FE            389               mov r1, #0xFE
                     390     ;   mov a, MD4
005A E5ED            391               mov a, MD4
                     392     ;       movx @r1, a
005C F3              393               movx @r1, a
                     394     ;   dec r1
005D 19              395               dec r1
                     396     ;   mov a, MD5
005E E5EE            397               mov a, MD5
                     398     ;       movx @r1, a
0060 F3              399               movx @r1, a
                     400     ; #pragma endasm
                     401     ; }
                     402                             ; SOURCE LINE # 180
0061 22              403             RET     
                     404     ; END OF _Div32
                     405     
                     406     ; 
                     407     ; /*
                     408     ;  * @fn                Div16
                     409     ;  *
                     410     ;  * @brief     Div16
                     411     ;  * 
                     412     ;  * @param     none
                     413     ;  *
                     414     ;  * @return    none
                     415     ;  */
                     416     ; S16 Div16(S16 numerator , S16 denominator)
                     417     
----                 418             RSEG  ?PR?_Div16?LIB
0000                 419     _Div16:
                     420             USING   0
                     421                             ; SOURCE LINE # 191
                     422     ;       MOV     numerator?244,R6
                     423     ;       MOV     numerator?244+01H,R7
                     424     ;       MOV     denominator?245,R4
                     425     ;       MOV     denominator?245+01H,R5
                     426     ; {
                     427                             ; SOURCE LINE # 192
                     428     ; #pragma asm
                     429     ;   mov MD0, r7
0000 8FE9            430               mov MD0, r7
                     431     ;   mov MD1, r6
0002 8EEA            432               mov MD1, r6
                     433     ;   mov MD4, r5
0004 8DED            434               mov MD4, r5
                     435     ;   mov MD5, r4
0006 8CEE            436               mov MD5, r4
                     437     ;       nop    ;wait 34
0008 00              438               nop    ;wait 34
                     439     ;   nop
0009 00              440               nop
                     441     ;   nop
000A 00              442               nop
                     443     ;   nop
000B 00              444               nop
                     445     ;   nop
000C 00              446               nop
                     447     ;       nop    
000D 00              448               nop    
                     449     ;   nop
000E 00              450               nop
                     451     ;   nop
000F 00              452               nop
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     8

                     453     ;   nop
0010 00              454               nop
                     455     ;   nop
0011 00              456               nop
                     457     ;       nop    ;wait 24
0012 00              458               nop    ;wait 24
                     459     ;   nop
0013 00              460               nop
                     461     ;   nop
0014 00              462               nop
                     463     ;   nop
0015 00              464               nop
                     465     ;   nop
0016 00              466               nop
                     467     ;       nop    
0017 00              468               nop    
                     469     ;   nop
0018 00              470               nop
                     471     ;   nop
0019 00              472               nop
                     473     ;   nop
001A 00              474               nop
                     475     ;   nop
001B 00              476               nop
                     477     ;       nop    ;wait 14
001C 00              478               nop    ;wait 14
                     479     ;   nop
001D 00              480               nop
                     481     ;   nop
001E 00              482               nop
                     483     ;   nop
001F 00              484               nop
                     485     ;   nop
0020 00              486               nop
                     487     ;       nop    
0021 00              488               nop    
                     489     ;   nop
0022 00              490               nop
                     491     ;   nop
0023 00              492               nop
                     493     ;   nop
0024 00              494               nop
                     495     ;   nop
0025 00              496               nop
                     497     ;       nop    ;wait 4
0026 00              498               nop    ;wait 4
                     499     ;   nop
0027 00              500               nop
                     501     ;   nop
0028 00              502               nop
                     503     ;   nop
0029 00              504               nop
                     505     ;  #pragma endasm
                     506     ; 
                     507     ;   _md_error = (ARCON&(MD_MDEF|MD_MDOV));
                     508                             ; SOURCE LINE # 234
002A 120000   F      509             LCALL   L?0008
                     510     ; 
                     511     ; #pragma asm
                     512     ;   mov r7, MD0
002D AFE9            513               mov r7, MD0
                     514     ;   mov r6, MD1
002F AEEA            515               mov r6, MD1
                     516     ; 
                     517               
                     518     ;       mov r1, #0xFE
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE     9

0031 79FE            519               mov r1, #0xFE
                     520     ;       mov a, MD4
0033 E5ED            521               mov a, MD4
                     522     ;   movx @r1, a
0035 F3              523               movx @r1, a
                     524     ;   dec r1
0036 19              525               dec r1
                     526     ;       mov a, MD5
0037 E5EE            527               mov a, MD5
                     528     ;       movx @r1, a
0039 F3              529               movx @r1, a
                     530     ; #pragma endasm
                     531     ; }
                     532                             ; SOURCE LINE # 247
003A 22              533             RET     
                     534     ; END OF _Div16
                     535     
                     536     ; 
                     537     ; /*
                     538     ;  * @fn                Div16
                     539     ;  *
                     540     ;  * @brief     Div16
                     541     ;  * 
                     542     ;  * @param     none
                     543     ;  *
                     544     ;  * @return    none
                     545     ;  */
                     546     ; S32 Shift32(S32 dat, U8 cmd)
                     547     
----                 548             RSEG  ?PR?_Shift32?LIB
0000                 549     _Shift32:
                     550             USING   0
                     551                             ; SOURCE LINE # 258
                     552     ;       MOV     dat?346+03H,R7
                     553     ;       MOV     dat?346+02H,R6
                     554     ;       MOV     dat?346+01H,R5
                     555     ;       MOV     dat?346,R4
                     556     ; {
                     557                             ; SOURCE LINE # 259
                     558     ; #pragma asm
                     559     ;   mov MD0, r7
0000 8FE9            560               mov MD0, r7
                     561     ;   mov MD1, r6
0002 8EEA            562               mov MD1, r6
                     563     ;   mov MD2, r5
0004 8DEB            564               mov MD2, r5
                     565     ;   mov MD3, r4
0006 8CEC            566               mov MD3, r4
                     567     ; #pragma endasm
                     568     ; 
                     569     ;       ARCON = cmd;
                     570                             ; SOURCE LINE # 267
0008 8500EF   F      571             MOV     ARCON,cmd?347
                     572     ; 
                     573     ; #pragma asm
                     574     ;       nop    ;wait 33
000B 00              575               nop    ;wait 33
                     576     ;   nop
000C 00              577               nop
                     578     ;   nop
000D 00              579               nop
                     580     ;   nop
000E 00              581               nop
                     582     ;   nop
000F 00              583               nop
                     584     ;       nop    
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    10

0010 00              585               nop    
                     586     ;   nop
0011 00              587               nop
                     588     ;   nop
0012 00              589               nop
                     590     ;   nop
0013 00              591               nop
                     592     ;   nop
0014 00              593               nop
                     594     ;       nop    ;wait 23
0015 00              595               nop    ;wait 23
                     596     ;   nop
0016 00              597               nop
                     598     ;   nop
0017 00              599               nop
                     600     ;   nop
0018 00              601               nop
                     602     ;   nop
0019 00              603               nop
                     604     ;       nop    
001A 00              605               nop    
                     606     ;   nop
001B 00              607               nop
                     608     ;   nop
001C 00              609               nop
                     610     ;   nop
001D 00              611               nop
                     612     ;   nop
001E 00              613               nop
                     614     ;       nop    ;wait 13
001F 00              615               nop    ;wait 13
                     616     ;   nop
0020 00              617               nop
                     618     ;   nop
0021 00              619               nop
                     620     ;   nop
0022 00              621               nop
                     622     ;   nop
0023 00              623               nop
                     624     ;       nop    
0024 00              625               nop    
                     626     ;   nop
0025 00              627               nop
                     628     ;   nop
0026 00              629               nop
                     630     ;   nop
0027 00              631               nop
                     632     ;   nop
0028 00              633               nop
                     634     ;       nop    ;wait 3
0029 00              635               nop    ;wait 3
                     636     ;   nop
002A 00              637               nop
                     638     ;   nop
002B 00              639               nop
                     640     ; #pragma endasm
                     641     ; 
                     642     ;   _md_error = (ARCON&(MD_MDEF|MD_MDOV));
                     643                             ; SOURCE LINE # 305
002C 120000   F      644             LCALL   L?0009
                     645     ; 
                     646     ; #pragma asm
                     647     ;       mov r7, MD0
002F AFE9            648               mov r7, MD0
                     649     ;       mov r6, MD1
0031 AEEA            650               mov r6, MD1
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    11

                     651     ;       mov r5, MD2
0033 ADEB            652               mov r5, MD2
                     653     ;       mov r4, MD3
0035 ACEC            654               mov r4, MD3
                     655     ; #pragma endasm
                     656     ; }
                     657                             ; SOURCE LINE # 313
0037 22              658             RET     
                     659     ; END OF _Shift32
                     660     
                     661     ; 
                     662     ; /*
                     663     ;  * @fn                Normalize
                     664     ;  *
                     665     ;  * @brief     Normalize
                     666     ;  * 
                     667     ;  * @param     none
                     668     ;  *
                     669     ;  * @return    none
                     670     ;  */
                     671     ; S32 Normalize(S32 dat)
                     672     
----                 673             RSEG  ?PR?_Normalize?LIB
0000                 674     _Normalize:
                     675             USING   0
                     676                             ; SOURCE LINE # 324
                     677     ;       MOV     dat?448+03H,R7
                     678     ;       MOV     dat?448+02H,R6
                     679     ;       MOV     dat?448+01H,R5
                     680     ;       MOV     dat?448,R4
                     681     ; {
                     682                             ; SOURCE LINE # 325
                     683     ; #pragma asm
                     684     ;   mov MD0, r7
0000 8FE9            685               mov MD0, r7
                     686     ;   mov MD1, r6
0002 8EEA            687               mov MD1, r6
                     688     ;   mov MD2, r5
0004 8DEB            689               mov MD2, r5
                     690     ;   mov MD3, r4
0006 8CEC            691               mov MD3, r4
                     692     ; 
                     693               
                     694     ;       ANL  ARCON , #0xE0
0008 53EFE0          695               ANL  ARCON , #0xE0
                     696     ; 
                     697               
                     698     ;       nop    ;wait 34
000B 00              699               nop    ;wait 34
                     700     ;   nop
000C 00              701               nop
                     702     ;   nop
000D 00              703               nop
                     704     ;   nop
000E 00              705               nop
                     706     ;   nop
000F 00              707               nop
                     708     ;       nop    
0010 00              709               nop    
                     710     ;   nop
0011 00              711               nop
                     712     ;   nop
0012 00              713               nop
                     714     ;   nop
0013 00              715               nop
                     716     ;   nop
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    12

0014 00              717               nop
                     718     ;       nop    ;wait 24
0015 00              719               nop    ;wait 24
                     720     ;   nop
0016 00              721               nop
                     722     ;   nop
0017 00              723               nop
                     724     ;   nop
0018 00              725               nop
                     726     ;   nop
0019 00              727               nop
                     728     ;       nop    
001A 00              729               nop    
                     730     ;   nop
001B 00              731               nop
                     732     ;   nop
001C 00              733               nop
                     734     ;   nop
001D 00              735               nop
                     736     ;   nop
001E 00              737               nop
                     738     ;       nop    ;wait 14
001F 00              739               nop    ;wait 14
                     740     ;   nop
0020 00              741               nop
                     742     ;   nop
0021 00              743               nop
                     744     ;   nop
0022 00              745               nop
                     746     ;   nop
0023 00              747               nop
                     748     ;       nop    
0024 00              749               nop    
                     750     ;   nop
0025 00              751               nop
                     752     ;   nop
0026 00              753               nop
                     754     ;   nop
0027 00              755               nop
                     756     ;   nop
0028 00              757               nop
                     758     ;       nop    ;wait 4
0029 00              759               nop    ;wait 4
                     760     ;   nop
002A 00              761               nop
                     762     ;   nop
002B 00              763               nop
                     764     ;   nop
002C 00              765               nop
                     766     ; #pragma endasm
                     767     ;   _md_error = (ARCON&(MD_MDEF|MD_MDOV));
                     768                             ; SOURCE LINE # 369
002D 120000   F      769             LCALL   L?0009
                     770     ; #pragma asm
                     771     ;       mov r7, MD0
0030 AFE9            772               mov r7, MD0
                     773     ;       mov r6, MD1
0032 AEEA            774               mov r6, MD1
                     775     ;       mov r5, MD2
0034 ADEB            776               mov r5, MD2
                     777     ;       mov r4, MD3
0036 ACEC            778               mov r4, MD3
                     779     ; #pragma endasm
                     780     ; }
                     781                             ; SOURCE LINE # 376
0038 22              782             RET     
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    13

                     783     ; END OF _Normalize
                     784     
                     785     ; 
                     786     ; /*
                     787     ;  * @fn                Mul
                     788     ;  *
                     789     ;  * @brief     Mul
                     790     ;  * 
                     791     ;  * @param     none
                     792     ;  *
                     793     ;  * @return    none
                     794     ;  */
                     795     ; S32 Mul(S16 multiplicand, S16 multiplicator)
                     796     
----                 797             RSEG  ?PR?_Mul?LIB
0000                 798     _Mul:
                     799             USING   0
                     800                             ; SOURCE LINE # 387
                     801     ;       MOV     multiplicand?549,R6
                     802     ;       MOV     multiplicand?549+01H,R7
                     803     ;       MOV     multiplicator?550,R4
                     804     ;       MOV     multiplicator?550+01H,R5
                     805     ; {
                     806                             ; SOURCE LINE # 388
                     807     ; #pragma asm
                     808     ;   mov MD0, r7
0000 8FE9            809               mov MD0, r7
                     810     ;   mov MD4, r6
0002 8EED            811               mov MD4, r6
                     812     ;   mov MD1, r5
0004 8DEA            813               mov MD1, r5
                     814     ;   mov MD5, r4
0006 8CEE            815               mov MD5, r4
                     816     ;       nop    ;wait 18
0008 00              817               nop    ;wait 18
                     818     ;   nop
0009 00              819               nop
                     820     ;   nop
000A 00              821               nop
                     822     ;   nop
000B 00              823               nop
                     824     ;   nop
000C 00              825               nop
                     826     ;       nop    
000D 00              827               nop    
                     828     ;   nop
000E 00              829               nop
                     830     ;   nop
000F 00              831               nop
                     832     ;   nop
0010 00              833               nop
                     834     ;   nop
0011 00              835               nop
                     836     ;       nop    ;wait 8
0012 00              837               nop    ;wait 8
                     838     ;   nop
0013 00              839               nop
                     840     ;   nop
0014 00              841               nop
                     842     ;   nop
0015 00              843               nop
                     844     ;   nop
0016 00              845               nop
                     846     ;       nop    
0017 00              847               nop    
                     848     ;   nop
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    14

0018 00              849               nop
                     850     ;   nop
0019 00              851               nop
                     852     ; #pragma endasm
                     853     ;       _md_error = (ARCON&(MD_MDEF|MD_MDOV));
                     854                             ; SOURCE LINE # 413
001A 120000   F      855             LCALL   L?0009
                     856     ; #pragma asm   
                     857     ;       mov r7, MD0
001D AFE9            858               mov r7, MD0
                     859     ;       mov r6, MD1
001F AEEA            860               mov r6, MD1
                     861     ;       mov r5, MD2
0021 ADEB            862               mov r5, MD2
                     863     ;       mov r4, MD3
0023 ACEC            864               mov r4, MD3
                     865     ; #pragma endasm
                     866     ; }
                     867                             ; SOURCE LINE # 420
0025 22              868             RET     
                     869     ; END OF _Mul
                     870     
                     871             END
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    15

SYMBOL TABLE LISTING
------ ----- -------


N A M E               T Y P E  V A L U E   ATTRIBUTES

?DT?_BARRELSHIFT?LIB  D SEG    0005H       REL=UNIT
?DT?_DIV16?LIB . . .  D SEG    0004H       REL=UNIT
?DT?_DIV32?LIB . . .  D SEG    0006H       REL=UNIT
?DT?_MUL?LIB . . . .  D SEG    0004H       REL=UNIT
?DT?_NORMALIZE?LIB .  D SEG    0004H       REL=UNIT
?DT?_SHIFT32?LIB . .  D SEG    0005H       REL=UNIT
?PR?LIB. . . . . . .  C SEG    0009H       REL=UNIT
?PR?_BARRELSHIFT?LIB  C SEG    0014H       REL=UNIT
?PR?_DIV16?LIB . . .  C SEG    003BH       REL=UNIT
?PR?_DIV32?LIB . . .  C SEG    0062H       REL=UNIT
?PR?_MUL?LIB . . . .  C SEG    0026H       REL=UNIT
?PR?_NORMALIZE?LIB .  C SEG    0039H       REL=UNIT
?PR?_SHIFT32?LIB . .  C SEG    0038H       REL=UNIT
?_BARRELSHIFT?BYTE .  D ADDR   0000H   R   SEG=?DT?_BARRELSHIFT?LIB
?_DIV16?BYTE . . . .  D ADDR   0000H   R   SEG=?DT?_DIV16?LIB
?_DIV32?BYTE . . . .  D ADDR   0000H   R   SEG=?DT?_DIV32?LIB
?_MUL?BYTE . . . . .  D ADDR   0000H   R   SEG=?DT?_MUL?LIB
?_NORMALIZE?BYTE . .  D ADDR   0000H   R   SEG=?DT?_NORMALIZE?LIB
?_SHIFT32?BYTE . . .  D ADDR   0000H   R   SEG=?DT?_SHIFT32?LIB
ARCON. . . . . . . .  D ADDR   00EFH   A   
BSHCTL . . . . . . .  D ADDR   00ABH   A   
BSHI_0 . . . . . . .  D ADDR   00ACH   A   
BSHI_1 . . . . . . .  D ADDR   00ADH   A   
BSHI_2 . . . . . . .  D ADDR   00AEH   A   
BSHI_3 . . . . . . .  D ADDR   00AFH   A   
BSHO_0 . . . . . . .  D ADDR   00BCH   A   
BSHO_1 . . . . . . .  D ADDR   00BDH   A   
BSHO_2 . . . . . . .  D ADDR   00BEH   A   
BSHO_3 . . . . . . .  D ADDR   00BFH   A   
CMD?041. . . . . . .  D ADDR   0004H   R   SEG=?DT?_BARRELSHIFT?LIB
CMD?347. . . . . . .  D ADDR   0004H   R   SEG=?DT?_SHIFT32?LIB
COM0007. . . . . . .  C ADDR   0000H   R   SEG=?PR?LIB
DAT?346. . . . . . .  D ADDR   0000H   R   SEG=?DT?_SHIFT32?LIB
DAT?448. . . . . . .  D ADDR   0000H   R   SEG=?DT?_NORMALIZE?LIB
DENOMINATOR?143. . .  D ADDR   0004H   R   SEG=?DT?_DIV32?LIB
DENOMINATOR?245. . .  D ADDR   0002H   R   SEG=?DT?_DIV16?LIB
DPH. . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . .  D ADDR   0082H   A   
IN?040 . . . . . . .  D ADDR   0000H   R   SEG=?DT?_BARRELSHIFT?LIB
L?0008 . . . . . . .  C ADDR   0000H   R   SEG=?PR?LIB
L?0009 . . . . . . .  C ADDR   0000H   R   SEG=?PR?LIB
LIB. . . . . . . . .  N NUMB   -----       
MD0. . . . . . . . .  D ADDR   00E9H   A   
MD1. . . . . . . . .  D ADDR   00EAH   A   
MD2. . . . . . . . .  D ADDR   00EBH   A   
MD3. . . . . . . . .  D ADDR   00ECH   A   
MD4. . . . . . . . .  D ADDR   00EDH   A   
MD5. . . . . . . . .  D ADDR   00EEH   A   
MULTIPLICAND?549 . .  D ADDR   0000H   R   SEG=?DT?_MUL?LIB
MULTIPLICATOR?550. .  D ADDR   0002H   R   SEG=?DT?_MUL?LIB
NUMERATOR?142. . . .  D ADDR   0000H   R   SEG=?DT?_DIV32?LIB
NUMERATOR?244. . . .  D ADDR   0000H   R   SEG=?DT?_DIV16?LIB
_BARRELSHIFT . . . .  C ADDR   0000H   R   SEG=?PR?_BARRELSHIFT?LIB
_DIV16 . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DIV16?LIB
_DIV32 . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DIV32?LIB
_DIV_DENOMINATOR . .  X ADDR   DFFBH   A   
_DIV_REMAINDER . . .  X ADDR   DFFDH   A   
_MD_ERROR. . . . . .  X ADDR   DFFFH   A   
_MUL . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_MUL?LIB
_NORMALIZE . . . . .  C ADDR   0000H   R   SEG=?PR?_NORMALIZE?LIB
A51 MACRO ASSEMBLER  LIB                                                                  09/18/2018 01:31:51 PAGE    16

_SHIFT32 . . . . . .  C ADDR   0000H   R   SEG=?PR?_SHIFT32?LIB


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
