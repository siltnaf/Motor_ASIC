C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE IQMATHLIB
OBJECT MODULE PLACED IN .\OUTPUT\IQmathLib.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SRC\IQmathLib.c OPTIMIZE(0,SPEED) REGFILE(.\OUTPUT\motor.ORC) BROWSE INT
                    -VECTOR(0X2000) INCDIR(.\INC) DEBUG OBJECTEXTEND CODE PRINT(.\files\IQmathLib.lst) TABS(2) OBJECT(.\OUTPUT\IQmathLib.obj)

line level    source

   1          /*
   2           * lib.c
   3           *  Copy Right (c) of JE
   4           *  Created on: 
   5           *      18 Sep 2018
   6           *  Author: 
   7           *      Ken
   8           *  Last Modified: 
   9           *     
  10           *  Description: 
  11           *      lib for JE8MCU
  12           *  History:
  13           *      ver 0.1 created by ken on 12 August 2016 
  14           *
  15           *    Use math table for fuctions of 
  16           *        sin, cos, inverse, sqrt, artan
  17           *        Polar transform
  18           *
  19           *
  20           */
  21           
  22           /***************************************************
  23           * Includes
  24           */
  25          
  26          #include <intrins.h>   
  27          #include <absacc.h>
  28          #include "register.h"
  29          #include "IQmathLib.h"
  30          
  31          
  32          
  33           Long_Data dat;
  34           _iq data X,Y,Z;
  35          
  36           S8  data index;
  37          
  38           unsigned int code PolarTable[512]=
  39           {
  40              0,17,35,53,71,89,107,125,143,161,179,198,216,235,253,272,291,309,328,347,366,385,404,423,443,462,481,501
             -,520,540,560,579,
  41              599,619,639,659,679,699,719,739,760,780,800,821,841,862,883,903,924,945,966,987,1008,1029,1050,1071,1093
             -,1114,1135,1157,1178,1200,1221,1243,
  42              1265,1286,1308,1330,1352,1374,1396,1418,1440,1462,1484,1506,1529,1551,1573,1596,1618,1641,1663,1686,1708
             -,1731,1754,1776,1799,1822,1845,1868,1891,1914,1937,1960,
  43              1983,2006,2029,2052,2075,2098,2121,2145,2168,2191,2214,2238,2261,2284,2308,2331,2354,2378,2401,2425,2448
             -,2472,2495,2519,2542,2566,2589,2613,2636,2660,2683,2707,
  44              2730,2754,2777,2801,2824,2848,2871,2895,2918,2942,2965,2989,3012,3036,3059,3082,3106,3129,3153,3176,3199
             -,3223,3246,3269,3293,3316,3339,3362,3385,3408,3432,3455,
  45              3478,3501,3524,3547,3570,3593,3615,3638,3661,3684,3707,3729,3752,3775,3797,3820,3842,3865,3887,3909,3932
             -,3954,3976,3998,4020,4043,4065,4087,4109,4130,4152,4174,
  46              4196,4218,4239,4261,4282,4304,4325,4347,4368,4389,4410,4431,4452,4473,4494,4515,4536,4557,4578,4598,4619
             -,4640,4660,4680,4701,4721,4741,4761,4782,4802,4822,4841,
  47              4861,4881,4901,4920,4940,4960,4979,4998,5018,5037,5056,5075,5094,5113,5132,5151,5170,5188,5207,5226,5244
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 2   

             -,5263,5281,5299,5317,5336,5354,5372,5390,5408,5425,5443,
  48              5461,5478,5496,5513,5531,5548,5565,5583,5600,5617,5634,5651,5668,5684,5701,5718,5734,5751,5767,5784,5800
             -,5816,5832,5848,5864,5880,5896,5912,5928,5944,5959,5975,
  49              5990,6006,6021,6036,6052,6067,6082,6097,6112,6127,6142,6157,6171,6186,6200,6215,6229,6244,6258,6272,6287
             -,6301,6315,6329,6343,6357,6371,6384,6398,6412,6425,6439,
  50              6452,6466,6479,6492,6506,6519,6532,6545,6558,6571,6584,6597,6609,6622,6635,6647,6660,6672,6685,6697,6710
             -,6722,6734,6746,6758,6770,6782,6794,6806,6818,6830,6841,
  51              6853,6865,6876,6888,6899,6911,6922,6933,6945,6956,6967,6978,6989,7000,7011,7022,7033,7044,7054,7065,7076
             -,7086,7097,7107,7118,7128,7139,7149,7159,7170,7180,7190,
  52              7200,7210,7220,7230,7240,7250,7260,7269,7279,7289,7299,7308,7318,7327,7337,7346,7356,7365,7374,7384,7393
             -,7402,7411,7420,7429,7439,7448,7456,7465,7474,7483,7492,
  53              7501,7509,7518,7527,7535,7544,7553,7561,7570,7578,7586,7595,7603,7611,7620,7628,7636,7644,7652,7660,7668
             -,7676,7684,7692,7700,7708,7716,7724,7732,7739,7747,7755,
  54              7762,7770,7778,7785,7793,7800,7808,7815,7822,7830,7837,7844,7852,7859,7866,7873,7880,7888,7895,7902,7909
             -,7916,7923,7930,7937,7943,7950,7957,7964,7971,7977,7984,
  55              7991,7998,8004,8011,8017,8024,8030,8037,8043,8050,8056,8063,8069,8075,8082,8088,8094,8101,8107,8113,8119
             -,8125,8132,8138,8144,8150,8156,8162,8168,8174,8180,8186
  56           };
  57          
  58          unsigned int code MagnitudeTable[512]=
  59            
  60          {
  61              16384,16320,16257,16194,16132,16070,16009,15948,15888,15828,15769,15710,15652,15594,15537,15480,15424,15
             -368,15313,15258,15204,15150,15097,15044,14992,14940,14889,14838,14788,14738,14689,14640,
  62              14592,14544,14497,14450,14404,14358,14313,14268,14224,14180,14137,14094,14052,14010,13969,13928,13888,13
             -848,13809,13770,13732,13694,13657,13620,13584,13548,13513,13478,13444,13410,13377,13344,
  63              13312,13280,13249,13218,13188,13158,13129,13100,13072,13044,13017,12990,12964,12938,12913,12888,12864,12
             -840,12817,12794,12772,12750,12729,12708,12688,12668,12649,12630,12612,12594,12577,12560,
  64              12544,12528,12513,12498,12484,12470,12457,12444,12432,12420,12409,12398,12388,12378,12369,12360,12352,12
             -344,12337,12330,12324,12318,12313,12308,12304,12300,12297,12294,12292,12290,12289,12288,
  65              12288,12288,12289,12290,12292,12294,12297,12300,12304,12308,12313,12318,12324,12330,12337,12344,12352,12
             -360,12369,12378,12388,12398,12409,12420,12432,12444,12457,12470,12484,12498,12513,12528,
  66              12544,12560,12577,12594,12612,12630,12649,12668,12688,12708,12729,12750,12772,12794,12817,12840,12864,12
             -888,12913,12938,12964,12990,13017,13044,13072,13100,13129,13158,13188,13218,13249,13280,
  67              13312,13344,13377,13410,13444,13478,13513,13548,13584,13620,13657,13694,13732,13770,13809,13848,13888,13
             -928,13969,14010,14052,14094,14137,14180,14224,14268,14313,14358,14404,14450,14497,14544,
  68              14592,14640,14689,14738,14788,14838,14889,14940,14992,15044,15097,15150,15204,15258,15313,15368,15424,15
             -480,15537,15594,15652,15710,15769,15828,15888,15948,16009,16070,16132,16194,16257,16320,
  69              16384,16448,16513,16578,16644,16710,16777,16844,16912,16980,17049,17118,17188,17258,17329,17400,17472,17
             -544,17617,17690,17764,17838,17913,17988,18064,18140,18217,18294,18372,18450,18529,18608,
  70              18688,18768,18849,18930,19012,19094,19177,19260,19344,19428,19513,19598,19684,19770,19857,19944,20032,20
             -120,20209,20298,20388,20478,20569,20660,20752,20844,20937,21030,21124,21218,21313,21408,
  71              21504,21600,21697,21794,21892,21990,22089,22188,22288,22388,22489,22590,22692,22794,22897,23000,23104,23
             -208,23313,23418,23524,23630,23737,23844,23952,24060,24169,24278,24388,24498,24609,24720,
  72              24832,24944,25057,25170,25284,25398,25513,25628,25744,25860,25977,26094,26212,26330,26449,26568,26688,26
             -808,26929,27050,27172,27294,27417,27540,27664,27788,27913,28038,28164,28290,28417,28544,
  73              28672,28800,28929,29058,29188,29318,29449,29580,29712,29844,29977,30110,30244,30378,30513,30648,30784,30
             -920,31057,31194,31332,31470,31609,31748,31888,32028,32169,32310,32452,32594,32737,32880,
  74              33024,33168,33313,33458,33604,33750,33897,34044,34192,34340,34489,34638,34788,34938,35089,35240,35392,35
             -544,35697,35850,36004,36158,36313,36468,36624,36780,36937,37094,37252,37410,37569,37728,
  75              37888,38048,38209,38370,38532,38694,38857,39020,39184,39348,39513,39678,39844,40010,40177,40344,40512,40
             -680,40849,41018,41188,41358,41529,41700,41872,42044,42217,42390,42564,42738,42913,43088,
  76              43264,43440,43617,43794,43972,44150,44329,44508,44688,44868,45049,45230,45412,45594,45777,45960,46144,46
             -328,46513,46698,46884,47070,47257,47444,47632,47820,48009,48198,48388,48578,48769,48960,
  77          
  78            
  79          };
  80          
  81          
  82          
  83          
  84          //_iq Normalize(_iq A)              //normalize only work for positive value. it return error if the MD3_7
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 3   

             -=1 
  85          //{
  86          
  87          
  88          //  
  89          
  90          // dat.Ldata =A;
  91          // MD0 = dat.ss1.Byte0;
  92          // MD1 = dat.ss1.Byte1;
  93          // MD2 = dat.ss1.Byte2;
  94          // MD3 = dat.ss1.Byte3;
  95          //  
  96          
  97          //  
  98          // ARCON = 0x00 ; // Start Normalizing
  99          // while(MD3_7==0 ); //check MDU finish flag
 100          //  dat.ss1.Byte0=MD0;
 101          //  dat.ss1.Byte1=MD1;
 102          //  dat.ss1.Byte2=MD2;
 103          //  dat.ss1.Byte3=MD3;
 104          // 
 105          //   return dat.Ldata ;
 106          //}
 107          
 108          
 109          
 110          /*
 111           * @fn    mul32
 112           *
 113           * @brief mul32
 114           * 
 115          * @param  none
 116           * _IQmul(X,Y) ,  = X*Y
 117          
 118           *
 119           * @return  value in IQ
 120           */
 121          
 122          _iq _IQmul(_iq A , _iq B) 
 123          {
 124   1        
 125   1      
 126   1        X=_IQint(A);
 127   1        Y=_IQint(B);
 128   1        Z=BarrelShift((X*Y), (LA_shift+ GLOBAL_Q));
 129   1        X=X*_IQfrac(B);
 130   1        Y=Y*_IQfrac(A);
 131   1        Z=Z+X+Y+BarrelShift((_IQfrac(B)*_IQfrac(A)), (RA_shift+ GLOBAL_Q));
 132   1      
 133   1      
 134   1        
 135   1        
 136   1        
 137   1        return Z;
 138   1      
 139   1      
 140   1      }
 141          
 142          
 143          
 144          
 145          
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 4   

 146          /*
 147           * @fn    sin32
 148           *
 149           * @brief sin32
 150           * 
 151          * @param  none
 152           * _IQsin(X) ,  =sin(X), X is in degree
 153          
 154           *
 155           * @return  value in IQ
 156           */
 157          
 158          
 159          
 160          
 161          
 162          
 163          
 164          _iq _IQsin(_iq A)
 165          {
 166   1      
 167   1        X=_IQabs(A);
 168   1        
 169   1          
 170   1        //limtit the search anlge to <360)
 171   1        
 172   1        while (X>=_IQ(360.0))
 173   1            {
 174   2              X-=_IQ(360.0);
 175   2            }
 176   1        
 177   1        
 178   1        // convert angle to data in sin table, angle =angle/360 * 512  or  =angle *64/45
 179   1            
 180   1        X=_IQmul(X,_IQ(1.422222));
 181   1        X=_IQint(X);          //convert to integer
 182   1        Z=XWORD[X+sin_table];
 183   1        Z=BarrelShift(Z,(LL_shift+16));                       //sin table is in Q15 format, it need to convert to Q31 first
             - by shifting 16 bit to left
 184   1        Z=BarrelShift(Z, (RA_shift+ (30 - GLOBAL_Q)));      //convert Q31 to global Q format
 185   1      
 186   1        if (A<0) Z=-(Z);
 187   1      
 188   1      return Z ;
 189   1        
 190   1      }
 191          
 192          
 193          
 194          
 195          
 196          
 197          
 198          
 199          
 200          /*
 201           * @fn    sqrt32
 202           *
 203           * @brief sqrt32
 204           * 
 205           * @param none
 206           * _IQsqrt(X) ,  sqrt(X)
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 5   

 207          
 208           *
 209           * @return  sqrt value in IQ
 210           */
 211          
 212          
 213          
 214          
 215          
 216          
 217          _iq _IQsqrt(_iq A)
 218          
 219          {
 220   1      
 221   1        if (A<0) return 0;
 222   1      
 223   1        X=Normalize(A);   //convert to Q30 format
 224   1        index=(31-GLOBAL_Q-ARCON);
 225   1        
 226   1        if (index %2==0)                //check if the power is even or  odd value  
 227   1        {
 228   2        X &=0x7fffffff;
 229   2        X=BarrelShift(X, (RA_shift+23))+128;  
 230   2          
 231   2          Z=XWORD[X+sqrt_table];
 232   2        }
 233   1        else
 234   1        {
 235   2          index++;                             //if the power is odd value , divide t by 2
 236   2        
 237   2          X =BarrelShift(X,(RA_shift+24));             //square root in value is divided by 2 
 238   2          X &=0x0000007f;
 239   2          Z=XWORD[X+sqrt_table];
 240   2        }
 241   1        Z=BarrelShift(Z,(LL_shift+16));                       //sqrt table is in Q15 format, it need to convert to Q31 firs
             -t by shifting 16 bit to left
 242   1        Z=BarrelShift(Z, (RA_shift+ (30 - GLOBAL_Q)));      //convert Q31 to global Q format
 243   1        
 244   1      
 245   1        
 246   1        if (index>=0)
 247   1        Z=BarrelShift(Z, (LA_shift+(index/2)));
 248   1        else Z=BarrelShift(Z,(RA_shift+((-index)/2)));
 249   1        
 250   1      return  Z;
 251   1      }
 252          
 253          
 254          /*
 255           * @fn    atan32
 256           *
 257           * @brief atan32
 258           * 
 259           * @param none
 260           * _IQatan2(Y,X) ,  atan2(Y/X)
 261           * _IQatan(Y)    , =atan2(Y/1)
 262           *
 263          
 264          
 265           * @return  angle in degree
 266           */
 267          
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 6   

 268          _iq _IQatan2(_iq A, _iq B)
 269          {
 270   1        Y=_IQabs(A);
 271   1        X=_IQabs(B);
 272   1      
 273   1        
 274   1        if (X>Y)
 275   1          {
 276   2            
 277   2            
 278   2            
 279   2            Y=BarrelShift(Y,(LA_shift+5));  
 280   2            X=BarrelShift(X,(RA_shift+4));  
 281   2            X=Y/X;
 282   2          
 283   2          
 284   2            index=pos;
 285   2          
 286   2           
 287   2      
 288   2          }
 289   1          else
 290   1          {
 291   2            X=BarrelShift(X,(LA_shift+5)); ;
 292   2            Y=BarrelShift(Y,(RA_shift+4)); 
 293   2            X=X/Y;
 294   2      
 295   2            
 296   2            index=neg;
 297   2          }
 298   1            
 299   1            
 300   1            
 301   1          Z=XWORD[X+atan_table];
 302   1          Z=Z*45;                 //Z=(Z/4096)*45 degree
 303   1          Z=BarrelShift(Z,(LL_shift+12));                       //sin table is in Q15 format, it need to convert to Q31 firs
             -t by shifting 16 bit to left
 304   1          Z=BarrelShift(Z, (RA_shift+ (24 - GLOBAL_Q)));      //convert Q31 to global Q format
 305   1          
 306   1          
 307   1          if (index==neg) Z=_IQ(90.0)-Z;
 308   1          
 309   1        if ((A<0)&&(B>0))
 310   1          Z=_IQ(180.0)-Z;
 311   1          else if ((A<0)&&(B<0))
 312   1            Z=_IQ(180.0)+Z;
 313   1          else if ((A>0)&&(B<0))
 314   1            Z=_IQ(360.0)-Z;
 315   1        
 316   1        
 317   1      
 318   1      return Z; 
 319   1      }
 320          
 321          
 322          _iq _IQmag(_iq A, _iq B) 
 323          {
 324   1        X=_IQmul(A,A)+_IQmul(B,B);
 325   1        Z=_IQsqrt(X);
 326   1        return Z;
 327   1        
 328   1      }
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 7   

 329          
 330          
 331          
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 8   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION __IQmul (BEGIN)
                                           ; SOURCE LINE # 122
0000 8F00        R     MOV     A+03H,R7
0002 8E00        R     MOV     A+02H,R6
0004 8D00        R     MOV     A+01H,R5
0006 8C00        R     MOV     A,R4
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 126
0008 AF00        R     MOV     R7,A+03H
000A AE00        R     MOV     R6,A+02H
000C AD00        R     MOV     R5,A+01H
000E AC00        R     MOV     R4,A
0010 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
0013 120000      E     LCALL   _BarrelShift
0016 8F00        R     MOV     X+03H,R7
0018 8E00        R     MOV     X+02H,R6
001A 8D00        R     MOV     X+01H,R5
001C 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 127
001E AF00        R     MOV     R7,B+03H
0020 AE00        R     MOV     R6,B+02H
0022 AD00        R     MOV     R5,B+01H
0024 AC00        R     MOV     R4,B
0026 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
0029 120000      E     LCALL   _BarrelShift
002C 8F00        R     MOV     Y+03H,R7
002E 8E00        R     MOV     Y+02H,R6
0030 8D00        R     MOV     Y+01H,R5
0032 8C00        R     MOV     Y,R4
                                           ; SOURCE LINE # 128
0034 AF00        R     MOV     R7,Y+03H
0036 AE00        R     MOV     R6,Y+02H
0038 AD00        R     MOV     R5,Y+01H
003A AC00        R     MOV     R4,Y
003C AB00        R     MOV     R3,X+03H
003E AA00        R     MOV     R2,X+02H
0040 A900        R     MOV     R1,X+01H
0042 A800        R     MOV     R0,X
0044 120000      E     LCALL   ?C?LMUL
0047 7500AF      E     MOV     ?_BarrelShift?BYTE+04H,#0AFH
004A 120000      E     LCALL   _BarrelShift
004D 8F00        R     MOV     Z+03H,R7
004F 8E00        R     MOV     Z+02H,R6
0051 8D00        R     MOV     Z+01H,R5
0053 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 129
0055 E500        R     MOV     A,B+03H
0057 54FF              ANL     A,#0FFH
0059 FF                MOV     R7,A
005A E500        R     MOV     A,B+02H
005C 547F              ANL     A,#07FH
005E FE                MOV     R6,A
005F E500        R     MOV     A,B+01H
0061 5400              ANL     A,#00H
0063 FD                MOV     R5,A
0064 E500        R     MOV     A,B
0066 5400              ANL     A,#00H
0068 FC                MOV     R4,A
0069 AB00        R     MOV     R3,X+03H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 9   

006B AA00        R     MOV     R2,X+02H
006D A900        R     MOV     R1,X+01H
006F A800        R     MOV     R0,X
0071 120000      E     LCALL   ?C?LMUL
0074 8F00        R     MOV     X+03H,R7
0076 8E00        R     MOV     X+02H,R6
0078 8D00        R     MOV     X+01H,R5
007A 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 130
007C E500        R     MOV     A,A+03H
007E 54FF              ANL     A,#0FFH
0080 FF                MOV     R7,A
0081 E500        R     MOV     A,A+02H
0083 547F              ANL     A,#07FH
0085 FE                MOV     R6,A
0086 E500        R     MOV     A,A+01H
0088 5400              ANL     A,#00H
008A FD                MOV     R5,A
008B E500        R     MOV     A,A
008D 5400              ANL     A,#00H
008F FC                MOV     R4,A
0090 AB00        R     MOV     R3,Y+03H
0092 AA00        R     MOV     R2,Y+02H
0094 A900        R     MOV     R1,Y+01H
0096 A800        R     MOV     R0,Y
0098 120000      E     LCALL   ?C?LMUL
009B 8F00        R     MOV     Y+03H,R7
009D 8E00        R     MOV     Y+02H,R6
009F 8D00        R     MOV     Y+01H,R5
00A1 8C00        R     MOV     Y,R4
                                           ; SOURCE LINE # 131
00A3 E500        R     MOV     A,A+03H
00A5 54FF              ANL     A,#0FFH
00A7 FB                MOV     R3,A
00A8 E500        R     MOV     A,A+02H
00AA 547F              ANL     A,#07FH
00AC FA                MOV     R2,A
00AD E500        R     MOV     A,A+01H
00AF 5400              ANL     A,#00H
00B1 F9                MOV     R1,A
00B2 E500        R     MOV     A,A
00B4 5400              ANL     A,#00H
00B6 F8                MOV     R0,A
00B7 E500        R     MOV     A,B+03H
00B9 54FF              ANL     A,#0FFH
00BB FF                MOV     R7,A
00BC E500        R     MOV     A,B+02H
00BE 547F              ANL     A,#07FH
00C0 FE                MOV     R6,A
00C1 E500        R     MOV     A,B+01H
00C3 5400              ANL     A,#00H
00C5 FD                MOV     R5,A
00C6 E500        R     MOV     A,B
00C8 5400              ANL     A,#00H
00CA FC                MOV     R4,A
00CB 120000      E     LCALL   ?C?LMUL
00CE 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
00D1 120000      E     LCALL   _BarrelShift
00D4 A804              MOV     R0,AR4
00D6 A905              MOV     R1,AR5
00D8 AA06              MOV     R2,AR6
00DA AB07              MOV     R3,AR7
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 10  

00DC E500        R     MOV     A,Z+03H
00DE 2500        R     ADD     A,X+03H
00E0 FF                MOV     R7,A
00E1 E500        R     MOV     A,Z+02H
00E3 3500        R     ADDC    A,X+02H
00E5 FE                MOV     R6,A
00E6 E500        R     MOV     A,Z+01H
00E8 3500        R     ADDC    A,X+01H
00EA FD                MOV     R5,A
00EB E500        R     MOV     A,Z
00ED 3500        R     ADDC    A,X
00EF FC                MOV     R4,A
00F0 EF                MOV     A,R7
00F1 2500        R     ADD     A,Y+03H
00F3 FF                MOV     R7,A
00F4 EE                MOV     A,R6
00F5 3500        R     ADDC    A,Y+02H
00F7 FE                MOV     R6,A
00F8 ED                MOV     A,R5
00F9 3500        R     ADDC    A,Y+01H
00FB FD                MOV     R5,A
00FC EC                MOV     A,R4
00FD 3500        R     ADDC    A,Y
00FF FC                MOV     R4,A
0100 EB                MOV     A,R3
0101 2F                ADD     A,R7
0102 F500        R     MOV     Z+03H,A
0104 EA                MOV     A,R2
0105 3E                ADDC    A,R6
0106 F500        R     MOV     Z+02H,A
0108 E9                MOV     A,R1
0109 3D                ADDC    A,R5
010A F500        R     MOV     Z+01H,A
010C E8                MOV     A,R0
010D 3C                ADDC    A,R4
010E F500        R     MOV     Z,A
                                           ; SOURCE LINE # 137
0110 AF00        R     MOV     R7,Z+03H
0112 AE00        R     MOV     R6,Z+02H
0114 AD00        R     MOV     R5,Z+01H
0116 AC00        R     MOV     R4,Z
                                           ; SOURCE LINE # 140
0118         ?C0001:
0118 22                RET     
             ; FUNCTION __IQmul (END)

             ; FUNCTION __IQ15sin (BEGIN)
                                           ; SOURCE LINE # 164
0000 8F00        R     MOV     A+03H,R7
0002 8E00        R     MOV     A+02H,R6
0004 8D00        R     MOV     A+01H,R5
0006 8C00        R     MOV     A,R4
                                           ; SOURCE LINE # 165
                                           ; SOURCE LINE # 167
0008 AF00        R     MOV     R7,A+03H
000A AE00        R     MOV     R6,A+02H
000C AD00        R     MOV     R5,A+01H
000E AC00        R     MOV     R4,A
0010 120000      E     LCALL   __IQabs
0013 8F00        R     MOV     X+03H,R7
0015 8E00        R     MOV     X+02H,R6
0017 8D00        R     MOV     X+01H,R5
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 11  

0019 8C00        R     MOV     X,R4
001B         ?C0002:
                                           ; SOURCE LINE # 172
001B 7F00              MOV     R7,#00H
001D 7E00              MOV     R6,#00H
001F 7DB4              MOV     R5,#0B4H
0021 7C00              MOV     R4,#00H
0023 AB00        R     MOV     R3,X+03H
0025 AA00        R     MOV     R2,X+02H
0027 A900        R     MOV     R1,X+01H
0029 A800        R     MOV     R0,X
002B C3                CLR     C
002C 120000      E     LCALL   ?C?SLCMP
002F 401B              JC      ?C0003
                                           ; SOURCE LINE # 173
                                           ; SOURCE LINE # 174
0031 C3                CLR     C
0032 E500        R     MOV     A,X+03H
0034 9400              SUBB    A,#00H
0036 F500        R     MOV     X+03H,A
0038 E500        R     MOV     A,X+02H
003A 9400              SUBB    A,#00H
003C F500        R     MOV     X+02H,A
003E E500        R     MOV     A,X+01H
0040 94B4              SUBB    A,#0B4H
0042 F500        R     MOV     X+01H,A
0044 E500        R     MOV     A,X
0046 9400              SUBB    A,#00H
0048 F500        R     MOV     X,A
                                           ; SOURCE LINE # 175
004A 80CF              SJMP    ?C0002
004C         ?C0003:
                                           ; SOURCE LINE # 180
004C AF00        R     MOV     R7,X+03H
004E AE00        R     MOV     R6,X+02H
0050 AD00        R     MOV     R5,X+01H
0052 AC00        R     MOV     R4,X
0054 C004              PUSH    AR4
0056 C005              PUSH    AR5
0058 C006              PUSH    AR6
005A C007              PUSH    AR7
005C 75000B      R     MOV     ?__IQmul?BYTE+07H,#0BH
005F 7500B6      R     MOV     ?__IQmul?BYTE+06H,#0B6H
0062 750000      R     MOV     ?__IQmul?BYTE+05H,#00H
0065 750000      R     MOV     ?__IQmul?BYTE+04H,#00H
0068 D007              POP     AR7
006A D006              POP     AR6
006C D005              POP     AR5
006E D004              POP     AR4
0070 120000      R     LCALL   __IQmul
0073 8F00        R     MOV     X+03H,R7
0075 8E00        R     MOV     X+02H,R6
0077 8D00        R     MOV     X+01H,R5
0079 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 181
007B AF00        R     MOV     R7,X+03H
007D AE00        R     MOV     R6,X+02H
007F AD00        R     MOV     R5,X+01H
0081 AC00        R     MOV     R4,X
0083 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
0086 120000      E     LCALL   _BarrelShift
0089 8F00        R     MOV     X+03H,R7
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 12  

008B 8E00        R     MOV     X+02H,R6
008D 8D00        R     MOV     X+01H,R5
008F 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 182
0091 7F02              MOV     R7,#02H
0093 7E00              MOV     R6,#00H
0095 7D00              MOV     R5,#00H
0097 7C00              MOV     R4,#00H
0099 AB00        R     MOV     R3,X+03H
009B AA00        R     MOV     R2,X+02H
009D A900        R     MOV     R1,X+01H
009F A800        R     MOV     R0,X
00A1 120000      E     LCALL   ?C?LMUL
00A4 8F82              MOV     DPL,R7
00A6 8E83              MOV     DPH,R6
00A8 E0                MOVX    A,@DPTR
00A9 FE                MOV     R6,A
00AA A3                INC     DPTR
00AB E0                MOVX    A,@DPTR
00AC FF                MOV     R7,A
00AD E4                CLR     A
00AE FC                MOV     R4,A
00AF FD                MOV     R5,A
00B0 8F00        R     MOV     Z+03H,R7
00B2 8E00        R     MOV     Z+02H,R6
00B4 8D00        R     MOV     Z+01H,R5
00B6 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 183
00B8 AF00        R     MOV     R7,Z+03H
00BA AE00        R     MOV     R6,Z+02H
00BC AD00        R     MOV     R5,Z+01H
00BE AC00        R     MOV     R4,Z
00C0 750090      E     MOV     ?_BarrelShift?BYTE+04H,#090H
00C3 120000      E     LCALL   _BarrelShift
00C6 8F00        R     MOV     Z+03H,R7
00C8 8E00        R     MOV     Z+02H,R6
00CA 8D00        R     MOV     Z+01H,R5
00CC 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 184
00CE AF00        R     MOV     R7,Z+03H
00D0 AE00        R     MOV     R6,Z+02H
00D2 AD00        R     MOV     R5,Z+01H
00D4 AC00        R     MOV     R4,Z
00D6 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
00D9 120000      E     LCALL   _BarrelShift
00DC 8F00        R     MOV     Z+03H,R7
00DE 8E00        R     MOV     Z+02H,R6
00E0 8D00        R     MOV     Z+01H,R5
00E2 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 186
00E4 7F00              MOV     R7,#00H
00E6 7E00              MOV     R6,#00H
00E8 7D00              MOV     R5,#00H
00EA 7C00              MOV     R4,#00H
00EC AB00        R     MOV     R3,A+03H
00EE AA00        R     MOV     R2,A+02H
00F0 A900        R     MOV     R1,A+01H
00F2 A800        R     MOV     R0,A
00F4 C3                CLR     C
00F5 120000      E     LCALL   ?C?SLCMP
00F8 5013              JNC     ?C0004
00FA AF00        R     MOV     R7,Z+03H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 13  

00FC AE00        R     MOV     R6,Z+02H
00FE AD00        R     MOV     R5,Z+01H
0100 AC00        R     MOV     R4,Z
0102 120000      E     LCALL   ?C?LNEG
0105 8F00        R     MOV     Z+03H,R7
0107 8E00        R     MOV     Z+02H,R6
0109 8D00        R     MOV     Z+01H,R5
010B 8C00        R     MOV     Z,R4
010D         ?C0004:
                                           ; SOURCE LINE # 188
010D AF00        R     MOV     R7,Z+03H
010F AE00        R     MOV     R6,Z+02H
0111 AD00        R     MOV     R5,Z+01H
0113 AC00        R     MOV     R4,Z
                                           ; SOURCE LINE # 190
0115         ?C0005:
0115 22                RET     
             ; FUNCTION __IQ15sin (END)

             ; FUNCTION __IQ15sqrt (BEGIN)
                                           ; SOURCE LINE # 217
0000 8F00        R     MOV     A+03H,R7
0002 8E00        R     MOV     A+02H,R6
0004 8D00        R     MOV     A+01H,R5
0006 8C00        R     MOV     A,R4
                                           ; SOURCE LINE # 219
                                           ; SOURCE LINE # 221
0008 7F00              MOV     R7,#00H
000A 7E00              MOV     R6,#00H
000C 7D00              MOV     R5,#00H
000E 7C00              MOV     R4,#00H
0010 AB00        R     MOV     R3,A+03H
0012 AA00        R     MOV     R2,A+02H
0014 A900        R     MOV     R1,A+01H
0016 A800        R     MOV     R0,A
0018 C3                CLR     C
0019 120000      E     LCALL   ?C?SLCMP
001C 5009              JNC     ?C0006
001E 7F00              MOV     R7,#00H
0020 7E00              MOV     R6,#00H
0022 7D00              MOV     R5,#00H
0024 7C00              MOV     R4,#00H
0026 22                RET     
0027         ?C0006:
                                           ; SOURCE LINE # 223
0027 AF00        R     MOV     R7,A+03H
0029 AE00        R     MOV     R6,A+02H
002B AD00        R     MOV     R5,A+01H
002D AC00        R     MOV     R4,A
002F 120000      E     LCALL   _Normalize
0032 8F00        R     MOV     X+03H,R7
0034 8E00        R     MOV     X+02H,R6
0036 8D00        R     MOV     X+01H,R5
0038 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 224
003A C3                CLR     C
003B 7410              MOV     A,#010H
003D 95EF              SUBB    A,ARCON
003F F500        R     MOV     index,A
                                           ; SOURCE LINE # 226
0041 E500        R     MOV     A,index
0043 75F002            MOV     B,#02H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 14  

0046 120000      E     LCALL   ?C?SCDIV
0049 AFF0              MOV     R7,B
004B EF                MOV     A,R7
004C 7068              JNZ     ?C0008
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
004E E500        R     MOV     A,X+03H
0050 54FF              ANL     A,#0FFH
0052 F500        R     MOV     X+03H,A
0054 E500        R     MOV     A,X+02H
0056 54FF              ANL     A,#0FFH
0058 F500        R     MOV     X+02H,A
005A E500        R     MOV     A,X+01H
005C 54FF              ANL     A,#0FFH
005E F500        R     MOV     X+01H,A
0060 E500        R     MOV     A,X
0062 547F              ANL     A,#07FH
0064 F500        R     MOV     X,A
                                           ; SOURCE LINE # 229
0066 AF00        R     MOV     R7,X+03H
0068 AE00        R     MOV     R6,X+02H
006A AD00        R     MOV     R5,X+01H
006C AC00        R     MOV     R4,X
006E 750037      E     MOV     ?_BarrelShift?BYTE+04H,#037H
0071 120000      E     LCALL   _BarrelShift
0074 EF                MOV     A,R7
0075 2480              ADD     A,#080H
0077 F500        R     MOV     X+03H,A
0079 EE                MOV     A,R6
007A 3400              ADDC    A,#00H
007C F500        R     MOV     X+02H,A
007E ED                MOV     A,R5
007F 3400              ADDC    A,#00H
0081 F500        R     MOV     X+01H,A
0083 EC                MOV     A,R4
0084 3400              ADDC    A,#00H
0086 F500        R     MOV     X,A
                                           ; SOURCE LINE # 231
0088 7F02              MOV     R7,#02H
008A 7E00              MOV     R6,#00H
008C 7D00              MOV     R5,#00H
008E 7C00              MOV     R4,#00H
0090 AB00        R     MOV     R3,X+03H
0092 AA00        R     MOV     R2,X+02H
0094 A900        R     MOV     R1,X+01H
0096 A800        R     MOV     R0,X
0098 120000      E     LCALL   ?C?LMUL
009B E4                CLR     A
009C 2F                ADD     A,R7
009D F582              MOV     DPL,A
009F 7408              MOV     A,#08H
00A1 3E                ADDC    A,R6
00A2 F583              MOV     DPH,A
00A4 E0                MOVX    A,@DPTR
00A5 FE                MOV     R6,A
00A6 A3                INC     DPTR
00A7 E0                MOVX    A,@DPTR
00A8 FF                MOV     R7,A
00A9 E4                CLR     A
00AA FC                MOV     R4,A
00AB FD                MOV     R5,A
00AC 8F00        R     MOV     Z+03H,R7
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 15  

00AE 8E00        R     MOV     Z+02H,R6
00B0 8D00        R     MOV     Z+01H,R5
00B2 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 232
00B4 805C              SJMP    ?C0009
00B6         ?C0008:
                                           ; SOURCE LINE # 234
                                           ; SOURCE LINE # 235
00B6 0500        R     INC     index
                                           ; SOURCE LINE # 237
00B8 AF00        R     MOV     R7,X+03H
00BA AE00        R     MOV     R6,X+02H
00BC AD00        R     MOV     R5,X+01H
00BE AC00        R     MOV     R4,X
00C0 750038      E     MOV     ?_BarrelShift?BYTE+04H,#038H
00C3 120000      E     LCALL   _BarrelShift
00C6 8F00        R     MOV     X+03H,R7
00C8 8E00        R     MOV     X+02H,R6
00CA 8D00        R     MOV     X+01H,R5
00CC 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 238
00CE E500        R     MOV     A,X+03H
00D0 547F              ANL     A,#07FH
00D2 F500        R     MOV     X+03H,A
00D4 E500        R     MOV     A,X+02H
00D6 5400              ANL     A,#00H
00D8 F500        R     MOV     X+02H,A
00DA E500        R     MOV     A,X+01H
00DC 5400              ANL     A,#00H
00DE F500        R     MOV     X+01H,A
00E0 E500        R     MOV     A,X
00E2 5400              ANL     A,#00H
00E4 F500        R     MOV     X,A
                                           ; SOURCE LINE # 239
00E6 7F02              MOV     R7,#02H
00E8 7E00              MOV     R6,#00H
00EA 7D00              MOV     R5,#00H
00EC 7C00              MOV     R4,#00H
00EE AB00        R     MOV     R3,X+03H
00F0 AA00        R     MOV     R2,X+02H
00F2 A900        R     MOV     R1,X+01H
00F4 A800        R     MOV     R0,X
00F6 120000      E     LCALL   ?C?LMUL
00F9 E4                CLR     A
00FA 2F                ADD     A,R7
00FB F582              MOV     DPL,A
00FD 7408              MOV     A,#08H
00FF 3E                ADDC    A,R6
0100 F583              MOV     DPH,A
0102 E0                MOVX    A,@DPTR
0103 FE                MOV     R6,A
0104 A3                INC     DPTR
0105 E0                MOVX    A,@DPTR
0106 FF                MOV     R7,A
0107 E4                CLR     A
0108 FC                MOV     R4,A
0109 FD                MOV     R5,A
010A 8F00        R     MOV     Z+03H,R7
010C 8E00        R     MOV     Z+02H,R6
010E 8D00        R     MOV     Z+01H,R5
0110 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 240
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 16  

0112         ?C0009:
                                           ; SOURCE LINE # 241
0112 AF00        R     MOV     R7,Z+03H
0114 AE00        R     MOV     R6,Z+02H
0116 AD00        R     MOV     R5,Z+01H
0118 AC00        R     MOV     R4,Z
011A 750090      E     MOV     ?_BarrelShift?BYTE+04H,#090H
011D 120000      E     LCALL   _BarrelShift
0120 8F00        R     MOV     Z+03H,R7
0122 8E00        R     MOV     Z+02H,R6
0124 8D00        R     MOV     Z+01H,R5
0126 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 242
0128 AF00        R     MOV     R7,Z+03H
012A AE00        R     MOV     R6,Z+02H
012C AD00        R     MOV     R5,Z+01H
012E AC00        R     MOV     R4,Z
0130 75002F      E     MOV     ?_BarrelShift?BYTE+04H,#02FH
0133 120000      E     LCALL   _BarrelShift
0136 8F00        R     MOV     Z+03H,R7
0138 8E00        R     MOV     Z+02H,R6
013A 8D00        R     MOV     Z+01H,R5
013C 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 246
013E C3                CLR     C
013F E500        R     MOV     A,index
0141 6480              XRL     A,#080H
0143 9480              SUBB    A,#080H
0145 4020              JC      ?C0010
                                           ; SOURCE LINE # 247
0147 AF00        R     MOV     R7,Z+03H
0149 AE00        R     MOV     R6,Z+02H
014B AD00        R     MOV     R5,Z+01H
014D AC00        R     MOV     R4,Z
014F E500        R     MOV     A,index
0151 A2E7              MOV     C,ACC.7
0153 13                RRC     A
0154 FB                MOV     R3,A
0155 EB                MOV     A,R3
0156 24A0              ADD     A,#0A0H
0158 F500        E     MOV     ?_BarrelShift?BYTE+04H,A
015A 120000      E     LCALL   _BarrelShift
015D 8F00        R     MOV     Z+03H,R7
015F 8E00        R     MOV     Z+02H,R6
0161 8D00        R     MOV     Z+01H,R5
0163 8C00        R     MOV     Z,R4
0165 8022              SJMP    ?C0011
0167         ?C0010:
                                           ; SOURCE LINE # 248
0167 AF00        R     MOV     R7,Z+03H
0169 AE00        R     MOV     R6,Z+02H
016B AD00        R     MOV     R5,Z+01H
016D AC00        R     MOV     R4,Z
016F E500        R     MOV     A,index
0171 F4                CPL     A
0172 04                INC     A
0173 FB                MOV     R3,A
0174 EB                MOV     A,R3
0175 A2E7              MOV     C,ACC.7
0177 13                RRC     A
0178 FB                MOV     R3,A
0179 EB                MOV     A,R3
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 17  

017A 2420              ADD     A,#020H
017C F500        E     MOV     ?_BarrelShift?BYTE+04H,A
017E 120000      E     LCALL   _BarrelShift
0181 8F00        R     MOV     Z+03H,R7
0183 8E00        R     MOV     Z+02H,R6
0185 8D00        R     MOV     Z+01H,R5
0187 8C00        R     MOV     Z,R4
0189         ?C0011:
                                           ; SOURCE LINE # 250
0189 AF00        R     MOV     R7,Z+03H
018B AE00        R     MOV     R6,Z+02H
018D AD00        R     MOV     R5,Z+01H
018F AC00        R     MOV     R4,Z
                                           ; SOURCE LINE # 251
0191         ?C0007:
0191 22                RET     
             ; FUNCTION __IQ15sqrt (END)

             ; FUNCTION __IQ15atan2 (BEGIN)
                                           ; SOURCE LINE # 268
0000 8F00        R     MOV     A+03H,R7
0002 8E00        R     MOV     A+02H,R6
0004 8D00        R     MOV     A+01H,R5
0006 8C00        R     MOV     A,R4
                                           ; SOURCE LINE # 269
                                           ; SOURCE LINE # 270
0008 AF00        R     MOV     R7,A+03H
000A AE00        R     MOV     R6,A+02H
000C AD00        R     MOV     R5,A+01H
000E AC00        R     MOV     R4,A
0010 120000      E     LCALL   __IQabs
0013 8F00        R     MOV     Y+03H,R7
0015 8E00        R     MOV     Y+02H,R6
0017 8D00        R     MOV     Y+01H,R5
0019 8C00        R     MOV     Y,R4
                                           ; SOURCE LINE # 271
001B AF00        R     MOV     R7,B+03H
001D AE00        R     MOV     R6,B+02H
001F AD00        R     MOV     R5,B+01H
0021 AC00        R     MOV     R4,B
0023 120000      E     LCALL   __IQabs
0026 8F00        R     MOV     X+03H,R7
0028 8E00        R     MOV     X+02H,R6
002A 8D00        R     MOV     X+01H,R5
002C 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 274
002E AF00        R     MOV     R7,Y+03H
0030 AE00        R     MOV     R6,Y+02H
0032 AD00        R     MOV     R5,Y+01H
0034 AC00        R     MOV     R4,Y
0036 AB00        R     MOV     R3,X+03H
0038 AA00        R     MOV     R2,X+02H
003A A900        R     MOV     R1,X+01H
003C A800        R     MOV     R0,X
003E D3                SETB    C
003F 120000      E     LCALL   ?C?SLCMP
0042 404C              JC      ?C0012
                                           ; SOURCE LINE # 275
                                           ; SOURCE LINE # 279
0044 AF00        R     MOV     R7,Y+03H
0046 AE00        R     MOV     R6,Y+02H
0048 AD00        R     MOV     R5,Y+01H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 18  

004A AC00        R     MOV     R4,Y
004C 7500A5      E     MOV     ?_BarrelShift?BYTE+04H,#0A5H
004F 120000      E     LCALL   _BarrelShift
0052 8F00        R     MOV     Y+03H,R7
0054 8E00        R     MOV     Y+02H,R6
0056 8D00        R     MOV     Y+01H,R5
0058 8C00        R     MOV     Y,R4
                                           ; SOURCE LINE # 280
005A AF00        R     MOV     R7,X+03H
005C AE00        R     MOV     R6,X+02H
005E AD00        R     MOV     R5,X+01H
0060 AC00        R     MOV     R4,X
0062 750024      E     MOV     ?_BarrelShift?BYTE+04H,#024H
0065 120000      E     LCALL   _BarrelShift
0068 8F00        R     MOV     X+03H,R7
006A 8E00        R     MOV     X+02H,R6
006C 8D00        R     MOV     X+01H,R5
006E 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 281
0070 AB00        R     MOV     R3,X+03H
0072 AA00        R     MOV     R2,X+02H
0074 A900        R     MOV     R1,X+01H
0076 A800        R     MOV     R0,X
0078 AF00        R     MOV     R7,Y+03H
007A AE00        R     MOV     R6,Y+02H
007C AD00        R     MOV     R5,Y+01H
007E AC00        R     MOV     R4,Y
0080 120000      E     LCALL   ?C?SLDIV
0083 8F00        R     MOV     X+03H,R7
0085 8E00        R     MOV     X+02H,R6
0087 8D00        R     MOV     X+01H,R5
0089 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 284
008B 750000      R     MOV     index,#00H
                                           ; SOURCE LINE # 288
008E 804A              SJMP    ?C0013
0090         ?C0012:
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 291
0090 AF00        R     MOV     R7,X+03H
0092 AE00        R     MOV     R6,X+02H
0094 AD00        R     MOV     R5,X+01H
0096 AC00        R     MOV     R4,X
0098 7500A5      E     MOV     ?_BarrelShift?BYTE+04H,#0A5H
009B 120000      E     LCALL   _BarrelShift
009E 8F00        R     MOV     X+03H,R7
00A0 8E00        R     MOV     X+02H,R6
00A2 8D00        R     MOV     X+01H,R5
00A4 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 292
00A6 AF00        R     MOV     R7,Y+03H
00A8 AE00        R     MOV     R6,Y+02H
00AA AD00        R     MOV     R5,Y+01H
00AC AC00        R     MOV     R4,Y
00AE 750024      E     MOV     ?_BarrelShift?BYTE+04H,#024H
00B1 120000      E     LCALL   _BarrelShift
00B4 8F00        R     MOV     Y+03H,R7
00B6 8E00        R     MOV     Y+02H,R6
00B8 8D00        R     MOV     Y+01H,R5
00BA 8C00        R     MOV     Y,R4
                                           ; SOURCE LINE # 293
00BC AF00        R     MOV     R7,X+03H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 19  

00BE AE00        R     MOV     R6,X+02H
00C0 AD00        R     MOV     R5,X+01H
00C2 AC00        R     MOV     R4,X
00C4 AB00        R     MOV     R3,Y+03H
00C6 AA00        R     MOV     R2,Y+02H
00C8 A900        R     MOV     R1,Y+01H
00CA A800        R     MOV     R0,Y
00CC 120000      E     LCALL   ?C?SLDIV
00CF 8F00        R     MOV     X+03H,R7
00D1 8E00        R     MOV     X+02H,R6
00D3 8D00        R     MOV     X+01H,R5
00D5 8C00        R     MOV     X,R4
                                           ; SOURCE LINE # 296
00D7 750001      R     MOV     index,#01H
                                           ; SOURCE LINE # 297
00DA         ?C0013:
                                           ; SOURCE LINE # 301
00DA 7F02              MOV     R7,#02H
00DC 7E00              MOV     R6,#00H
00DE 7D00              MOV     R5,#00H
00E0 7C00              MOV     R4,#00H
00E2 AB00        R     MOV     R3,X+03H
00E4 AA00        R     MOV     R2,X+02H
00E6 A900        R     MOV     R1,X+01H
00E8 A800        R     MOV     R0,X
00EA 120000      E     LCALL   ?C?LMUL
00ED E4                CLR     A
00EE 2F                ADD     A,R7
00EF F582              MOV     DPL,A
00F1 740C              MOV     A,#0CH
00F3 3E                ADDC    A,R6
00F4 F583              MOV     DPH,A
00F6 E0                MOVX    A,@DPTR
00F7 FE                MOV     R6,A
00F8 A3                INC     DPTR
00F9 E0                MOVX    A,@DPTR
00FA FF                MOV     R7,A
00FB E4                CLR     A
00FC FC                MOV     R4,A
00FD FD                MOV     R5,A
00FE 8F00        R     MOV     Z+03H,R7
0100 8E00        R     MOV     Z+02H,R6
0102 8D00        R     MOV     Z+01H,R5
0104 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 302
0106 AF00        R     MOV     R7,Z+03H
0108 AE00        R     MOV     R6,Z+02H
010A AD00        R     MOV     R5,Z+01H
010C AC00        R     MOV     R4,Z
010E 7B2D              MOV     R3,#02DH
0110 7A00              MOV     R2,#00H
0112 7900              MOV     R1,#00H
0114 7800              MOV     R0,#00H
0116 120000      E     LCALL   ?C?LMUL
0119 8F00        R     MOV     Z+03H,R7
011B 8E00        R     MOV     Z+02H,R6
011D 8D00        R     MOV     Z+01H,R5
011F 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 303
0121 AF00        R     MOV     R7,Z+03H
0123 AE00        R     MOV     R6,Z+02H
0125 AD00        R     MOV     R5,Z+01H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 20  

0127 AC00        R     MOV     R4,Z
0129 75008C      E     MOV     ?_BarrelShift?BYTE+04H,#08CH
012C 120000      E     LCALL   _BarrelShift
012F 8F00        R     MOV     Z+03H,R7
0131 8E00        R     MOV     Z+02H,R6
0133 8D00        R     MOV     Z+01H,R5
0135 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 304
0137 AF00        R     MOV     R7,Z+03H
0139 AE00        R     MOV     R6,Z+02H
013B AD00        R     MOV     R5,Z+01H
013D AC00        R     MOV     R4,Z
013F 750029      E     MOV     ?_BarrelShift?BYTE+04H,#029H
0142 120000      E     LCALL   _BarrelShift
0145 8F00        R     MOV     Z+03H,R7
0147 8E00        R     MOV     Z+02H,R6
0149 8D00        R     MOV     Z+01H,R5
014B 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 307
014D E500        R     MOV     A,index
014F B40116            CJNE    A,#01H,?C0014
0152 C3                CLR     C
0153 E4                CLR     A
0154 9500        R     SUBB    A,Z+03H
0156 F500        R     MOV     Z+03H,A
0158 E4                CLR     A
0159 9500        R     SUBB    A,Z+02H
015B F500        R     MOV     Z+02H,A
015D 742D              MOV     A,#02DH
015F 9500        R     SUBB    A,Z+01H
0161 F500        R     MOV     Z+01H,A
0163 E4                CLR     A
0164 9500        R     SUBB    A,Z
0166 F500        R     MOV     Z,A
0168         ?C0014:
                                           ; SOURCE LINE # 309
0168 7F00              MOV     R7,#00H
016A 7E00              MOV     R6,#00H
016C 7D00              MOV     R5,#00H
016E 7C00              MOV     R4,#00H
0170 AB00        R     MOV     R3,A+03H
0172 AA00        R     MOV     R2,A+02H
0174 A900        R     MOV     R1,A+01H
0176 A800        R     MOV     R0,A
0178 C3                CLR     C
0179 120000      E     LCALL   ?C?SLCMP
017C 502F              JNC     ?C0015
017E 7F00              MOV     R7,#00H
0180 7E00              MOV     R6,#00H
0182 7D00              MOV     R5,#00H
0184 7C00              MOV     R4,#00H
0186 AB00        R     MOV     R3,B+03H
0188 AA00        R     MOV     R2,B+02H
018A A900        R     MOV     R1,B+01H
018C A800        R     MOV     R0,B
018E D3                SETB    C
018F 120000      E     LCALL   ?C?SLCMP
0192 4019              JC      ?C0015
                                           ; SOURCE LINE # 310
0194 C3                CLR     C
0195 E4                CLR     A
0196 9500        R     SUBB    A,Z+03H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 21  

0198 F500        R     MOV     Z+03H,A
019A E4                CLR     A
019B 9500        R     SUBB    A,Z+02H
019D F500        R     MOV     Z+02H,A
019F 745A              MOV     A,#05AH
01A1 9500        R     SUBB    A,Z+01H
01A3 F500        R     MOV     Z+01H,A
01A5 E4                CLR     A
01A6 9500        R     SUBB    A,Z
01A8 F500        R     MOV     Z,A
01AA 020000      R     LJMP    ?C0016
01AD         ?C0015:
                                           ; SOURCE LINE # 311
01AD 7F00              MOV     R7,#00H
01AF 7E00              MOV     R6,#00H
01B1 7D00              MOV     R5,#00H
01B3 7C00              MOV     R4,#00H
01B5 AB00        R     MOV     R3,A+03H
01B7 AA00        R     MOV     R2,A+02H
01B9 A900        R     MOV     R1,A+01H
01BB A800        R     MOV     R0,A
01BD C3                CLR     C
01BE 120000      E     LCALL   ?C?SLCMP
01C1 5030              JNC     ?C0017
01C3 7F00              MOV     R7,#00H
01C5 7E00              MOV     R6,#00H
01C7 7D00              MOV     R5,#00H
01C9 7C00              MOV     R4,#00H
01CB AB00        R     MOV     R3,B+03H
01CD AA00        R     MOV     R2,B+02H
01CF A900        R     MOV     R1,B+01H
01D1 A800        R     MOV     R0,B
01D3 C3                CLR     C
01D4 120000      E     LCALL   ?C?SLCMP
01D7 501A              JNC     ?C0017
                                           ; SOURCE LINE # 312
01D9 E500        R     MOV     A,Z+03H
01DB 2400              ADD     A,#00H
01DD F500        R     MOV     Z+03H,A
01DF E500        R     MOV     A,Z+02H
01E1 3400              ADDC    A,#00H
01E3 F500        R     MOV     Z+02H,A
01E5 E500        R     MOV     A,Z+01H
01E7 345A              ADDC    A,#05AH
01E9 F500        R     MOV     Z+01H,A
01EB E500        R     MOV     A,Z
01ED 3400              ADDC    A,#00H
01EF F500        R     MOV     Z,A
01F1 8042              SJMP    ?C0016
01F3         ?C0017:
                                           ; SOURCE LINE # 313
01F3 7F00              MOV     R7,#00H
01F5 7E00              MOV     R6,#00H
01F7 7D00              MOV     R5,#00H
01F9 7C00              MOV     R4,#00H
01FB AB00        R     MOV     R3,A+03H
01FD AA00        R     MOV     R2,A+02H
01FF A900        R     MOV     R1,A+01H
0201 A800        R     MOV     R0,A
0203 D3                SETB    C
0204 120000      E     LCALL   ?C?SLCMP
0207 402C              JC      ?C0016
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 22  

0209 7F00              MOV     R7,#00H
020B 7E00              MOV     R6,#00H
020D 7D00              MOV     R5,#00H
020F 7C00              MOV     R4,#00H
0211 AB00        R     MOV     R3,B+03H
0213 AA00        R     MOV     R2,B+02H
0215 A900        R     MOV     R1,B+01H
0217 A800        R     MOV     R0,B
0219 C3                CLR     C
021A 120000      E     LCALL   ?C?SLCMP
021D 5016              JNC     ?C0016
                                           ; SOURCE LINE # 314
021F C3                CLR     C
0220 E4                CLR     A
0221 9500        R     SUBB    A,Z+03H
0223 F500        R     MOV     Z+03H,A
0225 E4                CLR     A
0226 9500        R     SUBB    A,Z+02H
0228 F500        R     MOV     Z+02H,A
022A 74B4              MOV     A,#0B4H
022C 9500        R     SUBB    A,Z+01H
022E F500        R     MOV     Z+01H,A
0230 E4                CLR     A
0231 9500        R     SUBB    A,Z
0233 F500        R     MOV     Z,A
0235         ?C0019:
0235         ?C0018:
0235         ?C0016:
                                           ; SOURCE LINE # 318
0235 AF00        R     MOV     R7,Z+03H
0237 AE00        R     MOV     R6,Z+02H
0239 AD00        R     MOV     R5,Z+01H
023B AC00        R     MOV     R4,Z
                                           ; SOURCE LINE # 319
023D         ?C0020:
023D 22                RET     
             ; FUNCTION __IQ15atan2 (END)

             ; FUNCTION __IQ15mag (BEGIN)
                                           ; SOURCE LINE # 322
0000 8F00        R     MOV     A+03H,R7
0002 8E00        R     MOV     A+02H,R6
0004 8D00        R     MOV     A+01H,R5
0006 8C00        R     MOV     A,R4
                                           ; SOURCE LINE # 323
                                           ; SOURCE LINE # 324
0008 AF00        R     MOV     R7,B+03H
000A AE00        R     MOV     R6,B+02H
000C AD00        R     MOV     R5,B+01H
000E AC00        R     MOV     R4,B
0010 C004              PUSH    AR4
0012 C005              PUSH    AR5
0014 C006              PUSH    AR6
0016 C007              PUSH    AR7
0018 AF00        R     MOV     R7,B+03H
001A AE00        R     MOV     R6,B+02H
001C AD00        R     MOV     R5,B+01H
001E AC00        R     MOV     R4,B
0020 8F00        R     MOV     ?__IQmul?BYTE+07H,R7
0022 8E00        R     MOV     ?__IQmul?BYTE+06H,R6
0024 8D00        R     MOV     ?__IQmul?BYTE+05H,R5
0026 8C00        R     MOV     ?__IQmul?BYTE+04H,R4
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 23  

0028 D007              POP     AR7
002A D006              POP     AR6
002C D005              POP     AR5
002E D004              POP     AR4
0030 120000      R     LCALL   __IQmul
0033 C004              PUSH    AR4
0035 C005              PUSH    AR5
0037 C006              PUSH    AR6
0039 C007              PUSH    AR7
003B AF00        R     MOV     R7,A+03H
003D AE00        R     MOV     R6,A+02H
003F AD00        R     MOV     R5,A+01H
0041 AC00        R     MOV     R4,A
0043 C004              PUSH    AR4
0045 C005              PUSH    AR5
0047 C006              PUSH    AR6
0049 C007              PUSH    AR7
004B AF00        R     MOV     R7,A+03H
004D AE00        R     MOV     R6,A+02H
004F AD00        R     MOV     R5,A+01H
0051 AC00        R     MOV     R4,A
0053 8F00        R     MOV     ?__IQmul?BYTE+07H,R7
0055 8E00        R     MOV     ?__IQmul?BYTE+06H,R6
0057 8D00        R     MOV     ?__IQmul?BYTE+05H,R5
0059 8C00        R     MOV     ?__IQmul?BYTE+04H,R4
005B D007              POP     AR7
005D D006              POP     AR6
005F D005              POP     AR5
0061 D004              POP     AR4
0063 120000      R     LCALL   __IQmul
0066 A804              MOV     R0,AR4
0068 A905              MOV     R1,AR5
006A AA06              MOV     R2,AR6
006C AB07              MOV     R3,AR7
006E D007              POP     AR7
0070 D006              POP     AR6
0072 D005              POP     AR5
0074 D004              POP     AR4
0076 EB                MOV     A,R3
0077 2F                ADD     A,R7
0078 F500        R     MOV     X+03H,A
007A EA                MOV     A,R2
007B 3E                ADDC    A,R6
007C F500        R     MOV     X+02H,A
007E E9                MOV     A,R1
007F 3D                ADDC    A,R5
0080 F500        R     MOV     X+01H,A
0082 E8                MOV     A,R0
0083 3C                ADDC    A,R4
0084 F500        R     MOV     X,A
                                           ; SOURCE LINE # 325
0086 AF00        R     MOV     R7,X+03H
0088 AE00        R     MOV     R6,X+02H
008A AD00        R     MOV     R5,X+01H
008C AC00        R     MOV     R4,X
008E 120000      R     LCALL   __IQ15sqrt
0091 8F00        R     MOV     Z+03H,R7
0093 8E00        R     MOV     Z+02H,R6
0095 8D00        R     MOV     Z+01H,R5
0097 8C00        R     MOV     Z,R4
                                           ; SOURCE LINE # 326
0099 AF00        R     MOV     R7,Z+03H
C51 COMPILER V9.54   IQMATHLIB                                                             02/14/2019 04:12:49 PAGE 24  

009B AE00        R     MOV     R6,Z+02H
009D AD00        R     MOV     R5,Z+01H
009F AC00        R     MOV     R4,Z
                                           ; SOURCE LINE # 328
00A1         ?C0021:
00A1 22                RET     
             ; FUNCTION __IQ15mag (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1697    ----
   CONSTANT SIZE    =   2048    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     49    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
