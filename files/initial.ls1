A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\OUTPUT\initial.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE .\OUTPUT\initial.src PR(.\files\initial.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\OUTPUT\initial.SRC generated from: SRC\initial.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE SRC\initial.c OPTIMIZE(0,SPEED) REGFILE(.\OUTPUT\motor.
                             ORC) BROWSE INTVECTOR(0X2000) INCDIR(.\INC) DEBUG OBJECTEXTEND CODE PRINT(.\files\initial.l
                             st) TABS(2) SRC(.\OUTPUT\initial.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    INITIAL
                       8     
  00CE                 9     P2ETCLR DATA    0CEH
  009B                10     TB80    BIT     098H.3
  00DE                11     P3ETCLR DATA    0DEH
  00A1                12     P1TBPRD DATA    0A1H
  0080                13     P0      DATA    080H
  00F6                14     P4ETCLR DATA    0F6H
  00C1                15     P2TBPRD DATA    0C1H
  0090                16     P1      DATA    090H
  00D1                17     P3TBPRD DATA    0D1H
  00A0                18     P2      DATA    0A0H
  00E1                19     P4TBPRD DATA    0E1H
  00B0                20     P3      DATA    0B0H
  009D                21     SM20    BIT     098H.5
  00B1                22     P1AQCSFRC       DATA    0B1H
  00C9                23     P2AQCSFRC       DATA    0C9H
  00D9                24     P3AQCSFRC       DATA    0D9H
  00F1                25     P4AQCSFRC       DATA    0F1H
  00B2                26     P1TZFLG DATA    0B2H
  00CA                27     P2TZFLG DATA    0CAH
  00DA                28     P3TZFLG DATA    0DAH
  00B4                29     P1TZFRC DATA    0B4H
  00A8                30     IEN0    DATA    0A8H
  00F2                31     P4TZFLG DATA    0F2H
  00CC                32     P2TZFRC DATA    0CCH
  00A8                33     IE      DATA    0A8H
  00B8                34     EADC    BIT     0B8H.0
  00B8                35     IEN1    DATA    0B8H
  0085                36     DPH1    DATA    085H
  00DC                37     P3TZFRC DATA    0DCH
  009A                38     IEN2    DATA    09AH
  00F4                39     P4TZFRC DATA    0F4H
  008F                40     CLK_PD_CON      DATA    08FH
  00C0                41     IADC    BIT     0C0H.0
  0084                42     DPL1    DATA    084H
  00B3                43     P1TZCLR DATA    0B3H
  00CB                44     P2TZCLR DATA    0CBH
  00DF                45     WDCON_7 BIT     0D8H.7
  00CD                46     I2FR    BIT     0C8H.5
  00DB                47     P3TZCLR DATA    0DBH
  00CE                48     I3FR    BIT     0C8H.6
  00F3                49     P4TZCLR DATA    0F3H
  009C                50     REN0    BIT     098H.4
  00AC                51     ES      BIT     0A8H.4
  00C1                52     IEX2    BIT     0C0H.1
  00C2                53     IEX3    BIT     0C0H.2
  0098                54     RI      BIT     098H.0
  00C3                55     IEX4    BIT     0C0H.3
  00C4                56     IEX5    BIT     0C0H.4
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     2

  00C5                57     IEX6    BIT     0C0H.5
  0091                58     CLK_DIV DATA    091H
  0081                59     SP      DATA    081H
  00A3                60     P1CMPA  DATA    0A3H
  00C3                61     P2CMPA  DATA    0C3H
  00A5                62     P1CMPB  DATA    0A5H
  00D3                63     P3CMPA  DATA    0D3H
  00C5                64     P2CMPB  DATA    0C5H
  00E3                65     P4CMPA  DATA    0E3H
  00D5                66     P3CMPB  DATA    0D5H
  00AC                67     BSHI    DATA    0ACH
  00E5                68     P4CMPB  DATA    0E5H
  00A2                69     P1TBPRD_H       DATA    0A2H
  00C2                70     P2TBPRD_H       DATA    0C2H
  00D2                71     P3TBPRD_H       DATA    0D2H
  00E2                72     P4TBPRD_H       DATA    0E2H
  00A1                73     P1TBPRD_L       DATA    0A1H
  00C1                74     P2TBPRD_L       DATA    0C1H
  00BC                75     BSHO    DATA    0BCH
  00D1                76     P3TBPRD_L       DATA    0D1H
  00E1                77     P4TBPRD_L       DATA    0E1H
  0095                78     BREAKH  DATA    095H
  00BA                79     S0RELH  DATA    0BAH
  0080                80     P00     BIT     080H.0
  0099                81     SBUF    DATA    099H
  00BB                82     S1RELH  DATA    0BBH
  0090                83     P10     BIT     090H.0
  0087                84     PCON    DATA    087H
  0081                85     P01     BIT     080H.1
  00A0                86     P20     BIT     0A0H.0
  0091                87     P11     BIT     090H.1
  0082                88     P02     BIT     080H.2
  00B0                89     P30     BIT     0B0H.0
  00A1                90     P21     BIT     0A0H.1
  0092                91     P12     BIT     090H.2
  0083                92     P03     BIT     080H.3
  0094                93     BREAKL  DATA    094H
  00B1                94     P31     BIT     0B0H.1
  00AA                95     S0RELL  DATA    0AAH
  00A2                96     P22     BIT     0A0H.2
  0093                97     P13     BIT     090H.3
  0084                98     P04     BIT     080H.4
  00B2                99     P32     BIT     0B0H.2
  00A3               100     P23     BIT     0A0H.3
  009D               101     S1RELL  DATA    09DH
  0094               102     P14     BIT     090H.4
  0089               103     TMOD    DATA    089H
  0088               104     TCON    DATA    088H
  0085               105     P05     BIT     080H.5
  00B3               106     P33     BIT     0B0H.3
  00A4               107     P24     BIT     0A0H.4
  0095               108     P15     BIT     090H.5
  0086               109     P06     BIT     080H.6
  00B4               110     P34     BIT     0B0H.4
  00AC               111     BSHI_0  DATA    0ACH
  00A5               112     P25     BIT     0A0H.5
  0096               113     P16     BIT     090H.6
  0087               114     P07     BIT     080H.7
  00B5               115     P35     BIT     0B0H.5
  00AD               116     BSHI_1  DATA    0ADH
  00A6               117     P26     BIT     0A0H.6
  0097               118     P17     BIT     090H.7
  00B6               119     P36     BIT     0B0H.6
  00AE               120     BSHI_2  DATA    0AEH
  00A7               121     P27     BIT     0A0H.7
  00B7               122     P37     BIT     0B0H.7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     3

  00AF               123     BSHI_3  DATA    0AFH
  00BC               124     BSHO_0  DATA    0BCH
  00BD               125     BSHO_1  DATA    0BDH
  0089               126     IE0     BIT     088H.1
  00BE               127     BSHO_2  DATA    0BEH
  008B               128     IE1     BIT     088H.3
  00BF               129     BSHO_3  DATA    0BFH
  00F0               130     B       DATA    0F0H
  00E9               131     MD0     DATA    0E9H
  00EA               132     MD1     DATA    0EAH
  00AB               133     BSHCTL  DATA    0ABH
  00EB               134     MD2     DATA    0EBH
  00BE               135     SWDT    BIT     0B8H.6
  00A7               136     P1AQSFRC        DATA    0A7H
  00EC               137     MD3     DATA    0ECH
  00C7               138     P2AQSFRC        DATA    0C7H
  00ED               139     MD4     DATA    0EDH
  00D7               140     P3AQSFRC        DATA    0D7H
  00EE               141     MD5     DATA    0EEH
  00E7               142     P4AQSFRC        DATA    0E7H
  00E0               143     ACC     DATA    0E0H
  00AC               144     ES0     BIT     0A8H.4
  00A9               145     IP0     DATA    0A9H
  00A9               146     ET0     BIT     0A8H.1
  0093               147     BPCTRL  DATA    093H
  00B9               148     IP1     DATA    0B9H
  00AB               149     ET1     BIT     0A8H.3
  008D               150     TF0     BIT     088H.5
  0098               151     RI0     BIT     098H.0
  008F               152     TF1     BIT     088H.7
  00A4               153     P1CMPA_H        DATA    0A4H
  008C               154     TH0     DATA    08CH
  00C4               155     P2CMPA_H        DATA    0C4H
  00A6               156     P1CMPB_H        DATA    0A6H
  00A8               157     EX0     BIT     0A8H.0
  0099               158     TI0     BIT     098H.1
  008D               159     TH1     DATA    08DH
  0088               160     IT0     BIT     088H.0
  00D4               161     P3CMPA_H        DATA    0D4H
  00C6               162     P2CMPB_H        DATA    0C6H
  00AA               163     EX1     BIT     0A8H.2
  008A               164     IT1     BIT     088H.2
  00E4               165     P4CMPA_H        DATA    0E4H
  00D6               166     P3CMPB_H        DATA    0D6H
  00B9               167     EX2     BIT     0B8H.1
  00E6               168     P4CMPB_H        DATA    0E6H
  00A3               169     P1CMPA_L        DATA    0A3H
  00BA               170     EX3     BIT     0B8H.2
  009F               171     SM0     BIT     098H.7
  0097               172     POWER_CON       DATA    097H
  008A               173     TL0     DATA    08AH
  00C3               174     P2CMPA_L        DATA    0C3H
  00A5               175     P1CMPB_L        DATA    0A5H
  00BB               176     EX4     BIT     0B8H.3
  009E               177     SM1     BIT     098H.6
  008B               178     TL1     DATA    08BH
  00D3               179     P3CMPA_L        DATA    0D3H
  00C5               180     P2CMPB_L        DATA    0C5H
  00BC               181     EX5     BIT     0B8H.4
  00AF               182     EAL     BIT     0A8H.7
  00E3               183     P4CMPA_L        DATA    0E3H
  00D5               184     P3CMPB_L        DATA    0D5H
  00BD               185     EX6     BIT     0B8H.5
  00E5               186     P4CMPB_L        DATA    0E5H
  0086               187     WDTREL  DATA    086H
  008C               188     TR0     BIT     088H.4
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     4

  008E               189     TR1     BIT     088H.6
  00F9               190     INT_REG1        DATA    0F9H
  0083               191     DPH     DATA    083H
  00FA               192     INT_REG2        DATA    0FAH
  00FD               193     INT_REG3        DATA    0FDH
  00FE               194     INT_REG4        DATA    0FEH
  0082               195     DPL     DATA    082H
  0099               196     S0BUF   DATA    099H
  009C               197     S1BUF   DATA    09CH
  0098               198     S0CON   DATA    098H
  009B               199     S1CON   DATA    09BH
  00C8               200     T2CON   DATA    0C8H
  0092               201     DPS     DATA    092H
  00AE               202     WDT     BIT     0A8H.6
  008E               203     CKCON   DATA    08EH
  00EF               204     ARCON   DATA    0EFH
  00B5               205     P1ETFLG DATA    0B5H
  00F8               206     SRAM_CON        DATA    0F8H
  00CD               207     P2ETFLG DATA    0CDH
  00DD               208     P3ETFLG DATA    0DDH
  00B7               209     P1ETFRC DATA    0B7H
  00F5               210     P4ETFLG DATA    0F5H
  00CF               211     P2ETFRC DATA    0CFH
  00E8               212     MEM_CONFIG      DATA    0E8H
  00DF               213     P3ETFRC DATA    0DFH
  00F7               214     P4ETFRC DATA    0F7H
  00D0               215     PSW     DATA    0D0H
  00D8               216     WDCON   DATA    0D8H
  00C0               217     IRCON   DATA    0C0H
  009A               218     RB80    BIT     098H.2
  00B6               219     P1ETCLR DATA    0B6H
                     220     ?PR?InitEXT?INITIAL  SEGMENT CODE 
                     221     ?PR?InitISDDebug?INITIAL                 SEGMENT CODE 
                     222     ?PR?InitBreakPoint?INITIAL               SEGMENT CODE 
                     223     ?PR?epwmOutputDisable?INITIAL            SEGMENT CODE 
                     224     ?PR?epwmOutputEnable?INITIAL             SEGMENT CODE 
                     225     ?PR?InitADC?INITIAL  SEGMENT CODE 
                     226     ?PR?Initepwm?INITIAL SEGMENT CODE 
                     227     ?PR?InitComparator?INITIAL               SEGMENT CODE 
                     228     ?PR?InitWatchDog?INITIAL                 SEGMENT CODE 
                     229     ?PR?InitGPIO?INITIAL SEGMENT CODE 
                     230     ?PR?InitTimer01?INITIAL                  SEGMENT CODE 
                     231     ?PR?InitTimer3?INITIAL                   SEGMENT CODE 
                     232     ?PR?InitTimer4?INITIAL                   SEGMENT CODE 
                     233     ?PR?InitTimer5?INITIAL                   SEGMENT CODE 
                     234     ?PR?InitTimer6?INITIAL                   SEGMENT CODE 
                     235     ?PR?SystemClock?INITIAL                  SEGMENT CODE 
                     236     ?PR?sInitUART1?INITIAL                   SEGMENT CODE 
                     237     ?PR?sInitUART2?INITIAL                   SEGMENT CODE 
                     238     ?PR?InitDAC?INITIAL  SEGMENT CODE 
                     239             PUBLIC  InitDAC
                     240             PUBLIC  sInitUART2
                     241             PUBLIC  sInitUART1
                     242             PUBLIC  SystemClock
                     243             PUBLIC  InitTimer6
                     244             PUBLIC  InitTimer5
                     245             PUBLIC  InitTimer4
                     246             PUBLIC  InitTimer3
                     247             PUBLIC  InitTimer01
                     248             PUBLIC  InitGPIO
                     249             PUBLIC  InitWatchDog
                     250             PUBLIC  InitComparator
                     251             PUBLIC  Initepwm
                     252             PUBLIC  InitADC
                     253             PUBLIC  epwmOutputEnable
                     254             PUBLIC  epwmOutputDisable
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     5

                     255             PUBLIC  InitBreakPoint
                     256             PUBLIC  InitISDDebug
                     257             PUBLIC  InitEXT
                     258     ; #include "register.h"
                     259     ; #include <intrins.h>
                     260     ; #include "app.h"
                     261     ; #include "initial.h"
                     262     ; #include "ISD51.H"
                     263     ; #include "epwm.h"
                     264     ; 
                     265     ; 
                     266     ; 
                     267     ; 
                     268     ; void InitEXT(void)
                     269     
----                 270             RSEG  ?PR?InitEXT?INITIAL
0000                 271     InitEXT:
                     272             USING   0
                     273                             ; SOURCE LINE # 11
                     274     ; {     
                     275                             ; SOURCE LINE # 12
                     276     ; //            EINT1_EN=0; 
                     277     ; //            EINT2_EN=1;                             //enable EXT2
                     278     ; //            EINT3_EN=0;
                     279     ; //            EINT4_EN=0;
                     280     ;       
                     281     ;                       EXINT_EN = 0x02;                                        //RXINT_EN 
                             cannot be read, it can be write only
                     282                             ; SOURCE LINE # 18
0000 90E08D          283             MOV     DPTR,#0E08DH
0003 7402            284             MOV     A,#02H
0005 F0              285             MOVX    @DPTR,A
                     286     ;                                                                                          
                                                                  //EXINT_EN= 0x01      -----enable EXT1
                     287     ;                                                                                          
                                                                  //                                      0x02                    -----enable EXT2
                     288     ;                                                                                          
                                                                  //                                      0x04              -----enable EXT3
                     289     ;                                                                                          
                                                                  //                                      0x08                    -----enable EXT4
                     290     ;       
                     291     ;               EINT2_CFG=RISING_EDGE;          //rising edge trigger
                     292                             ; SOURCE LINE # 24
0006 90E0BF          293             MOV     DPTR,#0E0BFH
0009 E0              294             MOVX    A,@DPTR
000A FF              295             MOV     R7,A
000B EF              296             MOV     A,R7
000C 54F3            297             ANL     A,#0F3H
000E FF              298             MOV     R7,A
000F EF              299             MOV     A,R7
0010 4404            300             ORL     A,#04H
0012 FF              301             MOV     R7,A
0013 EF              302             MOV     A,R7
0014 F0              303             MOVX    @DPTR,A
                     304     ;               EX0=1;
                     305                             ; SOURCE LINE # 25
0015 D2A8            306             SETB    EX0
                     307     ;               IT0=1;
                     308                             ; SOURCE LINE # 26
0017 D288            309             SETB    IT0
                     310     ;               IE0=0;
                     311                             ; SOURCE LINE # 27
0019 C289            312             CLR     IE0
                     313     ;               INT_REG1 &=0xf0;              
                     314                             ; SOURCE LINE # 28
001B 53F9F0          315             ANL     INT_REG1,#0F0H
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     6

                     316     ;       
                     317     ; }
                     318                             ; SOURCE LINE # 30
001E                 319     ?C0001:
001E 22              320             RET     
                     321     ; END OF InitEXT
                     322     
                     323     ; 
                     324     ; void InitISDDebug(void)
                     325     
----                 326             RSEG  ?PR?InitISDDebug?INITIAL
0000                 327     InitISDDebug:
                     328                             ; SOURCE LINE # 32
                     329     ; {
                     330                             ; SOURCE LINE # 33
                     331     ;       
                     332     ;     EAL = 0;
                     333                             ; SOURCE LINE # 35
0000 C2AF            334             CLR     EAL
                     335     ;     //ISD51++++++++++++++++++++++++++
                     336     ;     #if ISDDebug == ENABLE_ISD
                     337     ;               InitBreakPoint();
                     338     ;     sInitUART1();
                     339     ;  
                     340     ;     IP0 = 0x30;
                     341     ;     IP1 = 0x20;
                     342     ;     ET0 = 0;
                     343     ;     EX6 = 0 ;
                     344     ;     ES0 = 1;
                     345     ;     EAL = 1;
                     346     ;     _nop_();
                     347     ;     _nop_();
                     348     ;     _nop_();
                     349     ;     while(1)
                     350     ;     {
                     351     ;         P10 = 0;
                     352     ;         P10 = 1;
                     353     ;         ISDcheck();      // initialize uVision2 Debugger and continue program run
                     354     ;         if((BPCTRL & 0x10) != 0) break;
                     355     ;     }
                     356     ;     _nop_();
                     357     ;     _nop_();
                     358     ;     _nop_();
                     359     ;     ET0 = 1;
                     360     ;     EX6 = 1;
                     361     ;     _nop_();
                     362     ;     _nop_();
                     363     ;     _nop_();
                     364     ;     #endif
                     365     ;     //++++++++++++++++++++++++++++++
                     366     ;               EAL = 1;                                //enable all interrupts
                     367                             ; SOURCE LINE # 67
0002 D2AF            368             SETB    EAL
                     369     ; }
                     370                             ; SOURCE LINE # 68
0004                 371     ?C0002:
0004 22              372             RET     
                     373     ; END OF InitISDDebug
                     374     
                     375     ; 
                     376     ; 
                     377     ; 
                     378     ; 
                     379     ; 
                     380     ; void InitBreakPoint  (void)
                     381     
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     7

----                 382             RSEG  ?PR?InitBreakPoint?INITIAL
0000                 383     InitBreakPoint:
                     384                             ; SOURCE LINE # 74
                     385     ; {
                     386                             ; SOURCE LINE # 75
                     387     ;     BPCTRL   = 0x01;
                     388                             ; SOURCE LINE # 76
0000 759301          389             MOV     BPCTRL,#01H
                     390     ;       BREAKL   = 0xff;
                     391                             ; SOURCE LINE # 77
0003 7594FF          392             MOV     BREAKL,#0FFH
                     393     ;       BREAKH   = 0xff;
                     394                             ; SOURCE LINE # 78
0006 7595FF          395             MOV     BREAKH,#0FFH
                     396     ; }
                     397                             ; SOURCE LINE # 79
0009                 398     ?C0003:
0009 22              399             RET     
                     400     ; END OF InitBreakPoint
                     401     
                     402     ; 
                     403     ; void epwmOutputDisable(void)
                     404     
----                 405             RSEG  ?PR?epwmOutputDisable?INITIAL
0000                 406     epwmOutputDisable:
                     407                             ; SOURCE LINE # 81
                     408     ; {
                     409                             ; SOURCE LINE # 82
                     410     ;       P1AQCSFRC = 0x05;                                               // force epwmxA and
                              epwmxB output low
                     411                             ; SOURCE LINE # 83
0000 75B105          412             MOV     P1AQCSFRC,#05H
                     413     ;       P2AQCSFRC = 0x05;
                     414                             ; SOURCE LINE # 84
0003 75C905          415             MOV     P2AQCSFRC,#05H
                     416     ;       P3AQCSFRC = 0x05;
                     417                             ; SOURCE LINE # 85
0006 75D905          418             MOV     P3AQCSFRC,#05H
                     419     ;       P4AQCSFRC = 0x05;
                     420                             ; SOURCE LINE # 86
0009 75F105          421             MOV     P4AQCSFRC,#05H
                     422     ; }
                     423                             ; SOURCE LINE # 87
000C                 424     ?C0004:
000C 22              425             RET     
                     426     ; END OF epwmOutputDisable
                     427     
                     428     ; 
                     429     ; void epwmOutputEnable(void)
                     430     
----                 431             RSEG  ?PR?epwmOutputEnable?INITIAL
0000                 432     epwmOutputEnable:
                     433                             ; SOURCE LINE # 89
                     434     ; {
                     435                             ; SOURCE LINE # 90
                     436     ;       P1AQCSFRC = 0x0F;                                               // software force d
                             isable
                     437                             ; SOURCE LINE # 91
0000 75B10F          438             MOV     P1AQCSFRC,#0FH
                     439     ;       P2AQCSFRC = 0x0F;
                     440                             ; SOURCE LINE # 92
0003 75C90F          441             MOV     P2AQCSFRC,#0FH
                     442     ;       P3AQCSFRC = 0x0F;
                     443                             ; SOURCE LINE # 93
0006 75D90F          444             MOV     P3AQCSFRC,#0FH
                     445     ;       P4AQCSFRC = 0x0F;
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     8

                     446                             ; SOURCE LINE # 94
0009 75F10F          447             MOV     P4AQCSFRC,#0FH
                     448     ; }
                     449                             ; SOURCE LINE # 95
000C                 450     ?C0005:
000C 22              451             RET     
                     452     ; END OF epwmOutputEnable
                     453     
                     454     ; 
                     455     ; void InitADC(void)
                     456     
----                 457             RSEG  ?PR?InitADC?INITIAL
0000                 458     InitADC:
                     459             USING   0
                     460                             ; SOURCE LINE # 97
                     461     ; {
                     462                             ; SOURCE LINE # 98
                     463     ; 
                     464     ;               AD_PD = 0;                                                      //Power up 
                             ADD
                     465                             ; SOURCE LINE # 100
0000 90E08B          466             MOV     DPTR,#0E08BH
0003 E4              467             CLR     A
0004 F0              468             MOVX    @DPTR,A
                     469     ;         ADC_CLK_EN=1;
                     470                             ; SOURCE LINE # 101
0005 90E0EC          471             MOV     DPTR,#0E0ECH
0008 E0              472             MOVX    A,@DPTR
0009 FF              473             MOV     R7,A
000A EF              474             MOV     A,R7
000B 4408            475             ORL     A,#08H
000D FF              476             MOV     R7,A
000E EF              477             MOV     A,R7
000F F0              478             MOVX    @DPTR,A
                     479     ;               ADC_CLK_DIV_SEL=0x03;    //system divided by 4
                     480                             ; SOURCE LINE # 102
0010 90E0EC          481             MOV     DPTR,#0E0ECH
0013 E0              482             MOVX    A,@DPTR
0014 FF              483             MOV     R7,A
0015 EF              484             MOV     A,R7
0016 4403            485             ORL     A,#03H
0018 FF              486             MOV     R7,A
0019 EF              487             MOV     A,R7
001A F0              488             MOVX    @DPTR,A
                     489     ;     ADCHS = 0x0f;                                             // select channel CH1-CH4
                     490                             ; SOURCE LINE # 103
001B 90E05C          491             MOV     DPTR,#0E05CH
001E 740F            492             MOV     A,#0FH
0020 F0              493             MOVX    @DPTR,A
                     494     ;               
                     495     ;       
                     496     ;       
                     497     ;               DAC1_PD = 1;                                            // DAC12 down
                     498                             ; SOURCE LINE # 107
0021 90E07A          499             MOV     DPTR,#0E07AH
0024 E0              500             MOVX    A,@DPTR
0025 FF              501             MOV     R7,A
0026 EF              502             MOV     A,R7
0027 4404            503             ORL     A,#04H
0029 FF              504             MOV     R7,A
002A EF              505             MOV     A,R7
002B F0              506             MOVX    @DPTR,A
                     507     ;               DAC2_PD = 1;
                     508                             ; SOURCE LINE # 108
002C 90E07A          509             MOV     DPTR,#0E07AH
002F E0              510             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE     9

0030 FF              511             MOV     R7,A
0031 EF              512             MOV     A,R7
0032 4401            513             ORL     A,#01H
0034 FF              514             MOV     R7,A
0035 EF              515             MOV     A,R7
0036 F0              516             MOVX    @DPTR,A
                     517     ;       
                     518     ;       
                     519     ;       
                     520     ;               C1PDO1PD=CFG2;                                                          //C
                             OMP1 power off and OP1 power on
                     521                             ; SOURCE LINE # 112
0037 90E0A4          522             MOV     DPTR,#0E0A4H
003A E0              523             MOVX    A,@DPTR
003B FF              524             MOV     R7,A
003C EF              525             MOV     A,R7
003D 54FC            526             ANL     A,#0FCH
003F FF              527             MOV     R7,A
0040 EF              528             MOV     A,R7
0041 4402            529             ORL     A,#02H
0043 FF              530             MOV     R7,A
0044 EF              531             MOV     A,R7
0045 F0              532             MOVX    @DPTR,A
                     533     ;               C2PDO2PD=CFG2;                                                          //C
                             OMP2 power off and OP2 power on
                     534                             ; SOURCE LINE # 113
0046 90E0A4          535             MOV     DPTR,#0E0A4H
0049 E0              536             MOVX    A,@DPTR
004A FF              537             MOV     R7,A
004B EF              538             MOV     A,R7
004C 54F3            539             ANL     A,#0F3H
004E FF              540             MOV     R7,A
004F EF              541             MOV     A,R7
0050 4408            542             ORL     A,#08H
0052 FF              543             MOV     R7,A
0053 EF              544             MOV     A,R7
0054 F0              545             MOVX    @DPTR,A
                     546     ;               C3PDO3PD=CFG2;                                                          //C
                             OMP3 power off and OP3 power on
                     547                             ; SOURCE LINE # 114
0055 90E0A4          548             MOV     DPTR,#0E0A4H
0058 E0              549             MOVX    A,@DPTR
0059 FF              550             MOV     R7,A
005A EF              551             MOV     A,R7
005B 54CF            552             ANL     A,#0CFH
005D FF              553             MOV     R7,A
005E EF              554             MOV     A,R7
005F 4420            555             ORL     A,#020H
0061 FF              556             MOV     R7,A
0062 EF              557             MOV     A,R7
0063 F0              558             MOVX    @DPTR,A
                     559     ;       
                     560     ;       
                     561     ;               LDO25_PD=0;             //use internal 2.5V for AD VREF
                     562                             ; SOURCE LINE # 117
0064 90E09D          563             MOV     DPTR,#0E09DH
0067 E0              564             MOVX    A,@DPTR
0068 FF              565             MOV     R7,A
0069 EF              566             MOV     A,R7
006A 54FD            567             ANL     A,#0FDH
006C FF              568             MOV     R7,A
006D EF              569             MOV     A,R7
006E F0              570             MOVX    @DPTR,A
                     571     ;               BP4=0;                  //CH4 normal and no bypass
                     572                             ; SOURCE LINE # 118
006F 90E05D          573             MOV     DPTR,#0E05DH
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    10

0072 E0              574             MOVX    A,@DPTR
0073 FF              575             MOV     R7,A
0074 EF              576             MOV     A,R7
0075 54F7            577             ANL     A,#0F7H
0077 FF              578             MOV     R7,A
0078 EF              579             MOV     A,R7
0079 F0              580             MOVX    @DPTR,A
                     581     ;       
                     582     ;               SWFTRG=1;
                     583                             ; SOURCE LINE # 120
007A 90E05A          584             MOV     DPTR,#0E05AH
007D E0              585             MOVX    A,@DPTR
007E FF              586             MOV     R7,A
007F EF              587             MOV     A,R7
0080 4420            588             ORL     A,#020H
0082 FF              589             MOV     R7,A
0083 EF              590             MOV     A,R7
0084 F0              591             MOVX    @DPTR,A
                     592     ;         INTEN=1;
                     593                             ; SOURCE LINE # 121
0085 90E05A          594             MOV     DPTR,#0E05AH
0088 E0              595             MOVX    A,@DPTR
0089 FF              596             MOV     R7,A
008A EF              597             MOV     A,R7
008B 4401            598             ORL     A,#01H
008D FF              599             MOV     R7,A
008E EF              600             MOV     A,R7
008F F0              601             MOVX    @DPTR,A
                     602     ;               AD4OST=0x0000;                                  //AD offset   0xFC
                     603                             ; SOURCE LINE # 122
0090 90E064          604             MOV     DPTR,#0E064H
0093 E4              605             CLR     A
0094 F0              606             MOVX    @DPTR,A
0095 A3              607             INC     DPTR
0096 E4              608             CLR     A
0097 F0              609             MOVX    @DPTR,A
                     610     ; 
                     611     ;       
                     612     ;       
                     613     ;               EADC=1;
                     614                             ; SOURCE LINE # 126
0098 D2B8            615             SETB    EADC
                     616     ;               IADC=0;
                     617                             ; SOURCE LINE # 127
009A C2C0            618             CLR     IADC
                     619     ; 
                     620     ;       }
                     621                             ; SOURCE LINE # 129
009C                 622     ?C0006:
009C 22              623             RET     
                     624     ; END OF InitADC
                     625     
                     626     ; 
                     627     ; 
                     628     ; void Initepwm(void)
                     629     
----                 630             RSEG  ?PR?Initepwm?INITIAL
0000                 631     Initepwm:
                     632             USING   0
                     633                             ; SOURCE LINE # 132
                     634     ; {
                     635                             ; SOURCE LINE # 133
                     636     ;       
                     637     ;       
                     638     ;       // config IO for ePWM output
                     639     ; 
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    11

                     640     ;       P22_FN=CFG1;          //P22 output  PWM3B
                     641                             ; SOURCE LINE # 138
0000 90E0E1          642             MOV     DPTR,#0E0E1H
0003 E0              643             MOVX    A,@DPTR
0004 FF              644             MOV     R7,A
0005 EF              645             MOV     A,R7
0006 54CF            646             ANL     A,#0CFH
0008 FF              647             MOV     R7,A
0009 EF              648             MOV     A,R7
000A 4410            649             ORL     A,#010H
000C FF              650             MOV     R7,A
000D EF              651             MOV     A,R7
000E F0              652             MOVX    @DPTR,A
                     653     ;       P23_FN=CFG1;                                    //P23 output  PWM3A
                     654                             ; SOURCE LINE # 139
000F 90E0E1          655             MOV     DPTR,#0E0E1H
0012 E0              656             MOVX    A,@DPTR
0013 FF              657             MOV     R7,A
0014 EF              658             MOV     A,R7
0015 543F            659             ANL     A,#03FH
0017 FF              660             MOV     R7,A
0018 EF              661             MOV     A,R7
0019 4440            662             ORL     A,#040H
001B FF              663             MOV     R7,A
001C EF              664             MOV     A,R7
001D F0              665             MOVX    @DPTR,A
                     666     ;       
                     667     ;       P24_FN=CFG1;          //P24 output  PWM2B
                     668                             ; SOURCE LINE # 141
001E 90E0E0          669             MOV     DPTR,#0E0E0H
0021 E0              670             MOVX    A,@DPTR
0022 FF              671             MOV     R7,A
0023 EF              672             MOV     A,R7
0024 54FC            673             ANL     A,#0FCH
0026 FF              674             MOV     R7,A
0027 EF              675             MOV     A,R7
0028 4401            676             ORL     A,#01H
002A FF              677             MOV     R7,A
002B EF              678             MOV     A,R7
002C F0              679             MOVX    @DPTR,A
                     680     ;       P25_FN=CFG1;                                    //P25 output  PWM2A
                     681                             ; SOURCE LINE # 142
002D 90E0E0          682             MOV     DPTR,#0E0E0H
0030 E0              683             MOVX    A,@DPTR
0031 FF              684             MOV     R7,A
0032 EF              685             MOV     A,R7
0033 54F3            686             ANL     A,#0F3H
0035 FF              687             MOV     R7,A
0036 EF              688             MOV     A,R7
0037 4404            689             ORL     A,#04H
0039 FF              690             MOV     R7,A
003A EF              691             MOV     A,R7
003B F0              692             MOVX    @DPTR,A
                     693     ;       
                     694     ;       P26_FN=CFG1;                                    //P26 output  PWM1B
                     695                             ; SOURCE LINE # 144
003C 90E0E0          696             MOV     DPTR,#0E0E0H
003F E0              697             MOVX    A,@DPTR
0040 FF              698             MOV     R7,A
0041 EF              699             MOV     A,R7
0042 54CF            700             ANL     A,#0CFH
0044 FF              701             MOV     R7,A
0045 EF              702             MOV     A,R7
0046 4410            703             ORL     A,#010H
0048 FF              704             MOV     R7,A
0049 EF              705             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    12

004A F0              706             MOVX    @DPTR,A
                     707     ;       P27_FN=CFG1;          //P27 output  PWM1A
                     708                             ; SOURCE LINE # 145
004B 90E0E0          709             MOV     DPTR,#0E0E0H
004E E0              710             MOVX    A,@DPTR
004F FF              711             MOV     R7,A
0050 EF              712             MOV     A,R7
0051 543F            713             ANL     A,#03FH
0053 FF              714             MOV     R7,A
0054 EF              715             MOV     A,R7
0055 4440            716             ORL     A,#040H
0057 FF              717             MOV     R7,A
0058 EF              718             MOV     A,R7
0059 F0              719             MOVX    @DPTR,A
                     720     ;       
                     721     ; //    P00_FN=CFG1;                                    //P00 output  PWM4B
                     722     ; //  P01_FN=CFG1;          //P01 output  PWM4A 
                     723     ; 
                     724     ; 
                     725     ; // set period 
                     726     ; 
                     727     ;       P1TBPRD =       0x0190;                                         // 400 step per pwm
                              period or 10KHz
                     728                             ; SOURCE LINE # 153
005A 75A201          729             MOV     P1TBPRD+01H,#01H
005D 75A190          730             MOV     P1TBPRD,#090H
                     731     ;       P2TBPRD = 0x0190;
                     732                             ; SOURCE LINE # 154
0060 75C201          733             MOV     P2TBPRD+01H,#01H
0063 75C190          734             MOV     P2TBPRD,#090H
                     735     ;       P3TBPRD = 0x0190;
                     736                             ; SOURCE LINE # 155
0066 75D201          737             MOV     P3TBPRD+01H,#01H
0069 75D190          738             MOV     P3TBPRD,#090H
                     739     ;       P4TBPRD = 0x0190;
                     740                             ; SOURCE LINE # 156
006C 75E201          741             MOV     P4TBPRD+01H,#01H
006F 75E190          742             MOV     P4TBPRD,#090H
                     743     ; 
                     744     ;       
                     745     ; //enable epwm clock 
                     746     ;       
                     747     ;       
                     748     ;       EPWM1_ENCLK =1;                                                 // clock for pwm1 ~
                              pwm4 is enable,and synchronize all channel disable
                     749                             ; SOURCE LINE # 162
0072 90E000          750             MOV     DPTR,#0E000H
0075 E0              751             MOVX    A,@DPTR
0076 FF              752             MOV     R7,A
0077 EF              753             MOV     A,R7
0078 4402            754             ORL     A,#02H
007A FF              755             MOV     R7,A
007B EF              756             MOV     A,R7
007C F0              757             MOVX    @DPTR,A
                     758     ;       EPWM2_ENCLK     =1;
                     759                             ; SOURCE LINE # 163
007D 90E000          760             MOV     DPTR,#0E000H
0080 E0              761             MOVX    A,@DPTR
0081 FF              762             MOV     R7,A
0082 EF              763             MOV     A,R7
0083 4404            764             ORL     A,#04H
0085 FF              765             MOV     R7,A
0086 EF              766             MOV     A,R7
0087 F0              767             MOVX    @DPTR,A
                     768     ;       EPWM3_ENCLK =1;
                     769                             ; SOURCE LINE # 164
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    13

0088 90E000          770             MOV     DPTR,#0E000H
008B E0              771             MOVX    A,@DPTR
008C FF              772             MOV     R7,A
008D EF              773             MOV     A,R7
008E 4408            774             ORL     A,#08H
0090 FF              775             MOV     R7,A
0091 EF              776             MOV     A,R7
0092 F0              777             MOVX    @DPTR,A
                     778     ;       EPWM4_ENCLK =1;
                     779                             ; SOURCE LINE # 165
0093 90E000          780             MOV     DPTR,#0E000H
0096 E0              781             MOVX    A,@DPTR
0097 FF              782             MOV     R7,A
0098 EF              783             MOV     A,R7
0099 4410            784             ORL     A,#010H
009B FF              785             MOV     R7,A
009C EF              786             MOV     A,R7
009D F0              787             MOVX    @DPTR,A
                     788     ;       TBCLKSYNC=0;
                     789                             ; SOURCE LINE # 166
009E 90E000          790             MOV     DPTR,#0E000H
00A1 E0              791             MOVX    A,@DPTR
00A2 FF              792             MOV     R7,A
00A3 EF              793             MOV     A,R7
00A4 54FE            794             ANL     A,#0FEH
00A6 FF              795             MOV     R7,A
00A7 EF              796             MOV     A,R7
00A8 F0              797             MOVX    @DPTR,A
                     798     ;       
                     799     ;       
                     800     ;       //pwm count up or down
                     801     ;       
                     802     ;       P1CTRMODE=TB_COUNT_UPDOWN;     // period load from shadow,up down mode,synchronize 
                             at CTR = ZERO
                     803                             ; SOURCE LINE # 171
00A9 90E003          804             MOV     DPTR,#0E003H
00AC E0              805             MOVX    A,@DPTR
00AD FF              806             MOV     R7,A
00AE EF              807             MOV     A,R7
00AF 54FC            808             ANL     A,#0FCH
00B1 FF              809             MOV     R7,A
00B2 EF              810             MOV     A,R7
00B3 4402            811             ORL     A,#02H
00B5 FF              812             MOV     R7,A
00B6 EF              813             MOV     A,R7
00B7 F0              814             MOVX    @DPTR,A
                     815     ;       P2CTRMODE=TB_COUNT_UPDOWN;
                     816                             ; SOURCE LINE # 172
00B8 90E019          817             MOV     DPTR,#0E019H
00BB E0              818             MOVX    A,@DPTR
00BC FF              819             MOV     R7,A
00BD EF              820             MOV     A,R7
00BE 54FC            821             ANL     A,#0FCH
00C0 FF              822             MOV     R7,A
00C1 EF              823             MOV     A,R7
00C2 4402            824             ORL     A,#02H
00C4 FF              825             MOV     R7,A
00C5 EF              826             MOV     A,R7
00C6 F0              827             MOVX    @DPTR,A
                     828     ;       P3CTRMODE=TB_COUNT_UPDOWN;
                     829                             ; SOURCE LINE # 173
00C7 90E02F          830             MOV     DPTR,#0E02FH
00CA E0              831             MOVX    A,@DPTR
00CB FF              832             MOV     R7,A
00CC EF              833             MOV     A,R7
00CD 54FC            834             ANL     A,#0FCH
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    14

00CF FF              835             MOV     R7,A
00D0 EF              836             MOV     A,R7
00D1 4402            837             ORL     A,#02H
00D3 FF              838             MOV     R7,A
00D4 EF              839             MOV     A,R7
00D5 F0              840             MOVX    @DPTR,A
                     841     ;       P4CTRMODE=TB_COUNT_UPDOWN;
                     842                             ; SOURCE LINE # 174
00D6 90E045          843             MOV     DPTR,#0E045H
00D9 E0              844             MOVX    A,@DPTR
00DA FF              845             MOV     R7,A
00DB EF              846             MOV     A,R7
00DC 54FC            847             ANL     A,#0FCH
00DE FF              848             MOV     R7,A
00DF EF              849             MOV     A,R7
00E0 4402            850             ORL     A,#02H
00E2 FF              851             MOV     R7,A
00E3 EF              852             MOV     A,R7
00E4 F0              853             MOVX    @DPTR,A
                     854     ;       
                     855     ;       
                     856     ;       P1PRDLD=TB_SHADOW;
                     857                             ; SOURCE LINE # 177
00E5 90E003          858             MOV     DPTR,#0E003H
00E8 E0              859             MOVX    A,@DPTR
00E9 FF              860             MOV     R7,A
00EA EF              861             MOV     A,R7
00EB 54F7            862             ANL     A,#0F7H
00ED FF              863             MOV     R7,A
00EE EF              864             MOV     A,R7
00EF F0              865             MOVX    @DPTR,A
                     866     ;       
                     867     ;       
                     868     ;       //time base free run or emulation 
                     869     ;       
                     870     ;       P1FREE_SOFT=FREE_RUN;                                                   // time bas
                             e free run when emulation
                     871                             ; SOURCE LINE # 182
00F0 90E002          872             MOV     DPTR,#0E002H
00F3 E0              873             MOVX    A,@DPTR
00F4 FF              874             MOV     R7,A
00F5 EF              875             MOV     A,R7
00F6 543F            876             ANL     A,#03FH
00F8 FF              877             MOV     R7,A
00F9 EF              878             MOV     A,R7
00FA 4480            879             ORL     A,#080H
00FC FF              880             MOV     R7,A
00FD EF              881             MOV     A,R7
00FE F0              882             MOVX    @DPTR,A
                     883     ;       P2FREE_SOFT=FREE_RUN;
                     884                             ; SOURCE LINE # 183
00FF 90E018          885             MOV     DPTR,#0E018H
0102 E0              886             MOVX    A,@DPTR
0103 FF              887             MOV     R7,A
0104 EF              888             MOV     A,R7
0105 543F            889             ANL     A,#03FH
0107 FF              890             MOV     R7,A
0108 EF              891             MOV     A,R7
0109 4480            892             ORL     A,#080H
010B FF              893             MOV     R7,A
010C EF              894             MOV     A,R7
010D F0              895             MOVX    @DPTR,A
                     896     ;       P3FREE_SOFT=FREE_RUN;
                     897                             ; SOURCE LINE # 184
010E 90E02E          898             MOV     DPTR,#0E02EH
0111 E0              899             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    15

0112 FF              900             MOV     R7,A
0113 EF              901             MOV     A,R7
0114 543F            902             ANL     A,#03FH
0116 FF              903             MOV     R7,A
0117 EF              904             MOV     A,R7
0118 4480            905             ORL     A,#080H
011A FF              906             MOV     R7,A
011B EF              907             MOV     A,R7
011C F0              908             MOVX    @DPTR,A
                     909     ;       P4FREE_SOFT=FREE_RUN;
                     910                             ; SOURCE LINE # 185
011D 90E044          911             MOV     DPTR,#0E044H
0120 E0              912             MOVX    A,@DPTR
0121 FF              913             MOV     R7,A
0122 EF              914             MOV     A,R7
0123 543F            915             ANL     A,#03FH
0125 FF              916             MOV     R7,A
0126 EF              917             MOV     A,R7
0127 4480            918             ORL     A,#080H
0129 FF              919             MOV     R7,A
012A EF              920             MOV     A,R7
012B F0              921             MOVX    @DPTR,A
                     922     ; 
                     923     ; // shadow register load mode
                     924     ; 
                     925     ; 
                     926     ;       P1SHDWA_MODE = CC_SHADOW;;                                              // shadow o
                             n,update at CTR = ZERO
                     927                             ; SOURCE LINE # 190
012C 90E007          928             MOV     DPTR,#0E007H
012F E0              929             MOVX    A,@DPTR
0130 FF              930             MOV     R7,A
0131 EF              931             MOV     A,R7
0132 54EF            932             ANL     A,#0EFH
0134 FF              933             MOV     R7,A
0135 EF              934             MOV     A,R7
0136 F0              935             MOVX    @DPTR,A
                     936     ;       P1SHDWB_MODE = CC_SHADOW;
                     937                             ; SOURCE LINE # 191
0137 90E007          938             MOV     DPTR,#0E007H
013A E0              939             MOVX    A,@DPTR
013B FF              940             MOV     R7,A
013C EF              941             MOV     A,R7
013D 54DF            942             ANL     A,#0DFH
013F FF              943             MOV     R7,A
0140 EF              944             MOV     A,R7
0141 F0              945             MOVX    @DPTR,A
                     946     ;       P1LOADA_MODE = CC_CTR_ZERO;
                     947                             ; SOURCE LINE # 192
0142 90E007          948             MOV     DPTR,#0E007H
0145 E0              949             MOVX    A,@DPTR
0146 FF              950             MOV     R7,A
0147 EF              951             MOV     A,R7
0148 54FC            952             ANL     A,#0FCH
014A FF              953             MOV     R7,A
014B EF              954             MOV     A,R7
014C F0              955             MOVX    @DPTR,A
                     956     ;       P1LOADB_MODE = CC_CTR_ZERO;
                     957                             ; SOURCE LINE # 193
014D 90E007          958             MOV     DPTR,#0E007H
0150 E0              959             MOVX    A,@DPTR
0151 FF              960             MOV     R7,A
0152 EF              961             MOV     A,R7
0153 54F3            962             ANL     A,#0F3H
0155 FF              963             MOV     R7,A
0156 EF              964             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    16

0157 F0              965             MOVX    @DPTR,A
                     966     ;       
                     967     ;       P2SHDWA_MODE = CC_SHADOW;;                                              // shadow o
                             n,update at CTR = ZERO
                     968                             ; SOURCE LINE # 195
0158 90E01D          969             MOV     DPTR,#0E01DH
015B E0              970             MOVX    A,@DPTR
015C FF              971             MOV     R7,A
015D EF              972             MOV     A,R7
015E 54EF            973             ANL     A,#0EFH
0160 FF              974             MOV     R7,A
0161 EF              975             MOV     A,R7
0162 F0              976             MOVX    @DPTR,A
                     977     ;       P2SHDWB_MODE = CC_SHADOW;
                     978                             ; SOURCE LINE # 196
0163 90E01D          979             MOV     DPTR,#0E01DH
0166 E0              980             MOVX    A,@DPTR
0167 FF              981             MOV     R7,A
0168 EF              982             MOV     A,R7
0169 54DF            983             ANL     A,#0DFH
016B FF              984             MOV     R7,A
016C EF              985             MOV     A,R7
016D F0              986             MOVX    @DPTR,A
                     987     ;       P2LOADA_MODE = CC_CTR_ZERO;
                     988                             ; SOURCE LINE # 197
016E 90E01D          989             MOV     DPTR,#0E01DH
0171 E0              990             MOVX    A,@DPTR
0172 FF              991             MOV     R7,A
0173 EF              992             MOV     A,R7
0174 54FC            993             ANL     A,#0FCH
0176 FF              994             MOV     R7,A
0177 EF              995             MOV     A,R7
0178 F0              996             MOVX    @DPTR,A
                     997     ;       P2LOADB_MODE = CC_CTR_ZERO;
                     998                             ; SOURCE LINE # 198
0179 90E01D          999             MOV     DPTR,#0E01DH
017C E0             1000             MOVX    A,@DPTR
017D FF             1001             MOV     R7,A
017E EF             1002             MOV     A,R7
017F 54F3           1003             ANL     A,#0F3H
0181 FF             1004             MOV     R7,A
0182 EF             1005             MOV     A,R7
0183 F0             1006             MOVX    @DPTR,A
                    1007     ;       
                    1008     ;       P3SHDWA_MODE = CC_SHADOW;;                                              // shadow o
                             n,update at CTR = ZERO
                    1009                             ; SOURCE LINE # 200
0184 90E033         1010             MOV     DPTR,#0E033H
0187 E0             1011             MOVX    A,@DPTR
0188 FF             1012             MOV     R7,A
0189 EF             1013             MOV     A,R7
018A 54EF           1014             ANL     A,#0EFH
018C FF             1015             MOV     R7,A
018D EF             1016             MOV     A,R7
018E F0             1017             MOVX    @DPTR,A
                    1018     ;       P3SHDWB_MODE = CC_SHADOW;
                    1019                             ; SOURCE LINE # 201
018F 90E033         1020             MOV     DPTR,#0E033H
0192 E0             1021             MOVX    A,@DPTR
0193 FF             1022             MOV     R7,A
0194 EF             1023             MOV     A,R7
0195 54DF           1024             ANL     A,#0DFH
0197 FF             1025             MOV     R7,A
0198 EF             1026             MOV     A,R7
0199 F0             1027             MOVX    @DPTR,A
                    1028     ;       P3LOADA_MODE = CC_CTR_ZERO;
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    17

                    1029                             ; SOURCE LINE # 202
019A 90E033         1030             MOV     DPTR,#0E033H
019D E0             1031             MOVX    A,@DPTR
019E FF             1032             MOV     R7,A
019F EF             1033             MOV     A,R7
01A0 54FC           1034             ANL     A,#0FCH
01A2 FF             1035             MOV     R7,A
01A3 EF             1036             MOV     A,R7
01A4 F0             1037             MOVX    @DPTR,A
                    1038     ;       P3LOADB_MODE = CC_CTR_ZERO;
                    1039                             ; SOURCE LINE # 203
01A5 90E033         1040             MOV     DPTR,#0E033H
01A8 E0             1041             MOVX    A,@DPTR
01A9 FF             1042             MOV     R7,A
01AA EF             1043             MOV     A,R7
01AB 54F3           1044             ANL     A,#0F3H
01AD FF             1045             MOV     R7,A
01AE EF             1046             MOV     A,R7
01AF F0             1047             MOVX    @DPTR,A
                    1048     ;       
                    1049     ;       P4SHDWA_MODE = CC_SHADOW;;                                              // shadow o
                             n,update at CTR = ZERO
                    1050                             ; SOURCE LINE # 205
01B0 90E049         1051             MOV     DPTR,#0E049H
01B3 E0             1052             MOVX    A,@DPTR
01B4 FF             1053             MOV     R7,A
01B5 EF             1054             MOV     A,R7
01B6 54EF           1055             ANL     A,#0EFH
01B8 FF             1056             MOV     R7,A
01B9 EF             1057             MOV     A,R7
01BA F0             1058             MOVX    @DPTR,A
                    1059     ;       P4SHDWB_MODE = CC_SHADOW;
                    1060                             ; SOURCE LINE # 206
01BB 90E049         1061             MOV     DPTR,#0E049H
01BE E0             1062             MOVX    A,@DPTR
01BF FF             1063             MOV     R7,A
01C0 EF             1064             MOV     A,R7
01C1 54DF           1065             ANL     A,#0DFH
01C3 FF             1066             MOV     R7,A
01C4 EF             1067             MOV     A,R7
01C5 F0             1068             MOVX    @DPTR,A
                    1069     ;       P4LOADA_MODE = CC_CTR_ZERO;
                    1070                             ; SOURCE LINE # 207
01C6 90E049         1071             MOV     DPTR,#0E049H
01C9 E0             1072             MOVX    A,@DPTR
01CA FF             1073             MOV     R7,A
01CB EF             1074             MOV     A,R7
01CC 54FC           1075             ANL     A,#0FCH
01CE FF             1076             MOV     R7,A
01CF EF             1077             MOV     A,R7
01D0 F0             1078             MOVX    @DPTR,A
                    1079     ;       P4LOADB_MODE = CC_CTR_ZERO;
                    1080                             ; SOURCE LINE # 208
01D1 90E049         1081             MOV     DPTR,#0E049H
01D4 E0             1082             MOVX    A,@DPTR
01D5 FF             1083             MOV     R7,A
01D6 EF             1084             MOV     A,R7
01D7 54F3           1085             ANL     A,#0F3H
01D9 FF             1086             MOV     R7,A
01DA EF             1087             MOV     A,R7
01DB F0             1088             MOVX    @DPTR,A
                    1089     ;       
                    1090     ;       
                    1091     ;       
                    1092     ;       //PWMxA waveform counter condition
                    1093     ;       // when counter count up to cmpA value, PWMxA output is set high, when counter coun
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    18

                             t down to cmpA value, PWMxA output is clear
                    1094     ;       // when cmpB is disable 
                    1095     ;       
                    1096     ;       P1CADA=AQ_CLEAR;                    
                    1097                             ; SOURCE LINE # 216
01DC 90E009         1098             MOV     DPTR,#0E009H
01DF E0             1099             MOVX    A,@DPTR
01E0 FF             1100             MOV     R7,A
01E1 EF             1101             MOV     A,R7
01E2 543F           1102             ANL     A,#03FH
01E4 FF             1103             MOV     R7,A
01E5 EF             1104             MOV     A,R7
01E6 4440           1105             ORL     A,#040H
01E8 FF             1106             MOV     R7,A
01E9 EF             1107             MOV     A,R7
01EA F0             1108             MOVX    @DPTR,A
                    1109     ;       P1CAUA=AQ_SET;
                    1110                             ; SOURCE LINE # 217
01EB 90E009         1111             MOV     DPTR,#0E009H
01EE E0             1112             MOVX    A,@DPTR
01EF FF             1113             MOV     R7,A
01F0 EF             1114             MOV     A,R7
01F1 54CF           1115             ANL     A,#0CFH
01F3 FF             1116             MOV     R7,A
01F4 EF             1117             MOV     A,R7
01F5 4420           1118             ORL     A,#020H
01F7 FF             1119             MOV     R7,A
01F8 EF             1120             MOV     A,R7
01F9 F0             1121             MOVX    @DPTR,A
                    1122     ;       P1CBDA=AQ_NO_ACTION;                
                    1123                             ; SOURCE LINE # 218
01FA 90E008         1124             MOV     DPTR,#0E008H
01FD E0             1125             MOVX    A,@DPTR
01FE FF             1126             MOV     R7,A
01FF EF             1127             MOV     A,R7
0200 54F3           1128             ANL     A,#0F3H
0202 FF             1129             MOV     R7,A
0203 EF             1130             MOV     A,R7
0204 F0             1131             MOVX    @DPTR,A
                    1132     ;       P1CBUA=AQ_NO_ACTION;
                    1133                             ; SOURCE LINE # 219
0205 90E008         1134             MOV     DPTR,#0E008H
0208 E0             1135             MOVX    A,@DPTR
0209 FF             1136             MOV     R7,A
020A EF             1137             MOV     A,R7
020B 54FC           1138             ANL     A,#0FCH
020D FF             1139             MOV     R7,A
020E EF             1140             MOV     A,R7
020F F0             1141             MOVX    @DPTR,A
                    1142     ;       P1PRDA=AQ_NO_ACTION;
                    1143                             ; SOURCE LINE # 220
0210 90E009         1144             MOV     DPTR,#0E009H
0213 E0             1145             MOVX    A,@DPTR
0214 FF             1146             MOV     R7,A
0215 EF             1147             MOV     A,R7
0216 54F3           1148             ANL     A,#0F3H
0218 FF             1149             MOV     R7,A
0219 EF             1150             MOV     A,R7
021A F0             1151             MOVX    @DPTR,A
                    1152     ;       P1ZROA=AQ_NO_ACTION;
                    1153                             ; SOURCE LINE # 221
021B 90E009         1154             MOV     DPTR,#0E009H
021E E0             1155             MOVX    A,@DPTR
021F FF             1156             MOV     R7,A
0220 EF             1157             MOV     A,R7
0221 54FC           1158             ANL     A,#0FCH
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    19

0223 FF             1159             MOV     R7,A
0224 EF             1160             MOV     A,R7
0225 F0             1161             MOVX    @DPTR,A
                    1162     ;       
                    1163     ;       P2CADA=AQ_CLEAR;                    
                    1164                             ; SOURCE LINE # 223
0226 90E01F         1165             MOV     DPTR,#0E01FH
0229 E0             1166             MOVX    A,@DPTR
022A FF             1167             MOV     R7,A
022B EF             1168             MOV     A,R7
022C 543F           1169             ANL     A,#03FH
022E FF             1170             MOV     R7,A
022F EF             1171             MOV     A,R7
0230 4440           1172             ORL     A,#040H
0232 FF             1173             MOV     R7,A
0233 EF             1174             MOV     A,R7
0234 F0             1175             MOVX    @DPTR,A
                    1176     ;       P2CAUA=AQ_SET;
                    1177                             ; SOURCE LINE # 224
0235 90E01F         1178             MOV     DPTR,#0E01FH
0238 E0             1179             MOVX    A,@DPTR
0239 FF             1180             MOV     R7,A
023A EF             1181             MOV     A,R7
023B 54CF           1182             ANL     A,#0CFH
023D FF             1183             MOV     R7,A
023E EF             1184             MOV     A,R7
023F 4420           1185             ORL     A,#020H
0241 FF             1186             MOV     R7,A
0242 EF             1187             MOV     A,R7
0243 F0             1188             MOVX    @DPTR,A
                    1189     ;       P2CBDA=AQ_NO_ACTION;                     
                    1190                             ; SOURCE LINE # 225
0244 90E01E         1191             MOV     DPTR,#0E01EH
0247 E0             1192             MOVX    A,@DPTR
0248 FF             1193             MOV     R7,A
0249 EF             1194             MOV     A,R7
024A 54F3           1195             ANL     A,#0F3H
024C FF             1196             MOV     R7,A
024D EF             1197             MOV     A,R7
024E F0             1198             MOVX    @DPTR,A
                    1199     ;       P2CBUA=AQ_NO_ACTION;
                    1200                             ; SOURCE LINE # 226
024F 90E01E         1201             MOV     DPTR,#0E01EH
0252 E0             1202             MOVX    A,@DPTR
0253 FF             1203             MOV     R7,A
0254 EF             1204             MOV     A,R7
0255 54FC           1205             ANL     A,#0FCH
0257 FF             1206             MOV     R7,A
0258 EF             1207             MOV     A,R7
0259 F0             1208             MOVX    @DPTR,A
                    1209     ;       P2PRDA=AQ_NO_ACTION;
                    1210                             ; SOURCE LINE # 227
025A 90E01F         1211             MOV     DPTR,#0E01FH
025D E0             1212             MOVX    A,@DPTR
025E FF             1213             MOV     R7,A
025F EF             1214             MOV     A,R7
0260 54F3           1215             ANL     A,#0F3H
0262 FF             1216             MOV     R7,A
0263 EF             1217             MOV     A,R7
0264 F0             1218             MOVX    @DPTR,A
                    1219     ;       P2ZROA=AQ_NO_ACTION;
                    1220                             ; SOURCE LINE # 228
0265 90E01F         1221             MOV     DPTR,#0E01FH
0268 E0             1222             MOVX    A,@DPTR
0269 FF             1223             MOV     R7,A
026A EF             1224             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    20

026B 54FC           1225             ANL     A,#0FCH
026D FF             1226             MOV     R7,A
026E EF             1227             MOV     A,R7
026F F0             1228             MOVX    @DPTR,A
                    1229     ;       
                    1230     ;       
                    1231     ;       P3CADA=AQ_CLEAR;                     
                    1232                             ; SOURCE LINE # 231
0270 90E035         1233             MOV     DPTR,#0E035H
0273 E0             1234             MOVX    A,@DPTR
0274 FF             1235             MOV     R7,A
0275 EF             1236             MOV     A,R7
0276 543F           1237             ANL     A,#03FH
0278 FF             1238             MOV     R7,A
0279 EF             1239             MOV     A,R7
027A 4440           1240             ORL     A,#040H
027C FF             1241             MOV     R7,A
027D EF             1242             MOV     A,R7
027E F0             1243             MOVX    @DPTR,A
                    1244     ;       P3CAUA=AQ_SET;
                    1245                             ; SOURCE LINE # 232
027F 90E035         1246             MOV     DPTR,#0E035H
0282 E0             1247             MOVX    A,@DPTR
0283 FF             1248             MOV     R7,A
0284 EF             1249             MOV     A,R7
0285 54CF           1250             ANL     A,#0CFH
0287 FF             1251             MOV     R7,A
0288 EF             1252             MOV     A,R7
0289 4420           1253             ORL     A,#020H
028B FF             1254             MOV     R7,A
028C EF             1255             MOV     A,R7
028D F0             1256             MOVX    @DPTR,A
                    1257     ;       P3CBDA=AQ_NO_ACTION;                       
                    1258                             ; SOURCE LINE # 233
028E 90E034         1259             MOV     DPTR,#0E034H
0291 E0             1260             MOVX    A,@DPTR
0292 FF             1261             MOV     R7,A
0293 EF             1262             MOV     A,R7
0294 54F3           1263             ANL     A,#0F3H
0296 FF             1264             MOV     R7,A
0297 EF             1265             MOV     A,R7
0298 F0             1266             MOVX    @DPTR,A
                    1267     ;       P3CBUA=AQ_NO_ACTION;
                    1268                             ; SOURCE LINE # 234
0299 90E034         1269             MOV     DPTR,#0E034H
029C E0             1270             MOVX    A,@DPTR
029D FF             1271             MOV     R7,A
029E EF             1272             MOV     A,R7
029F 54FC           1273             ANL     A,#0FCH
02A1 FF             1274             MOV     R7,A
02A2 EF             1275             MOV     A,R7
02A3 F0             1276             MOVX    @DPTR,A
                    1277     ;       P3PRDA=AQ_NO_ACTION;
                    1278                             ; SOURCE LINE # 235
02A4 90E035         1279             MOV     DPTR,#0E035H
02A7 E0             1280             MOVX    A,@DPTR
02A8 FF             1281             MOV     R7,A
02A9 EF             1282             MOV     A,R7
02AA 54F3           1283             ANL     A,#0F3H
02AC FF             1284             MOV     R7,A
02AD EF             1285             MOV     A,R7
02AE F0             1286             MOVX    @DPTR,A
                    1287     ;       P3ZROA=AQ_NO_ACTION;
                    1288                             ; SOURCE LINE # 236
02AF 90E035         1289             MOV     DPTR,#0E035H
02B2 E0             1290             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    21

02B3 FF             1291             MOV     R7,A
02B4 EF             1292             MOV     A,R7
02B5 54FC           1293             ANL     A,#0FCH
02B7 FF             1294             MOV     R7,A
02B8 EF             1295             MOV     A,R7
02B9 F0             1296             MOVX    @DPTR,A
                    1297     ;       
                    1298     ;       
                    1299     ;       P4CADA=AQ_CLEAR;                     
                    1300                             ; SOURCE LINE # 239
02BA 90E04B         1301             MOV     DPTR,#0E04BH
02BD E0             1302             MOVX    A,@DPTR
02BE FF             1303             MOV     R7,A
02BF EF             1304             MOV     A,R7
02C0 543F           1305             ANL     A,#03FH
02C2 FF             1306             MOV     R7,A
02C3 EF             1307             MOV     A,R7
02C4 4440           1308             ORL     A,#040H
02C6 FF             1309             MOV     R7,A
02C7 EF             1310             MOV     A,R7
02C8 F0             1311             MOVX    @DPTR,A
                    1312     ;       P4CAUA=AQ_SET;
                    1313                             ; SOURCE LINE # 240
02C9 90E04B         1314             MOV     DPTR,#0E04BH
02CC E0             1315             MOVX    A,@DPTR
02CD FF             1316             MOV     R7,A
02CE EF             1317             MOV     A,R7
02CF 54CF           1318             ANL     A,#0CFH
02D1 FF             1319             MOV     R7,A
02D2 EF             1320             MOV     A,R7
02D3 4420           1321             ORL     A,#020H
02D5 FF             1322             MOV     R7,A
02D6 EF             1323             MOV     A,R7
02D7 F0             1324             MOVX    @DPTR,A
                    1325     ;       P4CBDA=AQ_NO_ACTION;                
                    1326                             ; SOURCE LINE # 241
02D8 90E04A         1327             MOV     DPTR,#0E04AH
02DB E0             1328             MOVX    A,@DPTR
02DC FF             1329             MOV     R7,A
02DD EF             1330             MOV     A,R7
02DE 54F3           1331             ANL     A,#0F3H
02E0 FF             1332             MOV     R7,A
02E1 EF             1333             MOV     A,R7
02E2 F0             1334             MOVX    @DPTR,A
                    1335     ;       P4CBUA=AQ_NO_ACTION;
                    1336                             ; SOURCE LINE # 242
02E3 90E04A         1337             MOV     DPTR,#0E04AH
02E6 E0             1338             MOVX    A,@DPTR
02E7 FF             1339             MOV     R7,A
02E8 EF             1340             MOV     A,R7
02E9 54FC           1341             ANL     A,#0FCH
02EB FF             1342             MOV     R7,A
02EC EF             1343             MOV     A,R7
02ED F0             1344             MOVX    @DPTR,A
                    1345     ;       P4PRDA=AQ_NO_ACTION;
                    1346                             ; SOURCE LINE # 243
02EE 90E04B         1347             MOV     DPTR,#0E04BH
02F1 E0             1348             MOVX    A,@DPTR
02F2 FF             1349             MOV     R7,A
02F3 EF             1350             MOV     A,R7
02F4 54F3           1351             ANL     A,#0F3H
02F6 FF             1352             MOV     R7,A
02F7 EF             1353             MOV     A,R7
02F8 F0             1354             MOVX    @DPTR,A
                    1355     ;       P4ZROA=AQ_NO_ACTION;
                    1356                             ; SOURCE LINE # 244
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    22

02F9 90E04B         1357             MOV     DPTR,#0E04BH
02FC E0             1358             MOVX    A,@DPTR
02FD FF             1359             MOV     R7,A
02FE EF             1360             MOV     A,R7
02FF 54FC           1361             ANL     A,#0FCH
0301 FF             1362             MOV     R7,A
0302 EF             1363             MOV     A,R7
0303 F0             1364             MOVX    @DPTR,A
                    1365     ;       
                    1366     ;       
                    1367     ;       
                    1368     ; 
                    1369     ; //    P1ZROA = AQ_SET;                                                         // CTR = Z
                             ERO set,CTR = CMPA up clear,CTR = PRD nothing,CTR = CMPA down nothing
                    1370     ; //  P1CAUA = AQ_CLEAR;
                    1371     ; //  P1PRDA = AQ_NO_ACTION;
                    1372     ; //  P1CADA = AQ_NO_ACTION;
                    1373     ; //  P1CBDA = AQ_NO_ACTION;         // when cmpB pwmxA do nothing
                    1374     ; //  P1CBUA = AQ_NO_ACTION;
                    1375     ; 
                    1376     ; 
                    1377     ; //    P1ZROA = AQ_SET;                                                        
                    1378     ; //    P1CAUA = AQ_NO_ACTION;                                                  // CTR = ZE
                             RO set,CTR = CMPA up nothing,CTR = PRD nothing,CTR = CMPA down nothing
                    1379     ; //  P1PRDA = AQ_NO_ACTION;
                    1380     ; //  P!CADA = AQ_NO_ACTION;
                    1381     ; //    P1CBUA = AQ_CLEAR;                                                      // CTR incr
                             ement upto CMPB  then clear PWMxA output
                    1382     ; //  P1CBDA = AQ_NO_ACTION;
                    1383     ; ;
                    1384     ; 
                    1385     ; 
                    1386     ;       //PWMxB waveform counter condition , PWMxB can be use seperately by setting P1OUT_M
                             ODE=DB_DISABLE
                    1387     ;       // when counter count up to cmpA value, PWMxB output is clear, when counter count d
                             own to cmpA value, PWMxB output is set,  PWMxB is complement of PWMxA
                    1388     ;       // when cmpB is disable 
                    1389     ;       
                    1390     ; //    P1CADB=AQ_SET;                    
                    1391     ; //    P1CAUB=AQ_CLEAR;
                    1392     ; //    P1CBDB=AQ_NO_ACTION;                
                    1393     ; //    P1CBUB=AQ_NO_ACTION;
                    1394     ; //    P1PRDB=AQ_NO_ACTION;
                    1395     ; //    P1ZROB=AQ_NO_ACTION;
                    1396     ;       
                    1397     ; 
                    1398     ; //Dead band generator control enable and set dead band time
                    1399     ; 
                    1400     ; 
                    1401     ;   P1OUT_MODE=DB_FULL_ENABLE;   // output is dead band full enable, rising edge delay on P
                             WMxA and falling edge delay on PWMxB
                    1402                             ; SOURCE LINE # 281
0304 90E00C         1403             MOV     DPTR,#0E00CH
0307 E0             1404             MOVX    A,@DPTR
0308 FF             1405             MOV     R7,A
0309 EF             1406             MOV     A,R7
030A 4403           1407             ORL     A,#03H
030C FF             1408             MOV     R7,A
030D EF             1409             MOV     A,R7
030E F0             1410             MOVX    @DPTR,A
                    1411     ;   P1POLSEL=DB_ACTV_HIC;        //PWMxB is inverted or active high complement
                    1412                             ; SOURCE LINE # 282
030F 90E00C         1413             MOV     DPTR,#0E00CH
0312 E0             1414             MOVX    A,@DPTR
0313 FF             1415             MOV     R7,A
0314 EF             1416             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    23

0315 54F3           1417             ANL     A,#0F3H
0317 FF             1418             MOV     R7,A
0318 EF             1419             MOV     A,R7
0319 4408           1420             ORL     A,#08H
031B FF             1421             MOV     R7,A
031C EF             1422             MOV     A,R7
031D F0             1423             MOVX    @DPTR,A
                    1424     ;   P1IN_MODE=DB_AUAD;           // rising edge delay source from epwmxA, falling edge dela
                             y source from epwmxA,
                    1425                             ; SOURCE LINE # 283
031E 90E00C         1426             MOV     DPTR,#0E00CH
0321 E0             1427             MOVX    A,@DPTR
0322 FF             1428             MOV     R7,A
0323 EF             1429             MOV     A,R7
0324 54CF           1430             ANL     A,#0CFH
0326 FF             1431             MOV     R7,A
0327 EF             1432             MOV     A,R7
0328 F0             1433             MOVX    @DPTR,A
                    1434     ; 
                    1435     ;   P2OUT_MODE=DB_FULL_ENABLE;   // output is dead band full enable, rising edge delay on P
                             WMxA and falling edge delay on PWMxB
                    1436                             ; SOURCE LINE # 285
0329 90E022         1437             MOV     DPTR,#0E022H
032C E0             1438             MOVX    A,@DPTR
032D FF             1439             MOV     R7,A
032E EF             1440             MOV     A,R7
032F 4403           1441             ORL     A,#03H
0331 FF             1442             MOV     R7,A
0332 EF             1443             MOV     A,R7
0333 F0             1444             MOVX    @DPTR,A
                    1445     ;   P2POLSEL=DB_ACTV_HIC;        //PWMxB is inverted or active high complement
                    1446                             ; SOURCE LINE # 286
0334 90E022         1447             MOV     DPTR,#0E022H
0337 E0             1448             MOVX    A,@DPTR
0338 FF             1449             MOV     R7,A
0339 EF             1450             MOV     A,R7
033A 54F3           1451             ANL     A,#0F3H
033C FF             1452             MOV     R7,A
033D EF             1453             MOV     A,R7
033E 4408           1454             ORL     A,#08H
0340 FF             1455             MOV     R7,A
0341 EF             1456             MOV     A,R7
0342 F0             1457             MOVX    @DPTR,A
                    1458     ;   P2IN_MODE=DB_AUAD;           // rising edge delay source from epwmxA, falling edge dela
                             y source from epwmxA,
                    1459                             ; SOURCE LINE # 287
0343 90E022         1460             MOV     DPTR,#0E022H
0346 E0             1461             MOVX    A,@DPTR
0347 FF             1462             MOV     R7,A
0348 EF             1463             MOV     A,R7
0349 54CF           1464             ANL     A,#0CFH
034B FF             1465             MOV     R7,A
034C EF             1466             MOV     A,R7
034D F0             1467             MOVX    @DPTR,A
                    1468     ; 
                    1469     ;   P3OUT_MODE=DB_FULL_ENABLE;   // output is dead band full enable, rising edge delay on P
                             WMxA and falling edge delay on PWMxB
                    1470                             ; SOURCE LINE # 289
034E 90E038         1471             MOV     DPTR,#0E038H
0351 E0             1472             MOVX    A,@DPTR
0352 FF             1473             MOV     R7,A
0353 EF             1474             MOV     A,R7
0354 4403           1475             ORL     A,#03H
0356 FF             1476             MOV     R7,A
0357 EF             1477             MOV     A,R7
0358 F0             1478             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    24

                    1479     ;   P3POLSEL=DB_ACTV_HIC;        //PWMxB is inverted or active high complement
                    1480                             ; SOURCE LINE # 290
0359 90E038         1481             MOV     DPTR,#0E038H
035C E0             1482             MOVX    A,@DPTR
035D FF             1483             MOV     R7,A
035E EF             1484             MOV     A,R7
035F 54F3           1485             ANL     A,#0F3H
0361 FF             1486             MOV     R7,A
0362 EF             1487             MOV     A,R7
0363 4408           1488             ORL     A,#08H
0365 FF             1489             MOV     R7,A
0366 EF             1490             MOV     A,R7
0367 F0             1491             MOVX    @DPTR,A
                    1492     ;   P3IN_MODE=DB_AUAD;           // rising edge delay source from epwmxA, falling edge dela
                             y source from epwmxA,
                    1493                             ; SOURCE LINE # 291
0368 90E038         1494             MOV     DPTR,#0E038H
036B E0             1495             MOVX    A,@DPTR
036C FF             1496             MOV     R7,A
036D EF             1497             MOV     A,R7
036E 54CF           1498             ANL     A,#0CFH
0370 FF             1499             MOV     R7,A
0371 EF             1500             MOV     A,R7
0372 F0             1501             MOVX    @DPTR,A
                    1502     ; 
                    1503     ;   P4OUT_MODE=DB_FULL_ENABLE;   // output is dead band full enable, rising edge delay on P
                             WMxA and falling edge delay on PWMxB
                    1504                             ; SOURCE LINE # 293
0373 90E04E         1505             MOV     DPTR,#0E04EH
0376 E0             1506             MOVX    A,@DPTR
0377 FF             1507             MOV     R7,A
0378 EF             1508             MOV     A,R7
0379 4403           1509             ORL     A,#03H
037B FF             1510             MOV     R7,A
037C EF             1511             MOV     A,R7
037D F0             1512             MOVX    @DPTR,A
                    1513     ;   P4POLSEL=DB_ACTV_HIC;        //PWMxB is inverted or active high complement
                    1514                             ; SOURCE LINE # 294
037E 90E04E         1515             MOV     DPTR,#0E04EH
0381 E0             1516             MOVX    A,@DPTR
0382 FF             1517             MOV     R7,A
0383 EF             1518             MOV     A,R7
0384 54F3           1519             ANL     A,#0F3H
0386 FF             1520             MOV     R7,A
0387 EF             1521             MOV     A,R7
0388 4408           1522             ORL     A,#08H
038A FF             1523             MOV     R7,A
038B EF             1524             MOV     A,R7
038C F0             1525             MOVX    @DPTR,A
                    1526     ;   P4IN_MODE=DB_AUAD;           // rising edge delay source from epwmxA, falling edge dela
                             y source from epwmxA,
                    1527                             ; SOURCE LINE # 295
038D 90E04E         1528             MOV     DPTR,#0E04EH
0390 E0             1529             MOVX    A,@DPTR
0391 FF             1530             MOV     R7,A
0392 EF             1531             MOV     A,R7
0393 54CF           1532             ANL     A,#0CFH
0395 FF             1533             MOV     R7,A
0396 EF             1534             MOV     A,R7
0397 F0             1535             MOVX    @DPTR,A
                    1536     ; 
                    1537     ; 
                    1538     ; 
                    1539     ; //    P1OUT_MODE=DB_FULL_ENABLE;                                                      // 
                             delay source is epwmxA,dead band full,epwmxA invert
                    1540     ; //    P1POLSEL=DB_ACTV_LOC;
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    25

                    1541     ; //    P1IN_MODE=DB_AUAD;
                    1542     ;  
                    1543     ; 
                    1544     ; 
                    1545     ; 
                    1546     ;   P1DBRED = 0x0032;//0x0A                                             // rise edge dead t
                             ime is 1.25uS
                    1547                             ; SOURCE LINE # 306
0398 90E00D         1548             MOV     DPTR,#0E00DH
039B E4             1549             CLR     A
039C F0             1550             MOVX    @DPTR,A
039D A3             1551             INC     DPTR
039E 7432           1552             MOV     A,#032H
03A0 F0             1553             MOVX    @DPTR,A
                    1554     ;       P2DBRED = 0x0032;
                    1555                             ; SOURCE LINE # 307
03A1 90E023         1556             MOV     DPTR,#0E023H
03A4 E4             1557             CLR     A
03A5 F0             1558             MOVX    @DPTR,A
03A6 A3             1559             INC     DPTR
03A7 7432           1560             MOV     A,#032H
03A9 F0             1561             MOVX    @DPTR,A
                    1562     ;       P3DBRED = 0x0032;
                    1563                             ; SOURCE LINE # 308
03AA 90E039         1564             MOV     DPTR,#0E039H
03AD E4             1565             CLR     A
03AE F0             1566             MOVX    @DPTR,A
03AF A3             1567             INC     DPTR
03B0 7432           1568             MOV     A,#032H
03B2 F0             1569             MOVX    @DPTR,A
                    1570     ;       P4DBRED = 0x0032;
                    1571                             ; SOURCE LINE # 309
03B3 90E04F         1572             MOV     DPTR,#0E04FH
03B6 E4             1573             CLR     A
03B7 F0             1574             MOVX    @DPTR,A
03B8 A3             1575             INC     DPTR
03B9 7432           1576             MOV     A,#032H
03BB F0             1577             MOVX    @DPTR,A
                    1578     ;       
                    1579     ;       P1DBFED = 0x0032;               // fall edge dead time is 1.25uS
                    1580                             ; SOURCE LINE # 311
03BC 90E00F         1581             MOV     DPTR,#0E00FH
03BF E4             1582             CLR     A
03C0 F0             1583             MOVX    @DPTR,A
03C1 A3             1584             INC     DPTR
03C2 7432           1585             MOV     A,#032H
03C4 F0             1586             MOVX    @DPTR,A
                    1587     ;   P2DBFED = 0x0032;
                    1588                             ; SOURCE LINE # 312
03C5 90E025         1589             MOV     DPTR,#0E025H
03C8 E4             1590             CLR     A
03C9 F0             1591             MOVX    @DPTR,A
03CA A3             1592             INC     DPTR
03CB 7432           1593             MOV     A,#032H
03CD F0             1594             MOVX    @DPTR,A
                    1595     ;   P3DBFED = 0x0032;
                    1596                             ; SOURCE LINE # 313
03CE 90E03B         1597             MOV     DPTR,#0E03BH
03D1 E4             1598             CLR     A
03D2 F0             1599             MOVX    @DPTR,A
03D3 A3             1600             INC     DPTR
03D4 7432           1601             MOV     A,#032H
03D6 F0             1602             MOVX    @DPTR,A
                    1603     ;   P4DBFED = 0x0032;
                    1604                             ; SOURCE LINE # 314
03D7 90E051         1605             MOV     DPTR,#0E051H
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    26

03DA E4             1606             CLR     A
03DB F0             1607             MOVX    @DPTR,A
03DC A3             1608             INC     DPTR
03DD 7432           1609             MOV     A,#032H
03DF F0             1610             MOVX    @DPTR,A
                    1611     ; 
                    1612     ; 
                    1613     ; //     P1OUT_MODE=DB_DISABLE;                                         // dead band is byp
                             ass
                    1614     ; //     P2OUT_MODE=DB_DISABLE;         
                    1615     ; //     P3OUT_MODE=DB_DISABLE;         
                    1616     ; //     P4OUT_MODE=DB_DISABLE;         
                    1617     ; 
                    1618     ; 
                    1619     ; 
                    1620     ; // trip zone control: OSHT ---for one time; CBC for cycle by cycle
                    1621     ; 
                    1622     ;       P1TZ_OSHT =     TZ_ENABLE;                      // OSHT enable
                    1623                             ; SOURCE LINE # 326
03E0 90E011         1624             MOV     DPTR,#0E011H
03E3 E0             1625             MOVX    A,@DPTR
03E4 FF             1626             MOV     R7,A
03E5 EF             1627             MOV     A,R7
03E6 4401           1628             ORL     A,#01H
03E8 FF             1629             MOV     R7,A
03E9 EF             1630             MOV     A,R7
03EA F0             1631             MOVX    @DPTR,A
                    1632     ;       P1TZ_CBC =   TZ_DISABLE;
                    1633                             ; SOURCE LINE # 327
03EB 90E011         1634             MOV     DPTR,#0E011H
03EE E0             1635             MOVX    A,@DPTR
03EF FF             1636             MOV     R7,A
03F0 EF             1637             MOV     A,R7
03F1 54FD           1638             ANL     A,#0FDH
03F3 FF             1639             MOV     R7,A
03F4 EF             1640             MOV     A,R7
03F5 F0             1641             MOVX    @DPTR,A
                    1642     ;       
                    1643     ;       P2TZ_OSHT =     TZ_ENABLE;                              // OSHT enable
                    1644                             ; SOURCE LINE # 329
03F6 90E027         1645             MOV     DPTR,#0E027H
03F9 E0             1646             MOVX    A,@DPTR
03FA FF             1647             MOV     R7,A
03FB EF             1648             MOV     A,R7
03FC 4401           1649             ORL     A,#01H
03FE FF             1650             MOV     R7,A
03FF EF             1651             MOV     A,R7
0400 F0             1652             MOVX    @DPTR,A
                    1653     ;       P2TZ_CBC =   TZ_DISABLE;
                    1654                             ; SOURCE LINE # 330
0401 90E027         1655             MOV     DPTR,#0E027H
0404 E0             1656             MOVX    A,@DPTR
0405 FF             1657             MOV     R7,A
0406 EF             1658             MOV     A,R7
0407 54FD           1659             ANL     A,#0FDH
0409 FF             1660             MOV     R7,A
040A EF             1661             MOV     A,R7
040B F0             1662             MOVX    @DPTR,A
                    1663     ;       
                    1664     ;       P3TZ_OSHT =     TZ_ENABLE;                              // OSHT enable
                    1665                             ; SOURCE LINE # 332
040C 90E03D         1666             MOV     DPTR,#0E03DH
040F E0             1667             MOVX    A,@DPTR
0410 FF             1668             MOV     R7,A
0411 EF             1669             MOV     A,R7
0412 4401           1670             ORL     A,#01H
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    27

0414 FF             1671             MOV     R7,A
0415 EF             1672             MOV     A,R7
0416 F0             1673             MOVX    @DPTR,A
                    1674     ;       P3TZ_CBC =   TZ_DISABLE;
                    1675                             ; SOURCE LINE # 333
0417 90E03D         1676             MOV     DPTR,#0E03DH
041A E0             1677             MOVX    A,@DPTR
041B FF             1678             MOV     R7,A
041C EF             1679             MOV     A,R7
041D 54FD           1680             ANL     A,#0FDH
041F FF             1681             MOV     R7,A
0420 EF             1682             MOV     A,R7
0421 F0             1683             MOVX    @DPTR,A
                    1684     ;       
                    1685     ;       P4TZ_OSHT =     TZ_ENABLE;                              // OSHT enable
                    1686                             ; SOURCE LINE # 335
0422 90E053         1687             MOV     DPTR,#0E053H
0425 E0             1688             MOVX    A,@DPTR
0426 FF             1689             MOV     R7,A
0427 EF             1690             MOV     A,R7
0428 4401           1691             ORL     A,#01H
042A FF             1692             MOV     R7,A
042B EF             1693             MOV     A,R7
042C F0             1694             MOVX    @DPTR,A
                    1695     ;       P4TZ_CBC =   TZ_DISABLE;
                    1696                             ; SOURCE LINE # 336
042D 90E053         1697             MOV     DPTR,#0E053H
0430 E0             1698             MOVX    A,@DPTR
0431 FF             1699             MOV     R7,A
0432 EF             1700             MOV     A,R7
0433 54FD           1701             ANL     A,#0FDH
0435 FF             1702             MOV     R7,A
0436 EF             1703             MOV     A,R7
0437 F0             1704             MOVX    @DPTR,A
                    1705     ;       
                    1706     ;       P1TZA=TZ_HIZ;              // when trigger,epwmxA high impedance
                    1707                             ; SOURCE LINE # 338
0438 90E012         1708             MOV     DPTR,#0E012H
043B E0             1709             MOVX    A,@DPTR
043C FF             1710             MOV     R7,A
043D EF             1711             MOV     A,R7
043E 54FC           1712             ANL     A,#0FCH
0440 FF             1713             MOV     R7,A
0441 EF             1714             MOV     A,R7
0442 F0             1715             MOVX    @DPTR,A
                    1716     ;       P1TZB=TZ_HIZ;              // when trigger,epwmxB high impedance
                    1717                             ; SOURCE LINE # 339
0443 90E012         1718             MOV     DPTR,#0E012H
0446 E0             1719             MOVX    A,@DPTR
0447 FF             1720             MOV     R7,A
0448 EF             1721             MOV     A,R7
0449 54F3           1722             ANL     A,#0F3H
044B FF             1723             MOV     R7,A
044C EF             1724             MOV     A,R7
044D F0             1725             MOVX    @DPTR,A
                    1726     ;       
                    1727     ;       P2TZA=TZ_HIZ;              // when trigger,epwmxA high impedance
                    1728                             ; SOURCE LINE # 341
044E 90E028         1729             MOV     DPTR,#0E028H
0451 E0             1730             MOVX    A,@DPTR
0452 FF             1731             MOV     R7,A
0453 EF             1732             MOV     A,R7
0454 54FC           1733             ANL     A,#0FCH
0456 FF             1734             MOV     R7,A
0457 EF             1735             MOV     A,R7
0458 F0             1736             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    28

                    1737     ;       P2TZB=TZ_HIZ;              // when trigger,epwmxB high impedance
                    1738                             ; SOURCE LINE # 342
0459 90E028         1739             MOV     DPTR,#0E028H
045C E0             1740             MOVX    A,@DPTR
045D FF             1741             MOV     R7,A
045E EF             1742             MOV     A,R7
045F 54F3           1743             ANL     A,#0F3H
0461 FF             1744             MOV     R7,A
0462 EF             1745             MOV     A,R7
0463 F0             1746             MOVX    @DPTR,A
                    1747     ;       
                    1748     ;       P3TZA=TZ_HIZ;              // when trigger,epwmxA high impedance
                    1749                             ; SOURCE LINE # 344
0464 90E03E         1750             MOV     DPTR,#0E03EH
0467 E0             1751             MOVX    A,@DPTR
0468 FF             1752             MOV     R7,A
0469 EF             1753             MOV     A,R7
046A 54FC           1754             ANL     A,#0FCH
046C FF             1755             MOV     R7,A
046D EF             1756             MOV     A,R7
046E F0             1757             MOVX    @DPTR,A
                    1758     ;       P3TZB=TZ_HIZ;              // when trigger,epwmxB high impedance
                    1759                             ; SOURCE LINE # 345
046F 90E03E         1760             MOV     DPTR,#0E03EH
0472 E0             1761             MOVX    A,@DPTR
0473 FF             1762             MOV     R7,A
0474 EF             1763             MOV     A,R7
0475 54F3           1764             ANL     A,#0F3H
0477 FF             1765             MOV     R7,A
0478 EF             1766             MOV     A,R7
0479 F0             1767             MOVX    @DPTR,A
                    1768     ;       
                    1769     ;               
                    1770     ;       P4TZA=TZ_HIZ;              // when trigger,epwmxA high impedance
                    1771                             ; SOURCE LINE # 348
047A 90E054         1772             MOV     DPTR,#0E054H
047D E0             1773             MOVX    A,@DPTR
047E FF             1774             MOV     R7,A
047F EF             1775             MOV     A,R7
0480 54FC           1776             ANL     A,#0FCH
0482 FF             1777             MOV     R7,A
0483 EF             1778             MOV     A,R7
0484 F0             1779             MOVX    @DPTR,A
                    1780     ;       P4TZB=TZ_HIZ;              // when trigger,epwmxB high impedance
                    1781                             ; SOURCE LINE # 349
0485 90E054         1782             MOV     DPTR,#0E054H
0488 E0             1783             MOVX    A,@DPTR
0489 FF             1784             MOV     R7,A
048A EF             1785             MOV     A,R7
048B 54F3           1786             ANL     A,#0F3H
048D FF             1787             MOV     R7,A
048E EF             1788             MOV     A,R7
048F F0             1789             MOVX    @DPTR,A
                    1790     ;       
                    1791     ;       
                    1792     ; // trip zone interrupt  ???  no description in datasheet
                    1793     ; 
                    1794     ;       
                    1795     ;       
                    1796     ;       
                    1797     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1798     ; //    P2TZEINT = 0x00;
                    1799     ; //    P3TZEINT = 0x00;
                    1800     ; //    P4TZEINT = 0x00;
                    1801     ; 
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    29

                    1802     ; 
                    1803     ; 
                    1804     ; //event trigger select 
                    1805     ; 
                    1806     ;       P1ET_INTEN=1;                                                   //enable epwmx_INT 
                             interrupt
                    1807                             ; SOURCE LINE # 366
0490 90E015         1808             MOV     DPTR,#0E015H
0493 E0             1809             MOVX    A,@DPTR
0494 FF             1810             MOV     R7,A
0495 EF             1811             MOV     A,R7
0496 4408           1812             ORL     A,#08H
0498 FF             1813             MOV     R7,A
0499 EF             1814             MOV     A,R7
049A F0             1815             MOVX    @DPTR,A
                    1816     ;       P1ET_INTSEL=ET_CTR_ZERO;        // epwm interrupt enable at CTR = ZERO
                    1817                             ; SOURCE LINE # 367
049B 90E015         1818             MOV     DPTR,#0E015H
049E E0             1819             MOVX    A,@DPTR
049F FF             1820             MOV     R7,A
04A0 EF             1821             MOV     A,R7
04A1 54F8           1822             ANL     A,#0F8H
04A3 FF             1823             MOV     R7,A
04A4 EF             1824             MOV     A,R7
04A5 4401           1825             ORL     A,#01H
04A7 FF             1826             MOV     R7,A
04A8 EF             1827             MOV     A,R7
04A9 F0             1828             MOVX    @DPTR,A
                    1829     ;       P1ET_SOCAEN=1;                                          //enable SOCA pulse
                    1830                             ; SOURCE LINE # 368
04AA 90E014         1831             MOV     DPTR,#0E014H
04AD E0             1832             MOVX    A,@DPTR
04AE FF             1833             MOV     R7,A
04AF EF             1834             MOV     A,R7
04B0 4408           1835             ORL     A,#08H
04B2 FF             1836             MOV     R7,A
04B3 EF             1837             MOV     A,R7
04B4 F0             1838             MOVX    @DPTR,A
                    1839     ;       P1ET_SOCASEL=ET_CTR_ZERO;  // enable SOCA,SOCA is CTR = ZERO
                    1840                             ; SOURCE LINE # 369
04B5 90E014         1841             MOV     DPTR,#0E014H
04B8 E0             1842             MOVX    A,@DPTR
04B9 FF             1843             MOV     R7,A
04BA EF             1844             MOV     A,R7
04BB 54F8           1845             ANL     A,#0F8H
04BD FF             1846             MOV     R7,A
04BE EF             1847             MOV     A,R7
04BF 4401           1848             ORL     A,#01H
04C1 FF             1849             MOV     R7,A
04C2 EF             1850             MOV     A,R7
04C3 F0             1851             MOVX    @DPTR,A
                    1852     ;       P1ET_SOCBEN=0 ;                                         //disable SOCB pulse
                    1853                             ; SOURCE LINE # 370
04C4 90E014         1854             MOV     DPTR,#0E014H
04C7 E0             1855             MOVX    A,@DPTR
04C8 FF             1856             MOV     R7,A
04C9 EF             1857             MOV     A,R7
04CA 547F           1858             ANL     A,#07FH
04CC FF             1859             MOV     R7,A
04CD EF             1860             MOV     A,R7
04CE F0             1861             MOVX    @DPTR,A
                    1862     ;       P1ET_SOCBSEL=ET_CTR_ZERO;  // SOCB is CTR = ZERO                
                    1863                             ; SOURCE LINE # 371
04CF 90E014         1864             MOV     DPTR,#0E014H
04D2 E0             1865             MOVX    A,@DPTR
04D3 FF             1866             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    30

04D4 EF             1867             MOV     A,R7
04D5 548F           1868             ANL     A,#08FH
04D7 FF             1869             MOV     R7,A
04D8 EF             1870             MOV     A,R7
04D9 4410           1871             ORL     A,#010H
04DB FF             1872             MOV     R7,A
04DC EF             1873             MOV     A,R7
04DD F0             1874             MOVX    @DPTR,A
                    1875     ;  
                    1876     ;       P2ET_INTEN=1;                                                   //enable epwmx_INT 
                             interrupt
                    1877                             ; SOURCE LINE # 373
04DE 90E02B         1878             MOV     DPTR,#0E02BH
04E1 E0             1879             MOVX    A,@DPTR
04E2 FF             1880             MOV     R7,A
04E3 EF             1881             MOV     A,R7
04E4 4408           1882             ORL     A,#08H
04E6 FF             1883             MOV     R7,A
04E7 EF             1884             MOV     A,R7
04E8 F0             1885             MOVX    @DPTR,A
                    1886     ;       P2ET_INTSEL=ET_CTR_ZERO;        // epwm interrupt enable at CTR = ZERO
                    1887                             ; SOURCE LINE # 374
04E9 90E02B         1888             MOV     DPTR,#0E02BH
04EC E0             1889             MOVX    A,@DPTR
04ED FF             1890             MOV     R7,A
04EE EF             1891             MOV     A,R7
04EF 54F8           1892             ANL     A,#0F8H
04F1 FF             1893             MOV     R7,A
04F2 EF             1894             MOV     A,R7
04F3 4401           1895             ORL     A,#01H
04F5 FF             1896             MOV     R7,A
04F6 EF             1897             MOV     A,R7
04F7 F0             1898             MOVX    @DPTR,A
                    1899     ;       P2ET_SOCAEN=1;                                          //enable SOCA pulse
                    1900                             ; SOURCE LINE # 375
04F8 90E02A         1901             MOV     DPTR,#0E02AH
04FB E0             1902             MOVX    A,@DPTR
04FC FF             1903             MOV     R7,A
04FD EF             1904             MOV     A,R7
04FE 4408           1905             ORL     A,#08H
0500 FF             1906             MOV     R7,A
0501 EF             1907             MOV     A,R7
0502 F0             1908             MOVX    @DPTR,A
                    1909     ;       P2ET_SOCASEL=ET_CTR_ZERO;  // enable SOCA,SOCA is CTR = ZERO
                    1910                             ; SOURCE LINE # 376
0503 90E02A         1911             MOV     DPTR,#0E02AH
0506 E0             1912             MOVX    A,@DPTR
0507 FF             1913             MOV     R7,A
0508 EF             1914             MOV     A,R7
0509 54F8           1915             ANL     A,#0F8H
050B FF             1916             MOV     R7,A
050C EF             1917             MOV     A,R7
050D 4401           1918             ORL     A,#01H
050F FF             1919             MOV     R7,A
0510 EF             1920             MOV     A,R7
0511 F0             1921             MOVX    @DPTR,A
                    1922     ;       P2ET_SOCBEN=0 ;                                         //disable SOCB pulse
                    1923                             ; SOURCE LINE # 377
0512 90E02A         1924             MOV     DPTR,#0E02AH
0515 E0             1925             MOVX    A,@DPTR
0516 FF             1926             MOV     R7,A
0517 EF             1927             MOV     A,R7
0518 547F           1928             ANL     A,#07FH
051A FF             1929             MOV     R7,A
051B EF             1930             MOV     A,R7
051C F0             1931             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    31

                    1932     ;       P2ET_SOCBSEL=ET_CTR_ZERO;  // SOCB is CTR = ZERO                
                    1933                             ; SOURCE LINE # 378
051D 90E02A         1934             MOV     DPTR,#0E02AH
0520 E0             1935             MOVX    A,@DPTR
0521 FF             1936             MOV     R7,A
0522 EF             1937             MOV     A,R7
0523 548F           1938             ANL     A,#08FH
0525 FF             1939             MOV     R7,A
0526 EF             1940             MOV     A,R7
0527 4410           1941             ORL     A,#010H
0529 FF             1942             MOV     R7,A
052A EF             1943             MOV     A,R7
052B F0             1944             MOVX    @DPTR,A
                    1945     ;  
                    1946     ;       P3ET_INTEN=1;                                                   //enable epwmx_INT 
                             interrupt
                    1947                             ; SOURCE LINE # 380
052C 90E041         1948             MOV     DPTR,#0E041H
052F E0             1949             MOVX    A,@DPTR
0530 FF             1950             MOV     R7,A
0531 EF             1951             MOV     A,R7
0532 4408           1952             ORL     A,#08H
0534 FF             1953             MOV     R7,A
0535 EF             1954             MOV     A,R7
0536 F0             1955             MOVX    @DPTR,A
                    1956     ;       P3ET_INTSEL=ET_CTR_ZERO;        // epwm interrupt enable at CTR = ZERO
                    1957                             ; SOURCE LINE # 381
0537 90E041         1958             MOV     DPTR,#0E041H
053A E0             1959             MOVX    A,@DPTR
053B FF             1960             MOV     R7,A
053C EF             1961             MOV     A,R7
053D 54F8           1962             ANL     A,#0F8H
053F FF             1963             MOV     R7,A
0540 EF             1964             MOV     A,R7
0541 4401           1965             ORL     A,#01H
0543 FF             1966             MOV     R7,A
0544 EF             1967             MOV     A,R7
0545 F0             1968             MOVX    @DPTR,A
                    1969     ;       P3ET_SOCAEN=1;                                          //enable SOCA pulse
                    1970                             ; SOURCE LINE # 382
0546 90E040         1971             MOV     DPTR,#0E040H
0549 E0             1972             MOVX    A,@DPTR
054A FF             1973             MOV     R7,A
054B EF             1974             MOV     A,R7
054C 4408           1975             ORL     A,#08H
054E FF             1976             MOV     R7,A
054F EF             1977             MOV     A,R7
0550 F0             1978             MOVX    @DPTR,A
                    1979     ;       P3ET_SOCASEL=ET_CTR_ZERO;  // enable SOCA,SOCA is CTR = ZERO
                    1980                             ; SOURCE LINE # 383
0551 90E040         1981             MOV     DPTR,#0E040H
0554 E0             1982             MOVX    A,@DPTR
0555 FF             1983             MOV     R7,A
0556 EF             1984             MOV     A,R7
0557 54F8           1985             ANL     A,#0F8H
0559 FF             1986             MOV     R7,A
055A EF             1987             MOV     A,R7
055B 4401           1988             ORL     A,#01H
055D FF             1989             MOV     R7,A
055E EF             1990             MOV     A,R7
055F F0             1991             MOVX    @DPTR,A
                    1992     ;       P3ET_SOCBEN=0 ;                                         //disable SOCB pulse
                    1993                             ; SOURCE LINE # 384
0560 90E040         1994             MOV     DPTR,#0E040H
0563 E0             1995             MOVX    A,@DPTR
0564 FF             1996             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    32

0565 EF             1997             MOV     A,R7
0566 547F           1998             ANL     A,#07FH
0568 FF             1999             MOV     R7,A
0569 EF             2000             MOV     A,R7
056A F0             2001             MOVX    @DPTR,A
                    2002     ;       P3ET_SOCBSEL=ET_CTR_ZERO;  // SOCB is CTR = ZERO                
                    2003                             ; SOURCE LINE # 385
056B 90E040         2004             MOV     DPTR,#0E040H
056E E0             2005             MOVX    A,@DPTR
056F FF             2006             MOV     R7,A
0570 EF             2007             MOV     A,R7
0571 548F           2008             ANL     A,#08FH
0573 FF             2009             MOV     R7,A
0574 EF             2010             MOV     A,R7
0575 4410           2011             ORL     A,#010H
0577 FF             2012             MOV     R7,A
0578 EF             2013             MOV     A,R7
0579 F0             2014             MOVX    @DPTR,A
                    2015     ;  
                    2016     ;       P4ET_INTEN=1;                                                   //enable epwmx_INT 
                             interrupt
                    2017                             ; SOURCE LINE # 387
057A 90E057         2018             MOV     DPTR,#0E057H
057D E0             2019             MOVX    A,@DPTR
057E FF             2020             MOV     R7,A
057F EF             2021             MOV     A,R7
0580 4408           2022             ORL     A,#08H
0582 FF             2023             MOV     R7,A
0583 EF             2024             MOV     A,R7
0584 F0             2025             MOVX    @DPTR,A
                    2026     ;       P4ET_INTSEL=ET_CTR_ZERO;        // epwm interrupt enable at CTR = ZERO
                    2027                             ; SOURCE LINE # 388
0585 90E057         2028             MOV     DPTR,#0E057H
0588 E0             2029             MOVX    A,@DPTR
0589 FF             2030             MOV     R7,A
058A EF             2031             MOV     A,R7
058B 54F8           2032             ANL     A,#0F8H
058D FF             2033             MOV     R7,A
058E EF             2034             MOV     A,R7
058F 4401           2035             ORL     A,#01H
0591 FF             2036             MOV     R7,A
0592 EF             2037             MOV     A,R7
0593 F0             2038             MOVX    @DPTR,A
                    2039     ;       P4ET_SOCAEN=1;                                          //enable SOCA pulse
                    2040                             ; SOURCE LINE # 389
0594 90E056         2041             MOV     DPTR,#0E056H
0597 E0             2042             MOVX    A,@DPTR
0598 FF             2043             MOV     R7,A
0599 EF             2044             MOV     A,R7
059A 4408           2045             ORL     A,#08H
059C FF             2046             MOV     R7,A
059D EF             2047             MOV     A,R7
059E F0             2048             MOVX    @DPTR,A
                    2049     ;       P4ET_SOCASEL=ET_CTR_ZERO;  // enable SOCA,SOCA is CTR = ZERO
                    2050                             ; SOURCE LINE # 390
059F 90E056         2051             MOV     DPTR,#0E056H
05A2 E0             2052             MOVX    A,@DPTR
05A3 FF             2053             MOV     R7,A
05A4 EF             2054             MOV     A,R7
05A5 54F8           2055             ANL     A,#0F8H
05A7 FF             2056             MOV     R7,A
05A8 EF             2057             MOV     A,R7
05A9 4401           2058             ORL     A,#01H
05AB FF             2059             MOV     R7,A
05AC EF             2060             MOV     A,R7
05AD F0             2061             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    33

                    2062     ;       P4ET_SOCBEN=0 ;                                         //disable SOCB pulse
                    2063                             ; SOURCE LINE # 391
05AE 90E056         2064             MOV     DPTR,#0E056H
05B1 E0             2065             MOVX    A,@DPTR
05B2 FF             2066             MOV     R7,A
05B3 EF             2067             MOV     A,R7
05B4 547F           2068             ANL     A,#07FH
05B6 FF             2069             MOV     R7,A
05B7 EF             2070             MOV     A,R7
05B8 F0             2071             MOVX    @DPTR,A
                    2072     ;       P4ET_SOCBSEL=ET_CTR_ZERO;  // SOCB is CTR = ZERO                
                    2073                             ; SOURCE LINE # 392
05B9 90E056         2074             MOV     DPTR,#0E056H
05BC E0             2075             MOVX    A,@DPTR
05BD FF             2076             MOV     R7,A
05BE EF             2077             MOV     A,R7
05BF 548F           2078             ANL     A,#08FH
05C1 FF             2079             MOV     R7,A
05C2 EF             2080             MOV     A,R7
05C3 4410           2081             ORL     A,#010H
05C5 FF             2082             MOV     R7,A
05C6 EF             2083             MOV     A,R7
05C7 F0             2084             MOVX    @DPTR,A
                    2085     ;  
                    2086     ;  
                    2087     ;  
                    2088     ;  //event trigger prescaler, generate SOCA and SOCB pulse for AD conversion
                    2089     ;  
                    2090     ;  P1ET_INTPRD=ET_1ST;        //generate interrupt on 1st event
                    2091                             ; SOURCE LINE # 398
05C8 90E017         2092             MOV     DPTR,#0E017H
05CB E0             2093             MOVX    A,@DPTR
05CC FF             2094             MOV     R7,A
05CD EF             2095             MOV     A,R7
05CE 54FC           2096             ANL     A,#0FCH
05D0 FF             2097             MOV     R7,A
05D1 EF             2098             MOV     A,R7
05D2 4401           2099             ORL     A,#01H
05D4 FF             2100             MOV     R7,A
05D5 EF             2101             MOV     A,R7
05D6 F0             2102             MOVX    @DPTR,A
                    2103     ;  P1ET_INTCNT= ET_1ST;      // event counter period =1
                    2104                             ; SOURCE LINE # 399
05D7 90E017         2105             MOV     DPTR,#0E017H
05DA E0             2106             MOVX    A,@DPTR
05DB FF             2107             MOV     R7,A
05DC EF             2108             MOV     A,R7
05DD 54F3           2109             ANL     A,#0F3H
05DF FF             2110             MOV     R7,A
05E0 EF             2111             MOV     A,R7
05E1 4404           2112             ORL     A,#04H
05E3 FF             2113             MOV     R7,A
05E4 EF             2114             MOV     A,R7
05E5 F0             2115             MOVX    @DPTR,A
                    2116     ;  P1ET_SOCAPRD=ET_1ST;      //generate SOCA pulse on 1at event
                    2117                             ; SOURCE LINE # 400
05E6 90E016         2118             MOV     DPTR,#0E016H
05E9 E0             2119             MOVX    A,@DPTR
05EA FF             2120             MOV     R7,A
05EB EF             2121             MOV     A,R7
05EC 54FC           2122             ANL     A,#0FCH
05EE FF             2123             MOV     R7,A
05EF EF             2124             MOV     A,R7
05F0 4401           2125             ORL     A,#01H
05F2 FF             2126             MOV     R7,A
05F3 EF             2127             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    34

05F4 F0             2128             MOVX    @DPTR,A
                    2129     ;  P1ET_SOCACNT=ET_1ST;      // SOCA event counter =1
                    2130                             ; SOURCE LINE # 401
05F5 90E016         2131             MOV     DPTR,#0E016H
05F8 E0             2132             MOVX    A,@DPTR
05F9 FF             2133             MOV     R7,A
05FA EF             2134             MOV     A,R7
05FB 54F3           2135             ANL     A,#0F3H
05FD FF             2136             MOV     R7,A
05FE EF             2137             MOV     A,R7
05FF 4404           2138             ORL     A,#04H
0601 FF             2139             MOV     R7,A
0602 EF             2140             MOV     A,R7
0603 F0             2141             MOVX    @DPTR,A
                    2142     ;  P1ET_SOCBPRD=ET_DISABLE;  //SOCB is not used
                    2143                             ; SOURCE LINE # 402
0604 90E016         2144             MOV     DPTR,#0E016H
0607 E0             2145             MOVX    A,@DPTR
0608 FF             2146             MOV     R7,A
0609 EF             2147             MOV     A,R7
060A 54CF           2148             ANL     A,#0CFH
060C FF             2149             MOV     R7,A
060D EF             2150             MOV     A,R7
060E F0             2151             MOVX    @DPTR,A
                    2152     ;  P1ET_SOCBCNT=ET_DISABLE;
                    2153                             ; SOURCE LINE # 403
060F 90E016         2154             MOV     DPTR,#0E016H
0612 E0             2155             MOVX    A,@DPTR
0613 FF             2156             MOV     R7,A
0614 EF             2157             MOV     A,R7
0615 543F           2158             ANL     A,#03FH
0617 FF             2159             MOV     R7,A
0618 EF             2160             MOV     A,R7
0619 F0             2161             MOVX    @DPTR,A
                    2162     ;  
                    2163     ;  P2ET_INTPRD=ET_1ST;        //generate interrupt on 1st event
                    2164                             ; SOURCE LINE # 405
061A 90E02D         2165             MOV     DPTR,#0E02DH
061D E0             2166             MOVX    A,@DPTR
061E FF             2167             MOV     R7,A
061F EF             2168             MOV     A,R7
0620 54FC           2169             ANL     A,#0FCH
0622 FF             2170             MOV     R7,A
0623 EF             2171             MOV     A,R7
0624 4401           2172             ORL     A,#01H
0626 FF             2173             MOV     R7,A
0627 EF             2174             MOV     A,R7
0628 F0             2175             MOVX    @DPTR,A
                    2176     ;  P2ET_INTCNT= ET_1ST;      // event counter period =1
                    2177                             ; SOURCE LINE # 406
0629 90E02D         2178             MOV     DPTR,#0E02DH
062C E0             2179             MOVX    A,@DPTR
062D FF             2180             MOV     R7,A
062E EF             2181             MOV     A,R7
062F 54F3           2182             ANL     A,#0F3H
0631 FF             2183             MOV     R7,A
0632 EF             2184             MOV     A,R7
0633 4404           2185             ORL     A,#04H
0635 FF             2186             MOV     R7,A
0636 EF             2187             MOV     A,R7
0637 F0             2188             MOVX    @DPTR,A
                    2189     ;  P2ET_SOCAPRD=ET_1ST;      //generate SOCA pulse on 1at event
                    2190                             ; SOURCE LINE # 407
0638 90E02C         2191             MOV     DPTR,#0E02CH
063B E0             2192             MOVX    A,@DPTR
063C FF             2193             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    35

063D EF             2194             MOV     A,R7
063E 54FC           2195             ANL     A,#0FCH
0640 FF             2196             MOV     R7,A
0641 EF             2197             MOV     A,R7
0642 4401           2198             ORL     A,#01H
0644 FF             2199             MOV     R7,A
0645 EF             2200             MOV     A,R7
0646 F0             2201             MOVX    @DPTR,A
                    2202     ;  P2ET_SOCACNT=ET_1ST;      // SOCA event counter =1
                    2203                             ; SOURCE LINE # 408
0647 90E02C         2204             MOV     DPTR,#0E02CH
064A E0             2205             MOVX    A,@DPTR
064B FF             2206             MOV     R7,A
064C EF             2207             MOV     A,R7
064D 54F3           2208             ANL     A,#0F3H
064F FF             2209             MOV     R7,A
0650 EF             2210             MOV     A,R7
0651 4404           2211             ORL     A,#04H
0653 FF             2212             MOV     R7,A
0654 EF             2213             MOV     A,R7
0655 F0             2214             MOVX    @DPTR,A
                    2215     ;  P2ET_SOCBPRD=ET_DISABLE;  //SOCB is not used
                    2216                             ; SOURCE LINE # 409
0656 90E02C         2217             MOV     DPTR,#0E02CH
0659 E0             2218             MOVX    A,@DPTR
065A FF             2219             MOV     R7,A
065B EF             2220             MOV     A,R7
065C 54CF           2221             ANL     A,#0CFH
065E FF             2222             MOV     R7,A
065F EF             2223             MOV     A,R7
0660 F0             2224             MOVX    @DPTR,A
                    2225     ;  P2ET_SOCBCNT=ET_DISABLE;
                    2226                             ; SOURCE LINE # 410
0661 90E02C         2227             MOV     DPTR,#0E02CH
0664 E0             2228             MOVX    A,@DPTR
0665 FF             2229             MOV     R7,A
0666 EF             2230             MOV     A,R7
0667 543F           2231             ANL     A,#03FH
0669 FF             2232             MOV     R7,A
066A EF             2233             MOV     A,R7
066B F0             2234             MOVX    @DPTR,A
                    2235     ;  
                    2236     ;  P3ET_INTPRD=ET_1ST;        //generate interrupt on 1st event
                    2237                             ; SOURCE LINE # 412
066C 90E043         2238             MOV     DPTR,#0E043H
066F E0             2239             MOVX    A,@DPTR
0670 FF             2240             MOV     R7,A
0671 EF             2241             MOV     A,R7
0672 54FC           2242             ANL     A,#0FCH
0674 FF             2243             MOV     R7,A
0675 EF             2244             MOV     A,R7
0676 4401           2245             ORL     A,#01H
0678 FF             2246             MOV     R7,A
0679 EF             2247             MOV     A,R7
067A F0             2248             MOVX    @DPTR,A
                    2249     ;  P3ET_INTCNT= ET_1ST;      // event counter period =1
                    2250                             ; SOURCE LINE # 413
067B 90E043         2251             MOV     DPTR,#0E043H
067E E0             2252             MOVX    A,@DPTR
067F FF             2253             MOV     R7,A
0680 EF             2254             MOV     A,R7
0681 54F3           2255             ANL     A,#0F3H
0683 FF             2256             MOV     R7,A
0684 EF             2257             MOV     A,R7
0685 4404           2258             ORL     A,#04H
0687 FF             2259             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    36

0688 EF             2260             MOV     A,R7
0689 F0             2261             MOVX    @DPTR,A
                    2262     ;  P3ET_SOCAPRD=ET_1ST;      //generate SOCA pulse on 1at event
                    2263                             ; SOURCE LINE # 414
068A 90E042         2264             MOV     DPTR,#0E042H
068D E0             2265             MOVX    A,@DPTR
068E FF             2266             MOV     R7,A
068F EF             2267             MOV     A,R7
0690 54FC           2268             ANL     A,#0FCH
0692 FF             2269             MOV     R7,A
0693 EF             2270             MOV     A,R7
0694 4401           2271             ORL     A,#01H
0696 FF             2272             MOV     R7,A
0697 EF             2273             MOV     A,R7
0698 F0             2274             MOVX    @DPTR,A
                    2275     ;  P3ET_SOCACNT=ET_1ST;      // SOCA event counter =1
                    2276                             ; SOURCE LINE # 415
0699 90E042         2277             MOV     DPTR,#0E042H
069C E0             2278             MOVX    A,@DPTR
069D FF             2279             MOV     R7,A
069E EF             2280             MOV     A,R7
069F 54F3           2281             ANL     A,#0F3H
06A1 FF             2282             MOV     R7,A
06A2 EF             2283             MOV     A,R7
06A3 4404           2284             ORL     A,#04H
06A5 FF             2285             MOV     R7,A
06A6 EF             2286             MOV     A,R7
06A7 F0             2287             MOVX    @DPTR,A
                    2288     ;  P3ET_SOCBPRD=ET_DISABLE;  //SOCB is not used
                    2289                             ; SOURCE LINE # 416
06A8 90E042         2290             MOV     DPTR,#0E042H
06AB E0             2291             MOVX    A,@DPTR
06AC FF             2292             MOV     R7,A
06AD EF             2293             MOV     A,R7
06AE 54CF           2294             ANL     A,#0CFH
06B0 FF             2295             MOV     R7,A
06B1 EF             2296             MOV     A,R7
06B2 F0             2297             MOVX    @DPTR,A
                    2298     ;  P3ET_SOCBCNT=ET_DISABLE;
                    2299                             ; SOURCE LINE # 417
06B3 90E042         2300             MOV     DPTR,#0E042H
06B6 E0             2301             MOVX    A,@DPTR
06B7 FF             2302             MOV     R7,A
06B8 EF             2303             MOV     A,R7
06B9 543F           2304             ANL     A,#03FH
06BB FF             2305             MOV     R7,A
06BC EF             2306             MOV     A,R7
06BD F0             2307             MOVX    @DPTR,A
                    2308     ;       
                    2309     ;  P4ET_INTPRD=ET_1ST;        //generate interrupt on 1st event
                    2310                             ; SOURCE LINE # 419
06BE 90E059         2311             MOV     DPTR,#0E059H
06C1 E0             2312             MOVX    A,@DPTR
06C2 FF             2313             MOV     R7,A
06C3 EF             2314             MOV     A,R7
06C4 54FC           2315             ANL     A,#0FCH
06C6 FF             2316             MOV     R7,A
06C7 EF             2317             MOV     A,R7
06C8 4401           2318             ORL     A,#01H
06CA FF             2319             MOV     R7,A
06CB EF             2320             MOV     A,R7
06CC F0             2321             MOVX    @DPTR,A
                    2322     ;  P4ET_INTCNT= ET_1ST;      // event counter period =1
                    2323                             ; SOURCE LINE # 420
06CD 90E059         2324             MOV     DPTR,#0E059H
06D0 E0             2325             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    37

06D1 FF             2326             MOV     R7,A
06D2 EF             2327             MOV     A,R7
06D3 54F3           2328             ANL     A,#0F3H
06D5 FF             2329             MOV     R7,A
06D6 EF             2330             MOV     A,R7
06D7 4404           2331             ORL     A,#04H
06D9 FF             2332             MOV     R7,A
06DA EF             2333             MOV     A,R7
06DB F0             2334             MOVX    @DPTR,A
                    2335     ;  P4ET_SOCAPRD=ET_1ST;      //generate SOCA pulse on 1at event
                    2336                             ; SOURCE LINE # 421
06DC 90E058         2337             MOV     DPTR,#0E058H
06DF E0             2338             MOVX    A,@DPTR
06E0 FF             2339             MOV     R7,A
06E1 EF             2340             MOV     A,R7
06E2 54FC           2341             ANL     A,#0FCH
06E4 FF             2342             MOV     R7,A
06E5 EF             2343             MOV     A,R7
06E6 4401           2344             ORL     A,#01H
06E8 FF             2345             MOV     R7,A
06E9 EF             2346             MOV     A,R7
06EA F0             2347             MOVX    @DPTR,A
                    2348     ;  P4ET_SOCACNT=ET_1ST;      // SOCA event counter =1
                    2349                             ; SOURCE LINE # 422
06EB 90E058         2350             MOV     DPTR,#0E058H
06EE E0             2351             MOVX    A,@DPTR
06EF FF             2352             MOV     R7,A
06F0 EF             2353             MOV     A,R7
06F1 54F3           2354             ANL     A,#0F3H
06F3 FF             2355             MOV     R7,A
06F4 EF             2356             MOV     A,R7
06F5 4404           2357             ORL     A,#04H
06F7 FF             2358             MOV     R7,A
06F8 EF             2359             MOV     A,R7
06F9 F0             2360             MOVX    @DPTR,A
                    2361     ;  P4ET_SOCBPRD=ET_DISABLE;  //SOCB is not used
                    2362                             ; SOURCE LINE # 423
06FA 90E058         2363             MOV     DPTR,#0E058H
06FD E0             2364             MOVX    A,@DPTR
06FE FF             2365             MOV     R7,A
06FF EF             2366             MOV     A,R7
0700 54CF           2367             ANL     A,#0CFH
0702 FF             2368             MOV     R7,A
0703 EF             2369             MOV     A,R7
0704 F0             2370             MOVX    @DPTR,A
                    2371     ;  P4ET_SOCBCNT=ET_DISABLE;
                    2372                             ; SOURCE LINE # 424
0705 90E058         2373             MOV     DPTR,#0E058H
0708 E0             2374             MOVX    A,@DPTR
0709 FF             2375             MOV     R7,A
070A EF             2376             MOV     A,R7
070B 543F           2377             ANL     A,#03FH
070D FF             2378             MOV     R7,A
070E EF             2379             MOV     A,R7
070F F0             2380             MOVX    @DPTR,A
                    2381     ;       
                    2382     ; 
                    2383     ; 
                    2384     ; 
                    2385     ; 
                    2386     ; //set PWM period
                    2387     ; 
                    2388     ; 
                    2389     ; 
                    2390     ;       P1TBPRD = 0x07D0;                                               // pwm period is 0x
                             0190@8MHz 10KHz 0x7D0@40MHz; 0x031f?
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    38

                    2391                             ; SOURCE LINE # 434
0710 75A207         2392             MOV     P1TBPRD+01H,#07H
0713 75A1D0         2393             MOV     P1TBPRD,#0D0H
                    2394     ;       P2TBPRD = 0x07D0;
                    2395                             ; SOURCE LINE # 435
0716 75C207         2396             MOV     P2TBPRD+01H,#07H
0719 75C1D0         2397             MOV     P2TBPRD,#0D0H
                    2398     ;   P3TBPRD = 0x07D0;
                    2399                             ; SOURCE LINE # 436
071C 75D207         2400             MOV     P3TBPRD+01H,#07H
071F 75D1D0         2401             MOV     P3TBPRD,#0D0H
                    2402     ;   P4TBPRD = 0x07D0;
                    2403                             ; SOURCE LINE # 437
0722 75E207         2404             MOV     P4TBPRD+01H,#07H
0725 75E1D0         2405             MOV     P4TBPRD,#0D0H
                    2406     ; 
                    2407     ; 
                    2408     ; 
                    2409     ;       P1CMPA = 0x01E8;                                                // CMPA counter val
                             ue
                    2410                             ; SOURCE LINE # 441
0728 75A401         2411             MOV     P1CMPA+01H,#01H
072B 75A3E8         2412             MOV     P1CMPA,#0E8H
                    2413     ;       P2CMPA = 0x01E8;
                    2414                             ; SOURCE LINE # 442
072E 75C401         2415             MOV     P2CMPA+01H,#01H
0731 75C3E8         2416             MOV     P2CMPA,#0E8H
                    2417     ;       P3CMPA = 0x01E8;
                    2418                             ; SOURCE LINE # 443
0734 75D401         2419             MOV     P3CMPA+01H,#01H
0737 75D3E8         2420             MOV     P3CMPA,#0E8H
                    2421     ;       P4CMPA = 0x01E8;
                    2422                             ; SOURCE LINE # 444
073A 75E401         2423             MOV     P4CMPA+01H,#01H
073D 75E3E8         2424             MOV     P4CMPA,#0E8H
                    2425     ;       
                    2426     ;       P1CMPB = 0x0190;                                                // CMPA counter val
                             ue
                    2427                             ; SOURCE LINE # 446
0740 75A601         2428             MOV     P1CMPB+01H,#01H
0743 75A590         2429             MOV     P1CMPB,#090H
                    2430     ;       P2CMPB = 0x0190;
                    2431                             ; SOURCE LINE # 447
0746 75C601         2432             MOV     P2CMPB+01H,#01H
0749 75C590         2433             MOV     P2CMPB,#090H
                    2434     ;       P3CMPB = 0x0190;
                    2435                             ; SOURCE LINE # 448
074C 75D601         2436             MOV     P3CMPB+01H,#01H
074F 75D590         2437             MOV     P3CMPB,#090H
                    2438     ;       P4CMPB = 0x0190;
                    2439                             ; SOURCE LINE # 449
0752 75E601         2440             MOV     P4CMPB+01H,#01H
0755 75E590         2441             MOV     P4CMPB,#090H
                    2442     ;       
                    2443     ;       
                    2444     ; 
                    2445     ;       TBCLKSYNC = 1;                                  // all epwm channel synchronize ena
                             ble
                    2446                             ; SOURCE LINE # 453
0758 90E000         2447             MOV     DPTR,#0E000H
075B E0             2448             MOVX    A,@DPTR
075C FF             2449             MOV     R7,A
075D EF             2450             MOV     A,R7
075E 4401           2451             ORL     A,#01H
0760 FF             2452             MOV     R7,A
0761 EF             2453             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    39

0762 F0             2454             MOVX    @DPTR,A
                    2455     ; 
                    2456     ;       CLR_EPWM1_INT();
                    2457                             ; SOURCE LINE # 455
0763 43B601         2458             ORL     P1ETCLR,#01H
                    2459     ;       CLR_EPWM2_INT();
                    2460                             ; SOURCE LINE # 456
0766 43CE01         2461             ORL     P2ETCLR,#01H
                    2462     ;   CLR_EPWM3_INT();
                    2463                             ; SOURCE LINE # 457
0769 43DE01         2464             ORL     P3ETCLR,#01H
                    2465     ;       CLR_EPWM4_INT();
                    2466                             ; SOURCE LINE # 458
076C 43F601         2467             ORL     P4ETCLR,#01H
                    2468     ;       
                    2469     ;       
                    2470     ;       I2FR = 1;                //rising edge triger interrupt
                    2471                             ; SOURCE LINE # 461
076F D2CD           2472             SETB    I2FR
                    2473     ;       EX2 = 1;                                                                // enable e
                             pwm1,2,3 interrupt
                    2474                             ; SOURCE LINE # 462
0771 D2B9           2475             SETB    EX2
                    2476     ;       //ex3 = 1;                                                              // enable e
                             pwm4 interrupt
                    2477     ; }
                    2478                             ; SOURCE LINE # 464
0773                2479     ?C0007:
0773 22             2480             RET     
                    2481     ; END OF Initepwm
                    2482     
                    2483     ; 
                    2484     ; 
                    2485     ; void InitComparator(void)
                    2486     
----                2487             RSEG  ?PR?InitComparator?INITIAL
0000                2488     InitComparator:
                    2489             USING   0
                    2490                             ; SOURCE LINE # 467
                    2491     ; {
                    2492                             ; SOURCE LINE # 468
                    2493     ;       
                    2494     ;               P21_FN= CFG2;                                                            //
                              P21 output COMP1
                    2495                             ; SOURCE LINE # 470
0000 90E0E1         2496             MOV     DPTR,#0E0E1H
0003 E0             2497             MOVX    A,@DPTR
0004 FF             2498             MOV     R7,A
0005 EF             2499             MOV     A,R7
0006 54F3           2500             ANL     A,#0F3H
0008 FF             2501             MOV     R7,A
0009 EF             2502             MOV     A,R7
000A 4408           2503             ORL     A,#08H
000C FF             2504             MOV     R7,A
000D EF             2505             MOV     A,R7
000E F0             2506             MOVX    @DPTR,A
                    2507     ;               P14_FN= CFG2;                    // P14 output COMP2
                    2508                             ; SOURCE LINE # 471
000F 90E0DA         2509             MOV     DPTR,#0E0DAH
0012 E0             2510             MOVX    A,@DPTR
0013 FF             2511             MOV     R7,A
0014 EF             2512             MOV     A,R7
0015 54FC           2513             ANL     A,#0FCH
0017 FF             2514             MOV     R7,A
0018 EF             2515             MOV     A,R7
0019 4402           2516             ORL     A,#02H
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    40

001B FF             2517             MOV     R7,A
001C EF             2518             MOV     A,R7
001D F0             2519             MOVX    @DPTR,A
                    2520     ;               P13_FN= CFG2;                    // P13 output COMP3
                    2521                             ; SOURCE LINE # 472
001E 90E0DB         2522             MOV     DPTR,#0E0DBH
0021 E0             2523             MOVX    A,@DPTR
0022 FF             2524             MOV     R7,A
0023 EF             2525             MOV     A,R7
0024 543F           2526             ANL     A,#03FH
0026 FF             2527             MOV     R7,A
0027 EF             2528             MOV     A,R7
0028 4480           2529             ORL     A,#080H
002A FF             2530             MOV     R7,A
002B EF             2531             MOV     A,R7
002C F0             2532             MOVX    @DPTR,A
                    2533     ;               P12_FN= CFG2;                    // P12 output COMP4
                    2534                             ; SOURCE LINE # 473
002D 90E0DB         2535             MOV     DPTR,#0E0DBH
0030 E0             2536             MOVX    A,@DPTR
0031 FF             2537             MOV     R7,A
0032 EF             2538             MOV     A,R7
0033 54CF           2539             ANL     A,#0CFH
0035 FF             2540             MOV     R7,A
0036 EF             2541             MOV     A,R7
0037 4420           2542             ORL     A,#020H
0039 FF             2543             MOV     R7,A
003A EF             2544             MOV     A,R7
003B F0             2545             MOVX    @DPTR,A
                    2546     ;               
                    2547     ;       
                    2548     ;       
                    2549     ;               C1PDO1PD=CFG1;                                                          //C
                             OMP1 power on and OP1 power off
                    2550                             ; SOURCE LINE # 477
003C 90E0A4         2551             MOV     DPTR,#0E0A4H
003F E0             2552             MOVX    A,@DPTR
0040 FF             2553             MOV     R7,A
0041 EF             2554             MOV     A,R7
0042 54FC           2555             ANL     A,#0FCH
0044 FF             2556             MOV     R7,A
0045 EF             2557             MOV     A,R7
0046 4401           2558             ORL     A,#01H
0048 FF             2559             MOV     R7,A
0049 EF             2560             MOV     A,R7
004A F0             2561             MOVX    @DPTR,A
                    2562     ;               C2PDO2PD=CFG1;                                                          //C
                             OMP2 power on and OP2 power off
                    2563                             ; SOURCE LINE # 478
004B 90E0A4         2564             MOV     DPTR,#0E0A4H
004E E0             2565             MOVX    A,@DPTR
004F FF             2566             MOV     R7,A
0050 EF             2567             MOV     A,R7
0051 54F3           2568             ANL     A,#0F3H
0053 FF             2569             MOV     R7,A
0054 EF             2570             MOV     A,R7
0055 4404           2571             ORL     A,#04H
0057 FF             2572             MOV     R7,A
0058 EF             2573             MOV     A,R7
0059 F0             2574             MOVX    @DPTR,A
                    2575     ;               C3PDO3PD=CFG1;                                                          //C
                             OMP3 power on and OP3 power off
                    2576                             ; SOURCE LINE # 479
005A 90E0A4         2577             MOV     DPTR,#0E0A4H
005D E0             2578             MOVX    A,@DPTR
005E FF             2579             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    41

005F EF             2580             MOV     A,R7
0060 54CF           2581             ANL     A,#0CFH
0062 FF             2582             MOV     R7,A
0063 EF             2583             MOV     A,R7
0064 4410           2584             ORL     A,#010H
0066 FF             2585             MOV     R7,A
0067 EF             2586             MOV     A,R7
0068 F0             2587             MOVX    @DPTR,A
                    2588     ;               C4PD=0;                                                                    
                                                  //COMP4 power on
                    2589                             ; SOURCE LINE # 480
0069 90E0A4         2590             MOV     DPTR,#0E0A4H
006C E0             2591             MOVX    A,@DPTR
006D FF             2592             MOV     R7,A
006E EF             2593             MOV     A,R7
006F 54BF           2594             ANL     A,#0BFH
0071 FF             2595             MOV     R7,A
0072 EF             2596             MOV     A,R7
0073 F0             2597             MOVX    @DPTR,A
                    2598     ;       
                    2599     ;       
                    2600     ;       
                    2601     ;               C1_INT_SEL=CFG2;                                                        //C
                             OMP1 at rising/falling edge triiger 
                    2602                             ; SOURCE LINE # 484
0074 90E0C6         2603             MOV     DPTR,#0E0C6H
0077 E0             2604             MOVX    A,@DPTR
0078 FF             2605             MOV     R7,A
0079 EF             2606             MOV     A,R7
007A 54FE           2607             ANL     A,#0FEH
007C FF             2608             MOV     R7,A
007D EF             2609             MOV     A,R7
007E F0             2610             MOVX    @DPTR,A
                    2611     ;               C2_INT_SEL=CFG2;                                                        //C
                             OMP2 at rising/falling edge triiger
                    2612                             ; SOURCE LINE # 485
007F 90E0C6         2613             MOV     DPTR,#0E0C6H
0082 E0             2614             MOVX    A,@DPTR
0083 FF             2615             MOV     R7,A
0084 EF             2616             MOV     A,R7
0085 54FD           2617             ANL     A,#0FDH
0087 FF             2618             MOV     R7,A
0088 EF             2619             MOV     A,R7
0089 F0             2620             MOVX    @DPTR,A
                    2621     ;               C3_INT_SEL=CFG2;                                                        //C
                             OMP3 at rising/falling edge triiger
                    2622                             ; SOURCE LINE # 486
008A 90E0C6         2623             MOV     DPTR,#0E0C6H
008D E0             2624             MOVX    A,@DPTR
008E FF             2625             MOV     R7,A
008F EF             2626             MOV     A,R7
0090 54FB           2627             ANL     A,#0FBH
0092 FF             2628             MOV     R7,A
0093 EF             2629             MOV     A,R7
0094 F0             2630             MOVX    @DPTR,A
                    2631     ;               C4_INT_SEL=CFG2;                                                        //C
                             OMP4 at rising/falling edge triiger
                    2632                             ; SOURCE LINE # 487
0095 90E0C6         2633             MOV     DPTR,#0E0C6H
0098 E0             2634             MOVX    A,@DPTR
0099 FF             2635             MOV     R7,A
009A EF             2636             MOV     A,R7
009B 54F7           2637             ANL     A,#0F7H
009D FF             2638             MOV     R7,A
009E EF             2639             MOV     A,R7
009F F0             2640             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    42

                    2641     ;       
                    2642     ;       
                    2643     ;               C1_EN=1;                                                                   
                                                  //C1 interrupt enable
                    2644                             ; SOURCE LINE # 490
00A0 90E0EB         2645             MOV     DPTR,#0E0EBH
00A3 E0             2646             MOVX    A,@DPTR
00A4 FF             2647             MOV     R7,A
00A5 EF             2648             MOV     A,R7
00A6 4401           2649             ORL     A,#01H
00A8 FF             2650             MOV     R7,A
00A9 EF             2651             MOV     A,R7
00AA F0             2652             MOVX    @DPTR,A
                    2653     ;               C2_EN=1;                                                                   
                                                  //C2 interrupt enalbe
                    2654                             ; SOURCE LINE # 491
00AB 90E0EB         2655             MOV     DPTR,#0E0EBH
00AE E0             2656             MOVX    A,@DPTR
00AF FF             2657             MOV     R7,A
00B0 EF             2658             MOV     A,R7
00B1 4402           2659             ORL     A,#02H
00B3 FF             2660             MOV     R7,A
00B4 EF             2661             MOV     A,R7
00B5 F0             2662             MOVX    @DPTR,A
                    2663     ;               C3_EN=1;                                                                   
                                                  //C3 interrupt enalbe
                    2664                             ; SOURCE LINE # 492
00B6 90E0EB         2665             MOV     DPTR,#0E0EBH
00B9 E0             2666             MOVX    A,@DPTR
00BA FF             2667             MOV     R7,A
00BB EF             2668             MOV     A,R7
00BC 4404           2669             ORL     A,#04H
00BE FF             2670             MOV     R7,A
00BF EF             2671             MOV     A,R7
00C0 F0             2672             MOVX    @DPTR,A
                    2673     ;               C4_EN=1;                                                                   
                                                  //C4 interrupt enalbe
                    2674                             ; SOURCE LINE # 493
00C1 90E0EB         2675             MOV     DPTR,#0E0EBH
00C4 E0             2676             MOVX    A,@DPTR
00C5 FF             2677             MOV     R7,A
00C6 EF             2678             MOV     A,R7
00C7 4408           2679             ORL     A,#08H
00C9 FF             2680             MOV     R7,A
00CA EF             2681             MOV     A,R7
00CB F0             2682             MOVX    @DPTR,A
                    2683     ;               
                    2684     ;               
                    2685     ;               C1INT=0;                                                                   
                                                  //clear C1 INT flag
                    2686                             ; SOURCE LINE # 496
00CC 90E0C7         2687             MOV     DPTR,#0E0C7H
00CF E0             2688             MOVX    A,@DPTR
00D0 FF             2689             MOV     R7,A
00D1 EF             2690             MOV     A,R7
00D2 54FE           2691             ANL     A,#0FEH
00D4 FF             2692             MOV     R7,A
00D5 EF             2693             MOV     A,R7
00D6 F0             2694             MOVX    @DPTR,A
                    2695     ;               C2INT=0;                                                                   
                                                  //clear C2 INT flag
                    2696                             ; SOURCE LINE # 497
00D7 90E0C7         2697             MOV     DPTR,#0E0C7H
00DA E0             2698             MOVX    A,@DPTR
00DB FF             2699             MOV     R7,A
00DC EF             2700             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    43

00DD 54FD           2701             ANL     A,#0FDH
00DF FF             2702             MOV     R7,A
00E0 EF             2703             MOV     A,R7
00E1 F0             2704             MOVX    @DPTR,A
                    2705     ;               C3INT=0;                                                                   
                                                  //clear C3 INT flag
                    2706                             ; SOURCE LINE # 498
00E2 90E0C7         2707             MOV     DPTR,#0E0C7H
00E5 E0             2708             MOVX    A,@DPTR
00E6 FF             2709             MOV     R7,A
00E7 EF             2710             MOV     A,R7
00E8 54FB           2711             ANL     A,#0FBH
00EA FF             2712             MOV     R7,A
00EB EF             2713             MOV     A,R7
00EC F0             2714             MOVX    @DPTR,A
                    2715     ;               C4INT=0;                                                                   
                                                  //clear C4 INT flag
                    2716                             ; SOURCE LINE # 499
00ED 90E0C7         2717             MOV     DPTR,#0E0C7H
00F0 E0             2718             MOVX    A,@DPTR
00F1 FF             2719             MOV     R7,A
00F2 EF             2720             MOV     A,R7
00F3 54F7           2721             ANL     A,#0F7H
00F5 FF             2722             MOV     R7,A
00F6 EF             2723             MOV     A,R7
00F7 F0             2724             MOVX    @DPTR,A
                    2725     ;       
                    2726     ;               INT_CPU=1;                    //pass C234 interrupt to EX4
                    2727                             ; SOURCE LINE # 501
00F8 90E0EB         2728             MOV     DPTR,#0E0EBH
00FB E0             2729             MOVX    A,@DPTR
00FC FF             2730             MOV     R7,A
00FD EF             2731             MOV     A,R7
00FE 4410           2732             ORL     A,#010H
0100 FF             2733             MOV     R7,A
0101 EF             2734             MOV     A,R7
0102 F0             2735             MOVX    @DPTR,A
                    2736     ;       
                    2737     ;               EX4=1;
                    2738                             ; SOURCE LINE # 503
0103 D2BB           2739             SETB    EX4
                    2740     ;               EX1=1;
                    2741                             ; SOURCE LINE # 504
0105 D2AA           2742             SETB    EX1
                    2743     ;               IE1=0;
                    2744                             ; SOURCE LINE # 505
0107 C28B           2745             CLR     IE1
                    2746     ;               IEX4=0;
                    2747                             ; SOURCE LINE # 506
0109 C2C3           2748             CLR     IEX4
                    2749     ; }
                    2750                             ; SOURCE LINE # 507
010B                2751     ?C0008:
010B 22             2752             RET     
                    2753     ; END OF InitComparator
                    2754     
                    2755     ; 
                    2756     ; 
                    2757     ; 
                    2758     ; void InitWatchDog(void)
                    2759     
----                2760             RSEG  ?PR?InitWatchDog?INITIAL
0000                2761     InitWatchDog:
                    2762             USING   0
                    2763                             ; SOURCE LINE # 511
                    2764     ; {
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    44

                    2765                             ; SOURCE LINE # 512
                    2766     ;               WDTREL = 0xFF;
                    2767                             ; SOURCE LINE # 513
0000 7586FF         2768             MOV     WDTREL,#0FFH
                    2769     ;       WDT = 1;
                    2770                             ; SOURCE LINE # 514
0003 D2AE           2771             SETB    WDT
                    2772     ;       SWDT = 1;
                    2773                             ; SOURCE LINE # 515
0005 D2BE           2774             SETB    SWDT
                    2775     ;     P1_FN_L = P1_FN_L & 0xFC;               //p1_0 as GPIO
                    2776                             ; SOURCE LINE # 516
0007 90E0DB         2777             MOV     DPTR,#0E0DBH
000A E0             2778             MOVX    A,@DPTR
000B FF             2779             MOV     R7,A
000C EF             2780             MOV     A,R7
000D 54FC           2781             ANL     A,#0FCH
000F FF             2782             MOV     R7,A
0010 EF             2783             MOV     A,R7
0011 F0             2784             MOVX    @DPTR,A
                    2785     ;     P1_DD = P1_DD & 0xFE;                     //p1_0 as output
                    2786                             ; SOURCE LINE # 517
0012 90E0DC         2787             MOV     DPTR,#0E0DCH
0015 E0             2788             MOVX    A,@DPTR
0016 FF             2789             MOV     R7,A
0017 EF             2790             MOV     A,R7
0018 54FE           2791             ANL     A,#0FEH
001A FF             2792             MOV     R7,A
001B EF             2793             MOV     A,R7
001C F0             2794             MOVX    @DPTR,A
                    2795     ; }
                    2796                             ; SOURCE LINE # 518
001D                2797     ?C0009:
001D 22             2798             RET     
                    2799     ; END OF InitWatchDog
                    2800     
                    2801     ; 
                    2802     ; 
                    2803     ; 
                    2804     ; 
                    2805     ; #define GPIO(pin,fn_cfg,in_out,res_en_dis,pull_up_dwn,drive_4_8ma )  FN_##pin=fn_cfg;DD_#
                             #pin=in_out;PE_##pin=res_en_dis;PS_##pin=pull_up_dwn;DS_##pin=drive_4_8ma;
                    2806     ; 
                    2807     ; void InitGPIO(void)
                    2808     
----                2809             RSEG  ?PR?InitGPIO?INITIAL
0000                2810     InitGPIO:
                    2811             USING   0
                    2812                             ; SOURCE LINE # 525
                    2813     ; {
                    2814                             ; SOURCE LINE # 526
                    2815     ;               P0_FN_L = 0x00;                                                            
                                  // P00 ~ P03as GPIO
                    2816                             ; SOURCE LINE # 527
0000 90E0D5         2817             MOV     DPTR,#0E0D5H
0003 E4             2818             CLR     A
0004 F0             2819             MOVX    @DPTR,A
                    2820     ;               P0_FN_H = 0x00;                                                            
                                  // P04 ~ P07 as GPIO
                    2821                             ; SOURCE LINE # 528
0005 90E0D4         2822             MOV     DPTR,#0E0D4H
0008 E4             2823             CLR     A
0009 F0             2824             MOVX    @DPTR,A
                    2825     ;               P0_DD = 0x00;                                                              
                                          //      P00 ~  P07 intput
                    2826                             ; SOURCE LINE # 529
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    45

000A 90E0D6         2827             MOV     DPTR,#0E0D6H
000D E4             2828             CLR     A
000E F0             2829             MOVX    @DPTR,A
                    2830     ;               P0_PE = 0xFF;                                                              
                                          // output resistor enable       
                    2831                             ; SOURCE LINE # 530
000F 90E0D8         2832             MOV     DPTR,#0E0D8H
0012 74FF           2833             MOV     A,#0FFH
0014 F0             2834             MOVX    @DPTR,A
                    2835     ;               P0_DS = 0x00;                                                              
                                          //drive current =4mA
                    2836                             ; SOURCE LINE # 531
0015 90E0D7         2837             MOV     DPTR,#0E0D7H
0018 E4             2838             CLR     A
0019 F0             2839             MOVX    @DPTR,A
                    2840     ;               P0_PS=  0x00;                                                              
                                          //pull down resistor 
                    2841                             ; SOURCE LINE # 532
001A 90E0D9         2842             MOV     DPTR,#0E0D9H
001D E4             2843             CLR     A
001E F0             2844             MOVX    @DPTR,A
                    2845     ;       
                    2846     ;               P1_FN_L = 0x00;                                                            
                                  // P10 ~ P13 as GPIO
                    2847                             ; SOURCE LINE # 534
001F 90E0DB         2848             MOV     DPTR,#0E0DBH
0022 E4             2849             CLR     A
0023 F0             2850             MOVX    @DPTR,A
                    2851     ;               P1_FN_H = 0x00;                                                            
                                  // P14 ~ P17 as GPIO
                    2852                             ; SOURCE LINE # 535
0024 90E0DA         2853             MOV     DPTR,#0E0DAH
0027 E4             2854             CLR     A
0028 F0             2855             MOVX    @DPTR,A
                    2856     ;               P1_DD = 0x00;                                                              
                                          // P10 ~ P17 intput
                    2857                             ; SOURCE LINE # 536
0029 90E0DC         2858             MOV     DPTR,#0E0DCH
002C E4             2859             CLR     A
002D F0             2860             MOVX    @DPTR,A
                    2861     ;               P1_PE = 0xFF;                                                              
                                          // output resistor enable       
                    2862                             ; SOURCE LINE # 537
002E 90E0DE         2863             MOV     DPTR,#0E0DEH
0031 74FF           2864             MOV     A,#0FFH
0033 F0             2865             MOVX    @DPTR,A
                    2866     ;               P1_DS = 0x00;                                                              
                                          //drive current =4mA
                    2867                             ; SOURCE LINE # 538
0034 90E0DD         2868             MOV     DPTR,#0E0DDH
0037 E4             2869             CLR     A
0038 F0             2870             MOVX    @DPTR,A
                    2871     ;               P1_PS=  0x00;                                                              
                                          //pull down resistor 
                    2872                             ; SOURCE LINE # 539
0039 90E0DF         2873             MOV     DPTR,#0E0DFH
003C E4             2874             CLR     A
003D F0             2875             MOVX    @DPTR,A
                    2876     ;       
                    2877     ;               P2_FN_L = 0x00;                                                            
                                  // P20 ~ P23 as GPIO
                    2878                             ; SOURCE LINE # 541
003E 90E0E1         2879             MOV     DPTR,#0E0E1H
0041 E4             2880             CLR     A
0042 F0             2881             MOVX    @DPTR,A
                    2882     ;               P2_FN_H = 0x00;                                                            
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    46

                                  // P24 ~ P27 as GPIO
                    2883                             ; SOURCE LINE # 542
0043 90E0E0         2884             MOV     DPTR,#0E0E0H
0046 E4             2885             CLR     A
0047 F0             2886             MOVX    @DPTR,A
                    2887     ;               P2_DD = 0x00;                                                              
                                          // P20~ P27 intput
                    2888                             ; SOURCE LINE # 543
0048 90E0E2         2889             MOV     DPTR,#0E0E2H
004B E4             2890             CLR     A
004C F0             2891             MOVX    @DPTR,A
                    2892     ;               P2_PE = 0xFF;                                                              
                                          // pull/down resistor enable    
                    2893                             ; SOURCE LINE # 544
004D 90E0E4         2894             MOV     DPTR,#0E0E4H
0050 74FF           2895             MOV     A,#0FFH
0052 F0             2896             MOVX    @DPTR,A
                    2897     ;               P2_DS = 0x00;                                                              
                                          //drive current =4mA
                    2898                             ; SOURCE LINE # 545
0053 90E0E3         2899             MOV     DPTR,#0E0E3H
0056 E4             2900             CLR     A
0057 F0             2901             MOVX    @DPTR,A
                    2902     ;               P2_PS=  0x00;                                                              
                                          //pull down resistor 
                    2903                             ; SOURCE LINE # 546
0058 90E0E5         2904             MOV     DPTR,#0E0E5H
005B E4             2905             CLR     A
005C F0             2906             MOVX    @DPTR,A
                    2907     ;       
                    2908     ;       // use P26 and P00 as output
                    2909     ;       
                    2910     ;     P00_FN= CFG0;                      // P00 as GPIO
                    2911                             ; SOURCE LINE # 550
005D 90E0D5         2912             MOV     DPTR,#0E0D5H
0060 E0             2913             MOVX    A,@DPTR
0061 FF             2914             MOV     R7,A
0062 EF             2915             MOV     A,R7
0063 54FC           2916             ANL     A,#0FCH
0065 FF             2917             MOV     R7,A
0066 EF             2918             MOV     A,R7
0067 F0             2919             MOVX    @DPTR,A
                    2920     ;     P00_DD = OUTPUT;               //P00 as output
                    2921                             ; SOURCE LINE # 551
0068 90E0D6         2922             MOV     DPTR,#0E0D6H
006B E0             2923             MOVX    A,@DPTR
006C FF             2924             MOV     R7,A
006D EF             2925             MOV     A,R7
006E 4401           2926             ORL     A,#01H
0070 FF             2927             MOV     R7,A
0071 EF             2928             MOV     A,R7
0072 F0             2929             MOVX    @DPTR,A
                    2930     ;     P00_PE = RES_DIS;               //P00 pull resistor off
                    2931                             ; SOURCE LINE # 552
0073 90E0D8         2932             MOV     DPTR,#0E0D8H
0076 E0             2933             MOVX    A,@DPTR
0077 FF             2934             MOV     R7,A
0078 EF             2935             MOV     A,R7
0079 54FE           2936             ANL     A,#0FEH
007B FF             2937             MOV     R7,A
007C EF             2938             MOV     A,R7
007D F0             2939             MOVX    @DPTR,A
                    2940     ;               P00_DS = I_4MA;
                    2941                             ; SOURCE LINE # 553
007E 90E0D7         2942             MOV     DPTR,#0E0D7H
0081 E0             2943             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    47

0082 FF             2944             MOV     R7,A
0083 EF             2945             MOV     A,R7
0084 54FE           2946             ANL     A,#0FEH
0086 FF             2947             MOV     R7,A
0087 EF             2948             MOV     A,R7
0088 F0             2949             MOVX    @DPTR,A
                    2950     ; 
                    2951     ;                       
                    2952     ;                       GPIO(P20,CFG1,INPUT,RES_EN,PULL_DOWN,I_4MA);                       
                                  //P20 as EXT2
                    2953                             ; SOURCE LINE # 556
0089 90E0E1         2954             MOV     DPTR,#0E0E1H
008C E0             2955             MOVX    A,@DPTR
008D FF             2956             MOV     R7,A
008E EF             2957             MOV     A,R7
008F 54FC           2958             ANL     A,#0FCH
0091 FF             2959             MOV     R7,A
0092 EF             2960             MOV     A,R7
0093 4401           2961             ORL     A,#01H
0095 FF             2962             MOV     R7,A
0096 EF             2963             MOV     A,R7
0097 F0             2964             MOVX    @DPTR,A
0098 90E0E2         2965             MOV     DPTR,#0E0E2H
009B E0             2966             MOVX    A,@DPTR
009C FF             2967             MOV     R7,A
009D EF             2968             MOV     A,R7
009E 54FE           2969             ANL     A,#0FEH
00A0 FF             2970             MOV     R7,A
00A1 EF             2971             MOV     A,R7
00A2 F0             2972             MOVX    @DPTR,A
00A3 90E0E4         2973             MOV     DPTR,#0E0E4H
00A6 E0             2974             MOVX    A,@DPTR
00A7 FF             2975             MOV     R7,A
00A8 EF             2976             MOV     A,R7
00A9 4401           2977             ORL     A,#01H
00AB FF             2978             MOV     R7,A
00AC EF             2979             MOV     A,R7
00AD F0             2980             MOVX    @DPTR,A
00AE 90E0E5         2981             MOV     DPTR,#0E0E5H
00B1 E0             2982             MOVX    A,@DPTR
00B2 FF             2983             MOV     R7,A
00B3 EF             2984             MOV     A,R7
00B4 54FE           2985             ANL     A,#0FEH
00B6 FF             2986             MOV     R7,A
00B7 EF             2987             MOV     A,R7
00B8 F0             2988             MOVX    @DPTR,A
00B9 90E0E3         2989             MOV     DPTR,#0E0E3H
00BC E0             2990             MOVX    A,@DPTR
00BD FF             2991             MOV     R7,A
00BE EF             2992             MOV     A,R7
00BF 54FE           2993             ANL     A,#0FEH
00C1 FF             2994             MOV     R7,A
00C2 EF             2995             MOV     A,R7
00C3 F0             2996             MOVX    @DPTR,A
                    2997     ;                       GPIO(P15,CFG2,INPUT,RES_EN,PULL_DOWN,I_4MA);                       
                                  //P15 as TIMER3 T_EX
                    2998                             ; SOURCE LINE # 557
00C4 90E0DA         2999             MOV     DPTR,#0E0DAH
00C7 E0             3000             MOVX    A,@DPTR
00C8 FF             3001             MOV     R7,A
00C9 EF             3002             MOV     A,R7
00CA 54F3           3003             ANL     A,#0F3H
00CC FF             3004             MOV     R7,A
00CD EF             3005             MOV     A,R7
00CE 4408           3006             ORL     A,#08H
00D0 FF             3007             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    48

00D1 EF             3008             MOV     A,R7
00D2 F0             3009             MOVX    @DPTR,A
00D3 90E0DC         3010             MOV     DPTR,#0E0DCH
00D6 E0             3011             MOVX    A,@DPTR
00D7 FF             3012             MOV     R7,A
00D8 EF             3013             MOV     A,R7
00D9 54DF           3014             ANL     A,#0DFH
00DB FF             3015             MOV     R7,A
00DC EF             3016             MOV     A,R7
00DD F0             3017             MOVX    @DPTR,A
00DE 90E0DE         3018             MOV     DPTR,#0E0DEH
00E1 E0             3019             MOVX    A,@DPTR
00E2 FF             3020             MOV     R7,A
00E3 EF             3021             MOV     A,R7
00E4 4420           3022             ORL     A,#020H
00E6 FF             3023             MOV     R7,A
00E7 EF             3024             MOV     A,R7
00E8 F0             3025             MOVX    @DPTR,A
00E9 90E0DF         3026             MOV     DPTR,#0E0DFH
00EC E0             3027             MOVX    A,@DPTR
00ED FF             3028             MOV     R7,A
00EE EF             3029             MOV     A,R7
00EF 54DF           3030             ANL     A,#0DFH
00F1 FF             3031             MOV     R7,A
00F2 EF             3032             MOV     A,R7
00F3 F0             3033             MOVX    @DPTR,A
00F4 90E0DD         3034             MOV     DPTR,#0E0DDH
00F7 E0             3035             MOVX    A,@DPTR
00F8 FF             3036             MOV     R7,A
00F9 EF             3037             MOV     A,R7
00FA 54DF           3038             ANL     A,#0DFH
00FC FF             3039             MOV     R7,A
00FD EF             3040             MOV     A,R7
00FE F0             3041             MOVX    @DPTR,A
                    3042     ;                       GPIO(P04,CFG0,OUTPUT,RES_EN,PULL_DOWN,I_4MA);                      
                                  //use P14 for timer0 ouput to test timer3 capture
                    3043                             ; SOURCE LINE # 558
00FF 90E0D4         3044             MOV     DPTR,#0E0D4H
0102 E0             3045             MOVX    A,@DPTR
0103 FF             3046             MOV     R7,A
0104 EF             3047             MOV     A,R7
0105 54FC           3048             ANL     A,#0FCH
0107 FF             3049             MOV     R7,A
0108 EF             3050             MOV     A,R7
0109 F0             3051             MOVX    @DPTR,A
010A 90E0D6         3052             MOV     DPTR,#0E0D6H
010D E0             3053             MOVX    A,@DPTR
010E FF             3054             MOV     R7,A
010F EF             3055             MOV     A,R7
0110 4410           3056             ORL     A,#010H
0112 FF             3057             MOV     R7,A
0113 EF             3058             MOV     A,R7
0114 F0             3059             MOVX    @DPTR,A
0115 90E0D8         3060             MOV     DPTR,#0E0D8H
0118 E0             3061             MOVX    A,@DPTR
0119 FF             3062             MOV     R7,A
011A EF             3063             MOV     A,R7
011B 4410           3064             ORL     A,#010H
011D FF             3065             MOV     R7,A
011E EF             3066             MOV     A,R7
011F F0             3067             MOVX    @DPTR,A
0120 90E0D9         3068             MOV     DPTR,#0E0D9H
0123 E0             3069             MOVX    A,@DPTR
0124 FF             3070             MOV     R7,A
0125 EF             3071             MOV     A,R7
0126 54EF           3072             ANL     A,#0EFH
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    49

0128 FF             3073             MOV     R7,A
0129 EF             3074             MOV     A,R7
012A F0             3075             MOVX    @DPTR,A
012B 90E0D7         3076             MOV     DPTR,#0E0D7H
012E E0             3077             MOVX    A,@DPTR
012F FF             3078             MOV     R7,A
0130 EF             3079             MOV     A,R7
0131 54EF           3080             ANL     A,#0EFH
0133 FF             3081             MOV     R7,A
0134 EF             3082             MOV     A,R7
0135 F0             3083             MOVX    @DPTR,A
                    3084     ;                       GPIO(P26,CFG0,OUTPUT,RES_DIS,PULL_DOWN,I_4MA);                  //P
                             26 for LED indication
                    3085                             ; SOURCE LINE # 559
0136 90E0E0         3086             MOV     DPTR,#0E0E0H
0139 E0             3087             MOVX    A,@DPTR
013A FF             3088             MOV     R7,A
013B EF             3089             MOV     A,R7
013C 54CF           3090             ANL     A,#0CFH
013E FF             3091             MOV     R7,A
013F EF             3092             MOV     A,R7
0140 F0             3093             MOVX    @DPTR,A
0141 90E0E2         3094             MOV     DPTR,#0E0E2H
0144 E0             3095             MOVX    A,@DPTR
0145 FF             3096             MOV     R7,A
0146 EF             3097             MOV     A,R7
0147 4440           3098             ORL     A,#040H
0149 FF             3099             MOV     R7,A
014A EF             3100             MOV     A,R7
014B F0             3101             MOVX    @DPTR,A
014C 90E0E4         3102             MOV     DPTR,#0E0E4H
014F E0             3103             MOVX    A,@DPTR
0150 FF             3104             MOV     R7,A
0151 EF             3105             MOV     A,R7
0152 54BF           3106             ANL     A,#0BFH
0154 FF             3107             MOV     R7,A
0155 EF             3108             MOV     A,R7
0156 F0             3109             MOVX    @DPTR,A
0157 90E0E5         3110             MOV     DPTR,#0E0E5H
015A E0             3111             MOVX    A,@DPTR
015B FF             3112             MOV     R7,A
015C EF             3113             MOV     A,R7
015D 54BF           3114             ANL     A,#0BFH
015F FF             3115             MOV     R7,A
0160 EF             3116             MOV     A,R7
0161 F0             3117             MOVX    @DPTR,A
0162 90E0E3         3118             MOV     DPTR,#0E0E3H
0165 E0             3119             MOVX    A,@DPTR
0166 FF             3120             MOV     R7,A
0167 EF             3121             MOV     A,R7
0168 54BF           3122             ANL     A,#0BFH
016A FF             3123             MOV     R7,A
016B EF             3124             MOV     A,R7
016C F0             3125             MOVX    @DPTR,A
                    3126     ;       
                    3127     ; }
                    3128                             ; SOURCE LINE # 561
016D                3129     ?C0010:
016D 22             3130             RET     
                    3131     ; END OF InitGPIO
                    3132     
                    3133     ; 
                    3134     ; void InitTimer01(void)
                    3135     
----                3136             RSEG  ?PR?InitTimer01?INITIAL
0000                3137     InitTimer01:
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    50

                    3138                             ; SOURCE LINE # 563
                    3139     ; {
                    3140                             ; SOURCE LINE # 564
                    3141     ;               T01_DIV_L= 0x05;                 //clock divider is 122, must write T01_DIV
                             _L first;
                    3142                             ; SOURCE LINE # 565
0000 90E0EF         3143             MOV     DPTR,#0E0EFH
0003 7405           3144             MOV     A,#05H
0005 F0             3145             MOVX    @DPTR,A
                    3146     ;         T01_DIV_H= 0x00;                
                    3147                             ; SOURCE LINE # 566
0006 90E0EE         3148             MOV     DPTR,#0E0EEH
0009 E4             3149             CLR     A
000A F0             3150             MOVX    @DPTR,A
                    3151     ;       TMOD = 0x10;                   //timer1 is 16bit timer, timer0 is 13 bit
                    3152                             ; SOURCE LINE # 567
000B 758910         3153             MOV     TMOD,#010H
                    3154     ;     TL0 = 0x0;
                    3155                             ; SOURCE LINE # 568
000E 758A00         3156             MOV     TL0,#00H
                    3157     ;     TH0= 0xfe;
                    3158                             ; SOURCE LINE # 569
0011 758CFE         3159             MOV     TH0,#0FEH
                    3160     ;               
                    3161     ;               TL1=0x0;
                    3162                             ; SOURCE LINE # 571
0014 758B00         3163             MOV     TL1,#00H
                    3164     ;               TH1=0x0;
                    3165                             ; SOURCE LINE # 572
0017 758D00         3166             MOV     TH1,#00H
                    3167     ;       
                    3168     ;       
                    3169     ;     ET0 = 1;                                //enable timer0 overflow interrupt
                    3170                             ; SOURCE LINE # 575
001A D2A9           3171             SETB    ET0
                    3172     ;     ET1 = 1;                                //enable timer1 overflow interrupt
                    3173                             ; SOURCE LINE # 576
001C D2AB           3174             SETB    ET1
                    3175     ;               TR0= 1;                                //start timer0
                    3176                             ; SOURCE LINE # 577
001E D28C           3177             SETB    TR0
                    3178     ;               TR1 = 1;    
                    3179                             ; SOURCE LINE # 578
0020 D28E           3180             SETB    TR1
                    3181     ; }
                    3182                             ; SOURCE LINE # 579
0022                3183     ?C0011:
0022 22             3184             RET     
                    3185     ; END OF InitTimer01
                    3186     
                    3187     ; 
                    3188     ; void InitTimer3(void)
                    3189     
----                3190             RSEG  ?PR?InitTimer3?INITIAL
0000                3191     InitTimer3:
                    3192             USING   0
                    3193                             ; SOURCE LINE # 581
                    3194     ; {
                    3195                             ; SOURCE LINE # 582
                    3196     ;       T3PS = 0;                                                               // no divid
                             er
                    3197                             ; SOURCE LINE # 583
0000 90E0C9         3198             MOV     DPTR,#0E0C9H
0003 E4             3199             CLR     A
0004 F0             3200             MOVX    @DPTR,A
                    3201     ;       T3RC= 0;               //reset T3 capture register
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    51

                    3202                             ; SOURCE LINE # 584
0005 90E0CC         3203             MOV     DPTR,#0E0CCH
0008 E4             3204             CLR     A
0009 F0             3205             MOVX    @DPTR,A
000A A3             3206             INC     DPTR
000B E4             3207             CLR     A
000C F0             3208             MOVX    @DPTR,A
                    3209     ;       T3CTR=0;               //reset T3 counter
                    3210                             ; SOURCE LINE # 585
000D 90E0CA         3211             MOV     DPTR,#0E0CAH
0010 E4             3212             CLR     A
0011 F0             3213             MOVX    @DPTR,A
0012 A3             3214             INC     DPTR
0013 E4             3215             CLR     A
0014 F0             3216             MOVX    @DPTR,A
                    3217     ;       T3CT=0;                //capture clock from cpu
                    3218                             ; SOURCE LINE # 586
0015 90E0C8         3219             MOV     DPTR,#0E0C8H
0018 E0             3220             MOVX    A,@DPTR
0019 FF             3221             MOV     R7,A
001A EF             3222             MOV     A,R7
001B 54FD           3223             ANL     A,#0FDH
001D FF             3224             MOV     R7,A
001E EF             3225             MOV     A,R7
001F F0             3226             MOVX    @DPTR,A
                    3227     ;       T3CPRL=1;             //capture mode select
                    3228                             ; SOURCE LINE # 587
0020 90E0C8         3229             MOV     DPTR,#0E0C8H
0023 E0             3230             MOVX    A,@DPTR
0024 FF             3231             MOV     R7,A
0025 EF             3232             MOV     A,R7
0026 4401           3233             ORL     A,#01H
0028 FF             3234             MOV     R7,A
0029 EF             3235             MOV     A,R7
002A F0             3236             MOVX    @DPTR,A
                    3237     ;       T3EXEN=1;             //enable T3 external EX pin
                    3238                             ; SOURCE LINE # 588
002B 90E0C8         3239             MOV     DPTR,#0E0C8H
002E E0             3240             MOVX    A,@DPTR
002F FF             3241             MOV     R7,A
0030 EF             3242             MOV     A,R7
0031 4408           3243             ORL     A,#08H
0033 FF             3244             MOV     R7,A
0034 EF             3245             MOV     A,R7
0035 F0             3246             MOVX    @DPTR,A
                    3247     ;       T3EX_INV=0;           //T3 EX pin ,trigger on rising edge
                    3248                             ; SOURCE LINE # 589
0036 90E08A         3249             MOV     DPTR,#0E08AH
0039 E0             3250             MOVX    A,@DPTR
003A FF             3251             MOV     R7,A
003B EF             3252             MOV     A,R7
003C 54FE           3253             ANL     A,#0FEH
003E FF             3254             MOV     R7,A
003F EF             3255             MOV     A,R7
0040 F0             3256             MOVX    @DPTR,A
                    3257     ;       T3TF_EINT        =1;                      // timer3 overflow interrupt enable
                    3258                             ; SOURCE LINE # 590
0041 90E0C8         3259             MOV     DPTR,#0E0C8H
0044 E0             3260             MOVX    A,@DPTR
0045 FF             3261             MOV     R7,A
0046 EF             3262             MOV     A,R7
0047 4420           3263             ORL     A,#020H
0049 FF             3264             MOV     R7,A
004A EF             3265             MOV     A,R7
004B F0             3266             MOVX    @DPTR,A
                    3267     ;       T3TR = 1;                                     // start timer3 
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    52

                    3268                             ; SOURCE LINE # 591
004C 90E0C8         3269             MOV     DPTR,#0E0C8H
004F E0             3270             MOVX    A,@DPTR
0050 FF             3271             MOV     R7,A
0051 EF             3272             MOV     A,R7
0052 4404           3273             ORL     A,#04H
0054 FF             3274             MOV     R7,A
0055 EF             3275             MOV     A,R7
0056 F0             3276             MOVX    @DPTR,A
                    3277     ;       T3TF=0;               //clear T3 overflow flag
                    3278                             ; SOURCE LINE # 592
0057 90E0C8         3279             MOV     DPTR,#0E0C8H
005A E0             3280             MOVX    A,@DPTR
005B FF             3281             MOV     R7,A
005C EF             3282             MOV     A,R7
005D 547F           3283             ANL     A,#07FH
005F FF             3284             MOV     R7,A
0060 EF             3285             MOV     A,R7
0061 F0             3286             MOVX    @DPTR,A
                    3287     ;       T3EXF=0;              //clear T3 EX trigger flag
                    3288                             ; SOURCE LINE # 593
0062 90E0C8         3289             MOV     DPTR,#0E0C8H
0065 E0             3290             MOVX    A,@DPTR
0066 FF             3291             MOV     R7,A
0067 EF             3292             MOV     A,R7
0068 54BF           3293             ANL     A,#0BFH
006A FF             3294             MOV     R7,A
006B EF             3295             MOV     A,R7
006C F0             3296             MOVX    @DPTR,A
                    3297     ;       IE1=0;                //clear  EX1 interrupt flag
                    3298                             ; SOURCE LINE # 594
006D C28B           3299             CLR     IE1
                    3300     ;        EX1=1;               //enable EX1 interrupt
                    3301                             ; SOURCE LINE # 595
006F D2AA           3302             SETB    EX1
                    3303     ; }
                    3304                             ; SOURCE LINE # 596
0071                3305     ?C0012:
0071 22             3306             RET     
                    3307     ; END OF InitTimer3
                    3308     
                    3309     ; 
                    3310     ; void InitTimer4(void)
                    3311     
----                3312             RSEG  ?PR?InitTimer4?INITIAL
0000                3313     InitTimer4:
                    3314             USING   0
                    3315                             ; SOURCE LINE # 598
                    3316     ; {
                    3317                             ; SOURCE LINE # 599
                    3318     ;       T4PS = 0;                                                               // no divid
                             er
                    3319                             ; SOURCE LINE # 600
0000 90E0CF         3320             MOV     DPTR,#0E0CFH
0003 E4             3321             CLR     A
0004 F0             3322             MOVX    @DPTR,A
                    3323     ;       T4RC = 0xE0C0;
                    3324                             ; SOURCE LINE # 601
0005 90E0D2         3325             MOV     DPTR,#0E0D2H
0008 74E0           3326             MOV     A,#0E0H
000A F0             3327             MOVX    @DPTR,A
000B A3             3328             INC     DPTR
000C 74C0           3329             MOV     A,#0C0H
000E F0             3330             MOVX    @DPTR,A
                    3331     ; 
                    3332     ;       T4TF_EINT        =1;                                                    // timer4 o
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    53

                             verflow interrupt enable
                    3333                             ; SOURCE LINE # 603
000F 90E0CE         3334             MOV     DPTR,#0E0CEH
0012 E0             3335             MOVX    A,@DPTR
0013 FF             3336             MOV     R7,A
0014 EF             3337             MOV     A,R7
0015 4420           3338             ORL     A,#020H
0017 FF             3339             MOV     R7,A
0018 EF             3340             MOV     A,R7
0019 F0             3341             MOVX    @DPTR,A
                    3342     ;       T4TR = 1;                               // start timer4
                    3343                             ; SOURCE LINE # 604
001A 90E0CE         3344             MOV     DPTR,#0E0CEH
001D E0             3345             MOVX    A,@DPTR
001E FF             3346             MOV     R7,A
001F EF             3347             MOV     A,R7
0020 4404           3348             ORL     A,#04H
0022 FF             3349             MOV     R7,A
0023 EF             3350             MOV     A,R7
0024 F0             3351             MOVX    @DPTR,A
                    3352     ;       CLR_T4_INT();
                    3353                             ; SOURCE LINE # 605
0025 53FEF0         3354             ANL     INT_REG4,#0F0H
                    3355     ;       EX6 = 1;
                    3356                             ; SOURCE LINE # 606
0028 D2BD           3357             SETB    EX6
                    3358     ;       IEX6=0;
                    3359                             ; SOURCE LINE # 607
002A C2C5           3360             CLR     IEX6
                    3361     ; }
                    3362                             ; SOURCE LINE # 608
002C                3363     ?C0013:
002C 22             3364             RET     
                    3365     ; END OF InitTimer4
                    3366     
                    3367     ; void InitTimer5(void)
                    3368     
----                3369             RSEG  ?PR?InitTimer5?INITIAL
0000                3370     InitTimer5:
                    3371             USING   0
                    3372                             ; SOURCE LINE # 609
                    3373     ; {
                    3374                             ; SOURCE LINE # 610
                    3375     ;       T5PS = 0;                                                                          
                                          // no divider
                    3376                             ; SOURCE LINE # 611
0000 90E0F4         3377             MOV     DPTR,#0E0F4H
0003 E4             3378             CLR     A
0004 F0             3379             MOVX    @DPTR,A
                    3380     ;       T5RC = 0x10C0;
                    3381                             ; SOURCE LINE # 612
0005 90E0F7         3382             MOV     DPTR,#0E0F7H
0008 7410           3383             MOV     A,#010H
000A F0             3384             MOVX    @DPTR,A
000B A3             3385             INC     DPTR
000C 74C0           3386             MOV     A,#0C0H
000E F0             3387             MOVX    @DPTR,A
                    3388     ;       
                    3389     ;       T5TF_EINT        =1;                                                            // 
                             timer4 overflow interrupt enable
                    3390                             ; SOURCE LINE # 614
000F 90E0F3         3391             MOV     DPTR,#0E0F3H
0012 E0             3392             MOVX    A,@DPTR
0013 FF             3393             MOV     R7,A
0014 EF             3394             MOV     A,R7
0015 4420           3395             ORL     A,#020H
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    54

0017 FF             3396             MOV     R7,A
0018 EF             3397             MOV     A,R7
0019 F0             3398             MOVX    @DPTR,A
                    3399     ;       T5TR = 1;                                                                          
                                          // start timer4
                    3400                             ; SOURCE LINE # 615
001A 90E0F3         3401             MOV     DPTR,#0E0F3H
001D E0             3402             MOVX    A,@DPTR
001E FF             3403             MOV     R7,A
001F EF             3404             MOV     A,R7
0020 4404           3405             ORL     A,#04H
0022 FF             3406             MOV     R7,A
0023 EF             3407             MOV     A,R7
0024 F0             3408             MOVX    @DPTR,A
                    3409     ;       T5TF=0;                                                                            
                                          // clear interrupt flag
                    3410                             ; SOURCE LINE # 616
0025 90E0F3         3411             MOV     DPTR,#0E0F3H
0028 E0             3412             MOVX    A,@DPTR
0029 FF             3413             MOV     R7,A
002A EF             3414             MOV     A,R7
002B 547F           3415             ANL     A,#07FH
002D FF             3416             MOV     R7,A
002E EF             3417             MOV     A,R7
002F F0             3418             MOVX    @DPTR,A
                    3419     ; 
                    3420     ;       
                    3421     ;       I3FR=1;
                    3422                             ; SOURCE LINE # 619
0030 D2CE           3423             SETB    I3FR
                    3424     ;       EX3 = 1;
                    3425                             ; SOURCE LINE # 620
0032 D2BA           3426             SETB    EX3
                    3427     ;       IEX3=0;
                    3428                             ; SOURCE LINE # 621
0034 C2C2           3429             CLR     IEX3
                    3430     ; }
                    3431                             ; SOURCE LINE # 622
0036                3432     ?C0014:
0036 22             3433             RET     
                    3434     ; END OF InitTimer5
                    3435     
                    3436     ; void InitTimer6(void)
                    3437     
----                3438             RSEG  ?PR?InitTimer6?INITIAL
0000                3439     InitTimer6:
                    3440             USING   0
                    3441                             ; SOURCE LINE # 623
                    3442     ; {
                    3443                             ; SOURCE LINE # 624
                    3444     ;       T6PS = 0;                                                                          
                                          // no divider
                    3445                             ; SOURCE LINE # 625
0000 90E0FA         3446             MOV     DPTR,#0E0FAH
0003 E4             3447             CLR     A
0004 F0             3448             MOVX    @DPTR,A
                    3449     ;       T6RC = 0x10C0;
                    3450                             ; SOURCE LINE # 626
0005 90E0FD         3451             MOV     DPTR,#0E0FDH
0008 7410           3452             MOV     A,#010H
000A F0             3453             MOVX    @DPTR,A
000B A3             3454             INC     DPTR
000C 74C0           3455             MOV     A,#0C0H
000E F0             3456             MOVX    @DPTR,A
                    3457     ;       
                    3458     ;       T6TF_EINT        =1;                                                    // timer4 o
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    55

                             verflow interrupt enable
                    3459                             ; SOURCE LINE # 628
000F 90E0F9         3460             MOV     DPTR,#0E0F9H
0012 E0             3461             MOVX    A,@DPTR
0013 FF             3462             MOV     R7,A
0014 EF             3463             MOV     A,R7
0015 4420           3464             ORL     A,#020H
0017 FF             3465             MOV     R7,A
0018 EF             3466             MOV     A,R7
0019 F0             3467             MOVX    @DPTR,A
                    3468     ;       T6TR = 1;                                                                          
                                  // start timer4
                    3469                             ; SOURCE LINE # 629
001A 90E0F9         3470             MOV     DPTR,#0E0F9H
001D E0             3471             MOVX    A,@DPTR
001E FF             3472             MOV     R7,A
001F EF             3473             MOV     A,R7
0020 4404           3474             ORL     A,#04H
0022 FF             3475             MOV     R7,A
0023 EF             3476             MOV     A,R7
0024 F0             3477             MOVX    @DPTR,A
                    3478     ;       T6TF=0;                                                                            
                                  // clear interrupt flag
                    3479                             ; SOURCE LINE # 630
0025 90E0F9         3480             MOV     DPTR,#0E0F9H
0028 E0             3481             MOVX    A,@DPTR
0029 FF             3482             MOV     R7,A
002A EF             3483             MOV     A,R7
002B 547F           3484             ANL     A,#07FH
002D FF             3485             MOV     R7,A
002E EF             3486             MOV     A,R7
002F F0             3487             MOVX    @DPTR,A
                    3488     ; 
                    3489     ;       
                    3490     ; 
                    3491     ;       EX5 = 1;
                    3492                             ; SOURCE LINE # 634
0030 D2BC           3493             SETB    EX5
                    3494     ;       IEX5=0;
                    3495                             ; SOURCE LINE # 635
0032 C2C4           3496             CLR     IEX5
                    3497     ; }
                    3498                             ; SOURCE LINE # 636
0034                3499     ?C0015:
0034 22             3500             RET     
                    3501     ; END OF InitTimer6
                    3502     
                    3503     ; void SystemClock(void)
                    3504     
----                3505             RSEG  ?PR?SystemClock?INITIAL
0000                3506     SystemClock:
                    3507             USING   0
                    3508                             ; SOURCE LINE # 637
                    3509     ; {
                    3510                             ; SOURCE LINE # 638
                    3511     ;         
                    3512     ;     RC80M_RES = 0x60;
                    3513                             ; SOURCE LINE # 640
0000 90E0B2         3514             MOV     DPTR,#0E0B2H
0003 7460           3515             MOV     A,#060H
0005 F0             3516             MOVX    @DPTR,A
                    3517     ;         RC80M_CAP=0x40;
                    3518                             ; SOURCE LINE # 641
0006 90E0B1         3519             MOV     DPTR,#0E0B1H
0009 7440           3520             MOV     A,#040H
000B F0             3521             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    56

                    3522     ;         RC80M_C3=0x4f;
                    3523                             ; SOURCE LINE # 642
000C 90E0B0         3524             MOV     DPTR,#0E0B0H
000F 744F           3525             MOV     A,#04FH
0011 F0             3526             MOVX    @DPTR,A
                    3527     ;         RC80M_C2=0x3f;
                    3528                             ; SOURCE LINE # 643
0012 90E0AF         3529             MOV     DPTR,#0E0AFH
0015 743F           3530             MOV     A,#03FH
0017 F0             3531             MOVX    @DPTR,A
                    3532     ;         #pragma asm
                    3533     ;               nop
0018 00             3534               nop
                    3535     ;               nop
0019 00             3536               nop
                    3537     ;               nop
001A 00             3538               nop
                    3539     ;               nop
001B 00             3540               nop
                    3541     ;               nop
001C 00             3542               nop
                    3543     ;               nop
001D 00             3544               nop
                    3545     ;               nop
001E 00             3546               nop
                    3547     ;               nop
001F 00             3548               nop
                    3549     ;               nop
0020 00             3550               nop
                    3551     ;               nop
0021 00             3552               nop
                    3553     ;               nop
0022 00             3554               nop
                    3555     ;               nop
0023 00             3556               nop
                    3557     ;               nop
0024 00             3558               nop
                    3559     ;               nop
0025 00             3560               nop
                    3561     ;               nop
0026 00             3562               nop
                    3563     ;               nop
0027 00             3564               nop
                    3565     ;               nop
0028 00             3566               nop
                    3567     ;               nop
0029 00             3568               nop
                    3569     ;               nop
002A 00             3570               nop
                    3571     ;               nop
002B 00             3572               nop
                    3573     ;               nop
002C 00             3574               nop
                    3575     ;               nop
002D 00             3576               nop
                    3577     ;               nop
002E 00             3578               nop
                    3579     ;               nop
002F 00             3580               nop
                    3581     ;               nop
0030 00             3582               nop
                    3583     ;               nop
0031 00             3584               nop
                    3585     ;               nop
0032 00             3586               nop
                    3587     ;               nop
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    57

0033 00             3588               nop
                    3589     ;               nop
0034 00             3590               nop
                    3591     ;               nop
0035 00             3592               nop
                    3593     ;               nop
0036 00             3594               nop
                    3595     ;               nop
0037 00             3596               nop
                    3597     ;               nop
0038 00             3598               nop
                    3599     ;               #pragma endasm
                    3600     ;       
                    3601     ;         CLK_DIV_L = 0x0;
                    3602                             ; SOURCE LINE # 680
0039 90E0E7         3603             MOV     DPTR,#0E0E7H
003C E4             3604             CLR     A
003D F0             3605             MOVX    @DPTR,A
                    3606     ;         CLK_DIV_H = 0x00;
                    3607                             ; SOURCE LINE # 681
003E 90E0E6         3608             MOV     DPTR,#0E0E6H
0041 E4             3609             CLR     A
0042 F0             3610             MOVX    @DPTR,A
                    3611     ;               
                    3612     ;               #pragma asm
                    3613     ;               nop
0043 00             3614               nop
                    3615     ;               nop
0044 00             3616               nop
                    3617     ;               nop
0045 00             3618               nop
                    3619     ;               nop
0046 00             3620               nop
                    3621     ;               nop
0047 00             3622               nop
                    3623     ;               nop
0048 00             3624               nop
                    3625     ;               nop
0049 00             3626               nop
                    3627     ;               nop
004A 00             3628               nop
                    3629     ;               nop
004B 00             3630               nop
                    3631     ;               nop
004C 00             3632               nop
                    3633     ;               nop
004D 00             3634               nop
                    3635     ;               nop
004E 00             3636               nop
                    3637     ;               nop
004F 00             3638               nop
                    3639     ;               nop
0050 00             3640               nop
                    3641     ;               nop
0051 00             3642               nop
                    3643     ;               nop
0052 00             3644               nop
                    3645     ;               nop
0053 00             3646               nop
                    3647     ;               nop
0054 00             3648               nop
                    3649     ;               nop
0055 00             3650               nop
                    3651     ;               nop
0056 00             3652               nop
                    3653     ;               nop
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    58

0057 00             3654               nop
                    3655     ;               nop
0058 00             3656               nop
                    3657     ;               nop
0059 00             3658               nop
                    3659     ;               nop
005A 00             3660               nop
                    3661     ;               nop
005B 00             3662               nop
                    3663     ;               nop
005C 00             3664               nop
                    3665     ;               nop
005D 00             3666               nop
                    3667     ;               nop
005E 00             3668               nop
                    3669     ;               nop
005F 00             3670               nop
                    3671     ;               nop
0060 00             3672               nop
                    3673     ;               nop
0061 00             3674               nop
                    3675     ;               nop
0062 00             3676               nop
                    3677     ;               #pragma endasm
                    3678     ; }
                    3679                             ; SOURCE LINE # 717
0063                3680     ?C0016:
0063 22             3681             RET     
                    3682     ; END OF SystemClock
                    3683     
                    3684     ; 
                    3685     ; 
                    3686     ; 
                    3687     ; 
                    3688     ; 
                    3689     ; 
                    3690     ; //initial UART1, there are 2 different ways to generate baudrate
                    3691     ; //way 1
                    3692     ; void sInitUART1(void)
                    3693     
----                3694             RSEG  ?PR?sInitUART1?INITIAL
0000                3695     sInitUART1:
                    3696                             ; SOURCE LINE # 726
                    3697     ; {
                    3698                             ; SOURCE LINE # 727
                    3699     ;       S0CON  = 0x50;                // set as 8-bit UART,  enable serial 0 reception, ena
                             ble serial 0 multiprocessor function
                    3700                             ; SOURCE LINE # 728
0000 759850         3701             MOV     S0CON,#050H
                    3702     ;     WDCON = 0x80;            // 0x80: baud rate = (2^smod) * Fclk / (64 * (2^10 - s0rel))
                             ;
                    3703                             ; SOURCE LINE # 729
0003 75D880         3704             MOV     WDCON,#080H
                    3705     ;                               // 0x00: baud rate = (2^smod) * Fclk / (32 * 12 * (256 - th
                             1));
                    3706     ;                               // smod = 0;    Fclk = system clock
                    3707     ;     S0RELL = 0xF3;             //Fclk = 8MHz, baud rate = 9600
                    3708                             ; SOURCE LINE # 732
0006 75AAF3         3709             MOV     S0RELL,#0F3H
                    3710     ;     S0RELH = 0x03;    
                    3711                             ; SOURCE LINE # 733
0009 75BA03         3712             MOV     S0RELH,#03H
                    3713     ; }
                    3714                             ; SOURCE LINE # 734
000C                3715     ?C0017:
000C 22             3716             RET     
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    59

                    3717     ; END OF sInitUART1
                    3718     
                    3719     ; 
                    3720     ; void sInitUART2(void)
                    3721     
----                3722             RSEG  ?PR?sInitUART2?INITIAL
0000                3723     sInitUART2:
                    3724                             ; SOURCE LINE # 736
                    3725     ; {
                    3726                             ; SOURCE LINE # 737
                    3727     ;     S1CON  = 0x90;                    //enable serial 1 reception, enable serial 0 multip
                             rocessor function
                    3728                             ; SOURCE LINE # 738
0000 759B90         3729             MOV     S1CON,#090H
                    3730     ;                                 //s1con.7 = 1: 8-bit UART(mode B)    s1con.7 = 0: 9-bit U
                             ART(mode A)
                    3731     ;     S1RELL = 0xE6;            //baud rate = Fclk / (32 * (2^10 - s0rel));
                    3732                             ; SOURCE LINE # 740
0003 759DE6         3733             MOV     S1RELL,#0E6H
                    3734     ;     S1RELH = 0x03;              //Fclk = 8MHz, baud rate = 9600
                    3735                             ; SOURCE LINE # 741
0006 75BB03         3736             MOV     S1RELH,#03H
                    3737     ; }
                    3738                             ; SOURCE LINE # 742
0009                3739     ?C0018:
0009 22             3740             RET     
                    3741     ; END OF sInitUART2
                    3742     
                    3743     ; 
                    3744     ; 
                    3745     ; void InitDAC(void)
                    3746     
----                3747             RSEG  ?PR?InitDAC?INITIAL
0000                3748     InitDAC:
                    3749             USING   0
                    3750                             ; SOURCE LINE # 745
                    3751     ; {
                    3752                             ; SOURCE LINE # 746
                    3753     ;               DAC1_PD=0;              //power up DAC1
                    3754                             ; SOURCE LINE # 747
0000 90E07A         3755             MOV     DPTR,#0E07AH
0003 E0             3756             MOVX    A,@DPTR
0004 FF             3757             MOV     R7,A
0005 EF             3758             MOV     A,R7
0006 54FB           3759             ANL     A,#0FBH
0008 FF             3760             MOV     R7,A
0009 EF             3761             MOV     A,R7
000A F0             3762             MOVX    @DPTR,A
                    3763     ;               DAC2_PD=0;              //power up DAC2
                    3764                             ; SOURCE LINE # 748
000B 90E07A         3765             MOV     DPTR,#0E07AH
000E E0             3766             MOVX    A,@DPTR
000F FF             3767             MOV     R7,A
0010 EF             3768             MOV     A,R7
0011 54FE           3769             ANL     A,#0FEH
0013 FF             3770             MOV     R7,A
0014 EF             3771             MOV     A,R7
0015 F0             3772             MOVX    @DPTR,A
                    3773     ;       DAC1_VREF=0;            //use 3.3V as vref
                    3774                             ; SOURCE LINE # 749
0016 90E07A         3775             MOV     DPTR,#0E07AH
0019 E0             3776             MOVX    A,@DPTR
001A FF             3777             MOV     R7,A
001B EF             3778             MOV     A,R7
001C 54F7           3779             ANL     A,#0F7H
001E FF             3780             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    60

001F EF             3781             MOV     A,R7
0020 F0             3782             MOVX    @DPTR,A
                    3783     ;       DAC2_VREF=0;            //use 3.3V as vref
                    3784                             ; SOURCE LINE # 750
0021 90E07A         3785             MOV     DPTR,#0E07AH
0024 E0             3786             MOVX    A,@DPTR
0025 FF             3787             MOV     R7,A
0026 EF             3788             MOV     A,R7
0027 54FD           3789             ANL     A,#0FDH
0029 FF             3790             MOV     R7,A
002A EF             3791             MOV     A,R7
002B F0             3792             MOVX    @DPTR,A
                    3793     ;       ADC_DAC_SEL1=0; //select DAC output
                    3794                             ; SOURCE LINE # 751
002C 90E089         3795             MOV     DPTR,#0E089H
002F E0             3796             MOVX    A,@DPTR
0030 FF             3797             MOV     R7,A
0031 EF             3798             MOV     A,R7
0032 54FE           3799             ANL     A,#0FEH
0034 FF             3800             MOV     R7,A
0035 EF             3801             MOV     A,R7
0036 F0             3802             MOVX    @DPTR,A
                    3803     ;       ADC_DAC_SEL2=0; //select DAC output
                    3804                             ; SOURCE LINE # 752
0037 90E089         3805             MOV     DPTR,#0E089H
003A E0             3806             MOVX    A,@DPTR
003B FF             3807             MOV     R7,A
003C EF             3808             MOV     A,R7
003D 54FD           3809             ANL     A,#0FDH
003F FF             3810             MOV     R7,A
0040 EF             3811             MOV     A,R7
0041 F0             3812             MOVX    @DPTR,A
                    3813     ; }
                    3814                             ; SOURCE LINE # 753
0042                3815     ?C0019:
0042 22             3816             RET     
                    3817     ; END OF InitDAC
                    3818     
                    3819             END
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    61

SYMBOL TABLE LISTING
------ ----- -------


N A M E                        T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . . . . . . .  C ADDR   001EH   R   SEG=?PR?INITEXT?INITIAL
?C0002. . . . . . . . . . . .  C ADDR   0004H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0003. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?INITBREAKPOINT?INITIAL
?C0004. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
?C0005. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
?C0006. . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?INITADC?INITIAL
?C0007. . . . . . . . . . . .  C ADDR   0773H   R   SEG=?PR?INITEPWM?INITIAL
?C0008. . . . . . . . . . . .  C ADDR   010BH   R   SEG=?PR?INITCOMPARATOR?INITIAL
?C0009. . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?INITWATCHDOG?INITIAL
?C0010. . . . . . . . . . . .  C ADDR   016DH   R   SEG=?PR?INITGPIO?INITIAL
?C0011. . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?INITTIMER01?INITIAL
?C0012. . . . . . . . . . . .  C ADDR   0071H   R   SEG=?PR?INITTIMER3?INITIAL
?C0013. . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?INITTIMER4?INITIAL
?C0014. . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?INITTIMER5?INITIAL
?C0015. . . . . . . . . . . .  C ADDR   0034H   R   SEG=?PR?INITTIMER6?INITIAL
?C0016. . . . . . . . . . . .  C ADDR   0063H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
?C0017. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?SINITUART1?INITIAL
?C0018. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?SINITUART2?INITIAL
?C0019. . . . . . . . . . . .  C ADDR   0042H   R   SEG=?PR?INITDAC?INITIAL
?PR?EPWMOUTPUTDISABLE?INITIAL  C SEG    000DH       REL=UNIT
?PR?EPWMOUTPUTENABLE?INITIAL.  C SEG    000DH       REL=UNIT
?PR?INITADC?INITIAL . . . . .  C SEG    009DH       REL=UNIT
?PR?INITBREAKPOINT?INITIAL. .  C SEG    000AH       REL=UNIT
?PR?INITCOMPARATOR?INITIAL. .  C SEG    010CH       REL=UNIT
?PR?INITDAC?INITIAL . . . . .  C SEG    0043H       REL=UNIT
?PR?INITEPWM?INITIAL. . . . .  C SEG    0774H       REL=UNIT
?PR?INITEXT?INITIAL . . . . .  C SEG    001FH       REL=UNIT
?PR?INITGPIO?INITIAL. . . . .  C SEG    016EH       REL=UNIT
?PR?INITISDDEBUG?INITIAL. . .  C SEG    0005H       REL=UNIT
?PR?INITTIMER01?INITIAL . . .  C SEG    0023H       REL=UNIT
?PR?INITTIMER3?INITIAL. . . .  C SEG    0072H       REL=UNIT
?PR?INITTIMER4?INITIAL. . . .  C SEG    002DH       REL=UNIT
?PR?INITTIMER5?INITIAL. . . .  C SEG    0037H       REL=UNIT
?PR?INITTIMER6?INITIAL. . . .  C SEG    0035H       REL=UNIT
?PR?INITWATCHDOG?INITIAL. . .  C SEG    001EH       REL=UNIT
?PR?SINITUART1?INITIAL. . . .  C SEG    000DH       REL=UNIT
?PR?SINITUART2?INITIAL. . . .  C SEG    000AH       REL=UNIT
?PR?SYSTEMCLOCK?INITIAL . . .  C SEG    0064H       REL=UNIT
ACC . . . . . . . . . . . . .  D ADDR   00E0H   A   
ARCON . . . . . . . . . . . .  D ADDR   00EFH   A   
B . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BPCTRL. . . . . . . . . . . .  D ADDR   0093H   A   
BREAKH. . . . . . . . . . . .  D ADDR   0095H   A   
BREAKL. . . . . . . . . . . .  D ADDR   0094H   A   
BSHCTL. . . . . . . . . . . .  D ADDR   00ABH   A   
BSHI. . . . . . . . . . . . .  D ADDR   00ACH   A   
BSHI_0. . . . . . . . . . . .  D ADDR   00ACH   A   
BSHI_1. . . . . . . . . . . .  D ADDR   00ADH   A   
BSHI_2. . . . . . . . . . . .  D ADDR   00AEH   A   
BSHI_3. . . . . . . . . . . .  D ADDR   00AFH   A   
BSHO. . . . . . . . . . . . .  D ADDR   00BCH   A   
BSHO_0. . . . . . . . . . . .  D ADDR   00BCH   A   
BSHO_1. . . . . . . . . . . .  D ADDR   00BDH   A   
BSHO_2. . . . . . . . . . . .  D ADDR   00BEH   A   
BSHO_3. . . . . . . . . . . .  D ADDR   00BFH   A   
CKCON . . . . . . . . . . . .  D ADDR   008EH   A   
CLK_DIV . . . . . . . . . . .  D ADDR   0091H   A   
CLK_PD_CON. . . . . . . . . .  D ADDR   008FH   A   
DPH . . . . . . . . . . . . .  D ADDR   0083H   A   
DPH1. . . . . . . . . . . . .  D ADDR   0085H   A   
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    62

DPL . . . . . . . . . . . . .  D ADDR   0082H   A   
DPL1. . . . . . . . . . . . .  D ADDR   0084H   A   
DPS . . . . . . . . . . . . .  D ADDR   0092H   A   
EADC. . . . . . . . . . . . .  B ADDR   00B8H.0 A   
EAL . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EPWMOUTPUTDISABLE . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
EPWMOUTPUTENABLE. . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
ES. . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ES0 . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0 . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EX2 . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
EX3 . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
EX4 . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
EX5 . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
EX6 . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
I2FR. . . . . . . . . . . . .  B ADDR   00C8H.5 A   
I3FR. . . . . . . . . . . . .  B ADDR   00C8H.6 A   
IADC. . . . . . . . . . . . .  B ADDR   00C0H.0 A   
IE. . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . .  B ADDR   0088H.3 A   
IEN0. . . . . . . . . . . . .  D ADDR   00A8H   A   
IEN1. . . . . . . . . . . . .  D ADDR   00B8H   A   
IEN2. . . . . . . . . . . . .  D ADDR   009AH   A   
IEX2. . . . . . . . . . . . .  B ADDR   00C0H.1 A   
IEX3. . . . . . . . . . . . .  B ADDR   00C0H.2 A   
IEX4. . . . . . . . . . . . .  B ADDR   00C0H.3 A   
IEX5. . . . . . . . . . . . .  B ADDR   00C0H.4 A   
IEX6. . . . . . . . . . . . .  B ADDR   00C0H.5 A   
INITADC . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITADC?INITIAL
INITBREAKPOINT. . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITBREAKPOINT?INITIAL
INITCOMPARATOR. . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITCOMPARATOR?INITIAL
INITDAC . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITDAC?INITIAL
INITEPWM. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEPWM?INITIAL
INITEXT . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEXT?INITIAL
INITGPIO. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITGPIO?INITIAL
INITIAL . . . . . . . . . . .  N NUMB   -----       
INITISDDEBUG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITISDDEBUG?INITIAL
INITTIMER01 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER01?INITIAL
INITTIMER3. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER3?INITIAL
INITTIMER4. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER4?INITIAL
INITTIMER5. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER5?INITIAL
INITTIMER6. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER6?INITIAL
INITWATCHDOG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITWATCHDOG?INITIAL
INT_REG1. . . . . . . . . . .  D ADDR   00F9H   A   
INT_REG2. . . . . . . . . . .  D ADDR   00FAH   A   
INT_REG3. . . . . . . . . . .  D ADDR   00FDH   A   
INT_REG4. . . . . . . . . . .  D ADDR   00FEH   A   
IP0 . . . . . . . . . . . . .  D ADDR   00A9H   A   
IP1 . . . . . . . . . . . . .  D ADDR   00B9H   A   
IRCON . . . . . . . . . . . .  D ADDR   00C0H   A   
IT0 . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . .  B ADDR   0088H.2 A   
MD0 . . . . . . . . . . . . .  D ADDR   00E9H   A   
MD1 . . . . . . . . . . . . .  D ADDR   00EAH   A   
MD2 . . . . . . . . . . . . .  D ADDR   00EBH   A   
MD3 . . . . . . . . . . . . .  D ADDR   00ECH   A   
MD4 . . . . . . . . . . . . .  D ADDR   00EDH   A   
MD5 . . . . . . . . . . . . .  D ADDR   00EEH   A   
MEM_CONFIG. . . . . . . . . .  D ADDR   00E8H   A   
P0. . . . . . . . . . . . . .  D ADDR   0080H   A   
P00 . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01 . . . . . . . . . . . . .  B ADDR   0080H.1 A   
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    63

P02 . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03 . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04 . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05 . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06 . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07 . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P1. . . . . . . . . . . . . .  D ADDR   0090H   A   
P10 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11 . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12 . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13 . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14 . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16 . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17 . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1AQCSFRC . . . . . . . . . .  D ADDR   00B1H   A   
P1AQSFRC. . . . . . . . . . .  D ADDR   00A7H   A   
P1CMPA. . . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPA_H. . . . . . . . . . .  D ADDR   00A4H   A   
P1CMPA_L. . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPB. . . . . . . . . . . .  D ADDR   00A5H   A   
P1CMPB_H. . . . . . . . . . .  D ADDR   00A6H   A   
P1CMPB_L. . . . . . . . . . .  D ADDR   00A5H   A   
P1ETCLR . . . . . . . . . . .  D ADDR   00B6H   A   
P1ETFLG . . . . . . . . . . .  D ADDR   00B5H   A   
P1ETFRC . . . . . . . . . . .  D ADDR   00B7H   A   
P1TBPRD . . . . . . . . . . .  D ADDR   00A1H   A   
P1TBPRD_H . . . . . . . . . .  D ADDR   00A2H   A   
P1TBPRD_L . . . . . . . . . .  D ADDR   00A1H   A   
P1TZCLR . . . . . . . . . . .  D ADDR   00B3H   A   
P1TZFLG . . . . . . . . . . .  D ADDR   00B2H   A   
P1TZFRC . . . . . . . . . . .  D ADDR   00B4H   A   
P2. . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20 . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21 . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P22 . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23 . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P24 . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P25 . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26 . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27 . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2AQCSFRC . . . . . . . . . .  D ADDR   00C9H   A   
P2AQSFRC. . . . . . . . . . .  D ADDR   00C7H   A   
P2CMPA. . . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPA_H. . . . . . . . . . .  D ADDR   00C4H   A   
P2CMPA_L. . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPB. . . . . . . . . . . .  D ADDR   00C5H   A   
P2CMPB_H. . . . . . . . . . .  D ADDR   00C6H   A   
P2CMPB_L. . . . . . . . . . .  D ADDR   00C5H   A   
P2ETCLR . . . . . . . . . . .  D ADDR   00CEH   A   
P2ETFLG . . . . . . . . . . .  D ADDR   00CDH   A   
P2ETFRC . . . . . . . . . . .  D ADDR   00CFH   A   
P2TBPRD . . . . . . . . . . .  D ADDR   00C1H   A   
P2TBPRD_H . . . . . . . . . .  D ADDR   00C2H   A   
P2TBPRD_L . . . . . . . . . .  D ADDR   00C1H   A   
P2TZCLR . . . . . . . . . . .  D ADDR   00CBH   A   
P2TZFLG . . . . . . . . . . .  D ADDR   00CAH   A   
P2TZFRC . . . . . . . . . . .  D ADDR   00CCH   A   
P3. . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30 . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31 . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P32 . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33 . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P34 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36 . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    64

P37 . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3AQCSFRC . . . . . . . . . .  D ADDR   00D9H   A   
P3AQSFRC. . . . . . . . . . .  D ADDR   00D7H   A   
P3CMPA. . . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPA_H. . . . . . . . . . .  D ADDR   00D4H   A   
P3CMPA_L. . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPB. . . . . . . . . . . .  D ADDR   00D5H   A   
P3CMPB_H. . . . . . . . . . .  D ADDR   00D6H   A   
P3CMPB_L. . . . . . . . . . .  D ADDR   00D5H   A   
P3ETCLR . . . . . . . . . . .  D ADDR   00DEH   A   
P3ETFLG . . . . . . . . . . .  D ADDR   00DDH   A   
P3ETFRC . . . . . . . . . . .  D ADDR   00DFH   A   
P3TBPRD . . . . . . . . . . .  D ADDR   00D1H   A   
P3TBPRD_H . . . . . . . . . .  D ADDR   00D2H   A   
P3TBPRD_L . . . . . . . . . .  D ADDR   00D1H   A   
P3TZCLR . . . . . . . . . . .  D ADDR   00DBH   A   
P3TZFLG . . . . . . . . . . .  D ADDR   00DAH   A   
P3TZFRC . . . . . . . . . . .  D ADDR   00DCH   A   
P4AQCSFRC . . . . . . . . . .  D ADDR   00F1H   A   
P4AQSFRC. . . . . . . . . . .  D ADDR   00E7H   A   
P4CMPA. . . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPA_H. . . . . . . . . . .  D ADDR   00E4H   A   
P4CMPA_L. . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPB. . . . . . . . . . . .  D ADDR   00E5H   A   
P4CMPB_H. . . . . . . . . . .  D ADDR   00E6H   A   
P4CMPB_L. . . . . . . . . . .  D ADDR   00E5H   A   
P4ETCLR . . . . . . . . . . .  D ADDR   00F6H   A   
P4ETFLG . . . . . . . . . . .  D ADDR   00F5H   A   
P4ETFRC . . . . . . . . . . .  D ADDR   00F7H   A   
P4TBPRD . . . . . . . . . . .  D ADDR   00E1H   A   
P4TBPRD_H . . . . . . . . . .  D ADDR   00E2H   A   
P4TBPRD_L . . . . . . . . . .  D ADDR   00E1H   A   
P4TZCLR . . . . . . . . . . .  D ADDR   00F3H   A   
P4TZFLG . . . . . . . . . . .  D ADDR   00F2H   A   
P4TZFRC . . . . . . . . . . .  D ADDR   00F4H   A   
PCON. . . . . . . . . . . . .  D ADDR   0087H   A   
POWER_CON . . . . . . . . . .  D ADDR   0097H   A   
PSW . . . . . . . . . . . . .  D ADDR   00D0H   A   
RB80. . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN0. . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RI0 . . . . . . . . . . . . .  B ADDR   0098H.0 A   
S0BUF . . . . . . . . . . . .  D ADDR   0099H   A   
S0CON . . . . . . . . . . . .  D ADDR   0098H   A   
S0RELH. . . . . . . . . . . .  D ADDR   00BAH   A   
S0RELL. . . . . . . . . . . .  D ADDR   00AAH   A   
S1BUF . . . . . . . . . . . .  D ADDR   009CH   A   
S1CON . . . . . . . . . . . .  D ADDR   009BH   A   
S1RELH. . . . . . . . . . . .  D ADDR   00BBH   A   
S1RELL. . . . . . . . . . . .  D ADDR   009DH   A   
SBUF. . . . . . . . . . . . .  D ADDR   0099H   A   
SINITUART1. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART1?INITIAL
SINITUART2. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART2?INITIAL
SM0 . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM20. . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . .  D ADDR   0081H   A   
SRAM_CON. . . . . . . . . . .  D ADDR   00F8H   A   
SWDT. . . . . . . . . . . . .  B ADDR   00B8H.6 A   
SYSTEMCLOCK . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
T2CON . . . . . . . . . . . .  D ADDR   00C8H   A   
TB80. . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . . .  D ADDR   0088H   A   
TF0 . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . .  D ADDR   008CH   A   
A51 MACRO ASSEMBLER  INITIAL                                                              12/07/2018 11:17:56 PAGE    65

TH1 . . . . . . . . . . . . .  D ADDR   008DH   A   
TI0 . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0 . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . . .  D ADDR   008BH   A   
TMOD. . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . .  B ADDR   0088H.6 A   
WDCON . . . . . . . . . . . .  D ADDR   00D8H   A   
WDCON_7 . . . . . . . . . . .  B ADDR   00D8H.7 A   
WDT . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
WDTREL. . . . . . . . . . . .  D ADDR   0086H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
