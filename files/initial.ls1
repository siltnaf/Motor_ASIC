A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\OUTPUT\initial.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE .\OUTPUT\initial.src PR(.\files\initial.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\OUTPUT\initial.SRC generated from: SRC\initial.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE SRC\initial.c OPTIMIZE(0,SPEED) REGFILE(.\OUTPUT\motor.
                             ORC) BROWSE INTVECTOR(0X2000) INCDIR(.\INC) DEBUG OBJECTEXTEND CODE PRINT(.\files\initial.l
                             st) TABS(2) SRC(.\OUTPUT\initial.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    INITIAL
                       8     
  00CE                 9     P2ETCLR DATA    0CEH
  009B                10     TB80    BIT     098H.3
  00DE                11     P3ETCLR DATA    0DEH
  00A1                12     P1TBPRD DATA    0A1H
  0080                13     P0      DATA    080H
  00F6                14     P4ETCLR DATA    0F6H
  00C1                15     P2TBPRD DATA    0C1H
  0090                16     P1      DATA    090H
  00D1                17     P3TBPRD DATA    0D1H
  00A0                18     P2      DATA    0A0H
  00E1                19     P4TBPRD DATA    0E1H
  00B0                20     P3      DATA    0B0H
  009D                21     SM20    BIT     098H.5
  00B1                22     P1AQCSFRC       DATA    0B1H
  00C9                23     P2AQCSFRC       DATA    0C9H
  00D9                24     P3AQCSFRC       DATA    0D9H
  00F1                25     P4AQCSFRC       DATA    0F1H
  00B2                26     P1TZFLG DATA    0B2H
  00CA                27     P2TZFLG DATA    0CAH
  00DA                28     P3TZFLG DATA    0DAH
  00B4                29     P1TZFRC DATA    0B4H
  00A8                30     IEN0    DATA    0A8H
  00F2                31     P4TZFLG DATA    0F2H
  00CC                32     P2TZFRC DATA    0CCH
  00A8                33     IE      DATA    0A8H
  00B8                34     EADC    BIT     0B8H.0
  00B8                35     IEN1    DATA    0B8H
  0085                36     DPH1    DATA    085H
  00DC                37     P3TZFRC DATA    0DCH
  009A                38     IEN2    DATA    09AH
  00F4                39     P4TZFRC DATA    0F4H
  008F                40     CLK_PD_CON      DATA    08FH
  00C0                41     IADC    BIT     0C0H.0
  0084                42     DPL1    DATA    084H
  00B3                43     P1TZCLR DATA    0B3H
  00CB                44     P2TZCLR DATA    0CBH
  00DF                45     WDCON_7 BIT     0D8H.7
  00CD                46     I2FR    BIT     0C8H.5
  00DB                47     P3TZCLR DATA    0DBH
  00CE                48     I3FR    BIT     0C8H.6
  00F3                49     P4TZCLR DATA    0F3H
  009C                50     REN0    BIT     098H.4
  00AC                51     ES      BIT     0A8H.4
  00C1                52     IEX2    BIT     0C0H.1
  00C2                53     IEX3    BIT     0C0H.2
  0098                54     RI      BIT     098H.0
  00C3                55     IEX4    BIT     0C0H.3
  00C4                56     IEX5    BIT     0C0H.4
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     2

  00C5                57     IEX6    BIT     0C0H.5
  0091                58     CLK_DIV DATA    091H
  0081                59     SP      DATA    081H
  00A3                60     P1CMPA  DATA    0A3H
  00C3                61     P2CMPA  DATA    0C3H
  00A5                62     P1CMPB  DATA    0A5H
  00D3                63     P3CMPA  DATA    0D3H
  00C5                64     P2CMPB  DATA    0C5H
  00E3                65     P4CMPA  DATA    0E3H
  00D5                66     P3CMPB  DATA    0D5H
  00E5                67     P4CMPB  DATA    0E5H
  00A2                68     P1TBPRD_H       DATA    0A2H
  00C2                69     P2TBPRD_H       DATA    0C2H
  00D2                70     P3TBPRD_H       DATA    0D2H
  00E2                71     P4TBPRD_H       DATA    0E2H
  00A1                72     P1TBPRD_L       DATA    0A1H
  00C1                73     P2TBPRD_L       DATA    0C1H
  00D1                74     P3TBPRD_L       DATA    0D1H
  00E1                75     P4TBPRD_L       DATA    0E1H
  0095                76     BREAKH  DATA    095H
  00BA                77     S0RELH  DATA    0BAH
  0080                78     P00     BIT     080H.0
  0099                79     SBUF    DATA    099H
  00BB                80     S1RELH  DATA    0BBH
  0090                81     P10     BIT     090H.0
  0087                82     PCON    DATA    087H
  0081                83     P01     BIT     080H.1
  00A0                84     P20     BIT     0A0H.0
  0091                85     P11     BIT     090H.1
  0082                86     P02     BIT     080H.2
  00B0                87     P30     BIT     0B0H.0
  00A1                88     P21     BIT     0A0H.1
  0092                89     P12     BIT     090H.2
  0083                90     P03     BIT     080H.3
  0094                91     BREAKL  DATA    094H
  00B1                92     P31     BIT     0B0H.1
  00AA                93     S0RELL  DATA    0AAH
  00A2                94     P22     BIT     0A0H.2
  0093                95     P13     BIT     090H.3
  0084                96     P04     BIT     080H.4
  00B2                97     P32     BIT     0B0H.2
  00A3                98     P23     BIT     0A0H.3
  009D                99     S1RELL  DATA    09DH
  0094               100     P14     BIT     090H.4
  0089               101     TMOD    DATA    089H
  0088               102     TCON    DATA    088H
  0085               103     P05     BIT     080H.5
  00B3               104     P33     BIT     0B0H.3
  00A4               105     P24     BIT     0A0H.4
  0095               106     P15     BIT     090H.5
  0086               107     P06     BIT     080H.6
  00B4               108     P34     BIT     0B0H.4
  00AC               109     BSHI_0  DATA    0ACH
  00A5               110     P25     BIT     0A0H.5
  0096               111     P16     BIT     090H.6
  0087               112     P07     BIT     080H.7
  00B5               113     P35     BIT     0B0H.5
  00AD               114     BSHI_1  DATA    0ADH
  00A6               115     P26     BIT     0A0H.6
  0097               116     P17     BIT     090H.7
  00B6               117     P36     BIT     0B0H.6
  00AE               118     BSHI_2  DATA    0AEH
  00A7               119     P27     BIT     0A0H.7
  00B7               120     P37     BIT     0B0H.7
  00AF               121     BSHI_3  DATA    0AFH
  00BC               122     BSHO_0  DATA    0BCH
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     3

  00BD               123     BSHO_1  DATA    0BDH
  0089               124     IE0     BIT     088H.1
  00BE               125     BSHO_2  DATA    0BEH
  008B               126     IE1     BIT     088H.3
  00BF               127     BSHO_3  DATA    0BFH
  00F0               128     B       DATA    0F0H
  00E9               129     MD0     DATA    0E9H
  00EA               130     MD1     DATA    0EAH
  00AB               131     BSHCTL  DATA    0ABH
  00EB               132     MD2     DATA    0EBH
  00BE               133     SWDT    BIT     0B8H.6
  00A7               134     P1AQSFRC        DATA    0A7H
  00EC               135     MD3     DATA    0ECH
  00C7               136     P2AQSFRC        DATA    0C7H
  00ED               137     MD4     DATA    0EDH
  00D7               138     P3AQSFRC        DATA    0D7H
  00EE               139     MD5     DATA    0EEH
  00E7               140     P4AQSFRC        DATA    0E7H
  00E0               141     ACC     DATA    0E0H
  00AC               142     ES0     BIT     0A8H.4
  00A9               143     IP0     DATA    0A9H
  00A9               144     ET0     BIT     0A8H.1
  0093               145     BPCTRL  DATA    093H
  00B9               146     IP1     DATA    0B9H
  00AB               147     ET1     BIT     0A8H.3
  008D               148     TF0     BIT     088H.5
  0098               149     RI0     BIT     098H.0
  008F               150     TF1     BIT     088H.7
  00A4               151     P1CMPA_H        DATA    0A4H
  008C               152     TH0     DATA    08CH
  00C4               153     P2CMPA_H        DATA    0C4H
  00A6               154     P1CMPB_H        DATA    0A6H
  00A8               155     EX0     BIT     0A8H.0
  0099               156     TI0     BIT     098H.1
  008D               157     TH1     DATA    08DH
  0088               158     IT0     BIT     088H.0
  00D4               159     P3CMPA_H        DATA    0D4H
  00C6               160     P2CMPB_H        DATA    0C6H
  00AA               161     EX1     BIT     0A8H.2
  008A               162     IT1     BIT     088H.2
  00E4               163     P4CMPA_H        DATA    0E4H
  00D6               164     P3CMPB_H        DATA    0D6H
  00B9               165     EX2     BIT     0B8H.1
  00E6               166     P4CMPB_H        DATA    0E6H
  00A3               167     P1CMPA_L        DATA    0A3H
  00BA               168     EX3     BIT     0B8H.2
  009F               169     SM0     BIT     098H.7
  0097               170     POWER_CON       DATA    097H
  008A               171     TL0     DATA    08AH
  00C3               172     P2CMPA_L        DATA    0C3H
  00A5               173     P1CMPB_L        DATA    0A5H
  00BB               174     EX4     BIT     0B8H.3
  009E               175     SM1     BIT     098H.6
  008B               176     TL1     DATA    08BH
  00D3               177     P3CMPA_L        DATA    0D3H
  00C5               178     P2CMPB_L        DATA    0C5H
  00BC               179     EX5     BIT     0B8H.4
  00AF               180     EAL     BIT     0A8H.7
  00E3               181     P4CMPA_L        DATA    0E3H
  00D5               182     P3CMPB_L        DATA    0D5H
  00BD               183     EX6     BIT     0B8H.5
  00E5               184     P4CMPB_L        DATA    0E5H
  0086               185     WDTREL  DATA    086H
  008C               186     TR0     BIT     088H.4
  008E               187     TR1     BIT     088H.6
  00F9               188     INT_REG1        DATA    0F9H
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     4

  0083               189     DPH     DATA    083H
  00FA               190     INT_REG2        DATA    0FAH
  00FD               191     INT_REG3        DATA    0FDH
  00FE               192     INT_REG4        DATA    0FEH
  0082               193     DPL     DATA    082H
  0099               194     S0BUF   DATA    099H
  009C               195     S1BUF   DATA    09CH
  0098               196     S0CON   DATA    098H
  009B               197     S1CON   DATA    09BH
  00C8               198     T2CON   DATA    0C8H
  0092               199     DPS     DATA    092H
  00AE               200     WDT     BIT     0A8H.6
  008E               201     CKCON   DATA    08EH
  00EF               202     ARCON   DATA    0EFH
  00B5               203     P1ETFLG DATA    0B5H
  00F8               204     SRAM_CON        DATA    0F8H
  00CD               205     P2ETFLG DATA    0CDH
  00DD               206     P3ETFLG DATA    0DDH
  00B7               207     P1ETFRC DATA    0B7H
  00F5               208     P4ETFLG DATA    0F5H
  00CF               209     P2ETFRC DATA    0CFH
  00E8               210     MEM_CONFIG      DATA    0E8H
  00DF               211     P3ETFRC DATA    0DFH
  00F7               212     P4ETFRC DATA    0F7H
  00D0               213     PSW     DATA    0D0H
  00D8               214     WDCON   DATA    0D8H
  00C0               215     IRCON   DATA    0C0H
  009A               216     RB80    BIT     098H.2
  00B6               217     P1ETCLR DATA    0B6H
                     218     ?PR?InitEXT?INITIAL  SEGMENT CODE 
                     219     ?PR?InitISDDebug?INITIAL                 SEGMENT CODE 
                     220     ?PR?InitBreakPoint?INITIAL               SEGMENT CODE 
                     221     ?PR?epwmOutputDisable?INITIAL            SEGMENT CODE 
                     222     ?PR?epwmOutputEnable?INITIAL             SEGMENT CODE 
                     223     ?PR?InitADC?INITIAL  SEGMENT CODE 
                     224     ?PR?Initepwm?INITIAL SEGMENT CODE 
                     225     ?PR?InitComp234?INITIAL                  SEGMENT CODE 
                     226     ?PR?InitWatchDog?INITIAL                 SEGMENT CODE 
                     227     ?PR?InitGPIO?INITIAL SEGMENT CODE 
                     228     ?PR?InitTimer01?INITIAL                  SEGMENT CODE 
                     229     ?PR?InitTimer3?INITIAL                   SEGMENT CODE 
                     230     ?PR?InitTimer4?INITIAL                   SEGMENT CODE 
                     231     ?PR?InitTimer5?INITIAL                   SEGMENT CODE 
                     232     ?PR?InitTimer6?INITIAL                   SEGMENT CODE 
                     233     ?PR?SystemClock?INITIAL                  SEGMENT CODE 
                     234     ?PR?sInitUART1?INITIAL                   SEGMENT CODE 
                     235     ?PR?sInitUART2?INITIAL                   SEGMENT CODE 
                     236             EXTRN   CODE (__isd_init)
                     237             EXTRN   DATA (hh)
                     238             PUBLIC  sInitUART2
                     239             PUBLIC  sInitUART1
                     240             PUBLIC  SystemClock
                     241             PUBLIC  InitTimer6
                     242             PUBLIC  InitTimer5
                     243             PUBLIC  InitTimer4
                     244             PUBLIC  InitTimer3
                     245             PUBLIC  InitTimer01
                     246             PUBLIC  InitGPIO
                     247             PUBLIC  InitWatchDog
                     248             PUBLIC  InitComp234
                     249             PUBLIC  Initepwm
                     250             PUBLIC  InitADC
                     251             PUBLIC  epwmOutputEnable
                     252             PUBLIC  epwmOutputDisable
                     253             PUBLIC  InitBreakPoint
                     254             PUBLIC  InitISDDebug
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     5

                     255             PUBLIC  InitEXT
                     256     ; #include "register.h"
                     257     ; #include <intrins.h>
                     258     ; #include "app.h"
                     259     ; #include "initial.h"
                     260     ; #include "ISD51.H"
                     261     ; 
                     262     ; 
                     263     ; 
                     264     ; 
                     265     ; void InitEXT(void)
                     266     
----                 267             RSEG  ?PR?InitEXT?INITIAL
0000                 268     InitEXT:
                     269             USING   0
                     270                             ; SOURCE LINE # 10
                     271     ; {     
                     272                             ; SOURCE LINE # 11
                     273     ; //            EINT1_EN=0; 
                     274     ; //            EINT2_EN=1;                             //enable EXT2
                     275     ; //            EINT3_EN=0;
                     276     ; //            EINT4_EN=0;
                     277     ;       
                     278     ;                       EXINT_EN = 0x02;                                        //RXINT_EN 
                             cannot be read, it can be write only
                     279                             ; SOURCE LINE # 17
0000 90E08D          280             MOV     DPTR,#0E08DH
0003 7402            281             MOV     A,#02H
0005 F0              282             MOVX    @DPTR,A
                     283     ;                                                                                          
                                                                  //EXINT_EN= 0x01      -----enable EXT1
                     284     ;                                                                                          
                                                                  //                                      0x02                    -----enable EXT2
                     285     ;                                                                                          
                                                                  //                                      0x04              -----enable EXT3
                     286     ;                                                                                          
                                                                  //                                      0x08                    -----enable EXT4
                     287     ;       
                     288     ;               EINT2_CFG=RISING_EDGE;          //rising edge trigger
                     289                             ; SOURCE LINE # 23
0006 90E0BF          290             MOV     DPTR,#0E0BFH
0009 E0              291             MOVX    A,@DPTR
000A FF              292             MOV     R7,A
000B EF              293             MOV     A,R7
000C 54F3            294             ANL     A,#0F3H
000E FF              295             MOV     R7,A
000F EF              296             MOV     A,R7
0010 4404            297             ORL     A,#04H
0012 FF              298             MOV     R7,A
0013 EF              299             MOV     A,R7
0014 F0              300             MOVX    @DPTR,A
                     301     ;               EX0=1;
                     302                             ; SOURCE LINE # 24
0015 D2A8            303             SETB    EX0
                     304     ;               IT0=1;
                     305                             ; SOURCE LINE # 25
0017 D288            306             SETB    IT0
                     307     ;               IE0=0;
                     308                             ; SOURCE LINE # 26
0019 C289            309             CLR     IE0
                     310     ;               INT_REG1 &=0xf0;              
                     311                             ; SOURCE LINE # 27
001B 53F9F0          312             ANL     INT_REG1,#0F0H
                     313     ;       
                     314     ; }
                     315                             ; SOURCE LINE # 29
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     6

001E                 316     ?C0001:
001E 22              317             RET     
                     318     ; END OF InitEXT
                     319     
                     320     ; 
                     321     ; void InitISDDebug(void)
                     322     
----                 323             RSEG  ?PR?InitISDDebug?INITIAL
0000                 324     InitISDDebug:
                     325             USING   0
                     326                             ; SOURCE LINE # 31
                     327     ; {
                     328                             ; SOURCE LINE # 32
                     329     ;       
                     330     ;     EAL = 0;
                     331                             ; SOURCE LINE # 34
0000 C2AF            332             CLR     EAL
                     333     ;     //ISD51++++++++++++++++++++++++++
                     334     ;     #if ISDDebug == ENABLE_ISD
                     335     ;               InitBreakPoint();
                     336                             ; SOURCE LINE # 37
0002 120000   F      337             LCALL   InitBreakPoint
                     338     ;     sInitUART1();
                     339                             ; SOURCE LINE # 38
0005 120000   F      340             LCALL   sInitUART1
                     341     ;  
                     342     ;     IP0 = 0x30;
                     343                             ; SOURCE LINE # 40
0008 75A930          344             MOV     IP0,#030H
                     345     ;     IP1 = 0x20;
                     346                             ; SOURCE LINE # 41
000B 75B920          347             MOV     IP1,#020H
                     348     ;     ET0 = 0;
                     349                             ; SOURCE LINE # 42
000E C2A9            350             CLR     ET0
                     351     ;     EX6 = 0 ;
                     352                             ; SOURCE LINE # 43
0010 C2BD            353             CLR     EX6
                     354     ;     ES0 = 1;
                     355                             ; SOURCE LINE # 44
0012 D2AC            356             SETB    ES0
                     357     ;     EAL = 1;
                     358                             ; SOURCE LINE # 45
0014 D2AF            359             SETB    EAL
                     360     ;     _nop_();
                     361                             ; SOURCE LINE # 46
0016 00              362             NOP     
                     363     ;     _nop_();
                     364                             ; SOURCE LINE # 47
0017 00              365             NOP     
                     366     ;     _nop_();
                     367                             ; SOURCE LINE # 48
0018 00              368             NOP     
0019                 369     ?C0002:
                     370     ;     while(1)
                     371                             ; SOURCE LINE # 49
                     372     ;     {
                     373                             ; SOURCE LINE # 50
                     374     ;         P10 = 0;
                     375                             ; SOURCE LINE # 51
0019 C290            376             CLR     P10
                     377     ;         P10 = 1;
                     378                             ; SOURCE LINE # 52
001B D290            379             SETB    P10
                     380     ;         ISDcheck();      // initialize uVision2 Debugger and continue program run
                     381                             ; SOURCE LINE # 53
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     7

001D 20AC10          382             JB      ES,?C0004
0020 30980D          383             JNB     RI,?C0004
0023 E599            384             MOV     A,SBUF
0025 64A5            385             XRL     A,#0A5H
0027 6004            386             JZ      ?C0006
0029 C298            387             CLR     RI
002B 8003            388             SJMP    ?C0004
002D                 389     ?C0006:
002D 120000   F      390             LCALL   __isd_init
0030                 391     ?C0007:
0030                 392     ?C0005:
0030                 393     ?C0004:
                     394     ;         if((BPCTRL & 0x10) != 0) break;
                     395                             ; SOURCE LINE # 54
0030 E593            396             MOV     A,BPCTRL
0032 30E4E4          397             JNB     ACC.4,?C0002
0035 8002            398             SJMP    ?C0003
0037                 399     ?C0008:
                     400     ;     }
                     401                             ; SOURCE LINE # 55
0037 80E0            402             SJMP    ?C0002
0039                 403     ?C0003:
                     404     ;     _nop_();
                     405                             ; SOURCE LINE # 56
0039 00              406             NOP     
                     407     ;     _nop_();
                     408                             ; SOURCE LINE # 57
003A 00              409             NOP     
                     410     ;     _nop_();
                     411                             ; SOURCE LINE # 58
003B 00              412             NOP     
                     413     ;     ET0 = 1;
                     414                             ; SOURCE LINE # 59
003C D2A9            415             SETB    ET0
                     416     ;     EX6 = 1;
                     417                             ; SOURCE LINE # 60
003E D2BD            418             SETB    EX6
                     419     ;     _nop_();
                     420                             ; SOURCE LINE # 61
0040 00              421             NOP     
                     422     ;     _nop_();
                     423                             ; SOURCE LINE # 62
0041 00              424             NOP     
                     425     ;     _nop_();
                     426                             ; SOURCE LINE # 63
0042 00              427             NOP     
                     428     ;     #endif
                     429     ;     //++++++++++++++++++++++++++++++
                     430     ;               EAL = 1;                                //enable all interrupts
                     431                             ; SOURCE LINE # 66
0043 D2AF            432             SETB    EAL
                     433     ; }
                     434                             ; SOURCE LINE # 67
0045                 435     ?C0009:
0045 22              436             RET     
                     437     ; END OF InitISDDebug
                     438     
                     439     ; 
                     440     ; 
                     441     ; 
                     442     ; 
                     443     ; 
                     444     ; void InitBreakPoint  (void)
                     445     
----                 446             RSEG  ?PR?InitBreakPoint?INITIAL
0000                 447     InitBreakPoint:
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     8

                     448                             ; SOURCE LINE # 73
                     449     ; {
                     450                             ; SOURCE LINE # 74
                     451     ;     BPCTRL   = 0x01;
                     452                             ; SOURCE LINE # 75
0000 759301          453             MOV     BPCTRL,#01H
                     454     ;       BREAKL   = 0xff;
                     455                             ; SOURCE LINE # 76
0003 7594FF          456             MOV     BREAKL,#0FFH
                     457     ;       BREAKH   = 0xff;
                     458                             ; SOURCE LINE # 77
0006 7595FF          459             MOV     BREAKH,#0FFH
                     460     ; }
                     461                             ; SOURCE LINE # 78
0009                 462     ?C0010:
0009 22              463             RET     
                     464     ; END OF InitBreakPoint
                     465     
                     466     ; 
                     467     ; void epwmOutputDisable(void)
                     468     
----                 469             RSEG  ?PR?epwmOutputDisable?INITIAL
0000                 470     epwmOutputDisable:
                     471                             ; SOURCE LINE # 80
                     472     ; {
                     473                             ; SOURCE LINE # 81
                     474     ;       P1AQCSFRC = 0x05;                                               // force epwmxA and
                              epwmxB output low
                     475                             ; SOURCE LINE # 82
0000 75B105          476             MOV     P1AQCSFRC,#05H
                     477     ;       P2AQCSFRC = 0x05;
                     478                             ; SOURCE LINE # 83
0003 75C905          479             MOV     P2AQCSFRC,#05H
                     480     ;       P3AQCSFRC = 0x05;
                     481                             ; SOURCE LINE # 84
0006 75D905          482             MOV     P3AQCSFRC,#05H
                     483     ;       P4AQCSFRC = 0x05;
                     484                             ; SOURCE LINE # 85
0009 75F105          485             MOV     P4AQCSFRC,#05H
                     486     ; }
                     487                             ; SOURCE LINE # 86
000C                 488     ?C0011:
000C 22              489             RET     
                     490     ; END OF epwmOutputDisable
                     491     
                     492     ; 
                     493     ; void epwmOutputEnable(void)
                     494     
----                 495             RSEG  ?PR?epwmOutputEnable?INITIAL
0000                 496     epwmOutputEnable:
                     497                             ; SOURCE LINE # 88
                     498     ; {
                     499                             ; SOURCE LINE # 89
                     500     ;       P1AQCSFRC = 0x0F;                                               // software force d
                             isable
                     501                             ; SOURCE LINE # 90
0000 75B10F          502             MOV     P1AQCSFRC,#0FH
                     503     ;       P2AQCSFRC = 0x0F;
                     504                             ; SOURCE LINE # 91
0003 75C90F          505             MOV     P2AQCSFRC,#0FH
                     506     ;       P3AQCSFRC = 0x0F;
                     507                             ; SOURCE LINE # 92
0006 75D90F          508             MOV     P3AQCSFRC,#0FH
                     509     ;       P4AQCSFRC = 0x0F;
                     510                             ; SOURCE LINE # 93
0009 75F10F          511             MOV     P4AQCSFRC,#0FH
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE     9

                     512     ; }
                     513                             ; SOURCE LINE # 94
000C                 514     ?C0012:
000C 22              515             RET     
                     516     ; END OF epwmOutputEnable
                     517     
                     518     ; 
                     519     ; void InitADC(void)
                     520     
----                 521             RSEG  ?PR?InitADC?INITIAL
0000                 522     InitADC:
                     523             USING   0
                     524                             ; SOURCE LINE # 96
                     525     ; {
                     526                             ; SOURCE LINE # 97
                     527     ; 
                     528     ;               AD_PD = 0;                                                      //Power up 
                             ADD
                     529                             ; SOURCE LINE # 99
0000 90E08B          530             MOV     DPTR,#0E08BH
0003 E4              531             CLR     A
0004 F0              532             MOVX    @DPTR,A
                     533     ;         ADC_CLK_EN=1;
                     534                             ; SOURCE LINE # 100
0005 90E0EC          535             MOV     DPTR,#0E0ECH
0008 E0              536             MOVX    A,@DPTR
0009 FF              537             MOV     R7,A
000A EF              538             MOV     A,R7
000B 4408            539             ORL     A,#08H
000D FF              540             MOV     R7,A
000E EF              541             MOV     A,R7
000F F0              542             MOVX    @DPTR,A
                     543     ;               ADC_CLK_DIV_SEL=0x03;    //system divided by 4
                     544                             ; SOURCE LINE # 101
0010 90E0EC          545             MOV     DPTR,#0E0ECH
0013 E0              546             MOVX    A,@DPTR
0014 FF              547             MOV     R7,A
0015 EF              548             MOV     A,R7
0016 4403            549             ORL     A,#03H
0018 FF              550             MOV     R7,A
0019 EF              551             MOV     A,R7
001A F0              552             MOVX    @DPTR,A
                     553     ;     ADCHS = 0x08;                                             // select channel CH4
                     554                             ; SOURCE LINE # 102
001B 90E05C          555             MOV     DPTR,#0E05CH
001E 7408            556             MOV     A,#08H
0020 F0              557             MOVX    @DPTR,A
                     558     ;               DAC1_PD = 1;                                            // DAC12 down
                     559                             ; SOURCE LINE # 103
0021 90E07A          560             MOV     DPTR,#0E07AH
0024 E0              561             MOVX    A,@DPTR
0025 FF              562             MOV     R7,A
0026 EF              563             MOV     A,R7
0027 4404            564             ORL     A,#04H
0029 FF              565             MOV     R7,A
002A EF              566             MOV     A,R7
002B F0              567             MOVX    @DPTR,A
                     568     ;               DAC2_PD = 1;
                     569                             ; SOURCE LINE # 104
002C 90E07A          570             MOV     DPTR,#0E07AH
002F E0              571             MOVX    A,@DPTR
0030 FF              572             MOV     R7,A
0031 EF              573             MOV     A,R7
0032 4401            574             ORL     A,#01H
0034 FF              575             MOV     R7,A
0035 EF              576             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    10

0036 F0              577             MOVX    @DPTR,A
                     578     ;               LDO25_PD=0;             //use internal 2.5V for AD VREF
                     579                             ; SOURCE LINE # 105
0037 90E09D          580             MOV     DPTR,#0E09DH
003A E0              581             MOVX    A,@DPTR
003B FF              582             MOV     R7,A
003C EF              583             MOV     A,R7
003D 54FD            584             ANL     A,#0FDH
003F FF              585             MOV     R7,A
0040 EF              586             MOV     A,R7
0041 F0              587             MOVX    @DPTR,A
                     588     ;               BP4=0;                  //CH4 normal and no bypass
                     589                             ; SOURCE LINE # 106
0042 90E05D          590             MOV     DPTR,#0E05DH
0045 E0              591             MOVX    A,@DPTR
0046 FF              592             MOV     R7,A
0047 EF              593             MOV     A,R7
0048 54F7            594             ANL     A,#0F7H
004A FF              595             MOV     R7,A
004B EF              596             MOV     A,R7
004C F0              597             MOVX    @DPTR,A
                     598     ;       
                     599     ;               SWFTRG=1;
                     600                             ; SOURCE LINE # 108
004D 90E05A          601             MOV     DPTR,#0E05AH
0050 E0              602             MOVX    A,@DPTR
0051 FF              603             MOV     R7,A
0052 EF              604             MOV     A,R7
0053 4420            605             ORL     A,#020H
0055 FF              606             MOV     R7,A
0056 EF              607             MOV     A,R7
0057 F0              608             MOVX    @DPTR,A
                     609     ;         INTEN=1;
                     610                             ; SOURCE LINE # 109
0058 90E05A          611             MOV     DPTR,#0E05AH
005B E0              612             MOVX    A,@DPTR
005C FF              613             MOV     R7,A
005D EF              614             MOV     A,R7
005E 4401            615             ORL     A,#01H
0060 FF              616             MOV     R7,A
0061 EF              617             MOV     A,R7
0062 F0              618             MOVX    @DPTR,A
                     619     ;               AD4OST=0x0000;                                  //AD offset   0xFC
                     620                             ; SOURCE LINE # 110
0063 90E064          621             MOV     DPTR,#0E064H
0066 E4              622             CLR     A
0067 F0              623             MOVX    @DPTR,A
0068 A3              624             INC     DPTR
0069 E4              625             CLR     A
006A F0              626             MOVX    @DPTR,A
                     627     ; 
                     628     ;       
                     629     ;       
                     630     ;               EADC=1;
                     631                             ; SOURCE LINE # 114
006B D2B8            632             SETB    EADC
                     633     ;               IADC=0;
                     634                             ; SOURCE LINE # 115
006D C2C0            635             CLR     IADC
                     636     ; 
                     637     ;       }
                     638                             ; SOURCE LINE # 117
006F                 639     ?C0013:
006F 22              640             RET     
                     641     ; END OF InitADC
                     642     
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    11

                     643     ; 
                     644     ; 
                     645     ; void Initepwm(void)
                     646     
----                 647             RSEG  ?PR?Initepwm?INITIAL
0000                 648     Initepwm:
                     649             USING   0
                     650                             ; SOURCE LINE # 120
                     651     ; {
                     652                             ; SOURCE LINE # 121
                     653     ;       P2_FN_H = 0x55;                                                 // p2_4 ~ p2_7 as p
                             wm2x ~ pwm1x
                     654                             ; SOURCE LINE # 122
0000 90E0E0          655             MOV     DPTR,#0E0E0H
0003 7455            656             MOV     A,#055H
0005 F0              657             MOVX    @DPTR,A
                     658     ;       P2_FN_L = P2_FN_L & 0x0F | 0x50;                // p2_2 ~ p2_3 as pwm3x
                     659                             ; SOURCE LINE # 123
0006 90E0E1          660             MOV     DPTR,#0E0E1H
0009 E0              661             MOVX    A,@DPTR
000A FF              662             MOV     R7,A
000B EF              663             MOV     A,R7
000C 540F            664             ANL     A,#0FH
000E FF              665             MOV     R7,A
000F EF              666             MOV     A,R7
0010 4450            667             ORL     A,#050H
0012 FF              668             MOV     R7,A
0013 90E0E1          669             MOV     DPTR,#0E0E1H
0016 EF              670             MOV     A,R7
0017 F0              671             MOVX    @DPTR,A
                     672     ;       //P0_FN_L = P0_FN_L & 0xF0 | 0x05;                // p0_0 ~ p0_1 as pwm4x
                     673     ; 
                     674     ; //    P1TBPRD_L = 0x90;                                               // pwm period is 10
                             KHz
                     675     ; //    P1TBPRD_H = 0x01;
                     676     ; //    P2TBPRD_L = 0x90;
                     677     ; //    P2TBPRD_H = 0x01;
                     678     ; //    P3TBPRD_L = 0x90;
                     679     ; //    P3TBPRD_H = 0x01;
                     680     ; //    P4TBPRD_L = 0x90;
                     681     ; //    P4TBPRD_H = 0x01;
                     682     ; 
                     683     ;       PCLKCR = 0x1E;//0x1F                                                    // clock fo
                             r pwm1 ~ pwm4 is enable,and synchronize all channel disable
                     684                             ; SOURCE LINE # 135
0018 90E000          685             MOV     DPTR,#0E000H
001B 741E            686             MOV     A,#01EH
001D F0              687             MOVX    @DPTR,A
                     688     ; //    PSYNCICR = 0x3C;//0x1F;                                         // all synchronize 
                             input enable
                     689     ; 
                     690     ;       P1TBCTL_L = 0x02;//0x12;                                                // period l
                             oad from shadow,up down mode,synchronize at CTR = ZERO
                     691                             ; SOURCE LINE # 138
001E 90E003          692             MOV     DPTR,#0E003H
0021 7402            693             MOV     A,#02H
0023 F0              694             MOVX    @DPTR,A
                     695     ;       P1TBCTL_H = 0x80;                                               // time base free r
                             un when emulation
                     696                             ; SOURCE LINE # 139
0024 90E002          697             MOV     DPTR,#0E002H
0027 7480            698             MOV     A,#080H
0029 F0              699             MOVX    @DPTR,A
                     700     ;       P2TBCTL_L = 0x02;//0x12;
                     701                             ; SOURCE LINE # 140
002A 90E019          702             MOV     DPTR,#0E019H
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    12

002D 7402            703             MOV     A,#02H
002F F0              704             MOVX    @DPTR,A
                     705     ;       P2TBCTL_H = 0x80;
                     706                             ; SOURCE LINE # 141
0030 90E018          707             MOV     DPTR,#0E018H
0033 7480            708             MOV     A,#080H
0035 F0              709             MOVX    @DPTR,A
                     710     ;       P3TBCTL_L = 0x02;//0x12;
                     711                             ; SOURCE LINE # 142
0036 90E02F          712             MOV     DPTR,#0E02FH
0039 7402            713             MOV     A,#02H
003B F0              714             MOVX    @DPTR,A
                     715     ;       P3TBCTL_H = 0x80;
                     716                             ; SOURCE LINE # 143
003C 90E02E          717             MOV     DPTR,#0E02EH
003F 7480            718             MOV     A,#080H
0041 F0              719             MOVX    @DPTR,A
                     720     ;       P4TBCTL_L = 0x02;//0x12;
                     721                             ; SOURCE LINE # 144
0042 90E045          722             MOV     DPTR,#0E045H
0045 7402            723             MOV     A,#02H
0047 F0              724             MOVX    @DPTR,A
                     725     ;       P4TBCTL_H = 0x80;
                     726                             ; SOURCE LINE # 145
0048 90E044          727             MOV     DPTR,#0E044H
004B 7480            728             MOV     A,#080H
004D F0              729             MOVX    @DPTR,A
                     730     ; 
                     731     ; //    P1TBCTL_L = 0x00;                                               // period load from
                              shadow,up mode
                     732     ; //    P1TBCTL_H = 0x80;
                     733     ; //    P2TBCTL_L = 0x00;
                     734     ; //    P2TBCTL_H = 0x80;
                     735     ; //    P3TBCTL_L = 0x00;
                     736     ; //    P3TBCTL_H = 0x80;
                     737     ; //    P4TBCTL_L = 0x00;
                     738     ; //    P4TBCTL_H = 0x80;
                     739     ; 
                     740     ;       P1CMPCTL = 0x00;                                                // shadow on,update
                              at CTR = ZERO
                     741                             ; SOURCE LINE # 156
004E 90E007          742             MOV     DPTR,#0E007H
0051 E4              743             CLR     A
0052 F0              744             MOVX    @DPTR,A
                     745     ;       P2CMPCTL = 0x00;
                     746                             ; SOURCE LINE # 157
0053 90E01D          747             MOV     DPTR,#0E01DH
0056 E4              748             CLR     A
0057 F0              749             MOVX    @DPTR,A
                     750     ;       P3CMPCTL = 0x00;
                     751                             ; SOURCE LINE # 158
0058 90E033          752             MOV     DPTR,#0E033H
005B E4              753             CLR     A
005C F0              754             MOVX    @DPTR,A
                     755     ;       P4CMPCTL = 0x00;
                     756                             ; SOURCE LINE # 159
005D 90E049          757             MOV     DPTR,#0E049H
0060 E4              758             CLR     A
0061 F0              759             MOVX    @DPTR,A
                     760     ;       P1AQCTLA_L = 0x60;                                              // when cmpA,count 
                             up is set,count down is clear
                     761                             ; SOURCE LINE # 160
0062 90E009          762             MOV     DPTR,#0E009H
0065 7460            763             MOV     A,#060H
0067 F0              764             MOVX    @DPTR,A
                     765     ;       P1AQCTLA_H = 0x00;                                              // when cmpB pwmxA 
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    13

                             do nothing
                     766                             ; SOURCE LINE # 161
0068 90E008          767             MOV     DPTR,#0E008H
006B E4              768             CLR     A
006C F0              769             MOVX    @DPTR,A
                     770     ;       P2AQCTLA_L = 0x60;
                     771                             ; SOURCE LINE # 162
006D 90E01F          772             MOV     DPTR,#0E01FH
0070 7460            773             MOV     A,#060H
0072 F0              774             MOVX    @DPTR,A
                     775     ;       P2AQCTLA_H = 0x00;
                     776                             ; SOURCE LINE # 163
0073 90E01E          777             MOV     DPTR,#0E01EH
0076 E4              778             CLR     A
0077 F0              779             MOVX    @DPTR,A
                     780     ;       P3AQCTLA_L = 0x60;
                     781                             ; SOURCE LINE # 164
0078 90E035          782             MOV     DPTR,#0E035H
007B 7460            783             MOV     A,#060H
007D F0              784             MOVX    @DPTR,A
                     785     ;       P3AQCTLA_H = 0x00;
                     786                             ; SOURCE LINE # 165
007E 90E034          787             MOV     DPTR,#0E034H
0081 E4              788             CLR     A
0082 F0              789             MOVX    @DPTR,A
                     790     ;       P4AQCTLA_L = 0x60;
                     791                             ; SOURCE LINE # 166
0083 90E04B          792             MOV     DPTR,#0E04BH
0086 7460            793             MOV     A,#060H
0088 F0              794             MOVX    @DPTR,A
                     795     ;       P4AQCTLA_H = 0x00;
                     796                             ; SOURCE LINE # 167
0089 90E04A          797             MOV     DPTR,#0E04AH
008C E4              798             CLR     A
008D F0              799             MOVX    @DPTR,A
                     800     ;       P1AQCTLB_L = 0x00;//0x60;
                     801                             ; SOURCE LINE # 168
008E 90E00B          802             MOV     DPTR,#0E00BH
0091 E4              803             CLR     A
0092 F0              804             MOVX    @DPTR,A
                     805     ;       P1AQCTLB_H = 0x00;
                     806                             ; SOURCE LINE # 169
0093 90E00A          807             MOV     DPTR,#0E00AH
0096 E4              808             CLR     A
0097 F0              809             MOVX    @DPTR,A
                     810     ;       P2AQCTLB_L = 0x00;//0x60;
                     811                             ; SOURCE LINE # 170
0098 90E021          812             MOV     DPTR,#0E021H
009B E4              813             CLR     A
009C F0              814             MOVX    @DPTR,A
                     815     ;       P2AQCTLB_H = 0x00;
                     816                             ; SOURCE LINE # 171
009D 90E020          817             MOV     DPTR,#0E020H
00A0 E4              818             CLR     A
00A1 F0              819             MOVX    @DPTR,A
                     820     ;       P3AQCTLB_L = 0x00;//0x60;
                     821                             ; SOURCE LINE # 172
00A2 90E037          822             MOV     DPTR,#0E037H
00A5 E4              823             CLR     A
00A6 F0              824             MOVX    @DPTR,A
                     825     ;       P3AQCTLB_H = 0x00;
                     826                             ; SOURCE LINE # 173
00A7 90E036          827             MOV     DPTR,#0E036H
00AA E4              828             CLR     A
00AB F0              829             MOVX    @DPTR,A
                     830     ;       P4AQCTLB_L = 0x00;//0x60;
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    14

                     831                             ; SOURCE LINE # 174
00AC 90E04D          832             MOV     DPTR,#0E04DH
00AF E4              833             CLR     A
00B0 F0              834             MOVX    @DPTR,A
                     835     ;       P4AQCTLB_H = 0x00;
                     836                             ; SOURCE LINE # 175
00B1 90E04C          837             MOV     DPTR,#0E04CH
00B4 E4              838             CLR     A
00B5 F0              839             MOVX    @DPTR,A
                     840     ; 
                     841     ; //    P1AQCTLA_L = 0x12;                                                      // CTR = ZE
                             RO set,CTR = CMPA up clear,CTR = PRD nothing,CTR = CMPA down nothing
                     842     ; //    P1AQCTLA_H = 0x00;                                                      // when cmp
                             B pwmxA do nothing
                     843     ; //    P1AQCTLB_L = 0x02;                                                      // CTR = ZE
                             RO set,CTR = CMPA up nothing,CTR = PRD nothing,CTR = CMPA down nothing
                     844     ; //    P1AQCTLB_H = 0x01;                                                      // CTR = CM
                             PB clear
                     845     ; //    P2AQCTLA_L = 0x12;
                     846     ; //    P2AQCTLA_H = 0x00;
                     847     ; //    P2AQCTLB_L = 0x02;
                     848     ; //    P2AQCTLB_H = 0x01;
                     849     ; //    P3AQCTLA_L = 0x12;
                     850     ; //    P3AQCTLA_H = 0x00;
                     851     ; //    P3AQCTLB_L = 0x02;
                     852     ; //    P3AQCTLB_H = 0x01;
                     853     ; //    P4AQCTLA_L = 0x12;
                     854     ; //    P4AQCTLA_H = 0x00;
                     855     ; //    P4AQCTLB_L = 0x02;
                     856     ; //    P4AQCTLB_H = 0x01;
                     857     ; 
                     858     ;       P1DBCTL = 0x0B;                                                 // delay source is 
                             epwmxA,dead band full,epwmxB invert
                     859                             ; SOURCE LINE # 194
00B6 90E00C          860             MOV     DPTR,#0E00CH
00B9 740B            861             MOV     A,#0BH
00BB F0              862             MOVX    @DPTR,A
                     863     ;       P2DBCTL = 0x0B;
                     864                             ; SOURCE LINE # 195
00BC 90E022          865             MOV     DPTR,#0E022H
00BF 740B            866             MOV     A,#0BH
00C1 F0              867             MOVX    @DPTR,A
                     868     ;       P3DBCTL = 0x0B;
                     869                             ; SOURCE LINE # 196
00C2 90E038          870             MOV     DPTR,#0E038H
00C5 740B            871             MOV     A,#0BH
00C7 F0              872             MOVX    @DPTR,A
                     873     ;       P4DBCTL = 0x0B;
                     874                             ; SOURCE LINE # 197
00C8 90E04E          875             MOV     DPTR,#0E04EH
00CB 740B            876             MOV     A,#0BH
00CD F0              877             MOVX    @DPTR,A
                     878     ; //    P1DBCTL = 0x07;                                                 // delay source is 
                             epwmxA,dead band full,epwmxA invert
                     879     ; //    P2DBCTL = 0x07;
                     880     ; //    P3DBCTL = 0x07;
                     881     ; //    P4DBCTL = 0x07;
                     882     ;       P1DBRED_L = 0x32;//0x0A                                         // rise edge dead t
                             ime is 1.25uS
                     883                             ; SOURCE LINE # 202
00CE 90E00E          884             MOV     DPTR,#0E00EH
00D1 7432            885             MOV     A,#032H
00D3 F0              886             MOVX    @DPTR,A
                     887     ;       P1DBRED_H = 0x00;
                     888                             ; SOURCE LINE # 203
00D4 90E00D          889             MOV     DPTR,#0E00DH
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    15

00D7 E4              890             CLR     A
00D8 F0              891             MOVX    @DPTR,A
                     892     ;       P2DBRED_L = 0x32;
                     893                             ; SOURCE LINE # 204
00D9 90E024          894             MOV     DPTR,#0E024H
00DC 7432            895             MOV     A,#032H
00DE F0              896             MOVX    @DPTR,A
                     897     ;       P2DBRED_H = 0x00;
                     898                             ; SOURCE LINE # 205
00DF 90E023          899             MOV     DPTR,#0E023H
00E2 E4              900             CLR     A
00E3 F0              901             MOVX    @DPTR,A
                     902     ;       P3DBRED_L = 0x32;
                     903                             ; SOURCE LINE # 206
00E4 90E03A          904             MOV     DPTR,#0E03AH
00E7 7432            905             MOV     A,#032H
00E9 F0              906             MOVX    @DPTR,A
                     907     ;       P3DBRED_H = 0x00;
                     908                             ; SOURCE LINE # 207
00EA 90E039          909             MOV     DPTR,#0E039H
00ED E4              910             CLR     A
00EE F0              911             MOVX    @DPTR,A
                     912     ;       P4DBRED_L = 0x32;
                     913                             ; SOURCE LINE # 208
00EF 90E050          914             MOV     DPTR,#0E050H
00F2 7432            915             MOV     A,#032H
00F4 F0              916             MOVX    @DPTR,A
                     917     ;       P4DBRED_H = 0x00;
                     918                             ; SOURCE LINE # 209
00F5 90E04F          919             MOV     DPTR,#0E04FH
00F8 E4              920             CLR     A
00F9 F0              921             MOVX    @DPTR,A
                     922     ;       P1DBFED_L = 0x32;                                               // fall edge dead t
                             ime is 1.25uS
                     923                             ; SOURCE LINE # 210
00FA 90E010          924             MOV     DPTR,#0E010H
00FD 7432            925             MOV     A,#032H
00FF F0              926             MOVX    @DPTR,A
                     927     ;       P1DBFED_H = 0x00;
                     928                             ; SOURCE LINE # 211
0100 90E00F          929             MOV     DPTR,#0E00FH
0103 E4              930             CLR     A
0104 F0              931             MOVX    @DPTR,A
                     932     ;       P2DBFED_L = 0x32;
                     933                             ; SOURCE LINE # 212
0105 90E026          934             MOV     DPTR,#0E026H
0108 7432            935             MOV     A,#032H
010A F0              936             MOVX    @DPTR,A
                     937     ;       P2DBFED_H = 0x00;
                     938                             ; SOURCE LINE # 213
010B 90E025          939             MOV     DPTR,#0E025H
010E E4              940             CLR     A
010F F0              941             MOVX    @DPTR,A
                     942     ;       P3DBFED_L = 0x32;
                     943                             ; SOURCE LINE # 214
0110 90E03C          944             MOV     DPTR,#0E03CH
0113 7432            945             MOV     A,#032H
0115 F0              946             MOVX    @DPTR,A
                     947     ;       P3DBFED_H = 0x00;
                     948                             ; SOURCE LINE # 215
0116 90E03B          949             MOV     DPTR,#0E03BH
0119 E4              950             CLR     A
011A F0              951             MOVX    @DPTR,A
                     952     ;       P4DBFED_L = 0x32;
                     953                             ; SOURCE LINE # 216
011B 90E052          954             MOV     DPTR,#0E052H
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    16

011E 7432            955             MOV     A,#032H
0120 F0              956             MOVX    @DPTR,A
                     957     ;       P4DBFED_H = 0x00;
                     958                             ; SOURCE LINE # 217
0121 90E051          959             MOV     DPTR,#0E051H
0124 E4              960             CLR     A
0125 F0              961             MOVX    @DPTR,A
                     962     ; 
                     963     ; //    P1DBCTL = 0x00;                                                 // dead band is byp
                             ass
                     964     ; //    P2DBCTL = 0x00;
                     965     ; //    P3DBCTL = 0x00;
                     966     ; //    P4DBCTL = 0x00;
                     967     ; 
                     968     ;       P1TZSEL = 0x00;                                                 // disable all trig
                             ger zone
                     969                             ; SOURCE LINE # 224
0126 90E011          970             MOV     DPTR,#0E011H
0129 E4              971             CLR     A
012A F0              972             MOVX    @DPTR,A
                     973     ;       P2TZSEL = 0x00;
                     974                             ; SOURCE LINE # 225
012B 90E027          975             MOV     DPTR,#0E027H
012E E4              976             CLR     A
012F F0              977             MOVX    @DPTR,A
                     978     ;       P3TZSEL = 0x00;
                     979                             ; SOURCE LINE # 226
0130 90E03D          980             MOV     DPTR,#0E03DH
0133 E4              981             CLR     A
0134 F0              982             MOVX    @DPTR,A
                     983     ;       P4TZSEL = 0x00;
                     984                             ; SOURCE LINE # 227
0135 90E053          985             MOV     DPTR,#0E053H
0138 E4              986             CLR     A
0139 F0              987             MOVX    @DPTR,A
                     988     ;       P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                     989                             ; SOURCE LINE # 228
013A 90E012          990             MOV     DPTR,#0E012H
013D E4              991             CLR     A
013E F0              992             MOVX    @DPTR,A
                     993     ;       P2TZCTL = 0x00;
                     994                             ; SOURCE LINE # 229
013F 90E028          995             MOV     DPTR,#0E028H
0142 E4              996             CLR     A
0143 F0              997             MOVX    @DPTR,A
                     998     ;       P3TZCTL = 0x00;
                     999                             ; SOURCE LINE # 230
0144 90E03E         1000             MOV     DPTR,#0E03EH
0147 E4             1001             CLR     A
0148 F0             1002             MOVX    @DPTR,A
                    1003     ;       P4TZCTL = 0x00;
                    1004                             ; SOURCE LINE # 231
0149 90E054         1005             MOV     DPTR,#0E054H
014C E4             1006             CLR     A
014D F0             1007             MOVX    @DPTR,A
                    1008     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1009     ; //    P2TZEINT = 0x00;
                    1010     ; //    P3TZEINT = 0x00;
                    1011     ; //    P4TZEINT = 0x00;
                    1012     ; 
                    1013     ; //    P1TZSEL = 0x01;                                                 // OSHT enable
                    1014     ; //    P2TZSEL = 0x01;
                    1015     ; //    P3TZSEL = 0x01;
                    1016     ; //    P4TZSEL = 0x01;
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    17

                    1017     ; //    P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                    1018     ; //    P2TZCTL = 0x00;
                    1019     ; //    P3TZCTL = 0x00;
                    1020     ; //    P4TZCTL = 0x00;
                    1021     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1022     ; //    P2TZEINT = 0x00;
                    1023     ; //    P3TZEINT = 0x00;
                    1024     ; //    P4TZEINT = 0x00;
                    1025     ; 
                    1026     ; //    P1TZSEL = 0x02;                                                 // CBC enable
                    1027     ; //    P2TZSEL = 0x02;
                    1028     ; //    P3TZSEL = 0x02;
                    1029     ; //    P4TZSEL = 0x02;
                    1030     ; //    P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                    1031     ; //    P2TZCTL = 0x00;
                    1032     ; //    P3TZCTL = 0x00;
                    1033     ; //    P4TZCTL = 0x00;
                    1034     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1035     ; //    P2TZEINT = 0x00;
                    1036     ; //    P3TZEINT = 0x00;
                    1037     ; //    P4TZEINT = 0x00;
                    1038     ; 
                    1039     ;       P1ETSEL_L = 0x09;                                               // epwm interrupt e
                             nable at CTR = ZERO
                    1040                             ; SOURCE LINE # 263
014E 90E015         1041             MOV     DPTR,#0E015H
0151 7409           1042             MOV     A,#09H
0153 F0             1043             MOVX    @DPTR,A
                    1044     ;     P1ETSEL_H = 0x0C;//0xE0;//0xA0;//0x90;//0x0A;//0x09;                       // enable 
                             SOCA,SOCA is CTR = ZERO
                    1045                             ; SOURCE LINE # 264
0154 90E014         1046             MOV     DPTR,#0E014H
0157 740C           1047             MOV     A,#0CH
0159 F0             1048             MOVX    @DPTR,A
                    1049     ;       P2ETSEL_L = 0x00;
                    1050                             ; SOURCE LINE # 265
015A 90E02B         1051             MOV     DPTR,#0E02BH
015D E4             1052             CLR     A
015E F0             1053             MOVX    @DPTR,A
                    1054     ;       P2ETSEL_H = 0x00;//0xF0;//0x00;
                    1055                             ; SOURCE LINE # 266
015F 90E02A         1056             MOV     DPTR,#0E02AH
0162 E4             1057             CLR     A
0163 F0             1058             MOVX    @DPTR,A
                    1059     ;       P3ETSEL_L = 0x00;
                    1060                             ; SOURCE LINE # 267
0164 90E041         1061             MOV     DPTR,#0E041H
0167 E4             1062             CLR     A
0168 F0             1063             MOVX    @DPTR,A
                    1064     ;       P3ETSEL_H = 0x00;
                    1065                             ; SOURCE LINE # 268
0169 90E040         1066             MOV     DPTR,#0E040H
016C E4             1067             CLR     A
016D F0             1068             MOVX    @DPTR,A
                    1069     ;       P4ETSEL_L = 0x00;
                    1070                             ; SOURCE LINE # 269
016E 90E057         1071             MOV     DPTR,#0E057H
0171 E4             1072             CLR     A
0172 F0             1073             MOVX    @DPTR,A
                    1074     ;       P4ETSEL_H = 0x00;
                    1075                             ; SOURCE LINE # 270
0173 90E056         1076             MOV     DPTR,#0E056H
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    18

0176 E4             1077             CLR     A
0177 F0             1078             MOVX    @DPTR,A
                    1079     ;       P1ETPS_L = 0x05;                                                // 1 event 1 interr
                             upt
                    1080                             ; SOURCE LINE # 271
0178 90E017         1081             MOV     DPTR,#0E017H
017B 7405           1082             MOV     A,#05H
017D F0             1083             MOVX    @DPTR,A
                    1084     ;     P1ETPS_H = 0x05;//0x50;//0x05;                        // 1 evnt,SOCA period is 1
                    1085                             ; SOURCE LINE # 272
017E 90E016         1086             MOV     DPTR,#0E016H
0181 7405           1087             MOV     A,#05H
0183 F0             1088             MOVX    @DPTR,A
                    1089     ;       P2ETPS_L = 0x00;
                    1090                             ; SOURCE LINE # 273
0184 90E02D         1091             MOV     DPTR,#0E02DH
0187 E4             1092             CLR     A
0188 F0             1093             MOVX    @DPTR,A
                    1094     ;     P2ETPS_H = 0x00;//0x50;
                    1095                             ; SOURCE LINE # 274
0189 90E02C         1096             MOV     DPTR,#0E02CH
018C E4             1097             CLR     A
018D F0             1098             MOVX    @DPTR,A
                    1099     ;       P3ETPS_L = 0x00;
                    1100                             ; SOURCE LINE # 275
018E 90E043         1101             MOV     DPTR,#0E043H
0191 E4             1102             CLR     A
0192 F0             1103             MOVX    @DPTR,A
                    1104     ;       P4ETPS_L = 0x00;
                    1105                             ; SOURCE LINE # 276
0193 90E059         1106             MOV     DPTR,#0E059H
0196 E4             1107             CLR     A
0197 F0             1108             MOVX    @DPTR,A
                    1109     ; 
                    1110     ;       P1TBPRD_L = 0xD0;                                               // pwm period is 0x
                             0190@8MHz 10KHz 0x7D0@40MHz
                    1111                             ; SOURCE LINE # 278
0198 75A1D0         1112             MOV     P1TBPRD_L,#0D0H
                    1113     ;       P1TBPRD_H = 0x07;
                    1114                             ; SOURCE LINE # 279
019B 75A207         1115             MOV     P1TBPRD_H,#07H
                    1116     ;       P2TBPRD_L = 0xD0;
                    1117                             ; SOURCE LINE # 280
019E 75C1D0         1118             MOV     P2TBPRD_L,#0D0H
                    1119     ;       P2TBPRD_H = 0x07;
                    1120                             ; SOURCE LINE # 281
01A1 75C207         1121             MOV     P2TBPRD_H,#07H
                    1122     ;       P3TBPRD_L = 0xD0;
                    1123                             ; SOURCE LINE # 282
01A4 75D1D0         1124             MOV     P3TBPRD_L,#0D0H
                    1125     ;       P3TBPRD_H = 0x07;
                    1126                             ; SOURCE LINE # 283
01A7 75D207         1127             MOV     P3TBPRD_H,#07H
                    1128     ;       P4TBPRD_L = 0xD0;
                    1129                             ; SOURCE LINE # 284
01AA 75E1D0         1130             MOV     P4TBPRD_L,#0D0H
                    1131     ;       P4TBPRD_H = 0x07;
                    1132                             ; SOURCE LINE # 285
01AD 75E207         1133             MOV     P4TBPRD_H,#07H
                    1134     ; 
                    1135     ; //    P1TBPRD_L = 0x1F;                                               // pwm period is 10
                             KHz
                    1136     ; //    P1TBPRD_H = 0x03;
                    1137     ; //    P2TBPRD_L = 0x1F;
                    1138     ; //    P2TBPRD_H = 0x03;
                    1139     ; //    P3TBPRD_L = 0x1F;
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    19

                    1140     ; //    P3TBPRD_H = 0x03;
                    1141     ; //    P4TBPRD_L = 0x1F;
                    1142     ; //    P4TBPRD_H = 0x03;
                    1143     ; 
                    1144     ;       P1CMPA_L = 0xE8;                                                // pwm period is 0x
                             0C8@8MHz 10KHz
                    1145                             ; SOURCE LINE # 296
01B0 75A3E8         1146             MOV     P1CMPA_L,#0E8H
                    1147     ;       P1CMPA_H = 0x03;
                    1148                             ; SOURCE LINE # 297
01B3 75A403         1149             MOV     P1CMPA_H,#03H
                    1150     ;       //P1CMPB_L = 0xC8;
                    1151     ;       //P1CMPB_H = 0x00;
                    1152     ;       P2CMPA_L = 0xE8;
                    1153                             ; SOURCE LINE # 300
01B6 75C3E8         1154             MOV     P2CMPA_L,#0E8H
                    1155     ;       P2CMPA_H = 0x03;
                    1156                             ; SOURCE LINE # 301
01B9 75C403         1157             MOV     P2CMPA_H,#03H
                    1158     ;       //P2CMPB_L = 0xC8;
                    1159     ;       //P2CMPB_H = 0x00;
                    1160     ;       P3CMPA_L = 0xE8;
                    1161                             ; SOURCE LINE # 304
01BC 75D3E8         1162             MOV     P3CMPA_L,#0E8H
                    1163     ;       P3CMPA_H = 0x03;
                    1164                             ; SOURCE LINE # 305
01BF 75D403         1165             MOV     P3CMPA_H,#03H
                    1166     ;       //P3CMPB_L = 0xC8;
                    1167     ;       //P3CMPB_H = 0x00;
                    1168     ;       P4CMPA_L = 0xE8;
                    1169                             ; SOURCE LINE # 308
01C2 75E3E8         1170             MOV     P4CMPA_L,#0E8H
                    1171     ;       P4CMPA_H = 0x03;
                    1172                             ; SOURCE LINE # 309
01C5 75E403         1173             MOV     P4CMPA_H,#03H
                    1174     ;       //P4CMPB_L = 0xC8;
                    1175     ;       //P4CMPB_H = 0x00;
                    1176     ; 
                    1177     ; //    P1CMPA_L = 0xF4;                                                // pwm period is 0x
                             0C8@8MHz 10KHz
                    1178     ; //    P1CMPA_H = 0x01;
                    1179     ; //    P1CMPB_L = 0xEE;
                    1180     ; //    P1CMPB_H = 0x02;
                    1181     ; //    P2CMPA_L = 0xE8;
                    1182     ; //    P2CMPA_H = 0x03;
                    1183     ; //    P2CMPB_L = 0xE2;
                    1184     ; //    P2CMPB_H = 0x04;
                    1185     ; //    P3CMPA_L = 0xDC;
                    1186     ; //    P3CMPA_H = 0x05;
                    1187     ; 
                    1188     ; //    P1CMPA_L = 0x90;
                    1189     ; //    P1CMPA_H = 0x01;
                    1190     ; //    P1CMPB_L = 0x90;
                    1191     ; //    P1CMPB_H = 0x01;
                    1192     ; //    P2CMPA_L = 0x90;
                    1193     ; //    P2CMPA_H = 0x01;
                    1194     ; //    P2CMPB_L = 0x90;
                    1195     ; //    P2CMPB_H = 0x01;
                    1196     ; //    P3CMPA_L = 0x90;
                    1197     ; //    P3CMPA_H = 0x01;
                    1198     ; //    P3CMPB_L = 0x90;
                    1199     ; //    P3CMPB_H = 0x01;
                    1200     ; //    P4CMPA_L = 0x90;
                    1201     ; //    P4CMPA_H = 0x01;
                    1202     ; //    P4CMPB_L = 0x90;
                    1203     ; //    P4CMPB_H = 0x01;
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    20

                    1204     ; 
                    1205     ; //    OPAMP_SEL = 0xF0;
                    1206     ; //    COMP_INT_EN = COMP_INT_EN | (1 << 0);   // comparator1 interrupt output enable
                    1207     ; //    COMP_INT_SET = COMP_INT_SET & 0xFC;             // comparator1 falling edge trigger
                    1208     ; //    P1_FN_H = P1_FN_H & 0xF3 | 0x08;                // comp1 output
                    1209     ; //    ex1 = 1;                                                                // enable c
                             omp1 to CPU interrupt
                    1210     ; 
                    1211     ;       PCLKCR = PCLKCR | 1;                                    // all epwm channel synchro
                             nize enable
                    1212                             ; SOURCE LINE # 347
01C8 90E000         1213             MOV     DPTR,#0E000H
01CB E0             1214             MOVX    A,@DPTR
01CC FF             1215             MOV     R7,A
01CD EF             1216             MOV     A,R7
01CE 4401           1217             ORL     A,#01H
01D0 FF             1218             MOV     R7,A
01D1 EF             1219             MOV     A,R7
01D2 F0             1220             MOVX    @DPTR,A
                    1221     ; 
                    1222     ;       P1ETCLR = 1;
                    1223                             ; SOURCE LINE # 349
01D3 75B601         1224             MOV     P1ETCLR,#01H
                    1225     ;       I2FR = 1;
                    1226                             ; SOURCE LINE # 350
01D6 D2CD           1227             SETB    I2FR
                    1228     ;       EX2 = 1;                                                                // enable e
                             pwm1,2,3 interrupt
                    1229                             ; SOURCE LINE # 351
01D8 D2B9           1230             SETB    EX2
                    1231     ;       //ex3 = 1;                                                              // enable e
                             pwm4 interrupt
                    1232     ; }
                    1233                             ; SOURCE LINE # 353
01DA                1234     ?C0014:
01DA 22             1235             RET     
                    1236     ; END OF Initepwm
                    1237     
                    1238     ; 
                    1239     ; 
                    1240     ; void InitComp234(void)
                    1241     
----                1242             RSEG  ?PR?InitComp234?INITIAL
0000                1243     InitComp234:
                    1244             USING   0
                    1245                             ; SOURCE LINE # 356
                    1246     ; {
                    1247                             ; SOURCE LINE # 357
                    1248     ;       
                    1249     ;               P21_FN= CFG2;                                                            //
                              P21 output COMP1
                    1250                             ; SOURCE LINE # 359
0000 90E0E1         1251             MOV     DPTR,#0E0E1H
0003 E0             1252             MOVX    A,@DPTR
0004 FF             1253             MOV     R7,A
0005 EF             1254             MOV     A,R7
0006 54F3           1255             ANL     A,#0F3H
0008 FF             1256             MOV     R7,A
0009 EF             1257             MOV     A,R7
000A 4408           1258             ORL     A,#08H
000C FF             1259             MOV     R7,A
000D EF             1260             MOV     A,R7
000E F0             1261             MOVX    @DPTR,A
                    1262     ;               P14_FN= CFG2;                    // P14 output COMP2
                    1263                             ; SOURCE LINE # 360
000F 90E0DA         1264             MOV     DPTR,#0E0DAH
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    21

0012 E0             1265             MOVX    A,@DPTR
0013 FF             1266             MOV     R7,A
0014 EF             1267             MOV     A,R7
0015 54FC           1268             ANL     A,#0FCH
0017 FF             1269             MOV     R7,A
0018 EF             1270             MOV     A,R7
0019 4402           1271             ORL     A,#02H
001B FF             1272             MOV     R7,A
001C EF             1273             MOV     A,R7
001D F0             1274             MOVX    @DPTR,A
                    1275     ;               P13_FN= CFG2;                    // P13 output COMP3
                    1276                             ; SOURCE LINE # 361
001E 90E0DB         1277             MOV     DPTR,#0E0DBH
0021 E0             1278             MOVX    A,@DPTR
0022 FF             1279             MOV     R7,A
0023 EF             1280             MOV     A,R7
0024 543F           1281             ANL     A,#03FH
0026 FF             1282             MOV     R7,A
0027 EF             1283             MOV     A,R7
0028 4480           1284             ORL     A,#080H
002A FF             1285             MOV     R7,A
002B EF             1286             MOV     A,R7
002C F0             1287             MOVX    @DPTR,A
                    1288     ;               P12_FN= CFG2;                    // P12 output COMP4
                    1289                             ; SOURCE LINE # 362
002D 90E0DB         1290             MOV     DPTR,#0E0DBH
0030 E0             1291             MOVX    A,@DPTR
0031 FF             1292             MOV     R7,A
0032 EF             1293             MOV     A,R7
0033 54CF           1294             ANL     A,#0CFH
0035 FF             1295             MOV     R7,A
0036 EF             1296             MOV     A,R7
0037 4420           1297             ORL     A,#020H
0039 FF             1298             MOV     R7,A
003A EF             1299             MOV     A,R7
003B F0             1300             MOVX    @DPTR,A
                    1301     ;               
                    1302     ;       
                    1303     ;       
                    1304     ;               C1PDO1PD=CFG1;                                                          //C
                             OMP1 power on and OP1 power off
                    1305                             ; SOURCE LINE # 366
003C 90E0A4         1306             MOV     DPTR,#0E0A4H
003F E0             1307             MOVX    A,@DPTR
0040 FF             1308             MOV     R7,A
0041 EF             1309             MOV     A,R7
0042 54FC           1310             ANL     A,#0FCH
0044 FF             1311             MOV     R7,A
0045 EF             1312             MOV     A,R7
0046 4401           1313             ORL     A,#01H
0048 FF             1314             MOV     R7,A
0049 EF             1315             MOV     A,R7
004A F0             1316             MOVX    @DPTR,A
                    1317     ;               C2PDO2PD=CFG1;                                                          //C
                             OMP2 power on and OP2 power off
                    1318                             ; SOURCE LINE # 367
004B 90E0A4         1319             MOV     DPTR,#0E0A4H
004E E0             1320             MOVX    A,@DPTR
004F FF             1321             MOV     R7,A
0050 EF             1322             MOV     A,R7
0051 54F3           1323             ANL     A,#0F3H
0053 FF             1324             MOV     R7,A
0054 EF             1325             MOV     A,R7
0055 4404           1326             ORL     A,#04H
0057 FF             1327             MOV     R7,A
0058 EF             1328             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    22

0059 F0             1329             MOVX    @DPTR,A
                    1330     ;               C3PDO3PD=CFG1;                                                          //C
                             OMP3 power on and OP3 power off
                    1331                             ; SOURCE LINE # 368
005A 90E0A4         1332             MOV     DPTR,#0E0A4H
005D E0             1333             MOVX    A,@DPTR
005E FF             1334             MOV     R7,A
005F EF             1335             MOV     A,R7
0060 54CF           1336             ANL     A,#0CFH
0062 FF             1337             MOV     R7,A
0063 EF             1338             MOV     A,R7
0064 4410           1339             ORL     A,#010H
0066 FF             1340             MOV     R7,A
0067 EF             1341             MOV     A,R7
0068 F0             1342             MOVX    @DPTR,A
                    1343     ;               C4PD=0;                                                                    
                                                  //COMP4 power on
                    1344                             ; SOURCE LINE # 369
0069 90E0A4         1345             MOV     DPTR,#0E0A4H
006C E0             1346             MOVX    A,@DPTR
006D FF             1347             MOV     R7,A
006E EF             1348             MOV     A,R7
006F 54BF           1349             ANL     A,#0BFH
0071 FF             1350             MOV     R7,A
0072 EF             1351             MOV     A,R7
0073 F0             1352             MOVX    @DPTR,A
                    1353     ;       
                    1354     ;       
                    1355     ;       
                    1356     ;               C1_INT_SEL=CFG2;                                                        //C
                             OMP1 at rising/falling edge triiger 
                    1357                             ; SOURCE LINE # 373
0074 90E0C6         1358             MOV     DPTR,#0E0C6H
0077 E0             1359             MOVX    A,@DPTR
0078 FF             1360             MOV     R7,A
0079 EF             1361             MOV     A,R7
007A 54FE           1362             ANL     A,#0FEH
007C FF             1363             MOV     R7,A
007D EF             1364             MOV     A,R7
007E F0             1365             MOVX    @DPTR,A
                    1366     ;               C2_INT_SEL=CFG2;                                                        //C
                             OMP2 at rising/falling edge triiger
                    1367                             ; SOURCE LINE # 374
007F 90E0C6         1368             MOV     DPTR,#0E0C6H
0082 E0             1369             MOVX    A,@DPTR
0083 FF             1370             MOV     R7,A
0084 EF             1371             MOV     A,R7
0085 54FD           1372             ANL     A,#0FDH
0087 FF             1373             MOV     R7,A
0088 EF             1374             MOV     A,R7
0089 F0             1375             MOVX    @DPTR,A
                    1376     ;               C3_INT_SEL=CFG2;                                                        //C
                             OMP3 at rising/falling edge triiger
                    1377                             ; SOURCE LINE # 375
008A 90E0C6         1378             MOV     DPTR,#0E0C6H
008D E0             1379             MOVX    A,@DPTR
008E FF             1380             MOV     R7,A
008F EF             1381             MOV     A,R7
0090 54FB           1382             ANL     A,#0FBH
0092 FF             1383             MOV     R7,A
0093 EF             1384             MOV     A,R7
0094 F0             1385             MOVX    @DPTR,A
                    1386     ;               C4_INT_SEL=CFG2;                                                        //C
                             OMP4 at rising/falling edge triiger
                    1387                             ; SOURCE LINE # 376
0095 90E0C6         1388             MOV     DPTR,#0E0C6H
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    23

0098 E0             1389             MOVX    A,@DPTR
0099 FF             1390             MOV     R7,A
009A EF             1391             MOV     A,R7
009B 54F7           1392             ANL     A,#0F7H
009D FF             1393             MOV     R7,A
009E EF             1394             MOV     A,R7
009F F0             1395             MOVX    @DPTR,A
                    1396     ;       
                    1397     ;       
                    1398     ;               C1_EN=1;                                                                   
                                                  //C1 interrupt enable
                    1399                             ; SOURCE LINE # 379
00A0 90E0EB         1400             MOV     DPTR,#0E0EBH
00A3 E0             1401             MOVX    A,@DPTR
00A4 FF             1402             MOV     R7,A
00A5 EF             1403             MOV     A,R7
00A6 4401           1404             ORL     A,#01H
00A8 FF             1405             MOV     R7,A
00A9 EF             1406             MOV     A,R7
00AA F0             1407             MOVX    @DPTR,A
                    1408     ;               C2_EN=1;                                                                   
                                                  //C2 interrupt enalbe
                    1409                             ; SOURCE LINE # 380
00AB 90E0EB         1410             MOV     DPTR,#0E0EBH
00AE E0             1411             MOVX    A,@DPTR
00AF FF             1412             MOV     R7,A
00B0 EF             1413             MOV     A,R7
00B1 4402           1414             ORL     A,#02H
00B3 FF             1415             MOV     R7,A
00B4 EF             1416             MOV     A,R7
00B5 F0             1417             MOVX    @DPTR,A
                    1418     ; //            C3_EN=1;                                                                   
                                                  //C3 interrupt enalbe
                    1419     ; //            C4_EN=1;                                                                   
                                                  //C4 interrupt enalbe
                    1420     ;               
                    1421     ;               
                    1422     ;               C1INT=0;                                                                   
                                                  //clear C1 INT flag
                    1423                             ; SOURCE LINE # 385
00B6 90E0C7         1424             MOV     DPTR,#0E0C7H
00B9 E0             1425             MOVX    A,@DPTR
00BA FF             1426             MOV     R7,A
00BB EF             1427             MOV     A,R7
00BC 54FE           1428             ANL     A,#0FEH
00BE FF             1429             MOV     R7,A
00BF EF             1430             MOV     A,R7
00C0 F0             1431             MOVX    @DPTR,A
                    1432     ;               C2INT=0;                                                                   
                                                  //clear C2 INT flag
                    1433                             ; SOURCE LINE # 386
00C1 90E0C7         1434             MOV     DPTR,#0E0C7H
00C4 E0             1435             MOVX    A,@DPTR
00C5 FF             1436             MOV     R7,A
00C6 EF             1437             MOV     A,R7
00C7 54FD           1438             ANL     A,#0FDH
00C9 FF             1439             MOV     R7,A
00CA EF             1440             MOV     A,R7
00CB F0             1441             MOVX    @DPTR,A
                    1442     ;               C3INT=0;                                                                   
                                                  //clear C3 INT flag
                    1443                             ; SOURCE LINE # 387
00CC 90E0C7         1444             MOV     DPTR,#0E0C7H
00CF E0             1445             MOVX    A,@DPTR
00D0 FF             1446             MOV     R7,A
00D1 EF             1447             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    24

00D2 54FB           1448             ANL     A,#0FBH
00D4 FF             1449             MOV     R7,A
00D5 EF             1450             MOV     A,R7
00D6 F0             1451             MOVX    @DPTR,A
                    1452     ;               C4INT=0;                                                                   
                                                  //clear C4 INT flag
                    1453                             ; SOURCE LINE # 388
00D7 90E0C7         1454             MOV     DPTR,#0E0C7H
00DA E0             1455             MOVX    A,@DPTR
00DB FF             1456             MOV     R7,A
00DC EF             1457             MOV     A,R7
00DD 54F7           1458             ANL     A,#0F7H
00DF FF             1459             MOV     R7,A
00E0 EF             1460             MOV     A,R7
00E1 F0             1461             MOVX    @DPTR,A
                    1462     ;       
                    1463     ;       
                    1464     ;               EX4=1;
                    1465                             ; SOURCE LINE # 391
00E2 D2BB           1466             SETB    EX4
                    1467     ;       
                    1468     ;       
                    1469     ; //    P1_FN_L = P1_FN_L & 0x0F | 0xA0;
                    1470     ; //    P1_FN_H = P1_FN_H & 0xF0 | 0x0A;
                    1471     ;       //COMP_FILTER_1 = 4;
                    1472     ;       //COMP_FILTER_2 = 4;
                    1473     ;       //COMP_FILTER_3 = 4;
                    1474     ;       //COMP_FILTER_4 = 4;
                    1475     ; ////  OPAMP_SEL = 0xF0;
                    1476     ; ////    COMP_INT_SEL = 0xAA;//0;//0x55;                    // comp1 ~ comp4 all trigger a
                             t rise egde
                    1477     ; //    COMP_INT_EN = 0x3E;//0x1E;//0x14;                                               // 
                             comp2,3,4 interrupt enable,and comp2,3,4 to CPU enable
                    1478     ;       EX4 = 1;                                                                // external
                              interrupt 4 enable
                    1479                             ; SOURCE LINE # 403
00E4 D2BB           1480             SETB    EX4
                    1481     ; }
                    1482                             ; SOURCE LINE # 404
00E6                1483     ?C0015:
00E6 22             1484             RET     
                    1485     ; END OF InitComp234
                    1486     
                    1487     ; 
                    1488     ; 
                    1489     ; 
                    1490     ; void InitWatchDog(void)
                    1491     
----                1492             RSEG  ?PR?InitWatchDog?INITIAL
0000                1493     InitWatchDog:
                    1494             USING   0
                    1495                             ; SOURCE LINE # 408
                    1496     ; {
                    1497                             ; SOURCE LINE # 409
                    1498     ;               WDTREL = 0xFF;
                    1499                             ; SOURCE LINE # 410
0000 7586FF         1500             MOV     WDTREL,#0FFH
                    1501     ;       WDT = 1;
                    1502                             ; SOURCE LINE # 411
0003 D2AE           1503             SETB    WDT
                    1504     ;       SWDT = 1;
                    1505                             ; SOURCE LINE # 412
0005 D2BE           1506             SETB    SWDT
                    1507     ;     P1_FN_L = P1_FN_L & 0xFC;               //p1_0 as GPIO
                    1508                             ; SOURCE LINE # 413
0007 90E0DB         1509             MOV     DPTR,#0E0DBH
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    25

000A E0             1510             MOVX    A,@DPTR
000B FF             1511             MOV     R7,A
000C EF             1512             MOV     A,R7
000D 54FC           1513             ANL     A,#0FCH
000F FF             1514             MOV     R7,A
0010 EF             1515             MOV     A,R7
0011 F0             1516             MOVX    @DPTR,A
                    1517     ;     P1_DD = P1_DD & 0xFE;                     //p1_0 as output
                    1518                             ; SOURCE LINE # 414
0012 90E0DC         1519             MOV     DPTR,#0E0DCH
0015 E0             1520             MOVX    A,@DPTR
0016 FF             1521             MOV     R7,A
0017 EF             1522             MOV     A,R7
0018 54FE           1523             ANL     A,#0FEH
001A FF             1524             MOV     R7,A
001B EF             1525             MOV     A,R7
001C F0             1526             MOVX    @DPTR,A
                    1527     ; }
                    1528                             ; SOURCE LINE # 415
001D                1529     ?C0016:
001D 22             1530             RET     
                    1531     ; END OF InitWatchDog
                    1532     
                    1533     ; 
                    1534     ; 
                    1535     ; void InitGPIO(void)
                    1536     
----                1537             RSEG  ?PR?InitGPIO?INITIAL
0000                1538     InitGPIO:
                    1539             USING   0
                    1540                             ; SOURCE LINE # 418
                    1541     ; {
                    1542                             ; SOURCE LINE # 419
                    1543     ;               P0_FN_L = 0x00;                                                            
                                  // P00 ~ P03as GPIO
                    1544                             ; SOURCE LINE # 420
0000 90E0D5         1545             MOV     DPTR,#0E0D5H
0003 E4             1546             CLR     A
0004 F0             1547             MOVX    @DPTR,A
                    1548     ;               P0_FN_H = 0x00;                                                            
                                  // P04 ~ P07 as GPIO
                    1549                             ; SOURCE LINE # 421
0005 90E0D4         1550             MOV     DPTR,#0E0D4H
0008 E4             1551             CLR     A
0009 F0             1552             MOVX    @DPTR,A
                    1553     ;               P0_DD = 0x00;                                                              
                                          //      P00 ~  P07 intput
                    1554                             ; SOURCE LINE # 422
000A 90E0D6         1555             MOV     DPTR,#0E0D6H
000D E4             1556             CLR     A
000E F0             1557             MOVX    @DPTR,A
                    1558     ;               P0_PE = 0xFF;                                                              
                                          // output resistor enable       
                    1559                             ; SOURCE LINE # 423
000F 90E0D8         1560             MOV     DPTR,#0E0D8H
0012 74FF           1561             MOV     A,#0FFH
0014 F0             1562             MOVX    @DPTR,A
                    1563     ;               P0_DS = 0x00;                                                              
                                          //drive current =4mA
                    1564                             ; SOURCE LINE # 424
0015 90E0D7         1565             MOV     DPTR,#0E0D7H
0018 E4             1566             CLR     A
0019 F0             1567             MOVX    @DPTR,A
                    1568     ;               P0_PS=  0x00;                                                              
                                          //pull down resistor 
                    1569                             ; SOURCE LINE # 425
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    26

001A 90E0D9         1570             MOV     DPTR,#0E0D9H
001D E4             1571             CLR     A
001E F0             1572             MOVX    @DPTR,A
                    1573     ;       
                    1574     ;               P1_FN_L = 0x00;                                                            
                                  // P10 ~ P13 as GPIO
                    1575                             ; SOURCE LINE # 427
001F 90E0DB         1576             MOV     DPTR,#0E0DBH
0022 E4             1577             CLR     A
0023 F0             1578             MOVX    @DPTR,A
                    1579     ;               P1_FN_H = 0x00;                                                            
                                  // P14 ~ P17 as GPIO
                    1580                             ; SOURCE LINE # 428
0024 90E0DA         1581             MOV     DPTR,#0E0DAH
0027 E4             1582             CLR     A
0028 F0             1583             MOVX    @DPTR,A
                    1584     ;               P1_DD = 0x00;                                                              
                                          // P10 ~ P17 intput
                    1585                             ; SOURCE LINE # 429
0029 90E0DC         1586             MOV     DPTR,#0E0DCH
002C E4             1587             CLR     A
002D F0             1588             MOVX    @DPTR,A
                    1589     ;               P1_PE = 0xFF;                                                              
                                          // output resistor enable       
                    1590                             ; SOURCE LINE # 430
002E 90E0DE         1591             MOV     DPTR,#0E0DEH
0031 74FF           1592             MOV     A,#0FFH
0033 F0             1593             MOVX    @DPTR,A
                    1594     ;               P1_DS = 0x00;                                                              
                                          //drive current =4mA
                    1595                             ; SOURCE LINE # 431
0034 90E0DD         1596             MOV     DPTR,#0E0DDH
0037 E4             1597             CLR     A
0038 F0             1598             MOVX    @DPTR,A
                    1599     ;               P1_PS=  0x00;                                                              
                                          //pull down resistor 
                    1600                             ; SOURCE LINE # 432
0039 90E0DF         1601             MOV     DPTR,#0E0DFH
003C E4             1602             CLR     A
003D F0             1603             MOVX    @DPTR,A
                    1604     ;       
                    1605     ;               P2_FN_L = 0x00;                                                            
                                  // P20 ~ P23 as GPIO
                    1606                             ; SOURCE LINE # 434
003E 90E0E1         1607             MOV     DPTR,#0E0E1H
0041 E4             1608             CLR     A
0042 F0             1609             MOVX    @DPTR,A
                    1610     ;               P2_FN_H = 0x00;                                                            
                                  // P24 ~ P27 as GPIO
                    1611                             ; SOURCE LINE # 435
0043 90E0E0         1612             MOV     DPTR,#0E0E0H
0046 E4             1613             CLR     A
0047 F0             1614             MOVX    @DPTR,A
                    1615     ;               P2_DD = 0x00;                                                              
                                          // P20~ P27 intput
                    1616                             ; SOURCE LINE # 436
0048 90E0E2         1617             MOV     DPTR,#0E0E2H
004B E4             1618             CLR     A
004C F0             1619             MOVX    @DPTR,A
                    1620     ;               P2_PE = 0xFF;                                                              
                                          // pull/down resistor enable    
                    1621                             ; SOURCE LINE # 437
004D 90E0E4         1622             MOV     DPTR,#0E0E4H
0050 74FF           1623             MOV     A,#0FFH
0052 F0             1624             MOVX    @DPTR,A
                    1625     ;               P2_DS = 0x00;                                                              
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    27

                                          //drive current =4mA
                    1626                             ; SOURCE LINE # 438
0053 90E0E3         1627             MOV     DPTR,#0E0E3H
0056 E4             1628             CLR     A
0057 F0             1629             MOVX    @DPTR,A
                    1630     ;               P2_PS=  0x00;                                                              
                                          //pull down resistor 
                    1631                             ; SOURCE LINE # 439
0058 90E0E5         1632             MOV     DPTR,#0E0E5H
005B E4             1633             CLR     A
005C F0             1634             MOVX    @DPTR,A
                    1635     ;       
                    1636     ;       // use P26 and P00 as output
                    1637     ;       
                    1638     ;     P00_FN= CFG0;                      // P00 as GPIO
                    1639                             ; SOURCE LINE # 443
005D 90E0D5         1640             MOV     DPTR,#0E0D5H
0060 E0             1641             MOVX    A,@DPTR
0061 FF             1642             MOV     R7,A
0062 EF             1643             MOV     A,R7
0063 54FC           1644             ANL     A,#0FCH
0065 FF             1645             MOV     R7,A
0066 EF             1646             MOV     A,R7
0067 F0             1647             MOVX    @DPTR,A
                    1648     ;     P00_DD = OUTPUT;               //P00 as output
                    1649                             ; SOURCE LINE # 444
0068 90E0D6         1650             MOV     DPTR,#0E0D6H
006B E0             1651             MOVX    A,@DPTR
006C FF             1652             MOV     R7,A
006D EF             1653             MOV     A,R7
006E 4401           1654             ORL     A,#01H
0070 FF             1655             MOV     R7,A
0071 EF             1656             MOV     A,R7
0072 F0             1657             MOVX    @DPTR,A
                    1658     ;     P00_PE = RES_DIS;               //P00 pull resistor off
                    1659                             ; SOURCE LINE # 445
0073 90E0D8         1660             MOV     DPTR,#0E0D8H
0076 E0             1661             MOVX    A,@DPTR
0077 FF             1662             MOV     R7,A
0078 EF             1663             MOV     A,R7
0079 54FE           1664             ANL     A,#0FEH
007B FF             1665             MOV     R7,A
007C EF             1666             MOV     A,R7
007D F0             1667             MOVX    @DPTR,A
                    1668     ;               P00_DS = I_4MA;
                    1669                             ; SOURCE LINE # 446
007E 90E0D7         1670             MOV     DPTR,#0E0D7H
0081 E0             1671             MOVX    A,@DPTR
0082 FF             1672             MOV     R7,A
0083 EF             1673             MOV     A,R7
0084 54FE           1674             ANL     A,#0FEH
0086 FF             1675             MOV     R7,A
0087 EF             1676             MOV     A,R7
0088 F0             1677             MOVX    @DPTR,A
                    1678     ; 
                    1679     ;     P26_FN = CFG0;               //P26 as GPIO
                    1680                             ; SOURCE LINE # 448
0089 90E0E0         1681             MOV     DPTR,#0E0E0H
008C E0             1682             MOVX    A,@DPTR
008D FF             1683             MOV     R7,A
008E EF             1684             MOV     A,R7
008F 54CF           1685             ANL     A,#0CFH
0091 FF             1686             MOV     R7,A
0092 EF             1687             MOV     A,R7
0093 F0             1688             MOVX    @DPTR,A
                    1689     ;     P26_DD = OUTPUT;               //P26 as output
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    28

                    1690                             ; SOURCE LINE # 449
0094 90E0E2         1691             MOV     DPTR,#0E0E2H
0097 E0             1692             MOVX    A,@DPTR
0098 FF             1693             MOV     R7,A
0099 EF             1694             MOV     A,R7
009A 4440           1695             ORL     A,#040H
009C FF             1696             MOV     R7,A
009D EF             1697             MOV     A,R7
009E F0             1698             MOVX    @DPTR,A
                    1699     ;     P26_PE = RES_DIS;               //P26 output resistor off
                    1700                             ; SOURCE LINE # 450
009F 90E0E4         1701             MOV     DPTR,#0E0E4H
00A2 E0             1702             MOVX    A,@DPTR
00A3 FF             1703             MOV     R7,A
00A4 EF             1704             MOV     A,R7
00A5 54BF           1705             ANL     A,#0BFH
00A7 FF             1706             MOV     R7,A
00A8 EF             1707             MOV     A,R7
00A9 F0             1708             MOVX    @DPTR,A
                    1709     ;               P26_DS = I_4MA;
                    1710                             ; SOURCE LINE # 451
00AA 90E0E3         1711             MOV     DPTR,#0E0E3H
00AD E0             1712             MOVX    A,@DPTR
00AE FF             1713             MOV     R7,A
00AF EF             1714             MOV     A,R7
00B0 54BF           1715             ANL     A,#0BFH
00B2 FF             1716             MOV     R7,A
00B3 EF             1717             MOV     A,R7
00B4 F0             1718             MOVX    @DPTR,A
                    1719     ; 
                    1720     ;       
                    1721     ;       
                    1722     ;       
                    1723     ;       // use P20 as EXT2
                    1724     ;       
                    1725     ;           P20_FN= CFG1;                //P20 as EXT2
                    1726                             ; SOURCE LINE # 458
00B5 90E0E1         1727             MOV     DPTR,#0E0E1H
00B8 E0             1728             MOVX    A,@DPTR
00B9 FF             1729             MOV     R7,A
00BA EF             1730             MOV     A,R7
00BB 54FC           1731             ANL     A,#0FCH
00BD FF             1732             MOV     R7,A
00BE EF             1733             MOV     A,R7
00BF 4401           1734             ORL     A,#01H
00C1 FF             1735             MOV     R7,A
00C2 EF             1736             MOV     A,R7
00C3 F0             1737             MOVX    @DPTR,A
                    1738     ;                       P20_DD = INPUT;               //P20 as input
                    1739                             ; SOURCE LINE # 459
00C4 90E0E2         1740             MOV     DPTR,#0E0E2H
00C7 E0             1741             MOVX    A,@DPTR
00C8 FF             1742             MOV     R7,A
00C9 EF             1743             MOV     A,R7
00CA 54FE           1744             ANL     A,#0FEH
00CC FF             1745             MOV     R7,A
00CD EF             1746             MOV     A,R7
00CE F0             1747             MOVX    @DPTR,A
                    1748     ;                       P20_PE = RES_EN;               // P20 output resistor enable
                    1749                             ; SOURCE LINE # 460
00CF 90E0E4         1750             MOV     DPTR,#0E0E4H
00D2 E0             1751             MOVX    A,@DPTR
00D3 FF             1752             MOV     R7,A
00D4 EF             1753             MOV     A,R7
00D5 4401           1754             ORL     A,#01H
00D7 FF             1755             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    29

00D8 EF             1756             MOV     A,R7
00D9 F0             1757             MOVX    @DPTR,A
                    1758     ;                       P20_PS = PULL_DOWN;               //P20 with pull down resistor
                    1759                             ; SOURCE LINE # 461
00DA 90E0E5         1760             MOV     DPTR,#0E0E5H
00DD E0             1761             MOVX    A,@DPTR
00DE FF             1762             MOV     R7,A
00DF EF             1763             MOV     A,R7
00E0 54FE           1764             ANL     A,#0FEH
00E2 FF             1765             MOV     R7,A
00E3 EF             1766             MOV     A,R7
00E4 F0             1767             MOVX    @DPTR,A
                    1768     ;       
                    1769     ;               hh=P2_FN_L|0x0;
                    1770                             ; SOURCE LINE # 463
00E5 90E0E1         1771             MOV     DPTR,#0E0E1H
00E8 E0             1772             MOVX    A,@DPTR
00E9 FF             1773             MOV     R7,A
00EA 8F00     F     1774             MOV     hh,R7
                    1775     ;       
                    1776     ; }
                    1777                             ; SOURCE LINE # 465
00EC                1778     ?C0017:
00EC 22             1779             RET     
                    1780     ; END OF InitGPIO
                    1781     
                    1782     ; 
                    1783     ; void InitTimer01(void)
                    1784     
----                1785             RSEG  ?PR?InitTimer01?INITIAL
0000                1786     InitTimer01:
                    1787             USING   0
                    1788                             ; SOURCE LINE # 467
                    1789     ; {
                    1790                             ; SOURCE LINE # 468
                    1791     ;               T01_DIV = 0x0240;                 //clock divider is 122
                    1792                             ; SOURCE LINE # 469
0000 90E0EE         1793             MOV     DPTR,#0E0EEH
0003 7402           1794             MOV     A,#02H
0005 F0             1795             MOVX    @DPTR,A
0006 A3             1796             INC     DPTR
0007 7440           1797             MOV     A,#040H
0009 F0             1798             MOVX    @DPTR,A
                    1799     ;     TMOD = TMOD & 0xF0 | (3 << 0);                     //timer0 is 16bit timer
                    1800                             ; SOURCE LINE # 470
000A E589           1801             MOV     A,TMOD
000C 54F0           1802             ANL     A,#0F0H
000E FF             1803             MOV     R7,A
000F EF             1804             MOV     A,R7
0010 4403           1805             ORL     A,#03H
0012 F589           1806             MOV     TMOD,A
                    1807     ;     TL0 = 0x00;
                    1808                             ; SOURCE LINE # 471
0014 758A00         1809             MOV     TL0,#00H
                    1810     ;     TH0= 0x00;
                    1811                             ; SOURCE LINE # 472
0017 758C00         1812             MOV     TH0,#00H
                    1813     ;               
                    1814     ;     ET0 = 1;                                //enable timer0 overflow interrupt
                    1815                             ; SOURCE LINE # 474
001A D2A9           1816             SETB    ET0
                    1817     ;     ET1 = 1;                                //enable timer1 overflow interrupt
                    1818                             ; SOURCE LINE # 475
001C D2AB           1819             SETB    ET1
                    1820     ;               TR0= 1;                                //start timer0
                    1821                             ; SOURCE LINE # 476
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    30

001E D28C           1822             SETB    TR0
                    1823     ;               TR1 = 1;    
                    1824                             ; SOURCE LINE # 477
0020 D28E           1825             SETB    TR1
                    1826     ; }
                    1827                             ; SOURCE LINE # 478
0022                1828     ?C0018:
0022 22             1829             RET     
                    1830     ; END OF InitTimer01
                    1831     
                    1832     ; 
                    1833     ; void InitTimer3(void)
                    1834     
----                1835             RSEG  ?PR?InitTimer3?INITIAL
0000                1836     InitTimer3:
                    1837             USING   0
                    1838                             ; SOURCE LINE # 480
                    1839     ; {
                    1840                             ; SOURCE LINE # 481
                    1841     ;       T3PS = 0;                                                               // no divid
                             er
                    1842                             ; SOURCE LINE # 482
0000 90E0C9         1843             MOV     DPTR,#0E0C9H
0003 E4             1844             CLR     A
0004 F0             1845             MOVX    @DPTR,A
                    1846     ;       T3RC= 0x00C0;
                    1847                             ; SOURCE LINE # 483
0005 90E0CC         1848             MOV     DPTR,#0E0CCH
0008 E4             1849             CLR     A
0009 F0             1850             MOVX    @DPTR,A
000A A3             1851             INC     DPTR
000B 74C0           1852             MOV     A,#0C0H
000D F0             1853             MOVX    @DPTR,A
                    1854     ; 
                    1855     ;       T3TF_EINT        =1;                                                    // timer4 o
                             verflow interrupt enable
                    1856                             ; SOURCE LINE # 485
000E 90E0C8         1857             MOV     DPTR,#0E0C8H
0011 E0             1858             MOVX    A,@DPTR
0012 FF             1859             MOV     R7,A
0013 EF             1860             MOV     A,R7
0014 4420           1861             ORL     A,#020H
0016 FF             1862             MOV     R7,A
0017 EF             1863             MOV     A,R7
0018 F0             1864             MOVX    @DPTR,A
                    1865     ;       T3TR = 1;                               // start timer4
                    1866                             ; SOURCE LINE # 486
0019 90E0C8         1867             MOV     DPTR,#0E0C8H
001C E0             1868             MOVX    A,@DPTR
001D FF             1869             MOV     R7,A
001E EF             1870             MOV     A,R7
001F 4404           1871             ORL     A,#04H
0021 FF             1872             MOV     R7,A
0022 EF             1873             MOV     A,R7
0023 F0             1874             MOVX    @DPTR,A
                    1875     ;       CLR_T3_INT();
                    1876                             ; SOURCE LINE # 487
0024 53F9E0         1877             ANL     INT_REG1,#0E0H
                    1878     ;       IE1=0;
                    1879                             ; SOURCE LINE # 488
0027 C28B           1880             CLR     IE1
                    1881     ;        EX1=1;
                    1882                             ; SOURCE LINE # 489
0029 D2AA           1883             SETB    EX1
                    1884     ; }
                    1885                             ; SOURCE LINE # 490
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    31

002B                1886     ?C0019:
002B 22             1887             RET     
                    1888     ; END OF InitTimer3
                    1889     
                    1890     ; 
                    1891     ; void InitTimer4(void)
                    1892     
----                1893             RSEG  ?PR?InitTimer4?INITIAL
0000                1894     InitTimer4:
                    1895             USING   0
                    1896                             ; SOURCE LINE # 492
                    1897     ; {
                    1898                             ; SOURCE LINE # 493
                    1899     ;       T4PS = 0;                                                               // no divid
                             er
                    1900                             ; SOURCE LINE # 494
0000 90E0CF         1901             MOV     DPTR,#0E0CFH
0003 E4             1902             CLR     A
0004 F0             1903             MOVX    @DPTR,A
                    1904     ;       T4RC = 0xE0C0;
                    1905                             ; SOURCE LINE # 495
0005 90E0D2         1906             MOV     DPTR,#0E0D2H
0008 74E0           1907             MOV     A,#0E0H
000A F0             1908             MOVX    @DPTR,A
000B A3             1909             INC     DPTR
000C 74C0           1910             MOV     A,#0C0H
000E F0             1911             MOVX    @DPTR,A
                    1912     ; 
                    1913     ;       T4TF_EINT        =1;                                                    // timer4 o
                             verflow interrupt enable
                    1914                             ; SOURCE LINE # 497
000F 90E0CE         1915             MOV     DPTR,#0E0CEH
0012 E0             1916             MOVX    A,@DPTR
0013 FF             1917             MOV     R7,A
0014 EF             1918             MOV     A,R7
0015 4420           1919             ORL     A,#020H
0017 FF             1920             MOV     R7,A
0018 EF             1921             MOV     A,R7
0019 F0             1922             MOVX    @DPTR,A
                    1923     ;       T4TR = 1;                               // start timer4
                    1924                             ; SOURCE LINE # 498
001A 90E0CE         1925             MOV     DPTR,#0E0CEH
001D E0             1926             MOVX    A,@DPTR
001E FF             1927             MOV     R7,A
001F EF             1928             MOV     A,R7
0020 4404           1929             ORL     A,#04H
0022 FF             1930             MOV     R7,A
0023 EF             1931             MOV     A,R7
0024 F0             1932             MOVX    @DPTR,A
                    1933     ;       CLR_T4_INT();
                    1934                             ; SOURCE LINE # 499
0025 53FEF0         1935             ANL     INT_REG4,#0F0H
                    1936     ;       EX6 = 1;
                    1937                             ; SOURCE LINE # 500
0028 D2BD           1938             SETB    EX6
                    1939     ;       IEX6=0;
                    1940                             ; SOURCE LINE # 501
002A C2C5           1941             CLR     IEX6
                    1942     ; }
                    1943                             ; SOURCE LINE # 502
002C                1944     ?C0020:
002C 22             1945             RET     
                    1946     ; END OF InitTimer4
                    1947     
                    1948     ; void InitTimer5(void)
                    1949     
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    32

----                1950             RSEG  ?PR?InitTimer5?INITIAL
0000                1951     InitTimer5:
                    1952             USING   0
                    1953                             ; SOURCE LINE # 503
                    1954     ; {
                    1955                             ; SOURCE LINE # 504
                    1956     ;       T5PS = 0;                                                                          
                                          // no divider
                    1957                             ; SOURCE LINE # 505
0000 90E0F4         1958             MOV     DPTR,#0E0F4H
0003 E4             1959             CLR     A
0004 F0             1960             MOVX    @DPTR,A
                    1961     ;       T5RC = 0x10C0;
                    1962                             ; SOURCE LINE # 506
0005 90E0F7         1963             MOV     DPTR,#0E0F7H
0008 7410           1964             MOV     A,#010H
000A F0             1965             MOVX    @DPTR,A
000B A3             1966             INC     DPTR
000C 74C0           1967             MOV     A,#0C0H
000E F0             1968             MOVX    @DPTR,A
                    1969     ;       
                    1970     ;       T5TF_EINT        =1;                                                            // 
                             timer4 overflow interrupt enable
                    1971                             ; SOURCE LINE # 508
000F 90E0F3         1972             MOV     DPTR,#0E0F3H
0012 E0             1973             MOVX    A,@DPTR
0013 FF             1974             MOV     R7,A
0014 EF             1975             MOV     A,R7
0015 4420           1976             ORL     A,#020H
0017 FF             1977             MOV     R7,A
0018 EF             1978             MOV     A,R7
0019 F0             1979             MOVX    @DPTR,A
                    1980     ;       T5TR = 1;                                                                          
                                          // start timer4
                    1981                             ; SOURCE LINE # 509
001A 90E0F3         1982             MOV     DPTR,#0E0F3H
001D E0             1983             MOVX    A,@DPTR
001E FF             1984             MOV     R7,A
001F EF             1985             MOV     A,R7
0020 4404           1986             ORL     A,#04H
0022 FF             1987             MOV     R7,A
0023 EF             1988             MOV     A,R7
0024 F0             1989             MOVX    @DPTR,A
                    1990     ;       T5TF=0;                                                                            
                                          // clear interrupt flag
                    1991                             ; SOURCE LINE # 510
0025 90E0F3         1992             MOV     DPTR,#0E0F3H
0028 E0             1993             MOVX    A,@DPTR
0029 FF             1994             MOV     R7,A
002A EF             1995             MOV     A,R7
002B 547F           1996             ANL     A,#07FH
002D FF             1997             MOV     R7,A
002E EF             1998             MOV     A,R7
002F F0             1999             MOVX    @DPTR,A
                    2000     ; 
                    2001     ;       
                    2002     ;       I3FR=1;
                    2003                             ; SOURCE LINE # 513
0030 D2CE           2004             SETB    I3FR
                    2005     ;       EX3 = 1;
                    2006                             ; SOURCE LINE # 514
0032 D2BA           2007             SETB    EX3
                    2008     ;       IEX3=0;
                    2009                             ; SOURCE LINE # 515
0034 C2C2           2010             CLR     IEX3
                    2011     ; }
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    33

                    2012                             ; SOURCE LINE # 516
0036                2013     ?C0021:
0036 22             2014             RET     
                    2015     ; END OF InitTimer5
                    2016     
                    2017     ; void InitTimer6(void)
                    2018     
----                2019             RSEG  ?PR?InitTimer6?INITIAL
0000                2020     InitTimer6:
                    2021             USING   0
                    2022                             ; SOURCE LINE # 517
                    2023     ; {
                    2024                             ; SOURCE LINE # 518
                    2025     ;       T6PS = 0;                                                                          
                                          // no divider
                    2026                             ; SOURCE LINE # 519
0000 90E0FA         2027             MOV     DPTR,#0E0FAH
0003 E4             2028             CLR     A
0004 F0             2029             MOVX    @DPTR,A
                    2030     ;       T6RC = 0x10C0;
                    2031                             ; SOURCE LINE # 520
0005 90E0FD         2032             MOV     DPTR,#0E0FDH
0008 7410           2033             MOV     A,#010H
000A F0             2034             MOVX    @DPTR,A
000B A3             2035             INC     DPTR
000C 74C0           2036             MOV     A,#0C0H
000E F0             2037             MOVX    @DPTR,A
                    2038     ;       
                    2039     ;       T6TF_EINT        =1;                                                    // timer4 o
                             verflow interrupt enable
                    2040                             ; SOURCE LINE # 522
000F 90E0F9         2041             MOV     DPTR,#0E0F9H
0012 E0             2042             MOVX    A,@DPTR
0013 FF             2043             MOV     R7,A
0014 EF             2044             MOV     A,R7
0015 4420           2045             ORL     A,#020H
0017 FF             2046             MOV     R7,A
0018 EF             2047             MOV     A,R7
0019 F0             2048             MOVX    @DPTR,A
                    2049     ;       T6TR = 1;                                                                          
                                  // start timer4
                    2050                             ; SOURCE LINE # 523
001A 90E0F9         2051             MOV     DPTR,#0E0F9H
001D E0             2052             MOVX    A,@DPTR
001E FF             2053             MOV     R7,A
001F EF             2054             MOV     A,R7
0020 4404           2055             ORL     A,#04H
0022 FF             2056             MOV     R7,A
0023 EF             2057             MOV     A,R7
0024 F0             2058             MOVX    @DPTR,A
                    2059     ;       T6TF=0;                                                                            
                                  // clear interrupt flag
                    2060                             ; SOURCE LINE # 524
0025 90E0F9         2061             MOV     DPTR,#0E0F9H
0028 E0             2062             MOVX    A,@DPTR
0029 FF             2063             MOV     R7,A
002A EF             2064             MOV     A,R7
002B 547F           2065             ANL     A,#07FH
002D FF             2066             MOV     R7,A
002E EF             2067             MOV     A,R7
002F F0             2068             MOVX    @DPTR,A
                    2069     ; 
                    2070     ;       
                    2071     ; 
                    2072     ;       EX5 = 1;
                    2073                             ; SOURCE LINE # 528
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    34

0030 D2BC           2074             SETB    EX5
                    2075     ;       IEX5=0;
                    2076                             ; SOURCE LINE # 529
0032 C2C4           2077             CLR     IEX5
                    2078     ; }
                    2079                             ; SOURCE LINE # 530
0034                2080     ?C0022:
0034 22             2081             RET     
                    2082     ; END OF InitTimer6
                    2083     
                    2084     ; void SystemClock(void)
                    2085     
----                2086             RSEG  ?PR?SystemClock?INITIAL
0000                2087     SystemClock:
                    2088             USING   0
                    2089                             ; SOURCE LINE # 531
                    2090     ; {
                    2091                             ; SOURCE LINE # 532
                    2092     ;     RC80M_RES = 0x2e;
                    2093                             ; SOURCE LINE # 533
0000 90E0B2         2094             MOV     DPTR,#0E0B2H
0003 742E           2095             MOV     A,#02EH
0005 F0             2096             MOVX    @DPTR,A
                    2097     ;         #pragma asm
                    2098     ;               nop
0006 00             2099               nop
                    2100     ;               nop
0007 00             2101               nop
                    2102     ;               nop
0008 00             2103               nop
                    2104     ;               nop
0009 00             2105               nop
                    2106     ;               nop
000A 00             2107               nop
                    2108     ;               nop
000B 00             2109               nop
                    2110     ;               nop
000C 00             2111               nop
                    2112     ;               nop
000D 00             2113               nop
                    2114     ;               nop
000E 00             2115               nop
                    2116     ;               nop
000F 00             2117               nop
                    2118     ;               nop
0010 00             2119               nop
                    2120     ;               nop
0011 00             2121               nop
                    2122     ;               nop
0012 00             2123               nop
                    2124     ;               nop
0013 00             2125               nop
                    2126     ;               nop
0014 00             2127               nop
                    2128     ;               nop
0015 00             2129               nop
                    2130     ;               nop
0016 00             2131               nop
                    2132     ;               nop
0017 00             2133               nop
                    2134     ;               nop
0018 00             2135               nop
                    2136     ;               nop
0019 00             2137               nop
                    2138     ;               nop
001A 00             2139               nop
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    35

                    2140     ;               nop
001B 00             2141               nop
                    2142     ;               nop
001C 00             2143               nop
                    2144     ;               nop
001D 00             2145               nop
                    2146     ;               nop
001E 00             2147               nop
                    2148     ;               nop
001F 00             2149               nop
                    2150     ;               nop
0020 00             2151               nop
                    2152     ;               nop
0021 00             2153               nop
                    2154     ;               nop
0022 00             2155               nop
                    2156     ;               nop
0023 00             2157               nop
                    2158     ;               nop
0024 00             2159               nop
                    2160     ;               nop
0025 00             2161               nop
                    2162     ;               nop
0026 00             2163               nop
                    2164     ;               #pragma endasm
                    2165     ;       
                    2166     ;         CLK_DIV_L = 0x02;
                    2167                             ; SOURCE LINE # 570
0027 90E0E7         2168             MOV     DPTR,#0E0E7H
002A 7402           2169             MOV     A,#02H
002C F0             2170             MOVX    @DPTR,A
                    2171     ;         CLK_DIV_H = 0x00;
                    2172                             ; SOURCE LINE # 571
002D 90E0E6         2173             MOV     DPTR,#0E0E6H
0030 E4             2174             CLR     A
0031 F0             2175             MOVX    @DPTR,A
                    2176     ;               
                    2177     ;               #pragma asm
                    2178     ;               nop
0032 00             2179               nop
                    2180     ;               nop
0033 00             2181               nop
                    2182     ;               nop
0034 00             2183               nop
                    2184     ;               nop
0035 00             2185               nop
                    2186     ;               nop
0036 00             2187               nop
                    2188     ;               nop
0037 00             2189               nop
                    2190     ;               nop
0038 00             2191               nop
                    2192     ;               nop
0039 00             2193               nop
                    2194     ;               nop
003A 00             2195               nop
                    2196     ;               nop
003B 00             2197               nop
                    2198     ;               nop
003C 00             2199               nop
                    2200     ;               nop
003D 00             2201               nop
                    2202     ;               nop
003E 00             2203               nop
                    2204     ;               nop
003F 00             2205               nop
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    36

                    2206     ;               nop
0040 00             2207               nop
                    2208     ;               nop
0041 00             2209               nop
                    2210     ;               nop
0042 00             2211               nop
                    2212     ;               nop
0043 00             2213               nop
                    2214     ;               nop
0044 00             2215               nop
                    2216     ;               nop
0045 00             2217               nop
                    2218     ;               nop
0046 00             2219               nop
                    2220     ;               nop
0047 00             2221               nop
                    2222     ;               nop
0048 00             2223               nop
                    2224     ;               nop
0049 00             2225               nop
                    2226     ;               nop
004A 00             2227               nop
                    2228     ;               nop
004B 00             2229               nop
                    2230     ;               nop
004C 00             2231               nop
                    2232     ;               nop
004D 00             2233               nop
                    2234     ;               nop
004E 00             2235               nop
                    2236     ;               nop
004F 00             2237               nop
                    2238     ;               nop
0050 00             2239               nop
                    2240     ;               nop
0051 00             2241               nop
                    2242     ;               #pragma endasm
                    2243     ; }
                    2244                             ; SOURCE LINE # 607
0052                2245     ?C0023:
0052 22             2246             RET     
                    2247     ; END OF SystemClock
                    2248     
                    2249     ; 
                    2250     ; 
                    2251     ; 
                    2252     ; //initial UART1, there are 2 different ways to generate baudrate
                    2253     ; //way 1
                    2254     ; void sInitUART1(void)
                    2255     
----                2256             RSEG  ?PR?sInitUART1?INITIAL
0000                2257     sInitUART1:
                    2258                             ; SOURCE LINE # 613
                    2259     ; {
                    2260                             ; SOURCE LINE # 614
                    2261     ;       S0CON  = 0x50;                // set as 8-bit UART,  enable serial 0 reception, ena
                             ble serial 0 multiprocessor function
                    2262                             ; SOURCE LINE # 615
0000 759850         2263             MOV     S0CON,#050H
                    2264     ;     WDCON = 0x80;            // 0x80: baud rate = (2^smod) * Fclk / (64 * (2^10 - s0rel))
                             ;
                    2265                             ; SOURCE LINE # 616
0003 75D880         2266             MOV     WDCON,#080H
                    2267     ;                               // 0x00: baud rate = (2^smod) * Fclk / (32 * 12 * (256 - th
                             1));
                    2268     ;                               // smod = 0;    Fclk = system clock
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    37

                    2269     ;     S0RELL = 0xF3;             //Fclk = 8MHz, baud rate = 9600
                    2270                             ; SOURCE LINE # 619
0006 75AAF3         2271             MOV     S0RELL,#0F3H
                    2272     ;     S0RELH = 0x03;    
                    2273                             ; SOURCE LINE # 620
0009 75BA03         2274             MOV     S0RELH,#03H
                    2275     ; }
                    2276                             ; SOURCE LINE # 621
000C                2277     ?C0024:
000C 22             2278             RET     
                    2279     ; END OF sInitUART1
                    2280     
                    2281     ; 
                    2282     ; void sInitUART2(void)
                    2283     
----                2284             RSEG  ?PR?sInitUART2?INITIAL
0000                2285     sInitUART2:
                    2286                             ; SOURCE LINE # 623
                    2287     ; {
                    2288                             ; SOURCE LINE # 624
                    2289     ;     S1CON  = 0x90;                    //enable serial 1 reception, enable serial 0 multip
                             rocessor function
                    2290                             ; SOURCE LINE # 625
0000 759B90         2291             MOV     S1CON,#090H
                    2292     ;                                 //s1con.7 = 1: 8-bit UART(mode B)    s1con.7 = 0: 9-bit U
                             ART(mode A)
                    2293     ;     S1RELL = 0xE6;            //baud rate = Fclk / (32 * (2^10 - s0rel));
                    2294                             ; SOURCE LINE # 627
0003 759DE6         2295             MOV     S1RELL,#0E6H
                    2296     ;     S1RELH = 0x03;              //Fclk = 8MHz, baud rate = 9600
                    2297                             ; SOURCE LINE # 628
0006 75BB03         2298             MOV     S1RELH,#03H
                    2299     ; }
                    2300                             ; SOURCE LINE # 629
0009                2301     ?C0025:
0009 22             2302             RET     
                    2303     ; END OF sInitUART2
                    2304     
                    2305             END
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    38

SYMBOL TABLE LISTING
------ ----- -------


N A M E                        T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . . . . . . .  C ADDR   001EH   R   SEG=?PR?INITEXT?INITIAL
?C0002. . . . . . . . . . . .  C ADDR   0019H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0003. . . . . . . . . . . .  C ADDR   0039H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0004. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0005. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0006. . . . . . . . . . . .  C ADDR   002DH   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0007. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0008. . . . . . . . . . . .  C ADDR   0037H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0009. . . . . . . . . . . .  C ADDR   0045H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0010. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?INITBREAKPOINT?INITIAL
?C0011. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
?C0012. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
?C0013. . . . . . . . . . . .  C ADDR   006FH   R   SEG=?PR?INITADC?INITIAL
?C0014. . . . . . . . . . . .  C ADDR   01DAH   R   SEG=?PR?INITEPWM?INITIAL
?C0015. . . . . . . . . . . .  C ADDR   00E6H   R   SEG=?PR?INITCOMP234?INITIAL
?C0016. . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?INITWATCHDOG?INITIAL
?C0017. . . . . . . . . . . .  C ADDR   00ECH   R   SEG=?PR?INITGPIO?INITIAL
?C0018. . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?INITTIMER01?INITIAL
?C0019. . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?INITTIMER3?INITIAL
?C0020. . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?INITTIMER4?INITIAL
?C0021. . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?INITTIMER5?INITIAL
?C0022. . . . . . . . . . . .  C ADDR   0034H   R   SEG=?PR?INITTIMER6?INITIAL
?C0023. . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
?C0024. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?SINITUART1?INITIAL
?C0025. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?SINITUART2?INITIAL
?PR?EPWMOUTPUTDISABLE?INITIAL  C SEG    000DH       REL=UNIT
?PR?EPWMOUTPUTENABLE?INITIAL.  C SEG    000DH       REL=UNIT
?PR?INITADC?INITIAL . . . . .  C SEG    0070H       REL=UNIT
?PR?INITBREAKPOINT?INITIAL. .  C SEG    000AH       REL=UNIT
?PR?INITCOMP234?INITIAL . . .  C SEG    00E7H       REL=UNIT
?PR?INITEPWM?INITIAL. . . . .  C SEG    01DBH       REL=UNIT
?PR?INITEXT?INITIAL . . . . .  C SEG    001FH       REL=UNIT
?PR?INITGPIO?INITIAL. . . . .  C SEG    00EDH       REL=UNIT
?PR?INITISDDEBUG?INITIAL. . .  C SEG    0046H       REL=UNIT
?PR?INITTIMER01?INITIAL . . .  C SEG    0023H       REL=UNIT
?PR?INITTIMER3?INITIAL. . . .  C SEG    002CH       REL=UNIT
?PR?INITTIMER4?INITIAL. . . .  C SEG    002DH       REL=UNIT
?PR?INITTIMER5?INITIAL. . . .  C SEG    0037H       REL=UNIT
?PR?INITTIMER6?INITIAL. . . .  C SEG    0035H       REL=UNIT
?PR?INITWATCHDOG?INITIAL. . .  C SEG    001EH       REL=UNIT
?PR?SINITUART1?INITIAL. . . .  C SEG    000DH       REL=UNIT
?PR?SINITUART2?INITIAL. . . .  C SEG    000AH       REL=UNIT
?PR?SYSTEMCLOCK?INITIAL . . .  C SEG    0053H       REL=UNIT
ACC . . . . . . . . . . . . .  D ADDR   00E0H   A   
ARCON . . . . . . . . . . . .  D ADDR   00EFH   A   
B . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BPCTRL. . . . . . . . . . . .  D ADDR   0093H   A   
BREAKH. . . . . . . . . . . .  D ADDR   0095H   A   
BREAKL. . . . . . . . . . . .  D ADDR   0094H   A   
BSHCTL. . . . . . . . . . . .  D ADDR   00ABH   A   
BSHI_0. . . . . . . . . . . .  D ADDR   00ACH   A   
BSHI_1. . . . . . . . . . . .  D ADDR   00ADH   A   
BSHI_2. . . . . . . . . . . .  D ADDR   00AEH   A   
BSHI_3. . . . . . . . . . . .  D ADDR   00AFH   A   
BSHO_0. . . . . . . . . . . .  D ADDR   00BCH   A   
BSHO_1. . . . . . . . . . . .  D ADDR   00BDH   A   
BSHO_2. . . . . . . . . . . .  D ADDR   00BEH   A   
BSHO_3. . . . . . . . . . . .  D ADDR   00BFH   A   
CKCON . . . . . . . . . . . .  D ADDR   008EH   A   
CLK_DIV . . . . . . . . . . .  D ADDR   0091H   A   
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    39

CLK_PD_CON. . . . . . . . . .  D ADDR   008FH   A   
DPH . . . . . . . . . . . . .  D ADDR   0083H   A   
DPH1. . . . . . . . . . . . .  D ADDR   0085H   A   
DPL . . . . . . . . . . . . .  D ADDR   0082H   A   
DPL1. . . . . . . . . . . . .  D ADDR   0084H   A   
DPS . . . . . . . . . . . . .  D ADDR   0092H   A   
EADC. . . . . . . . . . . . .  B ADDR   00B8H.0 A   
EAL . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EPWMOUTPUTDISABLE . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
EPWMOUTPUTENABLE. . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
ES. . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ES0 . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0 . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EX2 . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
EX3 . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
EX4 . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
EX5 . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
EX6 . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
HH. . . . . . . . . . . . . .  D ADDR   -----       EXT
I2FR. . . . . . . . . . . . .  B ADDR   00C8H.5 A   
I3FR. . . . . . . . . . . . .  B ADDR   00C8H.6 A   
IADC. . . . . . . . . . . . .  B ADDR   00C0H.0 A   
IE. . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . .  B ADDR   0088H.3 A   
IEN0. . . . . . . . . . . . .  D ADDR   00A8H   A   
IEN1. . . . . . . . . . . . .  D ADDR   00B8H   A   
IEN2. . . . . . . . . . . . .  D ADDR   009AH   A   
IEX2. . . . . . . . . . . . .  B ADDR   00C0H.1 A   
IEX3. . . . . . . . . . . . .  B ADDR   00C0H.2 A   
IEX4. . . . . . . . . . . . .  B ADDR   00C0H.3 A   
IEX5. . . . . . . . . . . . .  B ADDR   00C0H.4 A   
IEX6. . . . . . . . . . . . .  B ADDR   00C0H.5 A   
INITADC . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITADC?INITIAL
INITBREAKPOINT. . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITBREAKPOINT?INITIAL
INITCOMP234 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITCOMP234?INITIAL
INITEPWM. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEPWM?INITIAL
INITEXT . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEXT?INITIAL
INITGPIO. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITGPIO?INITIAL
INITIAL . . . . . . . . . . .  N NUMB   -----       
INITISDDEBUG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITISDDEBUG?INITIAL
INITTIMER01 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER01?INITIAL
INITTIMER3. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER3?INITIAL
INITTIMER4. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER4?INITIAL
INITTIMER5. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER5?INITIAL
INITTIMER6. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER6?INITIAL
INITWATCHDOG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITWATCHDOG?INITIAL
INT_REG1. . . . . . . . . . .  D ADDR   00F9H   A   
INT_REG2. . . . . . . . . . .  D ADDR   00FAH   A   
INT_REG3. . . . . . . . . . .  D ADDR   00FDH   A   
INT_REG4. . . . . . . . . . .  D ADDR   00FEH   A   
IP0 . . . . . . . . . . . . .  D ADDR   00A9H   A   
IP1 . . . . . . . . . . . . .  D ADDR   00B9H   A   
IRCON . . . . . . . . . . . .  D ADDR   00C0H   A   
IT0 . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . .  B ADDR   0088H.2 A   
MD0 . . . . . . . . . . . . .  D ADDR   00E9H   A   
MD1 . . . . . . . . . . . . .  D ADDR   00EAH   A   
MD2 . . . . . . . . . . . . .  D ADDR   00EBH   A   
MD3 . . . . . . . . . . . . .  D ADDR   00ECH   A   
MD4 . . . . . . . . . . . . .  D ADDR   00EDH   A   
MD5 . . . . . . . . . . . . .  D ADDR   00EEH   A   
MEM_CONFIG. . . . . . . . . .  D ADDR   00E8H   A   
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    40

P0. . . . . . . . . . . . . .  D ADDR   0080H   A   
P00 . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01 . . . . . . . . . . . . .  B ADDR   0080H.1 A   
P02 . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03 . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04 . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05 . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06 . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07 . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P1. . . . . . . . . . . . . .  D ADDR   0090H   A   
P10 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11 . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12 . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13 . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14 . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16 . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17 . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1AQCSFRC . . . . . . . . . .  D ADDR   00B1H   A   
P1AQSFRC. . . . . . . . . . .  D ADDR   00A7H   A   
P1CMPA. . . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPA_H. . . . . . . . . . .  D ADDR   00A4H   A   
P1CMPA_L. . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPB. . . . . . . . . . . .  D ADDR   00A5H   A   
P1CMPB_H. . . . . . . . . . .  D ADDR   00A6H   A   
P1CMPB_L. . . . . . . . . . .  D ADDR   00A5H   A   
P1ETCLR . . . . . . . . . . .  D ADDR   00B6H   A   
P1ETFLG . . . . . . . . . . .  D ADDR   00B5H   A   
P1ETFRC . . . . . . . . . . .  D ADDR   00B7H   A   
P1TBPRD . . . . . . . . . . .  D ADDR   00A1H   A   
P1TBPRD_H . . . . . . . . . .  D ADDR   00A2H   A   
P1TBPRD_L . . . . . . . . . .  D ADDR   00A1H   A   
P1TZCLR . . . . . . . . . . .  D ADDR   00B3H   A   
P1TZFLG . . . . . . . . . . .  D ADDR   00B2H   A   
P1TZFRC . . . . . . . . . . .  D ADDR   00B4H   A   
P2. . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20 . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21 . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P22 . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23 . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P24 . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P25 . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26 . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27 . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2AQCSFRC . . . . . . . . . .  D ADDR   00C9H   A   
P2AQSFRC. . . . . . . . . . .  D ADDR   00C7H   A   
P2CMPA. . . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPA_H. . . . . . . . . . .  D ADDR   00C4H   A   
P2CMPA_L. . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPB. . . . . . . . . . . .  D ADDR   00C5H   A   
P2CMPB_H. . . . . . . . . . .  D ADDR   00C6H   A   
P2CMPB_L. . . . . . . . . . .  D ADDR   00C5H   A   
P2ETCLR . . . . . . . . . . .  D ADDR   00CEH   A   
P2ETFLG . . . . . . . . . . .  D ADDR   00CDH   A   
P2ETFRC . . . . . . . . . . .  D ADDR   00CFH   A   
P2TBPRD . . . . . . . . . . .  D ADDR   00C1H   A   
P2TBPRD_H . . . . . . . . . .  D ADDR   00C2H   A   
P2TBPRD_L . . . . . . . . . .  D ADDR   00C1H   A   
P2TZCLR . . . . . . . . . . .  D ADDR   00CBH   A   
P2TZFLG . . . . . . . . . . .  D ADDR   00CAH   A   
P2TZFRC . . . . . . . . . . .  D ADDR   00CCH   A   
P3. . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30 . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31 . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P32 . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33 . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    41

P34 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36 . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P37 . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3AQCSFRC . . . . . . . . . .  D ADDR   00D9H   A   
P3AQSFRC. . . . . . . . . . .  D ADDR   00D7H   A   
P3CMPA. . . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPA_H. . . . . . . . . . .  D ADDR   00D4H   A   
P3CMPA_L. . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPB. . . . . . . . . . . .  D ADDR   00D5H   A   
P3CMPB_H. . . . . . . . . . .  D ADDR   00D6H   A   
P3CMPB_L. . . . . . . . . . .  D ADDR   00D5H   A   
P3ETCLR . . . . . . . . . . .  D ADDR   00DEH   A   
P3ETFLG . . . . . . . . . . .  D ADDR   00DDH   A   
P3ETFRC . . . . . . . . . . .  D ADDR   00DFH   A   
P3TBPRD . . . . . . . . . . .  D ADDR   00D1H   A   
P3TBPRD_H . . . . . . . . . .  D ADDR   00D2H   A   
P3TBPRD_L . . . . . . . . . .  D ADDR   00D1H   A   
P3TZCLR . . . . . . . . . . .  D ADDR   00DBH   A   
P3TZFLG . . . . . . . . . . .  D ADDR   00DAH   A   
P3TZFRC . . . . . . . . . . .  D ADDR   00DCH   A   
P4AQCSFRC . . . . . . . . . .  D ADDR   00F1H   A   
P4AQSFRC. . . . . . . . . . .  D ADDR   00E7H   A   
P4CMPA. . . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPA_H. . . . . . . . . . .  D ADDR   00E4H   A   
P4CMPA_L. . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPB. . . . . . . . . . . .  D ADDR   00E5H   A   
P4CMPB_H. . . . . . . . . . .  D ADDR   00E6H   A   
P4CMPB_L. . . . . . . . . . .  D ADDR   00E5H   A   
P4ETCLR . . . . . . . . . . .  D ADDR   00F6H   A   
P4ETFLG . . . . . . . . . . .  D ADDR   00F5H   A   
P4ETFRC . . . . . . . . . . .  D ADDR   00F7H   A   
P4TBPRD . . . . . . . . . . .  D ADDR   00E1H   A   
P4TBPRD_H . . . . . . . . . .  D ADDR   00E2H   A   
P4TBPRD_L . . . . . . . . . .  D ADDR   00E1H   A   
P4TZCLR . . . . . . . . . . .  D ADDR   00F3H   A   
P4TZFLG . . . . . . . . . . .  D ADDR   00F2H   A   
P4TZFRC . . . . . . . . . . .  D ADDR   00F4H   A   
PCON. . . . . . . . . . . . .  D ADDR   0087H   A   
POWER_CON . . . . . . . . . .  D ADDR   0097H   A   
PSW . . . . . . . . . . . . .  D ADDR   00D0H   A   
RB80. . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN0. . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RI0 . . . . . . . . . . . . .  B ADDR   0098H.0 A   
S0BUF . . . . . . . . . . . .  D ADDR   0099H   A   
S0CON . . . . . . . . . . . .  D ADDR   0098H   A   
S0RELH. . . . . . . . . . . .  D ADDR   00BAH   A   
S0RELL. . . . . . . . . . . .  D ADDR   00AAH   A   
S1BUF . . . . . . . . . . . .  D ADDR   009CH   A   
S1CON . . . . . . . . . . . .  D ADDR   009BH   A   
S1RELH. . . . . . . . . . . .  D ADDR   00BBH   A   
S1RELL. . . . . . . . . . . .  D ADDR   009DH   A   
SBUF. . . . . . . . . . . . .  D ADDR   0099H   A   
SINITUART1. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART1?INITIAL
SINITUART2. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART2?INITIAL
SM0 . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM20. . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . .  D ADDR   0081H   A   
SRAM_CON. . . . . . . . . . .  D ADDR   00F8H   A   
SWDT. . . . . . . . . . . . .  B ADDR   00B8H.6 A   
SYSTEMCLOCK . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
T2CON . . . . . . . . . . . .  D ADDR   00C8H   A   
TB80. . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . . .  D ADDR   0088H   A   
A51 MACRO ASSEMBLER  INITIAL                                                              10/19/2018 07:59:55 PAGE    42

TF0 . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . . . . . . .  D ADDR   008DH   A   
TI0 . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0 . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . . .  D ADDR   008BH   A   
TMOD. . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . .  B ADDR   0088H.6 A   
WDCON . . . . . . . . . . . .  D ADDR   00D8H   A   
WDCON_7 . . . . . . . . . . .  B ADDR   00D8H.7 A   
WDT . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
WDTREL. . . . . . . . . . . .  D ADDR   0086H   A   
__ISD_INIT. . . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
