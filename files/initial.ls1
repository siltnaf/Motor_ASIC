A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\OUTPUT\initial.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE .\OUTPUT\initial.src PR(.\files\initial.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\OUTPUT\initial.SRC generated from: SRC\initial.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE SRC\initial.c OPTIMIZE(0,SPEED) REGFILE(.\OUTPUT\motor.
                             ORC) BROWSE INTVECTOR(0X2000) INCDIR(.\INC) DEBUG OBJECTEXTEND CODE PRINT(.\files\initial.l
                             st) TABS(2) SRC(.\OUTPUT\initial.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    INITIAL
                       8     
  00CE                 9     P2ETCLR DATA    0CEH
  009B                10     TB80    BIT     098H.3
  00DE                11     P3ETCLR DATA    0DEH
  00A1                12     P1TBPRD DATA    0A1H
  0080                13     P0      DATA    080H
  00F6                14     P4ETCLR DATA    0F6H
  00C1                15     P2TBPRD DATA    0C1H
  0090                16     P1      DATA    090H
  00D1                17     P3TBPRD DATA    0D1H
  00A0                18     P2      DATA    0A0H
  00E1                19     P4TBPRD DATA    0E1H
  00B0                20     P3      DATA    0B0H
  009D                21     SM20    BIT     098H.5
  00B1                22     P1AQCSFRC       DATA    0B1H
  00C9                23     P2AQCSFRC       DATA    0C9H
  00D9                24     P3AQCSFRC       DATA    0D9H
  00F1                25     P4AQCSFRC       DATA    0F1H
  00B2                26     P1TZFLG DATA    0B2H
  00CA                27     P2TZFLG DATA    0CAH
  00DA                28     P3TZFLG DATA    0DAH
  00B4                29     P1TZFRC DATA    0B4H
  00A8                30     IEN0    DATA    0A8H
  00F2                31     P4TZFLG DATA    0F2H
  00CC                32     P2TZFRC DATA    0CCH
  00A8                33     IE      DATA    0A8H
  00B8                34     EADC    BIT     0B8H.0
  00B8                35     IEN1    DATA    0B8H
  0085                36     DPH1    DATA    085H
  00DC                37     P3TZFRC DATA    0DCH
  009A                38     IEN2    DATA    09AH
  00F4                39     P4TZFRC DATA    0F4H
  008F                40     CLK_PD_CON      DATA    08FH
  00C0                41     IADC    BIT     0C0H.0
  0084                42     DPL1    DATA    084H
  00B3                43     P1TZCLR DATA    0B3H
  00CB                44     P2TZCLR DATA    0CBH
  00DF                45     WDCON_7 BIT     0D8H.7
  00CD                46     I2FR    BIT     0C8H.5
  00DB                47     P3TZCLR DATA    0DBH
  00CE                48     I3FR    BIT     0C8H.6
  00F3                49     P4TZCLR DATA    0F3H
  009C                50     REN0    BIT     098H.4
  00AC                51     ES      BIT     0A8H.4
  00C1                52     IEX2    BIT     0C0H.1
  00C2                53     IEX3    BIT     0C0H.2
  0098                54     RI      BIT     098H.0
  00C3                55     IEX4    BIT     0C0H.3
  00C4                56     IEX5    BIT     0C0H.4
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     2

  00C5                57     IEX6    BIT     0C0H.5
  0091                58     CLK_DIV DATA    091H
  0081                59     SP      DATA    081H
  00A3                60     P1CMPA  DATA    0A3H
  00C3                61     P2CMPA  DATA    0C3H
  00A5                62     P1CMPB  DATA    0A5H
  00D3                63     P3CMPA  DATA    0D3H
  00C5                64     P2CMPB  DATA    0C5H
  00E3                65     P4CMPA  DATA    0E3H
  00D5                66     P3CMPB  DATA    0D5H
  00E5                67     P4CMPB  DATA    0E5H
  00A2                68     P1TBPRD_H       DATA    0A2H
  00C2                69     P2TBPRD_H       DATA    0C2H
  00D2                70     P3TBPRD_H       DATA    0D2H
  00E2                71     P4TBPRD_H       DATA    0E2H
  00A1                72     P1TBPRD_L       DATA    0A1H
  00C1                73     P2TBPRD_L       DATA    0C1H
  00D1                74     P3TBPRD_L       DATA    0D1H
  00E1                75     P4TBPRD_L       DATA    0E1H
  0095                76     BREAKH  DATA    095H
  00BA                77     S0RELH  DATA    0BAH
  0080                78     P00     BIT     080H.0
  0099                79     SBUF    DATA    099H
  00BB                80     S1RELH  DATA    0BBH
  0090                81     P10     BIT     090H.0
  0087                82     PCON    DATA    087H
  0081                83     P01     BIT     080H.1
  00A0                84     P20     BIT     0A0H.0
  0091                85     P11     BIT     090H.1
  0082                86     P02     BIT     080H.2
  00B0                87     P30     BIT     0B0H.0
  00A1                88     P21     BIT     0A0H.1
  0092                89     P12     BIT     090H.2
  0083                90     P03     BIT     080H.3
  0094                91     BREAKL  DATA    094H
  00B1                92     P31     BIT     0B0H.1
  00AA                93     S0RELL  DATA    0AAH
  00A2                94     P22     BIT     0A0H.2
  0093                95     P13     BIT     090H.3
  0084                96     P04     BIT     080H.4
  00B2                97     P32     BIT     0B0H.2
  00A3                98     P23     BIT     0A0H.3
  009D                99     S1RELL  DATA    09DH
  0094               100     P14     BIT     090H.4
  0089               101     TMOD    DATA    089H
  0088               102     TCON    DATA    088H
  0085               103     P05     BIT     080H.5
  00B3               104     P33     BIT     0B0H.3
  00A4               105     P24     BIT     0A0H.4
  0095               106     P15     BIT     090H.5
  0086               107     P06     BIT     080H.6
  00B4               108     P34     BIT     0B0H.4
  00AC               109     BSHI_0  DATA    0ACH
  00A5               110     P25     BIT     0A0H.5
  0096               111     P16     BIT     090H.6
  0087               112     P07     BIT     080H.7
  00B5               113     P35     BIT     0B0H.5
  00AD               114     BSHI_1  DATA    0ADH
  00A6               115     P26     BIT     0A0H.6
  0097               116     P17     BIT     090H.7
  00B6               117     P36     BIT     0B0H.6
  00AE               118     BSHI_2  DATA    0AEH
  00A7               119     P27     BIT     0A0H.7
  00B7               120     P37     BIT     0B0H.7
  00AF               121     BSHI_3  DATA    0AFH
  00BC               122     BSHO_0  DATA    0BCH
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     3

  00BD               123     BSHO_1  DATA    0BDH
  0089               124     IE0     BIT     088H.1
  00BE               125     BSHO_2  DATA    0BEH
  008B               126     IE1     BIT     088H.3
  00BF               127     BSHO_3  DATA    0BFH
  00F0               128     B       DATA    0F0H
  00E9               129     MD0     DATA    0E9H
  00EA               130     MD1     DATA    0EAH
  00AB               131     BSHCTL  DATA    0ABH
  00EB               132     MD2     DATA    0EBH
  00BE               133     SWDT    BIT     0B8H.6
  00A7               134     P1AQSFRC        DATA    0A7H
  00EC               135     MD3     DATA    0ECH
  00C7               136     P2AQSFRC        DATA    0C7H
  00ED               137     MD4     DATA    0EDH
  00D7               138     P3AQSFRC        DATA    0D7H
  00EE               139     MD5     DATA    0EEH
  00E7               140     P4AQSFRC        DATA    0E7H
  00E0               141     ACC     DATA    0E0H
  00AC               142     ES0     BIT     0A8H.4
  00A9               143     IP0     DATA    0A9H
  00A9               144     ET0     BIT     0A8H.1
  0093               145     BPCTRL  DATA    093H
  00B9               146     IP1     DATA    0B9H
  00AB               147     ET1     BIT     0A8H.3
  008D               148     TF0     BIT     088H.5
  0098               149     RI0     BIT     098H.0
  008F               150     TF1     BIT     088H.7
  00A4               151     P1CMPA_H        DATA    0A4H
  008C               152     TH0     DATA    08CH
  00C4               153     P2CMPA_H        DATA    0C4H
  00A6               154     P1CMPB_H        DATA    0A6H
  00A8               155     EX0     BIT     0A8H.0
  0099               156     TI0     BIT     098H.1
  008D               157     TH1     DATA    08DH
  0088               158     IT0     BIT     088H.0
  00D4               159     P3CMPA_H        DATA    0D4H
  00C6               160     P2CMPB_H        DATA    0C6H
  00AA               161     EX1     BIT     0A8H.2
  008A               162     IT1     BIT     088H.2
  00E4               163     P4CMPA_H        DATA    0E4H
  00D6               164     P3CMPB_H        DATA    0D6H
  00B9               165     EX2     BIT     0B8H.1
  00E6               166     P4CMPB_H        DATA    0E6H
  00A3               167     P1CMPA_L        DATA    0A3H
  00BA               168     EX3     BIT     0B8H.2
  009F               169     SM0     BIT     098H.7
  0097               170     POWER_CON       DATA    097H
  008A               171     TL0     DATA    08AH
  00C3               172     P2CMPA_L        DATA    0C3H
  00A5               173     P1CMPB_L        DATA    0A5H
  00BB               174     EX4     BIT     0B8H.3
  009E               175     SM1     BIT     098H.6
  008B               176     TL1     DATA    08BH
  00D3               177     P3CMPA_L        DATA    0D3H
  00C5               178     P2CMPB_L        DATA    0C5H
  00BC               179     EX5     BIT     0B8H.4
  00AF               180     EAL     BIT     0A8H.7
  00E3               181     P4CMPA_L        DATA    0E3H
  00D5               182     P3CMPB_L        DATA    0D5H
  00BD               183     EX6     BIT     0B8H.5
  00E5               184     P4CMPB_L        DATA    0E5H
  0086               185     WDTREL  DATA    086H
  008C               186     TR0     BIT     088H.4
  008E               187     TR1     BIT     088H.6
  00F9               188     INT_REG1        DATA    0F9H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     4

  0083               189     DPH     DATA    083H
  00FA               190     INT_REG2        DATA    0FAH
  00FD               191     INT_REG3        DATA    0FDH
  00FE               192     INT_REG4        DATA    0FEH
  0082               193     DPL     DATA    082H
  0099               194     S0BUF   DATA    099H
  009C               195     S1BUF   DATA    09CH
  0098               196     S0CON   DATA    098H
  009B               197     S1CON   DATA    09BH
  00C8               198     T2CON   DATA    0C8H
  0092               199     DPS     DATA    092H
  00AE               200     WDT     BIT     0A8H.6
  008E               201     CKCON   DATA    08EH
  00EF               202     ARCON   DATA    0EFH
  00B5               203     P1ETFLG DATA    0B5H
  00F8               204     SRAM_CON        DATA    0F8H
  00CD               205     P2ETFLG DATA    0CDH
  00DD               206     P3ETFLG DATA    0DDH
  00B7               207     P1ETFRC DATA    0B7H
  00F5               208     P4ETFLG DATA    0F5H
  00CF               209     P2ETFRC DATA    0CFH
  00E8               210     MEM_CONFIG      DATA    0E8H
  00DF               211     P3ETFRC DATA    0DFH
  00F7               212     P4ETFRC DATA    0F7H
  00D0               213     PSW     DATA    0D0H
  00D8               214     WDCON   DATA    0D8H
  00C0               215     IRCON   DATA    0C0H
  009A               216     RB80    BIT     098H.2
  00B6               217     P1ETCLR DATA    0B6H
                     218     ?PR?InitEXT?INITIAL  SEGMENT CODE 
                     219     ?PR?InitISDDebug?INITIAL                 SEGMENT CODE 
                     220     ?PR?InitBreakPoint?INITIAL               SEGMENT CODE 
                     221     ?PR?epwmOutputDisable?INITIAL            SEGMENT CODE 
                     222     ?PR?epwmOutputEnable?INITIAL             SEGMENT CODE 
                     223     ?PR?InitADC?INITIAL  SEGMENT CODE 
                     224     ?PR?Initepwm?INITIAL SEGMENT CODE 
                     225     ?PR?InitComparator?INITIAL               SEGMENT CODE 
                     226     ?PR?InitWatchDog?INITIAL                 SEGMENT CODE 
                     227     ?PR?InitGPIO?INITIAL SEGMENT CODE 
                     228     ?PR?InitTimer01?INITIAL                  SEGMENT CODE 
                     229     ?PR?InitTimer3?INITIAL                   SEGMENT CODE 
                     230     ?PR?InitTimer4?INITIAL                   SEGMENT CODE 
                     231     ?PR?InitTimer5?INITIAL                   SEGMENT CODE 
                     232     ?PR?InitTimer6?INITIAL                   SEGMENT CODE 
                     233     ?PR?SystemClock?INITIAL                  SEGMENT CODE 
                     234     ?PR?sInitUART1?INITIAL                   SEGMENT CODE 
                     235     ?PR?sInitUART2?INITIAL                   SEGMENT CODE 
                     236     ?PR?InitDAC?INITIAL  SEGMENT CODE 
                     237             EXTRN   CODE (__isd_init)
                     238             PUBLIC  InitDAC
                     239             PUBLIC  sInitUART2
                     240             PUBLIC  sInitUART1
                     241             PUBLIC  SystemClock
                     242             PUBLIC  InitTimer6
                     243             PUBLIC  InitTimer5
                     244             PUBLIC  InitTimer4
                     245             PUBLIC  InitTimer3
                     246             PUBLIC  InitTimer01
                     247             PUBLIC  InitGPIO
                     248             PUBLIC  InitWatchDog
                     249             PUBLIC  InitComparator
                     250             PUBLIC  Initepwm
                     251             PUBLIC  InitADC
                     252             PUBLIC  epwmOutputEnable
                     253             PUBLIC  epwmOutputDisable
                     254             PUBLIC  InitBreakPoint
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     5

                     255             PUBLIC  InitISDDebug
                     256             PUBLIC  InitEXT
                     257     ; #include "register.h"
                     258     ; #include <intrins.h>
                     259     ; #include "app.h"
                     260     ; #include "initial.h"
                     261     ; #include "ISD51.H"
                     262     ; 
                     263     ; 
                     264     ; 
                     265     ; 
                     266     ; 
                     267     ; void InitEXT(void)
                     268     
----                 269             RSEG  ?PR?InitEXT?INITIAL
0000                 270     InitEXT:
                     271             USING   0
                     272                             ; SOURCE LINE # 11
                     273     ; {     
                     274                             ; SOURCE LINE # 12
                     275     ; //            EINT1_EN=0; 
                     276     ; //            EINT2_EN=1;                             //enable EXT2
                     277     ; //            EINT3_EN=0;
                     278     ; //            EINT4_EN=0;
                     279     ;       
                     280     ;                       EXINT_EN = 0x02;                                        //RXINT_EN 
                             cannot be read, it can be write only
                     281                             ; SOURCE LINE # 18
0000 90E08D          282             MOV     DPTR,#0E08DH
0003 7402            283             MOV     A,#02H
0005 F0              284             MOVX    @DPTR,A
                     285     ;                                                                                          
                                                                  //EXINT_EN= 0x01      -----enable EXT1
                     286     ;                                                                                          
                                                                  //                                      0x02                    -----enable EXT2
                     287     ;                                                                                          
                                                                  //                                      0x04              -----enable EXT3
                     288     ;                                                                                          
                                                                  //                                      0x08                    -----enable EXT4
                     289     ;       
                     290     ;               EINT2_CFG=RISING_EDGE;          //rising edge trigger
                     291                             ; SOURCE LINE # 24
0006 90E0BF          292             MOV     DPTR,#0E0BFH
0009 E0              293             MOVX    A,@DPTR
000A FF              294             MOV     R7,A
000B EF              295             MOV     A,R7
000C 54F3            296             ANL     A,#0F3H
000E FF              297             MOV     R7,A
000F EF              298             MOV     A,R7
0010 4404            299             ORL     A,#04H
0012 FF              300             MOV     R7,A
0013 EF              301             MOV     A,R7
0014 F0              302             MOVX    @DPTR,A
                     303     ;               EX0=1;
                     304                             ; SOURCE LINE # 25
0015 D2A8            305             SETB    EX0
                     306     ;               IT0=1;
                     307                             ; SOURCE LINE # 26
0017 D288            308             SETB    IT0
                     309     ;               IE0=0;
                     310                             ; SOURCE LINE # 27
0019 C289            311             CLR     IE0
                     312     ;               INT_REG1 &=0xf0;              
                     313                             ; SOURCE LINE # 28
001B 53F9F0          314             ANL     INT_REG1,#0F0H
                     315     ;       
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     6

                     316     ; }
                     317                             ; SOURCE LINE # 30
001E                 318     ?C0001:
001E 22              319             RET     
                     320     ; END OF InitEXT
                     321     
                     322     ; 
                     323     ; void InitISDDebug(void)
                     324     
----                 325             RSEG  ?PR?InitISDDebug?INITIAL
0000                 326     InitISDDebug:
                     327             USING   0
                     328                             ; SOURCE LINE # 32
                     329     ; {
                     330                             ; SOURCE LINE # 33
                     331     ;       
                     332     ;     EAL = 0;
                     333                             ; SOURCE LINE # 35
0000 C2AF            334             CLR     EAL
                     335     ;     //ISD51++++++++++++++++++++++++++
                     336     ;     #if ISDDebug == ENABLE_ISD
                     337     ;               InitBreakPoint();
                     338                             ; SOURCE LINE # 38
0002 120000   F      339             LCALL   InitBreakPoint
                     340     ;     sInitUART1();
                     341                             ; SOURCE LINE # 39
0005 120000   F      342             LCALL   sInitUART1
                     343     ;  
                     344     ;     IP0 = 0x30;
                     345                             ; SOURCE LINE # 41
0008 75A930          346             MOV     IP0,#030H
                     347     ;     IP1 = 0x20;
                     348                             ; SOURCE LINE # 42
000B 75B920          349             MOV     IP1,#020H
                     350     ;     ET0 = 0;
                     351                             ; SOURCE LINE # 43
000E C2A9            352             CLR     ET0
                     353     ;     EX6 = 0 ;
                     354                             ; SOURCE LINE # 44
0010 C2BD            355             CLR     EX6
                     356     ;     ES0 = 1;
                     357                             ; SOURCE LINE # 45
0012 D2AC            358             SETB    ES0
                     359     ;     EAL = 1;
                     360                             ; SOURCE LINE # 46
0014 D2AF            361             SETB    EAL
                     362     ;     _nop_();
                     363                             ; SOURCE LINE # 47
0016 00              364             NOP     
                     365     ;     _nop_();
                     366                             ; SOURCE LINE # 48
0017 00              367             NOP     
                     368     ;     _nop_();
                     369                             ; SOURCE LINE # 49
0018 00              370             NOP     
0019                 371     ?C0002:
                     372     ;     while(1)
                     373                             ; SOURCE LINE # 50
                     374     ;     {
                     375                             ; SOURCE LINE # 51
                     376     ;         P10 = 0;
                     377                             ; SOURCE LINE # 52
0019 C290            378             CLR     P10
                     379     ;         P10 = 1;
                     380                             ; SOURCE LINE # 53
001B D290            381             SETB    P10
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     7

                     382     ;         ISDcheck();      // initialize uVision2 Debugger and continue program run
                     383                             ; SOURCE LINE # 54
001D 20AC10          384             JB      ES,?C0004
0020 30980D          385             JNB     RI,?C0004
0023 E599            386             MOV     A,SBUF
0025 64A5            387             XRL     A,#0A5H
0027 6004            388             JZ      ?C0006
0029 C298            389             CLR     RI
002B 8003            390             SJMP    ?C0004
002D                 391     ?C0006:
002D 120000   F      392             LCALL   __isd_init
0030                 393     ?C0007:
0030                 394     ?C0005:
0030                 395     ?C0004:
                     396     ;         if((BPCTRL & 0x10) != 0) break;
                     397                             ; SOURCE LINE # 55
0030 E593            398             MOV     A,BPCTRL
0032 30E4E4          399             JNB     ACC.4,?C0002
0035 8002            400             SJMP    ?C0003
0037                 401     ?C0008:
                     402     ;     }
                     403                             ; SOURCE LINE # 56
0037 80E0            404             SJMP    ?C0002
0039                 405     ?C0003:
                     406     ;     _nop_();
                     407                             ; SOURCE LINE # 57
0039 00              408             NOP     
                     409     ;     _nop_();
                     410                             ; SOURCE LINE # 58
003A 00              411             NOP     
                     412     ;     _nop_();
                     413                             ; SOURCE LINE # 59
003B 00              414             NOP     
                     415     ;     ET0 = 1;
                     416                             ; SOURCE LINE # 60
003C D2A9            417             SETB    ET0
                     418     ;     EX6 = 1;
                     419                             ; SOURCE LINE # 61
003E D2BD            420             SETB    EX6
                     421     ;     _nop_();
                     422                             ; SOURCE LINE # 62
0040 00              423             NOP     
                     424     ;     _nop_();
                     425                             ; SOURCE LINE # 63
0041 00              426             NOP     
                     427     ;     _nop_();
                     428                             ; SOURCE LINE # 64
0042 00              429             NOP     
                     430     ;     #endif
                     431     ;     //++++++++++++++++++++++++++++++
                     432     ;               EAL = 1;                                //enable all interrupts
                     433                             ; SOURCE LINE # 67
0043 D2AF            434             SETB    EAL
                     435     ; }
                     436                             ; SOURCE LINE # 68
0045                 437     ?C0009:
0045 22              438             RET     
                     439     ; END OF InitISDDebug
                     440     
                     441     ; 
                     442     ; 
                     443     ; 
                     444     ; 
                     445     ; 
                     446     ; void InitBreakPoint  (void)
                     447     
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     8

----                 448             RSEG  ?PR?InitBreakPoint?INITIAL
0000                 449     InitBreakPoint:
                     450                             ; SOURCE LINE # 74
                     451     ; {
                     452                             ; SOURCE LINE # 75
                     453     ;     BPCTRL   = 0x01;
                     454                             ; SOURCE LINE # 76
0000 759301          455             MOV     BPCTRL,#01H
                     456     ;       BREAKL   = 0xff;
                     457                             ; SOURCE LINE # 77
0003 7594FF          458             MOV     BREAKL,#0FFH
                     459     ;       BREAKH   = 0xff;
                     460                             ; SOURCE LINE # 78
0006 7595FF          461             MOV     BREAKH,#0FFH
                     462     ; }
                     463                             ; SOURCE LINE # 79
0009                 464     ?C0010:
0009 22              465             RET     
                     466     ; END OF InitBreakPoint
                     467     
                     468     ; 
                     469     ; void epwmOutputDisable(void)
                     470     
----                 471             RSEG  ?PR?epwmOutputDisable?INITIAL
0000                 472     epwmOutputDisable:
                     473                             ; SOURCE LINE # 81
                     474     ; {
                     475                             ; SOURCE LINE # 82
                     476     ;       P1AQCSFRC = 0x05;                                               // force epwmxA and
                              epwmxB output low
                     477                             ; SOURCE LINE # 83
0000 75B105          478             MOV     P1AQCSFRC,#05H
                     479     ;       P2AQCSFRC = 0x05;
                     480                             ; SOURCE LINE # 84
0003 75C905          481             MOV     P2AQCSFRC,#05H
                     482     ;       P3AQCSFRC = 0x05;
                     483                             ; SOURCE LINE # 85
0006 75D905          484             MOV     P3AQCSFRC,#05H
                     485     ;       P4AQCSFRC = 0x05;
                     486                             ; SOURCE LINE # 86
0009 75F105          487             MOV     P4AQCSFRC,#05H
                     488     ; }
                     489                             ; SOURCE LINE # 87
000C                 490     ?C0011:
000C 22              491             RET     
                     492     ; END OF epwmOutputDisable
                     493     
                     494     ; 
                     495     ; void epwmOutputEnable(void)
                     496     
----                 497             RSEG  ?PR?epwmOutputEnable?INITIAL
0000                 498     epwmOutputEnable:
                     499                             ; SOURCE LINE # 89
                     500     ; {
                     501                             ; SOURCE LINE # 90
                     502     ;       P1AQCSFRC = 0x0F;                                               // software force d
                             isable
                     503                             ; SOURCE LINE # 91
0000 75B10F          504             MOV     P1AQCSFRC,#0FH
                     505     ;       P2AQCSFRC = 0x0F;
                     506                             ; SOURCE LINE # 92
0003 75C90F          507             MOV     P2AQCSFRC,#0FH
                     508     ;       P3AQCSFRC = 0x0F;
                     509                             ; SOURCE LINE # 93
0006 75D90F          510             MOV     P3AQCSFRC,#0FH
                     511     ;       P4AQCSFRC = 0x0F;
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE     9

                     512                             ; SOURCE LINE # 94
0009 75F10F          513             MOV     P4AQCSFRC,#0FH
                     514     ; }
                     515                             ; SOURCE LINE # 95
000C                 516     ?C0012:
000C 22              517             RET     
                     518     ; END OF epwmOutputEnable
                     519     
                     520     ; 
                     521     ; void InitADC(void)
                     522     
----                 523             RSEG  ?PR?InitADC?INITIAL
0000                 524     InitADC:
                     525             USING   0
                     526                             ; SOURCE LINE # 97
                     527     ; {
                     528                             ; SOURCE LINE # 98
                     529     ; 
                     530     ;               AD_PD = 0;                                                      //Power up 
                             ADD
                     531                             ; SOURCE LINE # 100
0000 90E08B          532             MOV     DPTR,#0E08BH
0003 E4              533             CLR     A
0004 F0              534             MOVX    @DPTR,A
                     535     ;         ADC_CLK_EN=1;
                     536                             ; SOURCE LINE # 101
0005 90E0EC          537             MOV     DPTR,#0E0ECH
0008 E0              538             MOVX    A,@DPTR
0009 FF              539             MOV     R7,A
000A EF              540             MOV     A,R7
000B 4408            541             ORL     A,#08H
000D FF              542             MOV     R7,A
000E EF              543             MOV     A,R7
000F F0              544             MOVX    @DPTR,A
                     545     ;               ADC_CLK_DIV_SEL=0x03;    //system divided by 4
                     546                             ; SOURCE LINE # 102
0010 90E0EC          547             MOV     DPTR,#0E0ECH
0013 E0              548             MOVX    A,@DPTR
0014 FF              549             MOV     R7,A
0015 EF              550             MOV     A,R7
0016 4403            551             ORL     A,#03H
0018 FF              552             MOV     R7,A
0019 EF              553             MOV     A,R7
001A F0              554             MOVX    @DPTR,A
                     555     ;     ADCHS = 0x0f;                                             // select channel CH1-CH4
                     556                             ; SOURCE LINE # 103
001B 90E05C          557             MOV     DPTR,#0E05CH
001E 740F            558             MOV     A,#0FH
0020 F0              559             MOVX    @DPTR,A
                     560     ;               
                     561     ;       
                     562     ;       
                     563     ;               DAC1_PD = 1;                                            // DAC12 down
                     564                             ; SOURCE LINE # 107
0021 90E07A          565             MOV     DPTR,#0E07AH
0024 E0              566             MOVX    A,@DPTR
0025 FF              567             MOV     R7,A
0026 EF              568             MOV     A,R7
0027 4404            569             ORL     A,#04H
0029 FF              570             MOV     R7,A
002A EF              571             MOV     A,R7
002B F0              572             MOVX    @DPTR,A
                     573     ;               DAC2_PD = 1;
                     574                             ; SOURCE LINE # 108
002C 90E07A          575             MOV     DPTR,#0E07AH
002F E0              576             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    10

0030 FF              577             MOV     R7,A
0031 EF              578             MOV     A,R7
0032 4401            579             ORL     A,#01H
0034 FF              580             MOV     R7,A
0035 EF              581             MOV     A,R7
0036 F0              582             MOVX    @DPTR,A
                     583     ;       
                     584     ;       
                     585     ;       
                     586     ;               C1PDO1PD=CFG2;                                                          //C
                             OMP1 power off and OP1 power on
                     587                             ; SOURCE LINE # 112
0037 90E0A4          588             MOV     DPTR,#0E0A4H
003A E0              589             MOVX    A,@DPTR
003B FF              590             MOV     R7,A
003C EF              591             MOV     A,R7
003D 54FC            592             ANL     A,#0FCH
003F FF              593             MOV     R7,A
0040 EF              594             MOV     A,R7
0041 4402            595             ORL     A,#02H
0043 FF              596             MOV     R7,A
0044 EF              597             MOV     A,R7
0045 F0              598             MOVX    @DPTR,A
                     599     ;               C2PDO2PD=CFG2;                                                          //C
                             OMP2 power off and OP2 power on
                     600                             ; SOURCE LINE # 113
0046 90E0A4          601             MOV     DPTR,#0E0A4H
0049 E0              602             MOVX    A,@DPTR
004A FF              603             MOV     R7,A
004B EF              604             MOV     A,R7
004C 54F3            605             ANL     A,#0F3H
004E FF              606             MOV     R7,A
004F EF              607             MOV     A,R7
0050 4408            608             ORL     A,#08H
0052 FF              609             MOV     R7,A
0053 EF              610             MOV     A,R7
0054 F0              611             MOVX    @DPTR,A
                     612     ;               C3PDO3PD=CFG2;                                                          //C
                             OMP3 power off and OP3 power on
                     613                             ; SOURCE LINE # 114
0055 90E0A4          614             MOV     DPTR,#0E0A4H
0058 E0              615             MOVX    A,@DPTR
0059 FF              616             MOV     R7,A
005A EF              617             MOV     A,R7
005B 54CF            618             ANL     A,#0CFH
005D FF              619             MOV     R7,A
005E EF              620             MOV     A,R7
005F 4420            621             ORL     A,#020H
0061 FF              622             MOV     R7,A
0062 EF              623             MOV     A,R7
0063 F0              624             MOVX    @DPTR,A
                     625     ;       
                     626     ;       
                     627     ;               LDO25_PD=0;             //use internal 2.5V for AD VREF
                     628                             ; SOURCE LINE # 117
0064 90E09D          629             MOV     DPTR,#0E09DH
0067 E0              630             MOVX    A,@DPTR
0068 FF              631             MOV     R7,A
0069 EF              632             MOV     A,R7
006A 54FD            633             ANL     A,#0FDH
006C FF              634             MOV     R7,A
006D EF              635             MOV     A,R7
006E F0              636             MOVX    @DPTR,A
                     637     ;               BP4=0;                  //CH4 normal and no bypass
                     638                             ; SOURCE LINE # 118
006F 90E05D          639             MOV     DPTR,#0E05DH
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    11

0072 E0              640             MOVX    A,@DPTR
0073 FF              641             MOV     R7,A
0074 EF              642             MOV     A,R7
0075 54F7            643             ANL     A,#0F7H
0077 FF              644             MOV     R7,A
0078 EF              645             MOV     A,R7
0079 F0              646             MOVX    @DPTR,A
                     647     ;       
                     648     ;               SWFTRG=1;
                     649                             ; SOURCE LINE # 120
007A 90E05A          650             MOV     DPTR,#0E05AH
007D E0              651             MOVX    A,@DPTR
007E FF              652             MOV     R7,A
007F EF              653             MOV     A,R7
0080 4420            654             ORL     A,#020H
0082 FF              655             MOV     R7,A
0083 EF              656             MOV     A,R7
0084 F0              657             MOVX    @DPTR,A
                     658     ;         INTEN=1;
                     659                             ; SOURCE LINE # 121
0085 90E05A          660             MOV     DPTR,#0E05AH
0088 E0              661             MOVX    A,@DPTR
0089 FF              662             MOV     R7,A
008A EF              663             MOV     A,R7
008B 4401            664             ORL     A,#01H
008D FF              665             MOV     R7,A
008E EF              666             MOV     A,R7
008F F0              667             MOVX    @DPTR,A
                     668     ;               AD4OST=0x0000;                                  //AD offset   0xFC
                     669                             ; SOURCE LINE # 122
0090 90E064          670             MOV     DPTR,#0E064H
0093 E4              671             CLR     A
0094 F0              672             MOVX    @DPTR,A
0095 A3              673             INC     DPTR
0096 E4              674             CLR     A
0097 F0              675             MOVX    @DPTR,A
                     676     ; 
                     677     ;       
                     678     ;       
                     679     ;               EADC=1;
                     680                             ; SOURCE LINE # 126
0098 D2B8            681             SETB    EADC
                     682     ;               IADC=0;
                     683                             ; SOURCE LINE # 127
009A C2C0            684             CLR     IADC
                     685     ; 
                     686     ;       }
                     687                             ; SOURCE LINE # 129
009C                 688     ?C0013:
009C 22              689             RET     
                     690     ; END OF InitADC
                     691     
                     692     ; 
                     693     ; 
                     694     ; void Initepwm(void)
                     695     
----                 696             RSEG  ?PR?Initepwm?INITIAL
0000                 697     Initepwm:
                     698             USING   0
                     699                             ; SOURCE LINE # 132
                     700     ; {
                     701                             ; SOURCE LINE # 133
                     702     ;       P2_FN_H = 0x55;                                                 // p2_4 ~ p2_7 as p
                             wm2x ~ pwm1x
                     703                             ; SOURCE LINE # 134
0000 90E0E0          704             MOV     DPTR,#0E0E0H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    12

0003 7455            705             MOV     A,#055H
0005 F0              706             MOVX    @DPTR,A
                     707     ;       P2_FN_L = P2_FN_L & 0x0F | 0x50;                // p2_2 ~ p2_3 as pwm3x
                     708                             ; SOURCE LINE # 135
0006 90E0E1          709             MOV     DPTR,#0E0E1H
0009 E0              710             MOVX    A,@DPTR
000A FF              711             MOV     R7,A
000B EF              712             MOV     A,R7
000C 540F            713             ANL     A,#0FH
000E FF              714             MOV     R7,A
000F EF              715             MOV     A,R7
0010 4450            716             ORL     A,#050H
0012 FF              717             MOV     R7,A
0013 90E0E1          718             MOV     DPTR,#0E0E1H
0016 EF              719             MOV     A,R7
0017 F0              720             MOVX    @DPTR,A
                     721     ;       //P0_FN_L = P0_FN_L & 0xF0 | 0x05;                // p0_0 ~ p0_1 as pwm4x
                     722     ; 
                     723     ; //    P1TBPRD_L = 0x90;                                               // pwm period is 10
                             KHz
                     724     ; //    P1TBPRD_H = 0x01;
                     725     ; //    P2TBPRD_L = 0x90;
                     726     ; //    P2TBPRD_H = 0x01;
                     727     ; //    P3TBPRD_L = 0x90;
                     728     ; //    P3TBPRD_H = 0x01;
                     729     ; //    P4TBPRD_L = 0x90;
                     730     ; //    P4TBPRD_H = 0x01;
                     731     ; 
                     732     ;       PCLKCR = 0x1E;//0x1F                                                    // clock fo
                             r pwm1 ~ pwm4 is enable,and synchronize all channel disable
                     733                             ; SOURCE LINE # 147
0018 90E000          734             MOV     DPTR,#0E000H
001B 741E            735             MOV     A,#01EH
001D F0              736             MOVX    @DPTR,A
                     737     ; //    PSYNCICR = 0x3C;//0x1F;                                         // all synchronize 
                             input enable
                     738     ; 
                     739     ;       P1TBCTL_L = 0x02;//0x12;                                                // period l
                             oad from shadow,up down mode,synchronize at CTR = ZERO
                     740                             ; SOURCE LINE # 150
001E 90E003          741             MOV     DPTR,#0E003H
0021 7402            742             MOV     A,#02H
0023 F0              743             MOVX    @DPTR,A
                     744     ;       P1TBCTL_H = 0x80;                                               // time base free r
                             un when emulation
                     745                             ; SOURCE LINE # 151
0024 90E002          746             MOV     DPTR,#0E002H
0027 7480            747             MOV     A,#080H
0029 F0              748             MOVX    @DPTR,A
                     749     ;       P2TBCTL_L = 0x02;//0x12;
                     750                             ; SOURCE LINE # 152
002A 90E019          751             MOV     DPTR,#0E019H
002D 7402            752             MOV     A,#02H
002F F0              753             MOVX    @DPTR,A
                     754     ;       P2TBCTL_H = 0x80;
                     755                             ; SOURCE LINE # 153
0030 90E018          756             MOV     DPTR,#0E018H
0033 7480            757             MOV     A,#080H
0035 F0              758             MOVX    @DPTR,A
                     759     ;       P3TBCTL_L = 0x02;//0x12;
                     760                             ; SOURCE LINE # 154
0036 90E02F          761             MOV     DPTR,#0E02FH
0039 7402            762             MOV     A,#02H
003B F0              763             MOVX    @DPTR,A
                     764     ;       P3TBCTL_H = 0x80;
                     765                             ; SOURCE LINE # 155
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    13

003C 90E02E          766             MOV     DPTR,#0E02EH
003F 7480            767             MOV     A,#080H
0041 F0              768             MOVX    @DPTR,A
                     769     ;       P4TBCTL_L = 0x02;//0x12;
                     770                             ; SOURCE LINE # 156
0042 90E045          771             MOV     DPTR,#0E045H
0045 7402            772             MOV     A,#02H
0047 F0              773             MOVX    @DPTR,A
                     774     ;       P4TBCTL_H = 0x80;
                     775                             ; SOURCE LINE # 157
0048 90E044          776             MOV     DPTR,#0E044H
004B 7480            777             MOV     A,#080H
004D F0              778             MOVX    @DPTR,A
                     779     ; 
                     780     ; //    P1TBCTL_L = 0x00;                                               // period load from
                              shadow,up mode
                     781     ; //    P1TBCTL_H = 0x80;
                     782     ; //    P2TBCTL_L = 0x00;
                     783     ; //    P2TBCTL_H = 0x80;
                     784     ; //    P3TBCTL_L = 0x00;
                     785     ; //    P3TBCTL_H = 0x80;
                     786     ; //    P4TBCTL_L = 0x00;
                     787     ; //    P4TBCTL_H = 0x80;
                     788     ; 
                     789     ;       P1CMPCTL = 0x00;                                                // shadow on,update
                              at CTR = ZERO
                     790                             ; SOURCE LINE # 168
004E 90E007          791             MOV     DPTR,#0E007H
0051 E4              792             CLR     A
0052 F0              793             MOVX    @DPTR,A
                     794     ;       P2CMPCTL = 0x00;
                     795                             ; SOURCE LINE # 169
0053 90E01D          796             MOV     DPTR,#0E01DH
0056 E4              797             CLR     A
0057 F0              798             MOVX    @DPTR,A
                     799     ;       P3CMPCTL = 0x00;
                     800                             ; SOURCE LINE # 170
0058 90E033          801             MOV     DPTR,#0E033H
005B E4              802             CLR     A
005C F0              803             MOVX    @DPTR,A
                     804     ;       P4CMPCTL = 0x00;
                     805                             ; SOURCE LINE # 171
005D 90E049          806             MOV     DPTR,#0E049H
0060 E4              807             CLR     A
0061 F0              808             MOVX    @DPTR,A
                     809     ;       P1AQCTLA_L = 0x60;                                              // when cmpA,count 
                             up is set,count down is clear
                     810                             ; SOURCE LINE # 172
0062 90E009          811             MOV     DPTR,#0E009H
0065 7460            812             MOV     A,#060H
0067 F0              813             MOVX    @DPTR,A
                     814     ;       P1AQCTLA_H = 0x00;                                              // when cmpB pwmxA 
                             do nothing
                     815                             ; SOURCE LINE # 173
0068 90E008          816             MOV     DPTR,#0E008H
006B E4              817             CLR     A
006C F0              818             MOVX    @DPTR,A
                     819     ;       P2AQCTLA_L = 0x60;
                     820                             ; SOURCE LINE # 174
006D 90E01F          821             MOV     DPTR,#0E01FH
0070 7460            822             MOV     A,#060H
0072 F0              823             MOVX    @DPTR,A
                     824     ;       P2AQCTLA_H = 0x00;
                     825                             ; SOURCE LINE # 175
0073 90E01E          826             MOV     DPTR,#0E01EH
0076 E4              827             CLR     A
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    14

0077 F0              828             MOVX    @DPTR,A
                     829     ;       P3AQCTLA_L = 0x60;
                     830                             ; SOURCE LINE # 176
0078 90E035          831             MOV     DPTR,#0E035H
007B 7460            832             MOV     A,#060H
007D F0              833             MOVX    @DPTR,A
                     834     ;       P3AQCTLA_H = 0x00;
                     835                             ; SOURCE LINE # 177
007E 90E034          836             MOV     DPTR,#0E034H
0081 E4              837             CLR     A
0082 F0              838             MOVX    @DPTR,A
                     839     ;       P4AQCTLA_L = 0x60;
                     840                             ; SOURCE LINE # 178
0083 90E04B          841             MOV     DPTR,#0E04BH
0086 7460            842             MOV     A,#060H
0088 F0              843             MOVX    @DPTR,A
                     844     ;       P4AQCTLA_H = 0x00;
                     845                             ; SOURCE LINE # 179
0089 90E04A          846             MOV     DPTR,#0E04AH
008C E4              847             CLR     A
008D F0              848             MOVX    @DPTR,A
                     849     ;       P1AQCTLB_L = 0x00;//0x60;
                     850                             ; SOURCE LINE # 180
008E 90E00B          851             MOV     DPTR,#0E00BH
0091 E4              852             CLR     A
0092 F0              853             MOVX    @DPTR,A
                     854     ;       P1AQCTLB_H = 0x00;
                     855                             ; SOURCE LINE # 181
0093 90E00A          856             MOV     DPTR,#0E00AH
0096 E4              857             CLR     A
0097 F0              858             MOVX    @DPTR,A
                     859     ;       P2AQCTLB_L = 0x00;//0x60;
                     860                             ; SOURCE LINE # 182
0098 90E021          861             MOV     DPTR,#0E021H
009B E4              862             CLR     A
009C F0              863             MOVX    @DPTR,A
                     864     ;       P2AQCTLB_H = 0x00;
                     865                             ; SOURCE LINE # 183
009D 90E020          866             MOV     DPTR,#0E020H
00A0 E4              867             CLR     A
00A1 F0              868             MOVX    @DPTR,A
                     869     ;       P3AQCTLB_L = 0x00;//0x60;
                     870                             ; SOURCE LINE # 184
00A2 90E037          871             MOV     DPTR,#0E037H
00A5 E4              872             CLR     A
00A6 F0              873             MOVX    @DPTR,A
                     874     ;       P3AQCTLB_H = 0x00;
                     875                             ; SOURCE LINE # 185
00A7 90E036          876             MOV     DPTR,#0E036H
00AA E4              877             CLR     A
00AB F0              878             MOVX    @DPTR,A
                     879     ;       P4AQCTLB_L = 0x00;//0x60;
                     880                             ; SOURCE LINE # 186
00AC 90E04D          881             MOV     DPTR,#0E04DH
00AF E4              882             CLR     A
00B0 F0              883             MOVX    @DPTR,A
                     884     ;       P4AQCTLB_H = 0x00;
                     885                             ; SOURCE LINE # 187
00B1 90E04C          886             MOV     DPTR,#0E04CH
00B4 E4              887             CLR     A
00B5 F0              888             MOVX    @DPTR,A
                     889     ; 
                     890     ; //    P1AQCTLA_L = 0x12;                                                      // CTR = ZE
                             RO set,CTR = CMPA up clear,CTR = PRD nothing,CTR = CMPA down nothing
                     891     ; //    P1AQCTLA_H = 0x00;                                                      // when cmp
                             B pwmxA do nothing
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    15

                     892     ; //    P1AQCTLB_L = 0x02;                                                      // CTR = ZE
                             RO set,CTR = CMPA up nothing,CTR = PRD nothing,CTR = CMPA down nothing
                     893     ; //    P1AQCTLB_H = 0x01;                                                      // CTR = CM
                             PB clear
                     894     ; //    P2AQCTLA_L = 0x12;
                     895     ; //    P2AQCTLA_H = 0x00;
                     896     ; //    P2AQCTLB_L = 0x02;
                     897     ; //    P2AQCTLB_H = 0x01;
                     898     ; //    P3AQCTLA_L = 0x12;
                     899     ; //    P3AQCTLA_H = 0x00;
                     900     ; //    P3AQCTLB_L = 0x02;
                     901     ; //    P3AQCTLB_H = 0x01;
                     902     ; //    P4AQCTLA_L = 0x12;
                     903     ; //    P4AQCTLA_H = 0x00;
                     904     ; //    P4AQCTLB_L = 0x02;
                     905     ; //    P4AQCTLB_H = 0x01;
                     906     ; 
                     907     ;       P1DBCTL = 0x0B;                                                 // delay source is 
                             epwmxA,dead band full,epwmxB invert
                     908                             ; SOURCE LINE # 206
00B6 90E00C          909             MOV     DPTR,#0E00CH
00B9 740B            910             MOV     A,#0BH
00BB F0              911             MOVX    @DPTR,A
                     912     ;       P2DBCTL = 0x0B;
                     913                             ; SOURCE LINE # 207
00BC 90E022          914             MOV     DPTR,#0E022H
00BF 740B            915             MOV     A,#0BH
00C1 F0              916             MOVX    @DPTR,A
                     917     ;       P3DBCTL = 0x0B;
                     918                             ; SOURCE LINE # 208
00C2 90E038          919             MOV     DPTR,#0E038H
00C5 740B            920             MOV     A,#0BH
00C7 F0              921             MOVX    @DPTR,A
                     922     ;       P4DBCTL = 0x0B;
                     923                             ; SOURCE LINE # 209
00C8 90E04E          924             MOV     DPTR,#0E04EH
00CB 740B            925             MOV     A,#0BH
00CD F0              926             MOVX    @DPTR,A
                     927     ; //    P1DBCTL = 0x07;                                                 // delay source is 
                             epwmxA,dead band full,epwmxA invert
                     928     ; //    P2DBCTL = 0x07;
                     929     ; //    P3DBCTL = 0x07;
                     930     ; //    P4DBCTL = 0x07;
                     931     ;       P1DBRED_L = 0x32;//0x0A                                         // rise edge dead t
                             ime is 1.25uS
                     932                             ; SOURCE LINE # 214
00CE 90E00E          933             MOV     DPTR,#0E00EH
00D1 7432            934             MOV     A,#032H
00D3 F0              935             MOVX    @DPTR,A
                     936     ;       P1DBRED_H = 0x00;
                     937                             ; SOURCE LINE # 215
00D4 90E00D          938             MOV     DPTR,#0E00DH
00D7 E4              939             CLR     A
00D8 F0              940             MOVX    @DPTR,A
                     941     ;       P2DBRED_L = 0x32;
                     942                             ; SOURCE LINE # 216
00D9 90E024          943             MOV     DPTR,#0E024H
00DC 7432            944             MOV     A,#032H
00DE F0              945             MOVX    @DPTR,A
                     946     ;       P2DBRED_H = 0x00;
                     947                             ; SOURCE LINE # 217
00DF 90E023          948             MOV     DPTR,#0E023H
00E2 E4              949             CLR     A
00E3 F0              950             MOVX    @DPTR,A
                     951     ;       P3DBRED_L = 0x32;
                     952                             ; SOURCE LINE # 218
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    16

00E4 90E03A          953             MOV     DPTR,#0E03AH
00E7 7432            954             MOV     A,#032H
00E9 F0              955             MOVX    @DPTR,A
                     956     ;       P3DBRED_H = 0x00;
                     957                             ; SOURCE LINE # 219
00EA 90E039          958             MOV     DPTR,#0E039H
00ED E4              959             CLR     A
00EE F0              960             MOVX    @DPTR,A
                     961     ;       P4DBRED_L = 0x32;
                     962                             ; SOURCE LINE # 220
00EF 90E050          963             MOV     DPTR,#0E050H
00F2 7432            964             MOV     A,#032H
00F4 F0              965             MOVX    @DPTR,A
                     966     ;       P4DBRED_H = 0x00;
                     967                             ; SOURCE LINE # 221
00F5 90E04F          968             MOV     DPTR,#0E04FH
00F8 E4              969             CLR     A
00F9 F0              970             MOVX    @DPTR,A
                     971     ;       P1DBFED_L = 0x32;                                               // fall edge dead t
                             ime is 1.25uS
                     972                             ; SOURCE LINE # 222
00FA 90E010          973             MOV     DPTR,#0E010H
00FD 7432            974             MOV     A,#032H
00FF F0              975             MOVX    @DPTR,A
                     976     ;       P1DBFED_H = 0x00;
                     977                             ; SOURCE LINE # 223
0100 90E00F          978             MOV     DPTR,#0E00FH
0103 E4              979             CLR     A
0104 F0              980             MOVX    @DPTR,A
                     981     ;       P2DBFED_L = 0x32;
                     982                             ; SOURCE LINE # 224
0105 90E026          983             MOV     DPTR,#0E026H
0108 7432            984             MOV     A,#032H
010A F0              985             MOVX    @DPTR,A
                     986     ;       P2DBFED_H = 0x00;
                     987                             ; SOURCE LINE # 225
010B 90E025          988             MOV     DPTR,#0E025H
010E E4              989             CLR     A
010F F0              990             MOVX    @DPTR,A
                     991     ;       P3DBFED_L = 0x32;
                     992                             ; SOURCE LINE # 226
0110 90E03C          993             MOV     DPTR,#0E03CH
0113 7432            994             MOV     A,#032H
0115 F0              995             MOVX    @DPTR,A
                     996     ;       P3DBFED_H = 0x00;
                     997                             ; SOURCE LINE # 227
0116 90E03B          998             MOV     DPTR,#0E03BH
0119 E4              999             CLR     A
011A F0             1000             MOVX    @DPTR,A
                    1001     ;       P4DBFED_L = 0x32;
                    1002                             ; SOURCE LINE # 228
011B 90E052         1003             MOV     DPTR,#0E052H
011E 7432           1004             MOV     A,#032H
0120 F0             1005             MOVX    @DPTR,A
                    1006     ;       P4DBFED_H = 0x00;
                    1007                             ; SOURCE LINE # 229
0121 90E051         1008             MOV     DPTR,#0E051H
0124 E4             1009             CLR     A
0125 F0             1010             MOVX    @DPTR,A
                    1011     ; 
                    1012     ; //    P1DBCTL = 0x00;                                                 // dead band is byp
                             ass
                    1013     ; //    P2DBCTL = 0x00;
                    1014     ; //    P3DBCTL = 0x00;
                    1015     ; //    P4DBCTL = 0x00;
                    1016     ; 
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    17

                    1017     ;       P1TZSEL = 0x00;                                                 // disable all trig
                             ger zone
                    1018                             ; SOURCE LINE # 236
0126 90E011         1019             MOV     DPTR,#0E011H
0129 E4             1020             CLR     A
012A F0             1021             MOVX    @DPTR,A
                    1022     ;       P2TZSEL = 0x00;
                    1023                             ; SOURCE LINE # 237
012B 90E027         1024             MOV     DPTR,#0E027H
012E E4             1025             CLR     A
012F F0             1026             MOVX    @DPTR,A
                    1027     ;       P3TZSEL = 0x00;
                    1028                             ; SOURCE LINE # 238
0130 90E03D         1029             MOV     DPTR,#0E03DH
0133 E4             1030             CLR     A
0134 F0             1031             MOVX    @DPTR,A
                    1032     ;       P4TZSEL = 0x00;
                    1033                             ; SOURCE LINE # 239
0135 90E053         1034             MOV     DPTR,#0E053H
0138 E4             1035             CLR     A
0139 F0             1036             MOVX    @DPTR,A
                    1037     ;       P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                    1038                             ; SOURCE LINE # 240
013A 90E012         1039             MOV     DPTR,#0E012H
013D E4             1040             CLR     A
013E F0             1041             MOVX    @DPTR,A
                    1042     ;       P2TZCTL = 0x00;
                    1043                             ; SOURCE LINE # 241
013F 90E028         1044             MOV     DPTR,#0E028H
0142 E4             1045             CLR     A
0143 F0             1046             MOVX    @DPTR,A
                    1047     ;       P3TZCTL = 0x00;
                    1048                             ; SOURCE LINE # 242
0144 90E03E         1049             MOV     DPTR,#0E03EH
0147 E4             1050             CLR     A
0148 F0             1051             MOVX    @DPTR,A
                    1052     ;       P4TZCTL = 0x00;
                    1053                             ; SOURCE LINE # 243
0149 90E054         1054             MOV     DPTR,#0E054H
014C E4             1055             CLR     A
014D F0             1056             MOVX    @DPTR,A
                    1057     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1058     ; //    P2TZEINT = 0x00;
                    1059     ; //    P3TZEINT = 0x00;
                    1060     ; //    P4TZEINT = 0x00;
                    1061     ; 
                    1062     ; //    P1TZSEL = 0x01;                                                 // OSHT enable
                    1063     ; //    P2TZSEL = 0x01;
                    1064     ; //    P3TZSEL = 0x01;
                    1065     ; //    P4TZSEL = 0x01;
                    1066     ; //    P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                    1067     ; //    P2TZCTL = 0x00;
                    1068     ; //    P3TZCTL = 0x00;
                    1069     ; //    P4TZCTL = 0x00;
                    1070     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1071     ; //    P2TZEINT = 0x00;
                    1072     ; //    P3TZEINT = 0x00;
                    1073     ; //    P4TZEINT = 0x00;
                    1074     ; 
                    1075     ; //    P1TZSEL = 0x02;                                                 // CBC enable
                    1076     ; //    P2TZSEL = 0x02;
                    1077     ; //    P3TZSEL = 0x02;
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    18

                    1078     ; //    P4TZSEL = 0x02;
                    1079     ; //    P1TZCTL = 0x00;                                                 // when trigger,epw
                             mxA and epwmxB high impedance
                    1080     ; //    P2TZCTL = 0x00;
                    1081     ; //    P3TZCTL = 0x00;
                    1082     ; //    P4TZCTL = 0x00;
                    1083     ; //    P1TZEINT = 0x00;                                                // CBC trigger inte
                             rrupt and OST interrupt disable
                    1084     ; //    P2TZEINT = 0x00;
                    1085     ; //    P3TZEINT = 0x00;
                    1086     ; //    P4TZEINT = 0x00;
                    1087     ; 
                    1088     ;       P1ETSEL_L = 0x09;                                               // epwm interrupt e
                             nable at CTR = ZERO
                    1089                             ; SOURCE LINE # 275
014E 90E015         1090             MOV     DPTR,#0E015H
0151 7409           1091             MOV     A,#09H
0153 F0             1092             MOVX    @DPTR,A
                    1093     ;     P1ETSEL_H = 0x0C;//0xE0;//0xA0;//0x90;//0x0A;//0x09;                       // enable 
                             SOCA,SOCA is CTR = ZERO
                    1094                             ; SOURCE LINE # 276
0154 90E014         1095             MOV     DPTR,#0E014H
0157 740C           1096             MOV     A,#0CH
0159 F0             1097             MOVX    @DPTR,A
                    1098     ;       P2ETSEL_L = 0x00;
                    1099                             ; SOURCE LINE # 277
015A 90E02B         1100             MOV     DPTR,#0E02BH
015D E4             1101             CLR     A
015E F0             1102             MOVX    @DPTR,A
                    1103     ;       P2ETSEL_H = 0x00;//0xF0;//0x00;
                    1104                             ; SOURCE LINE # 278
015F 90E02A         1105             MOV     DPTR,#0E02AH
0162 E4             1106             CLR     A
0163 F0             1107             MOVX    @DPTR,A
                    1108     ;       P3ETSEL_L = 0x00;
                    1109                             ; SOURCE LINE # 279
0164 90E041         1110             MOV     DPTR,#0E041H
0167 E4             1111             CLR     A
0168 F0             1112             MOVX    @DPTR,A
                    1113     ;       P3ETSEL_H = 0x00;
                    1114                             ; SOURCE LINE # 280
0169 90E040         1115             MOV     DPTR,#0E040H
016C E4             1116             CLR     A
016D F0             1117             MOVX    @DPTR,A
                    1118     ;       P4ETSEL_L = 0x00;
                    1119                             ; SOURCE LINE # 281
016E 90E057         1120             MOV     DPTR,#0E057H
0171 E4             1121             CLR     A
0172 F0             1122             MOVX    @DPTR,A
                    1123     ;       P4ETSEL_H = 0x00;
                    1124                             ; SOURCE LINE # 282
0173 90E056         1125             MOV     DPTR,#0E056H
0176 E4             1126             CLR     A
0177 F0             1127             MOVX    @DPTR,A
                    1128     ;       P1ETPS_L = 0x05;                                                // 1 event 1 interr
                             upt
                    1129                             ; SOURCE LINE # 283
0178 90E017         1130             MOV     DPTR,#0E017H
017B 7405           1131             MOV     A,#05H
017D F0             1132             MOVX    @DPTR,A
                    1133     ;     P1ETPS_H = 0x05;//0x50;//0x05;                        // 1 evnt,SOCA period is 1
                    1134                             ; SOURCE LINE # 284
017E 90E016         1135             MOV     DPTR,#0E016H
0181 7405           1136             MOV     A,#05H
0183 F0             1137             MOVX    @DPTR,A
                    1138     ;       P2ETPS_L = 0x00;
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    19

                    1139                             ; SOURCE LINE # 285
0184 90E02D         1140             MOV     DPTR,#0E02DH
0187 E4             1141             CLR     A
0188 F0             1142             MOVX    @DPTR,A
                    1143     ;     P2ETPS_H = 0x00;//0x50;
                    1144                             ; SOURCE LINE # 286
0189 90E02C         1145             MOV     DPTR,#0E02CH
018C E4             1146             CLR     A
018D F0             1147             MOVX    @DPTR,A
                    1148     ;       P3ETPS_L = 0x00;
                    1149                             ; SOURCE LINE # 287
018E 90E043         1150             MOV     DPTR,#0E043H
0191 E4             1151             CLR     A
0192 F0             1152             MOVX    @DPTR,A
                    1153     ;       P4ETPS_L = 0x00;
                    1154                             ; SOURCE LINE # 288
0193 90E059         1155             MOV     DPTR,#0E059H
0196 E4             1156             CLR     A
0197 F0             1157             MOVX    @DPTR,A
                    1158     ; 
                    1159     ;       P1TBPRD_L = 0xD0;                                               // pwm period is 0x
                             0190@8MHz 10KHz 0x7D0@40MHz
                    1160                             ; SOURCE LINE # 290
0198 75A1D0         1161             MOV     P1TBPRD_L,#0D0H
                    1162     ;       P1TBPRD_H = 0x07;
                    1163                             ; SOURCE LINE # 291
019B 75A207         1164             MOV     P1TBPRD_H,#07H
                    1165     ;       P2TBPRD_L = 0xD0;
                    1166                             ; SOURCE LINE # 292
019E 75C1D0         1167             MOV     P2TBPRD_L,#0D0H
                    1168     ;       P2TBPRD_H = 0x07;
                    1169                             ; SOURCE LINE # 293
01A1 75C207         1170             MOV     P2TBPRD_H,#07H
                    1171     ;       P3TBPRD_L = 0xD0;
                    1172                             ; SOURCE LINE # 294
01A4 75D1D0         1173             MOV     P3TBPRD_L,#0D0H
                    1174     ;       P3TBPRD_H = 0x07;
                    1175                             ; SOURCE LINE # 295
01A7 75D207         1176             MOV     P3TBPRD_H,#07H
                    1177     ;       P4TBPRD_L = 0xD0;
                    1178                             ; SOURCE LINE # 296
01AA 75E1D0         1179             MOV     P4TBPRD_L,#0D0H
                    1180     ;       P4TBPRD_H = 0x07;
                    1181                             ; SOURCE LINE # 297
01AD 75E207         1182             MOV     P4TBPRD_H,#07H
                    1183     ; 
                    1184     ; //    P1TBPRD_L = 0x1F;                                               // pwm period is 10
                             KHz
                    1185     ; //    P1TBPRD_H = 0x03;
                    1186     ; //    P2TBPRD_L = 0x1F;
                    1187     ; //    P2TBPRD_H = 0x03;
                    1188     ; //    P3TBPRD_L = 0x1F;
                    1189     ; //    P3TBPRD_H = 0x03;
                    1190     ; //    P4TBPRD_L = 0x1F;
                    1191     ; //    P4TBPRD_H = 0x03;
                    1192     ; 
                    1193     ;       P1CMPA_L = 0xE8;                                                // pwm period is 0x
                             0C8@8MHz 10KHz
                    1194                             ; SOURCE LINE # 308
01B0 75A3E8         1195             MOV     P1CMPA_L,#0E8H
                    1196     ;       P1CMPA_H = 0x03;
                    1197                             ; SOURCE LINE # 309
01B3 75A403         1198             MOV     P1CMPA_H,#03H
                    1199     ;       //P1CMPB_L = 0xC8;
                    1200     ;       //P1CMPB_H = 0x00;
                    1201     ;       P2CMPA_L = 0xE8;
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    20

                    1202                             ; SOURCE LINE # 312
01B6 75C3E8         1203             MOV     P2CMPA_L,#0E8H
                    1204     ;       P2CMPA_H = 0x03;
                    1205                             ; SOURCE LINE # 313
01B9 75C403         1206             MOV     P2CMPA_H,#03H
                    1207     ;       //P2CMPB_L = 0xC8;
                    1208     ;       //P2CMPB_H = 0x00;
                    1209     ;       P3CMPA_L = 0xE8;
                    1210                             ; SOURCE LINE # 316
01BC 75D3E8         1211             MOV     P3CMPA_L,#0E8H
                    1212     ;       P3CMPA_H = 0x03;
                    1213                             ; SOURCE LINE # 317
01BF 75D403         1214             MOV     P3CMPA_H,#03H
                    1215     ;       //P3CMPB_L = 0xC8;
                    1216     ;       //P3CMPB_H = 0x00;
                    1217     ;       P4CMPA_L = 0xE8;
                    1218                             ; SOURCE LINE # 320
01C2 75E3E8         1219             MOV     P4CMPA_L,#0E8H
                    1220     ;       P4CMPA_H = 0x03;
                    1221                             ; SOURCE LINE # 321
01C5 75E403         1222             MOV     P4CMPA_H,#03H
                    1223     ;       //P4CMPB_L = 0xC8;
                    1224     ;       //P4CMPB_H = 0x00;
                    1225     ; 
                    1226     ; //    P1CMPA_L = 0xF4;                                                // pwm period is 0x
                             0C8@8MHz 10KHz
                    1227     ; //    P1CMPA_H = 0x01;
                    1228     ; //    P1CMPB_L = 0xEE;
                    1229     ; //    P1CMPB_H = 0x02;
                    1230     ; //    P2CMPA_L = 0xE8;
                    1231     ; //    P2CMPA_H = 0x03;
                    1232     ; //    P2CMPB_L = 0xE2;
                    1233     ; //    P2CMPB_H = 0x04;
                    1234     ; //    P3CMPA_L = 0xDC;
                    1235     ; //    P3CMPA_H = 0x05;
                    1236     ; 
                    1237     ; //    P1CMPA_L = 0x90;
                    1238     ; //    P1CMPA_H = 0x01;
                    1239     ; //    P1CMPB_L = 0x90;
                    1240     ; //    P1CMPB_H = 0x01;
                    1241     ; //    P2CMPA_L = 0x90;
                    1242     ; //    P2CMPA_H = 0x01;
                    1243     ; //    P2CMPB_L = 0x90;
                    1244     ; //    P2CMPB_H = 0x01;
                    1245     ; //    P3CMPA_L = 0x90;
                    1246     ; //    P3CMPA_H = 0x01;
                    1247     ; //    P3CMPB_L = 0x90;
                    1248     ; //    P3CMPB_H = 0x01;
                    1249     ; //    P4CMPA_L = 0x90;
                    1250     ; //    P4CMPA_H = 0x01;
                    1251     ; //    P4CMPB_L = 0x90;
                    1252     ; //    P4CMPB_H = 0x01;
                    1253     ; 
                    1254     ; //    OPAMP_SEL = 0xF0;
                    1255     ; //    COMP_INT_EN = COMP_INT_EN | (1 << 0);   // comparator1 interrupt output enable
                    1256     ; //    COMP_INT_SET = COMP_INT_SET & 0xFC;             // comparator1 falling edge trigger
                    1257     ; //    P1_FN_H = P1_FN_H & 0xF3 | 0x08;                // comp1 output
                    1258     ; //    ex1 = 1;                                                                // enable c
                             omp1 to CPU interrupt
                    1259     ; 
                    1260     ;       PCLKCR = PCLKCR | 1;                                    // all epwm channel synchro
                             nize enable
                    1261                             ; SOURCE LINE # 359
01C8 90E000         1262             MOV     DPTR,#0E000H
01CB E0             1263             MOVX    A,@DPTR
01CC FF             1264             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    21

01CD EF             1265             MOV     A,R7
01CE 4401           1266             ORL     A,#01H
01D0 FF             1267             MOV     R7,A
01D1 EF             1268             MOV     A,R7
01D2 F0             1269             MOVX    @DPTR,A
                    1270     ; 
                    1271     ;       P1ETCLR = 1;
                    1272                             ; SOURCE LINE # 361
01D3 75B601         1273             MOV     P1ETCLR,#01H
                    1274     ;       I2FR = 1;
                    1275                             ; SOURCE LINE # 362
01D6 D2CD           1276             SETB    I2FR
                    1277     ;       EX2 = 1;                                                                // enable e
                             pwm1,2,3 interrupt
                    1278                             ; SOURCE LINE # 363
01D8 D2B9           1279             SETB    EX2
                    1280     ;       //ex3 = 1;                                                              // enable e
                             pwm4 interrupt
                    1281     ; }
                    1282                             ; SOURCE LINE # 365
01DA                1283     ?C0014:
01DA 22             1284             RET     
                    1285     ; END OF Initepwm
                    1286     
                    1287     ; 
                    1288     ; 
                    1289     ; void InitComparator(void)
                    1290     
----                1291             RSEG  ?PR?InitComparator?INITIAL
0000                1292     InitComparator:
                    1293             USING   0
                    1294                             ; SOURCE LINE # 368
                    1295     ; {
                    1296                             ; SOURCE LINE # 369
                    1297     ;       
                    1298     ;               P21_FN= CFG2;                                                            //
                              P21 output COMP1
                    1299                             ; SOURCE LINE # 371
0000 90E0E1         1300             MOV     DPTR,#0E0E1H
0003 E0             1301             MOVX    A,@DPTR
0004 FF             1302             MOV     R7,A
0005 EF             1303             MOV     A,R7
0006 54F3           1304             ANL     A,#0F3H
0008 FF             1305             MOV     R7,A
0009 EF             1306             MOV     A,R7
000A 4408           1307             ORL     A,#08H
000C FF             1308             MOV     R7,A
000D EF             1309             MOV     A,R7
000E F0             1310             MOVX    @DPTR,A
                    1311     ;               P14_FN= CFG2;                    // P14 output COMP2
                    1312                             ; SOURCE LINE # 372
000F 90E0DA         1313             MOV     DPTR,#0E0DAH
0012 E0             1314             MOVX    A,@DPTR
0013 FF             1315             MOV     R7,A
0014 EF             1316             MOV     A,R7
0015 54FC           1317             ANL     A,#0FCH
0017 FF             1318             MOV     R7,A
0018 EF             1319             MOV     A,R7
0019 4402           1320             ORL     A,#02H
001B FF             1321             MOV     R7,A
001C EF             1322             MOV     A,R7
001D F0             1323             MOVX    @DPTR,A
                    1324     ;               P13_FN= CFG2;                    // P13 output COMP3
                    1325                             ; SOURCE LINE # 373
001E 90E0DB         1326             MOV     DPTR,#0E0DBH
0021 E0             1327             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    22

0022 FF             1328             MOV     R7,A
0023 EF             1329             MOV     A,R7
0024 543F           1330             ANL     A,#03FH
0026 FF             1331             MOV     R7,A
0027 EF             1332             MOV     A,R7
0028 4480           1333             ORL     A,#080H
002A FF             1334             MOV     R7,A
002B EF             1335             MOV     A,R7
002C F0             1336             MOVX    @DPTR,A
                    1337     ;               P12_FN= CFG2;                    // P12 output COMP4
                    1338                             ; SOURCE LINE # 374
002D 90E0DB         1339             MOV     DPTR,#0E0DBH
0030 E0             1340             MOVX    A,@DPTR
0031 FF             1341             MOV     R7,A
0032 EF             1342             MOV     A,R7
0033 54CF           1343             ANL     A,#0CFH
0035 FF             1344             MOV     R7,A
0036 EF             1345             MOV     A,R7
0037 4420           1346             ORL     A,#020H
0039 FF             1347             MOV     R7,A
003A EF             1348             MOV     A,R7
003B F0             1349             MOVX    @DPTR,A
                    1350     ;               
                    1351     ;       
                    1352     ;       
                    1353     ;               C1PDO1PD=CFG1;                                                          //C
                             OMP1 power on and OP1 power off
                    1354                             ; SOURCE LINE # 378
003C 90E0A4         1355             MOV     DPTR,#0E0A4H
003F E0             1356             MOVX    A,@DPTR
0040 FF             1357             MOV     R7,A
0041 EF             1358             MOV     A,R7
0042 54FC           1359             ANL     A,#0FCH
0044 FF             1360             MOV     R7,A
0045 EF             1361             MOV     A,R7
0046 4401           1362             ORL     A,#01H
0048 FF             1363             MOV     R7,A
0049 EF             1364             MOV     A,R7
004A F0             1365             MOVX    @DPTR,A
                    1366     ;               C2PDO2PD=CFG1;                                                          //C
                             OMP2 power on and OP2 power off
                    1367                             ; SOURCE LINE # 379
004B 90E0A4         1368             MOV     DPTR,#0E0A4H
004E E0             1369             MOVX    A,@DPTR
004F FF             1370             MOV     R7,A
0050 EF             1371             MOV     A,R7
0051 54F3           1372             ANL     A,#0F3H
0053 FF             1373             MOV     R7,A
0054 EF             1374             MOV     A,R7
0055 4404           1375             ORL     A,#04H
0057 FF             1376             MOV     R7,A
0058 EF             1377             MOV     A,R7
0059 F0             1378             MOVX    @DPTR,A
                    1379     ;               C3PDO3PD=CFG1;                                                          //C
                             OMP3 power on and OP3 power off
                    1380                             ; SOURCE LINE # 380
005A 90E0A4         1381             MOV     DPTR,#0E0A4H
005D E0             1382             MOVX    A,@DPTR
005E FF             1383             MOV     R7,A
005F EF             1384             MOV     A,R7
0060 54CF           1385             ANL     A,#0CFH
0062 FF             1386             MOV     R7,A
0063 EF             1387             MOV     A,R7
0064 4410           1388             ORL     A,#010H
0066 FF             1389             MOV     R7,A
0067 EF             1390             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    23

0068 F0             1391             MOVX    @DPTR,A
                    1392     ;               C4PD=0;                                                                    
                                                  //COMP4 power on
                    1393                             ; SOURCE LINE # 381
0069 90E0A4         1394             MOV     DPTR,#0E0A4H
006C E0             1395             MOVX    A,@DPTR
006D FF             1396             MOV     R7,A
006E EF             1397             MOV     A,R7
006F 54BF           1398             ANL     A,#0BFH
0071 FF             1399             MOV     R7,A
0072 EF             1400             MOV     A,R7
0073 F0             1401             MOVX    @DPTR,A
                    1402     ;       
                    1403     ;       
                    1404     ;       
                    1405     ;               C1_INT_SEL=CFG2;                                                        //C
                             OMP1 at rising/falling edge triiger 
                    1406                             ; SOURCE LINE # 385
0074 90E0C6         1407             MOV     DPTR,#0E0C6H
0077 E0             1408             MOVX    A,@DPTR
0078 FF             1409             MOV     R7,A
0079 EF             1410             MOV     A,R7
007A 54FE           1411             ANL     A,#0FEH
007C FF             1412             MOV     R7,A
007D EF             1413             MOV     A,R7
007E F0             1414             MOVX    @DPTR,A
                    1415     ;               C2_INT_SEL=CFG2;                                                        //C
                             OMP2 at rising/falling edge triiger
                    1416                             ; SOURCE LINE # 386
007F 90E0C6         1417             MOV     DPTR,#0E0C6H
0082 E0             1418             MOVX    A,@DPTR
0083 FF             1419             MOV     R7,A
0084 EF             1420             MOV     A,R7
0085 54FD           1421             ANL     A,#0FDH
0087 FF             1422             MOV     R7,A
0088 EF             1423             MOV     A,R7
0089 F0             1424             MOVX    @DPTR,A
                    1425     ;               C3_INT_SEL=CFG2;                                                        //C
                             OMP3 at rising/falling edge triiger
                    1426                             ; SOURCE LINE # 387
008A 90E0C6         1427             MOV     DPTR,#0E0C6H
008D E0             1428             MOVX    A,@DPTR
008E FF             1429             MOV     R7,A
008F EF             1430             MOV     A,R7
0090 54FB           1431             ANL     A,#0FBH
0092 FF             1432             MOV     R7,A
0093 EF             1433             MOV     A,R7
0094 F0             1434             MOVX    @DPTR,A
                    1435     ;               C4_INT_SEL=CFG2;                                                        //C
                             OMP4 at rising/falling edge triiger
                    1436                             ; SOURCE LINE # 388
0095 90E0C6         1437             MOV     DPTR,#0E0C6H
0098 E0             1438             MOVX    A,@DPTR
0099 FF             1439             MOV     R7,A
009A EF             1440             MOV     A,R7
009B 54F7           1441             ANL     A,#0F7H
009D FF             1442             MOV     R7,A
009E EF             1443             MOV     A,R7
009F F0             1444             MOVX    @DPTR,A
                    1445     ;       
                    1446     ;       
                    1447     ;               C1_EN=1;                                                                   
                                                  //C1 interrupt enable
                    1448                             ; SOURCE LINE # 391
00A0 90E0EB         1449             MOV     DPTR,#0E0EBH
00A3 E0             1450             MOVX    A,@DPTR
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    24

00A4 FF             1451             MOV     R7,A
00A5 EF             1452             MOV     A,R7
00A6 4401           1453             ORL     A,#01H
00A8 FF             1454             MOV     R7,A
00A9 EF             1455             MOV     A,R7
00AA F0             1456             MOVX    @DPTR,A
                    1457     ;               C2_EN=1;                                                                   
                                                  //C2 interrupt enalbe
                    1458                             ; SOURCE LINE # 392
00AB 90E0EB         1459             MOV     DPTR,#0E0EBH
00AE E0             1460             MOVX    A,@DPTR
00AF FF             1461             MOV     R7,A
00B0 EF             1462             MOV     A,R7
00B1 4402           1463             ORL     A,#02H
00B3 FF             1464             MOV     R7,A
00B4 EF             1465             MOV     A,R7
00B5 F0             1466             MOVX    @DPTR,A
                    1467     ;               C3_EN=1;                                                                   
                                                  //C3 interrupt enalbe
                    1468                             ; SOURCE LINE # 393
00B6 90E0EB         1469             MOV     DPTR,#0E0EBH
00B9 E0             1470             MOVX    A,@DPTR
00BA FF             1471             MOV     R7,A
00BB EF             1472             MOV     A,R7
00BC 4404           1473             ORL     A,#04H
00BE FF             1474             MOV     R7,A
00BF EF             1475             MOV     A,R7
00C0 F0             1476             MOVX    @DPTR,A
                    1477     ;               C4_EN=1;                                                                   
                                                  //C4 interrupt enalbe
                    1478                             ; SOURCE LINE # 394
00C1 90E0EB         1479             MOV     DPTR,#0E0EBH
00C4 E0             1480             MOVX    A,@DPTR
00C5 FF             1481             MOV     R7,A
00C6 EF             1482             MOV     A,R7
00C7 4408           1483             ORL     A,#08H
00C9 FF             1484             MOV     R7,A
00CA EF             1485             MOV     A,R7
00CB F0             1486             MOVX    @DPTR,A
                    1487     ;               
                    1488     ;               
                    1489     ;               C1INT=0;                                                                   
                                                  //clear C1 INT flag
                    1490                             ; SOURCE LINE # 397
00CC 90E0C7         1491             MOV     DPTR,#0E0C7H
00CF E0             1492             MOVX    A,@DPTR
00D0 FF             1493             MOV     R7,A
00D1 EF             1494             MOV     A,R7
00D2 54FE           1495             ANL     A,#0FEH
00D4 FF             1496             MOV     R7,A
00D5 EF             1497             MOV     A,R7
00D6 F0             1498             MOVX    @DPTR,A
                    1499     ;               C2INT=0;                                                                   
                                                  //clear C2 INT flag
                    1500                             ; SOURCE LINE # 398
00D7 90E0C7         1501             MOV     DPTR,#0E0C7H
00DA E0             1502             MOVX    A,@DPTR
00DB FF             1503             MOV     R7,A
00DC EF             1504             MOV     A,R7
00DD 54FD           1505             ANL     A,#0FDH
00DF FF             1506             MOV     R7,A
00E0 EF             1507             MOV     A,R7
00E1 F0             1508             MOVX    @DPTR,A
                    1509     ;               C3INT=0;                                                                   
                                                  //clear C3 INT flag
                    1510                             ; SOURCE LINE # 399
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    25

00E2 90E0C7         1511             MOV     DPTR,#0E0C7H
00E5 E0             1512             MOVX    A,@DPTR
00E6 FF             1513             MOV     R7,A
00E7 EF             1514             MOV     A,R7
00E8 54FB           1515             ANL     A,#0FBH
00EA FF             1516             MOV     R7,A
00EB EF             1517             MOV     A,R7
00EC F0             1518             MOVX    @DPTR,A
                    1519     ;               C4INT=0;                                                                   
                                                  //clear C4 INT flag
                    1520                             ; SOURCE LINE # 400
00ED 90E0C7         1521             MOV     DPTR,#0E0C7H
00F0 E0             1522             MOVX    A,@DPTR
00F1 FF             1523             MOV     R7,A
00F2 EF             1524             MOV     A,R7
00F3 54F7           1525             ANL     A,#0F7H
00F5 FF             1526             MOV     R7,A
00F6 EF             1527             MOV     A,R7
00F7 F0             1528             MOVX    @DPTR,A
                    1529     ;       
                    1530     ;               INT_CPU=1;                    //pass C234 interrupt to EX4
                    1531                             ; SOURCE LINE # 402
00F8 90E0EB         1532             MOV     DPTR,#0E0EBH
00FB E0             1533             MOVX    A,@DPTR
00FC FF             1534             MOV     R7,A
00FD EF             1535             MOV     A,R7
00FE 4410           1536             ORL     A,#010H
0100 FF             1537             MOV     R7,A
0101 EF             1538             MOV     A,R7
0102 F0             1539             MOVX    @DPTR,A
                    1540     ;       
                    1541     ;               EX4=1;
                    1542                             ; SOURCE LINE # 404
0103 D2BB           1543             SETB    EX4
                    1544     ;               EX1=1;
                    1545                             ; SOURCE LINE # 405
0105 D2AA           1546             SETB    EX1
                    1547     ;               IE1=0;
                    1548                             ; SOURCE LINE # 406
0107 C28B           1549             CLR     IE1
                    1550     ;               IEX4=0;
                    1551                             ; SOURCE LINE # 407
0109 C2C3           1552             CLR     IEX4
                    1553     ; }
                    1554                             ; SOURCE LINE # 408
010B                1555     ?C0015:
010B 22             1556             RET     
                    1557     ; END OF InitComparator
                    1558     
                    1559     ; 
                    1560     ; 
                    1561     ; 
                    1562     ; void InitWatchDog(void)
                    1563     
----                1564             RSEG  ?PR?InitWatchDog?INITIAL
0000                1565     InitWatchDog:
                    1566             USING   0
                    1567                             ; SOURCE LINE # 412
                    1568     ; {
                    1569                             ; SOURCE LINE # 413
                    1570     ;               WDTREL = 0xFF;
                    1571                             ; SOURCE LINE # 414
0000 7586FF         1572             MOV     WDTREL,#0FFH
                    1573     ;       WDT = 1;
                    1574                             ; SOURCE LINE # 415
0003 D2AE           1575             SETB    WDT
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    26

                    1576     ;       SWDT = 1;
                    1577                             ; SOURCE LINE # 416
0005 D2BE           1578             SETB    SWDT
                    1579     ;     P1_FN_L = P1_FN_L & 0xFC;               //p1_0 as GPIO
                    1580                             ; SOURCE LINE # 417
0007 90E0DB         1581             MOV     DPTR,#0E0DBH
000A E0             1582             MOVX    A,@DPTR
000B FF             1583             MOV     R7,A
000C EF             1584             MOV     A,R7
000D 54FC           1585             ANL     A,#0FCH
000F FF             1586             MOV     R7,A
0010 EF             1587             MOV     A,R7
0011 F0             1588             MOVX    @DPTR,A
                    1589     ;     P1_DD = P1_DD & 0xFE;                     //p1_0 as output
                    1590                             ; SOURCE LINE # 418
0012 90E0DC         1591             MOV     DPTR,#0E0DCH
0015 E0             1592             MOVX    A,@DPTR
0016 FF             1593             MOV     R7,A
0017 EF             1594             MOV     A,R7
0018 54FE           1595             ANL     A,#0FEH
001A FF             1596             MOV     R7,A
001B EF             1597             MOV     A,R7
001C F0             1598             MOVX    @DPTR,A
                    1599     ; }
                    1600                             ; SOURCE LINE # 419
001D                1601     ?C0016:
001D 22             1602             RET     
                    1603     ; END OF InitWatchDog
                    1604     
                    1605     ; 
                    1606     ; 
                    1607     ; 
                    1608     ; 
                    1609     ; #define GPIO(pin,fn_cfg,in_out,res_en_dis,pull_up_dwn,drive_4_8ma )  FN_##pin=fn_cfg;DD_#
                             #pin=in_out;PE_##pin=res_en_dis;PS_##pin=pull_up_dwn;DS_##pin=drive_4_8ma;
                    1610     ; 
                    1611     ; void InitGPIO(void)
                    1612     
----                1613             RSEG  ?PR?InitGPIO?INITIAL
0000                1614     InitGPIO:
                    1615             USING   0
                    1616                             ; SOURCE LINE # 426
                    1617     ; {
                    1618                             ; SOURCE LINE # 427
                    1619     ;               P0_FN_L = 0x00;                                                            
                                  // P00 ~ P03as GPIO
                    1620                             ; SOURCE LINE # 428
0000 90E0D5         1621             MOV     DPTR,#0E0D5H
0003 E4             1622             CLR     A
0004 F0             1623             MOVX    @DPTR,A
                    1624     ;               P0_FN_H = 0x00;                                                            
                                  // P04 ~ P07 as GPIO
                    1625                             ; SOURCE LINE # 429
0005 90E0D4         1626             MOV     DPTR,#0E0D4H
0008 E4             1627             CLR     A
0009 F0             1628             MOVX    @DPTR,A
                    1629     ;               P0_DD = 0x00;                                                              
                                          //      P00 ~  P07 intput
                    1630                             ; SOURCE LINE # 430
000A 90E0D6         1631             MOV     DPTR,#0E0D6H
000D E4             1632             CLR     A
000E F0             1633             MOVX    @DPTR,A
                    1634     ;               P0_PE = 0xFF;                                                              
                                          // output resistor enable       
                    1635                             ; SOURCE LINE # 431
000F 90E0D8         1636             MOV     DPTR,#0E0D8H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    27

0012 74FF           1637             MOV     A,#0FFH
0014 F0             1638             MOVX    @DPTR,A
                    1639     ;               P0_DS = 0x00;                                                              
                                          //drive current =4mA
                    1640                             ; SOURCE LINE # 432
0015 90E0D7         1641             MOV     DPTR,#0E0D7H
0018 E4             1642             CLR     A
0019 F0             1643             MOVX    @DPTR,A
                    1644     ;               P0_PS=  0x00;                                                              
                                          //pull down resistor 
                    1645                             ; SOURCE LINE # 433
001A 90E0D9         1646             MOV     DPTR,#0E0D9H
001D E4             1647             CLR     A
001E F0             1648             MOVX    @DPTR,A
                    1649     ;       
                    1650     ;               P1_FN_L = 0x00;                                                            
                                  // P10 ~ P13 as GPIO
                    1651                             ; SOURCE LINE # 435
001F 90E0DB         1652             MOV     DPTR,#0E0DBH
0022 E4             1653             CLR     A
0023 F0             1654             MOVX    @DPTR,A
                    1655     ;               P1_FN_H = 0x00;                                                            
                                  // P14 ~ P17 as GPIO
                    1656                             ; SOURCE LINE # 436
0024 90E0DA         1657             MOV     DPTR,#0E0DAH
0027 E4             1658             CLR     A
0028 F0             1659             MOVX    @DPTR,A
                    1660     ;               P1_DD = 0x00;                                                              
                                          // P10 ~ P17 intput
                    1661                             ; SOURCE LINE # 437
0029 90E0DC         1662             MOV     DPTR,#0E0DCH
002C E4             1663             CLR     A
002D F0             1664             MOVX    @DPTR,A
                    1665     ;               P1_PE = 0xFF;                                                              
                                          // output resistor enable       
                    1666                             ; SOURCE LINE # 438
002E 90E0DE         1667             MOV     DPTR,#0E0DEH
0031 74FF           1668             MOV     A,#0FFH
0033 F0             1669             MOVX    @DPTR,A
                    1670     ;               P1_DS = 0x00;                                                              
                                          //drive current =4mA
                    1671                             ; SOURCE LINE # 439
0034 90E0DD         1672             MOV     DPTR,#0E0DDH
0037 E4             1673             CLR     A
0038 F0             1674             MOVX    @DPTR,A
                    1675     ;               P1_PS=  0x00;                                                              
                                          //pull down resistor 
                    1676                             ; SOURCE LINE # 440
0039 90E0DF         1677             MOV     DPTR,#0E0DFH
003C E4             1678             CLR     A
003D F0             1679             MOVX    @DPTR,A
                    1680     ;       
                    1681     ;               P2_FN_L = 0x00;                                                            
                                  // P20 ~ P23 as GPIO
                    1682                             ; SOURCE LINE # 442
003E 90E0E1         1683             MOV     DPTR,#0E0E1H
0041 E4             1684             CLR     A
0042 F0             1685             MOVX    @DPTR,A
                    1686     ;               P2_FN_H = 0x00;                                                            
                                  // P24 ~ P27 as GPIO
                    1687                             ; SOURCE LINE # 443
0043 90E0E0         1688             MOV     DPTR,#0E0E0H
0046 E4             1689             CLR     A
0047 F0             1690             MOVX    @DPTR,A
                    1691     ;               P2_DD = 0x00;                                                              
                                          // P20~ P27 intput
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    28

                    1692                             ; SOURCE LINE # 444
0048 90E0E2         1693             MOV     DPTR,#0E0E2H
004B E4             1694             CLR     A
004C F0             1695             MOVX    @DPTR,A
                    1696     ;               P2_PE = 0xFF;                                                              
                                          // pull/down resistor enable    
                    1697                             ; SOURCE LINE # 445
004D 90E0E4         1698             MOV     DPTR,#0E0E4H
0050 74FF           1699             MOV     A,#0FFH
0052 F0             1700             MOVX    @DPTR,A
                    1701     ;               P2_DS = 0x00;                                                              
                                          //drive current =4mA
                    1702                             ; SOURCE LINE # 446
0053 90E0E3         1703             MOV     DPTR,#0E0E3H
0056 E4             1704             CLR     A
0057 F0             1705             MOVX    @DPTR,A
                    1706     ;               P2_PS=  0x00;                                                              
                                          //pull down resistor 
                    1707                             ; SOURCE LINE # 447
0058 90E0E5         1708             MOV     DPTR,#0E0E5H
005B E4             1709             CLR     A
005C F0             1710             MOVX    @DPTR,A
                    1711     ;       
                    1712     ;       // use P26 and P00 as output
                    1713     ;       
                    1714     ;     P00_FN= CFG0;                      // P00 as GPIO
                    1715                             ; SOURCE LINE # 451
005D 90E0D5         1716             MOV     DPTR,#0E0D5H
0060 E0             1717             MOVX    A,@DPTR
0061 FF             1718             MOV     R7,A
0062 EF             1719             MOV     A,R7
0063 54FC           1720             ANL     A,#0FCH
0065 FF             1721             MOV     R7,A
0066 EF             1722             MOV     A,R7
0067 F0             1723             MOVX    @DPTR,A
                    1724     ;     P00_DD = OUTPUT;               //P00 as output
                    1725                             ; SOURCE LINE # 452
0068 90E0D6         1726             MOV     DPTR,#0E0D6H
006B E0             1727             MOVX    A,@DPTR
006C FF             1728             MOV     R7,A
006D EF             1729             MOV     A,R7
006E 4401           1730             ORL     A,#01H
0070 FF             1731             MOV     R7,A
0071 EF             1732             MOV     A,R7
0072 F0             1733             MOVX    @DPTR,A
                    1734     ;     P00_PE = RES_DIS;               //P00 pull resistor off
                    1735                             ; SOURCE LINE # 453
0073 90E0D8         1736             MOV     DPTR,#0E0D8H
0076 E0             1737             MOVX    A,@DPTR
0077 FF             1738             MOV     R7,A
0078 EF             1739             MOV     A,R7
0079 54FE           1740             ANL     A,#0FEH
007B FF             1741             MOV     R7,A
007C EF             1742             MOV     A,R7
007D F0             1743             MOVX    @DPTR,A
                    1744     ;               P00_DS = I_4MA;
                    1745                             ; SOURCE LINE # 454
007E 90E0D7         1746             MOV     DPTR,#0E0D7H
0081 E0             1747             MOVX    A,@DPTR
0082 FF             1748             MOV     R7,A
0083 EF             1749             MOV     A,R7
0084 54FE           1750             ANL     A,#0FEH
0086 FF             1751             MOV     R7,A
0087 EF             1752             MOV     A,R7
0088 F0             1753             MOVX    @DPTR,A
                    1754     ; 
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    29

                    1755     ;                       
                    1756     ;                       GPIO(P20,CFG1,INPUT,RES_EN,PULL_DOWN,I_4MA);                       
                                  //P20 as EXT2
                    1757                             ; SOURCE LINE # 457
0089 90E0E1         1758             MOV     DPTR,#0E0E1H
008C E0             1759             MOVX    A,@DPTR
008D FF             1760             MOV     R7,A
008E EF             1761             MOV     A,R7
008F 54FC           1762             ANL     A,#0FCH
0091 FF             1763             MOV     R7,A
0092 EF             1764             MOV     A,R7
0093 4401           1765             ORL     A,#01H
0095 FF             1766             MOV     R7,A
0096 EF             1767             MOV     A,R7
0097 F0             1768             MOVX    @DPTR,A
0098 90E0E2         1769             MOV     DPTR,#0E0E2H
009B E0             1770             MOVX    A,@DPTR
009C FF             1771             MOV     R7,A
009D EF             1772             MOV     A,R7
009E 54FE           1773             ANL     A,#0FEH
00A0 FF             1774             MOV     R7,A
00A1 EF             1775             MOV     A,R7
00A2 F0             1776             MOVX    @DPTR,A
00A3 90E0E4         1777             MOV     DPTR,#0E0E4H
00A6 E0             1778             MOVX    A,@DPTR
00A7 FF             1779             MOV     R7,A
00A8 EF             1780             MOV     A,R7
00A9 4401           1781             ORL     A,#01H
00AB FF             1782             MOV     R7,A
00AC EF             1783             MOV     A,R7
00AD F0             1784             MOVX    @DPTR,A
00AE 90E0E5         1785             MOV     DPTR,#0E0E5H
00B1 E0             1786             MOVX    A,@DPTR
00B2 FF             1787             MOV     R7,A
00B3 EF             1788             MOV     A,R7
00B4 54FE           1789             ANL     A,#0FEH
00B6 FF             1790             MOV     R7,A
00B7 EF             1791             MOV     A,R7
00B8 F0             1792             MOVX    @DPTR,A
00B9 90E0E3         1793             MOV     DPTR,#0E0E3H
00BC E0             1794             MOVX    A,@DPTR
00BD FF             1795             MOV     R7,A
00BE EF             1796             MOV     A,R7
00BF 54FE           1797             ANL     A,#0FEH
00C1 FF             1798             MOV     R7,A
00C2 EF             1799             MOV     A,R7
00C3 F0             1800             MOVX    @DPTR,A
                    1801     ;                       GPIO(P15,CFG2,INPUT,RES_EN,PULL_DOWN,I_4MA);                       
                                  //P15 as TIMER3 T_EX
                    1802                             ; SOURCE LINE # 458
00C4 90E0DA         1803             MOV     DPTR,#0E0DAH
00C7 E0             1804             MOVX    A,@DPTR
00C8 FF             1805             MOV     R7,A
00C9 EF             1806             MOV     A,R7
00CA 54F3           1807             ANL     A,#0F3H
00CC FF             1808             MOV     R7,A
00CD EF             1809             MOV     A,R7
00CE 4408           1810             ORL     A,#08H
00D0 FF             1811             MOV     R7,A
00D1 EF             1812             MOV     A,R7
00D2 F0             1813             MOVX    @DPTR,A
00D3 90E0DC         1814             MOV     DPTR,#0E0DCH
00D6 E0             1815             MOVX    A,@DPTR
00D7 FF             1816             MOV     R7,A
00D8 EF             1817             MOV     A,R7
00D9 54DF           1818             ANL     A,#0DFH
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    30

00DB FF             1819             MOV     R7,A
00DC EF             1820             MOV     A,R7
00DD F0             1821             MOVX    @DPTR,A
00DE 90E0DE         1822             MOV     DPTR,#0E0DEH
00E1 E0             1823             MOVX    A,@DPTR
00E2 FF             1824             MOV     R7,A
00E3 EF             1825             MOV     A,R7
00E4 4420           1826             ORL     A,#020H
00E6 FF             1827             MOV     R7,A
00E7 EF             1828             MOV     A,R7
00E8 F0             1829             MOVX    @DPTR,A
00E9 90E0DF         1830             MOV     DPTR,#0E0DFH
00EC E0             1831             MOVX    A,@DPTR
00ED FF             1832             MOV     R7,A
00EE EF             1833             MOV     A,R7
00EF 54DF           1834             ANL     A,#0DFH
00F1 FF             1835             MOV     R7,A
00F2 EF             1836             MOV     A,R7
00F3 F0             1837             MOVX    @DPTR,A
00F4 90E0DD         1838             MOV     DPTR,#0E0DDH
00F7 E0             1839             MOVX    A,@DPTR
00F8 FF             1840             MOV     R7,A
00F9 EF             1841             MOV     A,R7
00FA 54DF           1842             ANL     A,#0DFH
00FC FF             1843             MOV     R7,A
00FD EF             1844             MOV     A,R7
00FE F0             1845             MOVX    @DPTR,A
                    1846     ;                       GPIO(P04,CFG0,OUTPUT,RES_EN,PULL_DOWN,I_4MA);                      
                                  //use P14 for timer0 ouput to test timer3 capture
                    1847                             ; SOURCE LINE # 459
00FF 90E0D4         1848             MOV     DPTR,#0E0D4H
0102 E0             1849             MOVX    A,@DPTR
0103 FF             1850             MOV     R7,A
0104 EF             1851             MOV     A,R7
0105 54FC           1852             ANL     A,#0FCH
0107 FF             1853             MOV     R7,A
0108 EF             1854             MOV     A,R7
0109 F0             1855             MOVX    @DPTR,A
010A 90E0D6         1856             MOV     DPTR,#0E0D6H
010D E0             1857             MOVX    A,@DPTR
010E FF             1858             MOV     R7,A
010F EF             1859             MOV     A,R7
0110 4410           1860             ORL     A,#010H
0112 FF             1861             MOV     R7,A
0113 EF             1862             MOV     A,R7
0114 F0             1863             MOVX    @DPTR,A
0115 90E0D8         1864             MOV     DPTR,#0E0D8H
0118 E0             1865             MOVX    A,@DPTR
0119 FF             1866             MOV     R7,A
011A EF             1867             MOV     A,R7
011B 4410           1868             ORL     A,#010H
011D FF             1869             MOV     R7,A
011E EF             1870             MOV     A,R7
011F F0             1871             MOVX    @DPTR,A
0120 90E0D9         1872             MOV     DPTR,#0E0D9H
0123 E0             1873             MOVX    A,@DPTR
0124 FF             1874             MOV     R7,A
0125 EF             1875             MOV     A,R7
0126 54EF           1876             ANL     A,#0EFH
0128 FF             1877             MOV     R7,A
0129 EF             1878             MOV     A,R7
012A F0             1879             MOVX    @DPTR,A
012B 90E0D7         1880             MOV     DPTR,#0E0D7H
012E E0             1881             MOVX    A,@DPTR
012F FF             1882             MOV     R7,A
0130 EF             1883             MOV     A,R7
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    31

0131 54EF           1884             ANL     A,#0EFH
0133 FF             1885             MOV     R7,A
0134 EF             1886             MOV     A,R7
0135 F0             1887             MOVX    @DPTR,A
                    1888     ;                       GPIO(P26,CFG0,OUTPUT,RES_DIS,PULL_DOWN,I_4MA);                  //P
                             26 for LED indication
                    1889                             ; SOURCE LINE # 460
0136 90E0E0         1890             MOV     DPTR,#0E0E0H
0139 E0             1891             MOVX    A,@DPTR
013A FF             1892             MOV     R7,A
013B EF             1893             MOV     A,R7
013C 54CF           1894             ANL     A,#0CFH
013E FF             1895             MOV     R7,A
013F EF             1896             MOV     A,R7
0140 F0             1897             MOVX    @DPTR,A
0141 90E0E2         1898             MOV     DPTR,#0E0E2H
0144 E0             1899             MOVX    A,@DPTR
0145 FF             1900             MOV     R7,A
0146 EF             1901             MOV     A,R7
0147 4440           1902             ORL     A,#040H
0149 FF             1903             MOV     R7,A
014A EF             1904             MOV     A,R7
014B F0             1905             MOVX    @DPTR,A
014C 90E0E4         1906             MOV     DPTR,#0E0E4H
014F E0             1907             MOVX    A,@DPTR
0150 FF             1908             MOV     R7,A
0151 EF             1909             MOV     A,R7
0152 54BF           1910             ANL     A,#0BFH
0154 FF             1911             MOV     R7,A
0155 EF             1912             MOV     A,R7
0156 F0             1913             MOVX    @DPTR,A
0157 90E0E5         1914             MOV     DPTR,#0E0E5H
015A E0             1915             MOVX    A,@DPTR
015B FF             1916             MOV     R7,A
015C EF             1917             MOV     A,R7
015D 54BF           1918             ANL     A,#0BFH
015F FF             1919             MOV     R7,A
0160 EF             1920             MOV     A,R7
0161 F0             1921             MOVX    @DPTR,A
0162 90E0E3         1922             MOV     DPTR,#0E0E3H
0165 E0             1923             MOVX    A,@DPTR
0166 FF             1924             MOV     R7,A
0167 EF             1925             MOV     A,R7
0168 54BF           1926             ANL     A,#0BFH
016A FF             1927             MOV     R7,A
016B EF             1928             MOV     A,R7
016C F0             1929             MOVX    @DPTR,A
                    1930     ;       
                    1931     ; }
                    1932                             ; SOURCE LINE # 462
016D                1933     ?C0017:
016D 22             1934             RET     
                    1935     ; END OF InitGPIO
                    1936     
                    1937     ; 
                    1938     ; void InitTimer01(void)
                    1939     
----                1940             RSEG  ?PR?InitTimer01?INITIAL
0000                1941     InitTimer01:
                    1942                             ; SOURCE LINE # 464
                    1943     ; {
                    1944                             ; SOURCE LINE # 465
                    1945     ;               T01_DIV_L= 0x05;                 //clock divider is 122, must write T01_DIV
                             _L first;
                    1946                             ; SOURCE LINE # 466
0000 90E0EF         1947             MOV     DPTR,#0E0EFH
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    32

0003 7405           1948             MOV     A,#05H
0005 F0             1949             MOVX    @DPTR,A
                    1950     ;         T01_DIV_H= 0x00;                
                    1951                             ; SOURCE LINE # 467
0006 90E0EE         1952             MOV     DPTR,#0E0EEH
0009 E4             1953             CLR     A
000A F0             1954             MOVX    @DPTR,A
                    1955     ;       TMOD = 0x10;                   //timer1 is 16bit timer, timer0 is 13 bit
                    1956                             ; SOURCE LINE # 468
000B 758910         1957             MOV     TMOD,#010H
                    1958     ;     TL0 = 0x0;
                    1959                             ; SOURCE LINE # 469
000E 758A00         1960             MOV     TL0,#00H
                    1961     ;     TH0= 0xfe;
                    1962                             ; SOURCE LINE # 470
0011 758CFE         1963             MOV     TH0,#0FEH
                    1964     ;               
                    1965     ;               TL1=0x0;
                    1966                             ; SOURCE LINE # 472
0014 758B00         1967             MOV     TL1,#00H
                    1968     ;               TH1=0x0;
                    1969                             ; SOURCE LINE # 473
0017 758D00         1970             MOV     TH1,#00H
                    1971     ;       
                    1972     ;       
                    1973     ;     ET0 = 1;                                //enable timer0 overflow interrupt
                    1974                             ; SOURCE LINE # 476
001A D2A9           1975             SETB    ET0
                    1976     ;     ET1 = 1;                                //enable timer1 overflow interrupt
                    1977                             ; SOURCE LINE # 477
001C D2AB           1978             SETB    ET1
                    1979     ;               TR0= 1;                                //start timer0
                    1980                             ; SOURCE LINE # 478
001E D28C           1981             SETB    TR0
                    1982     ;               TR1 = 1;    
                    1983                             ; SOURCE LINE # 479
0020 D28E           1984             SETB    TR1
                    1985     ; }
                    1986                             ; SOURCE LINE # 480
0022                1987     ?C0018:
0022 22             1988             RET     
                    1989     ; END OF InitTimer01
                    1990     
                    1991     ; 
                    1992     ; void InitTimer3(void)
                    1993     
----                1994             RSEG  ?PR?InitTimer3?INITIAL
0000                1995     InitTimer3:
                    1996             USING   0
                    1997                             ; SOURCE LINE # 482
                    1998     ; {
                    1999                             ; SOURCE LINE # 483
                    2000     ;       T3PS = 0;                                                               // no divid
                             er
                    2001                             ; SOURCE LINE # 484
0000 90E0C9         2002             MOV     DPTR,#0E0C9H
0003 E4             2003             CLR     A
0004 F0             2004             MOVX    @DPTR,A
                    2005     ;       T3RC= 0;               //reset T3 capture register
                    2006                             ; SOURCE LINE # 485
0005 90E0CC         2007             MOV     DPTR,#0E0CCH
0008 E4             2008             CLR     A
0009 F0             2009             MOVX    @DPTR,A
000A A3             2010             INC     DPTR
000B E4             2011             CLR     A
000C F0             2012             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    33

                    2013     ;       T3CTR=0;               //reset T3 counter
                    2014                             ; SOURCE LINE # 486
000D 90E0CA         2015             MOV     DPTR,#0E0CAH
0010 E4             2016             CLR     A
0011 F0             2017             MOVX    @DPTR,A
0012 A3             2018             INC     DPTR
0013 E4             2019             CLR     A
0014 F0             2020             MOVX    @DPTR,A
                    2021     ;       T3CT=0;                //capture clock from cpu
                    2022                             ; SOURCE LINE # 487
0015 90E0C8         2023             MOV     DPTR,#0E0C8H
0018 E0             2024             MOVX    A,@DPTR
0019 FF             2025             MOV     R7,A
001A EF             2026             MOV     A,R7
001B 54FD           2027             ANL     A,#0FDH
001D FF             2028             MOV     R7,A
001E EF             2029             MOV     A,R7
001F F0             2030             MOVX    @DPTR,A
                    2031     ;       T3CPRL=1;             //capture mode select
                    2032                             ; SOURCE LINE # 488
0020 90E0C8         2033             MOV     DPTR,#0E0C8H
0023 E0             2034             MOVX    A,@DPTR
0024 FF             2035             MOV     R7,A
0025 EF             2036             MOV     A,R7
0026 4401           2037             ORL     A,#01H
0028 FF             2038             MOV     R7,A
0029 EF             2039             MOV     A,R7
002A F0             2040             MOVX    @DPTR,A
                    2041     ;       T3EXEN=1;             //enable T3 external EX pin
                    2042                             ; SOURCE LINE # 489
002B 90E0C8         2043             MOV     DPTR,#0E0C8H
002E E0             2044             MOVX    A,@DPTR
002F FF             2045             MOV     R7,A
0030 EF             2046             MOV     A,R7
0031 4408           2047             ORL     A,#08H
0033 FF             2048             MOV     R7,A
0034 EF             2049             MOV     A,R7
0035 F0             2050             MOVX    @DPTR,A
                    2051     ;       T3EX_INV=0;           //T3 EX pin ,trigger on rising edge
                    2052                             ; SOURCE LINE # 490
0036 90E08A         2053             MOV     DPTR,#0E08AH
0039 E0             2054             MOVX    A,@DPTR
003A FF             2055             MOV     R7,A
003B EF             2056             MOV     A,R7
003C 54FE           2057             ANL     A,#0FEH
003E FF             2058             MOV     R7,A
003F EF             2059             MOV     A,R7
0040 F0             2060             MOVX    @DPTR,A
                    2061     ;       T3TF_EINT        =1;                      // timer3 overflow interrupt enable
                    2062                             ; SOURCE LINE # 491
0041 90E0C8         2063             MOV     DPTR,#0E0C8H
0044 E0             2064             MOVX    A,@DPTR
0045 FF             2065             MOV     R7,A
0046 EF             2066             MOV     A,R7
0047 4420           2067             ORL     A,#020H
0049 FF             2068             MOV     R7,A
004A EF             2069             MOV     A,R7
004B F0             2070             MOVX    @DPTR,A
                    2071     ;       T3TR = 1;                                     // start timer3 
                    2072                             ; SOURCE LINE # 492
004C 90E0C8         2073             MOV     DPTR,#0E0C8H
004F E0             2074             MOVX    A,@DPTR
0050 FF             2075             MOV     R7,A
0051 EF             2076             MOV     A,R7
0052 4404           2077             ORL     A,#04H
0054 FF             2078             MOV     R7,A
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    34

0055 EF             2079             MOV     A,R7
0056 F0             2080             MOVX    @DPTR,A
                    2081     ;       T3TF=0;               //clear T3 overflow flag
                    2082                             ; SOURCE LINE # 493
0057 90E0C8         2083             MOV     DPTR,#0E0C8H
005A E0             2084             MOVX    A,@DPTR
005B FF             2085             MOV     R7,A
005C EF             2086             MOV     A,R7
005D 547F           2087             ANL     A,#07FH
005F FF             2088             MOV     R7,A
0060 EF             2089             MOV     A,R7
0061 F0             2090             MOVX    @DPTR,A
                    2091     ;       T3EXF=0;              //clear T3 EX trigger flag
                    2092                             ; SOURCE LINE # 494
0062 90E0C8         2093             MOV     DPTR,#0E0C8H
0065 E0             2094             MOVX    A,@DPTR
0066 FF             2095             MOV     R7,A
0067 EF             2096             MOV     A,R7
0068 54BF           2097             ANL     A,#0BFH
006A FF             2098             MOV     R7,A
006B EF             2099             MOV     A,R7
006C F0             2100             MOVX    @DPTR,A
                    2101     ;       IE1=0;                //clear  EX1 interrupt flag
                    2102                             ; SOURCE LINE # 495
006D C28B           2103             CLR     IE1
                    2104     ;        EX1=1;               //enable EX1 interrupt
                    2105                             ; SOURCE LINE # 496
006F D2AA           2106             SETB    EX1
                    2107     ; }
                    2108                             ; SOURCE LINE # 497
0071                2109     ?C0019:
0071 22             2110             RET     
                    2111     ; END OF InitTimer3
                    2112     
                    2113     ; 
                    2114     ; void InitTimer4(void)
                    2115     
----                2116             RSEG  ?PR?InitTimer4?INITIAL
0000                2117     InitTimer4:
                    2118             USING   0
                    2119                             ; SOURCE LINE # 499
                    2120     ; {
                    2121                             ; SOURCE LINE # 500
                    2122     ;       T4PS = 0;                                                               // no divid
                             er
                    2123                             ; SOURCE LINE # 501
0000 90E0CF         2124             MOV     DPTR,#0E0CFH
0003 E4             2125             CLR     A
0004 F0             2126             MOVX    @DPTR,A
                    2127     ;       T4RC = 0xE0C0;
                    2128                             ; SOURCE LINE # 502
0005 90E0D2         2129             MOV     DPTR,#0E0D2H
0008 74E0           2130             MOV     A,#0E0H
000A F0             2131             MOVX    @DPTR,A
000B A3             2132             INC     DPTR
000C 74C0           2133             MOV     A,#0C0H
000E F0             2134             MOVX    @DPTR,A
                    2135     ; 
                    2136     ;       T4TF_EINT        =1;                                                    // timer4 o
                             verflow interrupt enable
                    2137                             ; SOURCE LINE # 504
000F 90E0CE         2138             MOV     DPTR,#0E0CEH
0012 E0             2139             MOVX    A,@DPTR
0013 FF             2140             MOV     R7,A
0014 EF             2141             MOV     A,R7
0015 4420           2142             ORL     A,#020H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    35

0017 FF             2143             MOV     R7,A
0018 EF             2144             MOV     A,R7
0019 F0             2145             MOVX    @DPTR,A
                    2146     ;       T4TR = 1;                               // start timer4
                    2147                             ; SOURCE LINE # 505
001A 90E0CE         2148             MOV     DPTR,#0E0CEH
001D E0             2149             MOVX    A,@DPTR
001E FF             2150             MOV     R7,A
001F EF             2151             MOV     A,R7
0020 4404           2152             ORL     A,#04H
0022 FF             2153             MOV     R7,A
0023 EF             2154             MOV     A,R7
0024 F0             2155             MOVX    @DPTR,A
                    2156     ;       CLR_T4_INT();
                    2157                             ; SOURCE LINE # 506
0025 53FEF0         2158             ANL     INT_REG4,#0F0H
                    2159     ;       EX6 = 1;
                    2160                             ; SOURCE LINE # 507
0028 D2BD           2161             SETB    EX6
                    2162     ;       IEX6=0;
                    2163                             ; SOURCE LINE # 508
002A C2C5           2164             CLR     IEX6
                    2165     ; }
                    2166                             ; SOURCE LINE # 509
002C                2167     ?C0020:
002C 22             2168             RET     
                    2169     ; END OF InitTimer4
                    2170     
                    2171     ; void InitTimer5(void)
                    2172     
----                2173             RSEG  ?PR?InitTimer5?INITIAL
0000                2174     InitTimer5:
                    2175             USING   0
                    2176                             ; SOURCE LINE # 510
                    2177     ; {
                    2178                             ; SOURCE LINE # 511
                    2179     ;       T5PS = 0;                                                                          
                                          // no divider
                    2180                             ; SOURCE LINE # 512
0000 90E0F4         2181             MOV     DPTR,#0E0F4H
0003 E4             2182             CLR     A
0004 F0             2183             MOVX    @DPTR,A
                    2184     ;       T5RC = 0x10C0;
                    2185                             ; SOURCE LINE # 513
0005 90E0F7         2186             MOV     DPTR,#0E0F7H
0008 7410           2187             MOV     A,#010H
000A F0             2188             MOVX    @DPTR,A
000B A3             2189             INC     DPTR
000C 74C0           2190             MOV     A,#0C0H
000E F0             2191             MOVX    @DPTR,A
                    2192     ;       
                    2193     ;       T5TF_EINT        =1;                                                            // 
                             timer4 overflow interrupt enable
                    2194                             ; SOURCE LINE # 515
000F 90E0F3         2195             MOV     DPTR,#0E0F3H
0012 E0             2196             MOVX    A,@DPTR
0013 FF             2197             MOV     R7,A
0014 EF             2198             MOV     A,R7
0015 4420           2199             ORL     A,#020H
0017 FF             2200             MOV     R7,A
0018 EF             2201             MOV     A,R7
0019 F0             2202             MOVX    @DPTR,A
                    2203     ;       T5TR = 1;                                                                          
                                          // start timer4
                    2204                             ; SOURCE LINE # 516
001A 90E0F3         2205             MOV     DPTR,#0E0F3H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    36

001D E0             2206             MOVX    A,@DPTR
001E FF             2207             MOV     R7,A
001F EF             2208             MOV     A,R7
0020 4404           2209             ORL     A,#04H
0022 FF             2210             MOV     R7,A
0023 EF             2211             MOV     A,R7
0024 F0             2212             MOVX    @DPTR,A
                    2213     ;       T5TF=0;                                                                            
                                          // clear interrupt flag
                    2214                             ; SOURCE LINE # 517
0025 90E0F3         2215             MOV     DPTR,#0E0F3H
0028 E0             2216             MOVX    A,@DPTR
0029 FF             2217             MOV     R7,A
002A EF             2218             MOV     A,R7
002B 547F           2219             ANL     A,#07FH
002D FF             2220             MOV     R7,A
002E EF             2221             MOV     A,R7
002F F0             2222             MOVX    @DPTR,A
                    2223     ; 
                    2224     ;       
                    2225     ;       I3FR=1;
                    2226                             ; SOURCE LINE # 520
0030 D2CE           2227             SETB    I3FR
                    2228     ;       EX3 = 1;
                    2229                             ; SOURCE LINE # 521
0032 D2BA           2230             SETB    EX3
                    2231     ;       IEX3=0;
                    2232                             ; SOURCE LINE # 522
0034 C2C2           2233             CLR     IEX3
                    2234     ; }
                    2235                             ; SOURCE LINE # 523
0036                2236     ?C0021:
0036 22             2237             RET     
                    2238     ; END OF InitTimer5
                    2239     
                    2240     ; void InitTimer6(void)
                    2241     
----                2242             RSEG  ?PR?InitTimer6?INITIAL
0000                2243     InitTimer6:
                    2244             USING   0
                    2245                             ; SOURCE LINE # 524
                    2246     ; {
                    2247                             ; SOURCE LINE # 525
                    2248     ;       T6PS = 0;                                                                          
                                          // no divider
                    2249                             ; SOURCE LINE # 526
0000 90E0FA         2250             MOV     DPTR,#0E0FAH
0003 E4             2251             CLR     A
0004 F0             2252             MOVX    @DPTR,A
                    2253     ;       T6RC = 0x10C0;
                    2254                             ; SOURCE LINE # 527
0005 90E0FD         2255             MOV     DPTR,#0E0FDH
0008 7410           2256             MOV     A,#010H
000A F0             2257             MOVX    @DPTR,A
000B A3             2258             INC     DPTR
000C 74C0           2259             MOV     A,#0C0H
000E F0             2260             MOVX    @DPTR,A
                    2261     ;       
                    2262     ;       T6TF_EINT        =1;                                                    // timer4 o
                             verflow interrupt enable
                    2263                             ; SOURCE LINE # 529
000F 90E0F9         2264             MOV     DPTR,#0E0F9H
0012 E0             2265             MOVX    A,@DPTR
0013 FF             2266             MOV     R7,A
0014 EF             2267             MOV     A,R7
0015 4420           2268             ORL     A,#020H
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    37

0017 FF             2269             MOV     R7,A
0018 EF             2270             MOV     A,R7
0019 F0             2271             MOVX    @DPTR,A
                    2272     ;       T6TR = 1;                                                                          
                                  // start timer4
                    2273                             ; SOURCE LINE # 530
001A 90E0F9         2274             MOV     DPTR,#0E0F9H
001D E0             2275             MOVX    A,@DPTR
001E FF             2276             MOV     R7,A
001F EF             2277             MOV     A,R7
0020 4404           2278             ORL     A,#04H
0022 FF             2279             MOV     R7,A
0023 EF             2280             MOV     A,R7
0024 F0             2281             MOVX    @DPTR,A
                    2282     ;       T6TF=0;                                                                            
                                  // clear interrupt flag
                    2283                             ; SOURCE LINE # 531
0025 90E0F9         2284             MOV     DPTR,#0E0F9H
0028 E0             2285             MOVX    A,@DPTR
0029 FF             2286             MOV     R7,A
002A EF             2287             MOV     A,R7
002B 547F           2288             ANL     A,#07FH
002D FF             2289             MOV     R7,A
002E EF             2290             MOV     A,R7
002F F0             2291             MOVX    @DPTR,A
                    2292     ; 
                    2293     ;       
                    2294     ; 
                    2295     ;       EX5 = 1;
                    2296                             ; SOURCE LINE # 535
0030 D2BC           2297             SETB    EX5
                    2298     ;       IEX5=0;
                    2299                             ; SOURCE LINE # 536
0032 C2C4           2300             CLR     IEX5
                    2301     ; }
                    2302                             ; SOURCE LINE # 537
0034                2303     ?C0022:
0034 22             2304             RET     
                    2305     ; END OF InitTimer6
                    2306     
                    2307     ; void SystemClock(void)
                    2308     
----                2309             RSEG  ?PR?SystemClock?INITIAL
0000                2310     SystemClock:
                    2311             USING   0
                    2312                             ; SOURCE LINE # 538
                    2313     ; {
                    2314                             ; SOURCE LINE # 539
                    2315     ;     RC80M_RES = 0x2e;
                    2316                             ; SOURCE LINE # 540
0000 90E0B2         2317             MOV     DPTR,#0E0B2H
0003 742E           2318             MOV     A,#02EH
0005 F0             2319             MOVX    @DPTR,A
                    2320     ;         #pragma asm
                    2321     ;               nop
0006 00             2322               nop
                    2323     ;               nop
0007 00             2324               nop
                    2325     ;               nop
0008 00             2326               nop
                    2327     ;               nop
0009 00             2328               nop
                    2329     ;               nop
000A 00             2330               nop
                    2331     ;               nop
000B 00             2332               nop
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    38

                    2333     ;               nop
000C 00             2334               nop
                    2335     ;               nop
000D 00             2336               nop
                    2337     ;               nop
000E 00             2338               nop
                    2339     ;               nop
000F 00             2340               nop
                    2341     ;               nop
0010 00             2342               nop
                    2343     ;               nop
0011 00             2344               nop
                    2345     ;               nop
0012 00             2346               nop
                    2347     ;               nop
0013 00             2348               nop
                    2349     ;               nop
0014 00             2350               nop
                    2351     ;               nop
0015 00             2352               nop
                    2353     ;               nop
0016 00             2354               nop
                    2355     ;               nop
0017 00             2356               nop
                    2357     ;               nop
0018 00             2358               nop
                    2359     ;               nop
0019 00             2360               nop
                    2361     ;               nop
001A 00             2362               nop
                    2363     ;               nop
001B 00             2364               nop
                    2365     ;               nop
001C 00             2366               nop
                    2367     ;               nop
001D 00             2368               nop
                    2369     ;               nop
001E 00             2370               nop
                    2371     ;               nop
001F 00             2372               nop
                    2373     ;               nop
0020 00             2374               nop
                    2375     ;               nop
0021 00             2376               nop
                    2377     ;               nop
0022 00             2378               nop
                    2379     ;               nop
0023 00             2380               nop
                    2381     ;               nop
0024 00             2382               nop
                    2383     ;               nop
0025 00             2384               nop
                    2385     ;               nop
0026 00             2386               nop
                    2387     ;               #pragma endasm
                    2388     ;       
                    2389     ;         CLK_DIV_L = 0x02;
                    2390                             ; SOURCE LINE # 577
0027 90E0E7         2391             MOV     DPTR,#0E0E7H
002A 7402           2392             MOV     A,#02H
002C F0             2393             MOVX    @DPTR,A
                    2394     ;         CLK_DIV_H = 0x00;
                    2395                             ; SOURCE LINE # 578
002D 90E0E6         2396             MOV     DPTR,#0E0E6H
0030 E4             2397             CLR     A
0031 F0             2398             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    39

                    2399     ;               
                    2400     ;               #pragma asm
                    2401     ;               nop
0032 00             2402               nop
                    2403     ;               nop
0033 00             2404               nop
                    2405     ;               nop
0034 00             2406               nop
                    2407     ;               nop
0035 00             2408               nop
                    2409     ;               nop
0036 00             2410               nop
                    2411     ;               nop
0037 00             2412               nop
                    2413     ;               nop
0038 00             2414               nop
                    2415     ;               nop
0039 00             2416               nop
                    2417     ;               nop
003A 00             2418               nop
                    2419     ;               nop
003B 00             2420               nop
                    2421     ;               nop
003C 00             2422               nop
                    2423     ;               nop
003D 00             2424               nop
                    2425     ;               nop
003E 00             2426               nop
                    2427     ;               nop
003F 00             2428               nop
                    2429     ;               nop
0040 00             2430               nop
                    2431     ;               nop
0041 00             2432               nop
                    2433     ;               nop
0042 00             2434               nop
                    2435     ;               nop
0043 00             2436               nop
                    2437     ;               nop
0044 00             2438               nop
                    2439     ;               nop
0045 00             2440               nop
                    2441     ;               nop
0046 00             2442               nop
                    2443     ;               nop
0047 00             2444               nop
                    2445     ;               nop
0048 00             2446               nop
                    2447     ;               nop
0049 00             2448               nop
                    2449     ;               nop
004A 00             2450               nop
                    2451     ;               nop
004B 00             2452               nop
                    2453     ;               nop
004C 00             2454               nop
                    2455     ;               nop
004D 00             2456               nop
                    2457     ;               nop
004E 00             2458               nop
                    2459     ;               nop
004F 00             2460               nop
                    2461     ;               nop
0050 00             2462               nop
                    2463     ;               nop
0051 00             2464               nop
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    40

                    2465     ;               #pragma endasm
                    2466     ; }
                    2467                             ; SOURCE LINE # 614
0052                2468     ?C0023:
0052 22             2469             RET     
                    2470     ; END OF SystemClock
                    2471     
                    2472     ; 
                    2473     ; 
                    2474     ; 
                    2475     ; 
                    2476     ; 
                    2477     ; 
                    2478     ; //initial UART1, there are 2 different ways to generate baudrate
                    2479     ; //way 1
                    2480     ; void sInitUART1(void)
                    2481     
----                2482             RSEG  ?PR?sInitUART1?INITIAL
0000                2483     sInitUART1:
                    2484                             ; SOURCE LINE # 623
                    2485     ; {
                    2486                             ; SOURCE LINE # 624
                    2487     ;       S0CON  = 0x50;                // set as 8-bit UART,  enable serial 0 reception, ena
                             ble serial 0 multiprocessor function
                    2488                             ; SOURCE LINE # 625
0000 759850         2489             MOV     S0CON,#050H
                    2490     ;     WDCON = 0x80;            // 0x80: baud rate = (2^smod) * Fclk / (64 * (2^10 - s0rel))
                             ;
                    2491                             ; SOURCE LINE # 626
0003 75D880         2492             MOV     WDCON,#080H
                    2493     ;                               // 0x00: baud rate = (2^smod) * Fclk / (32 * 12 * (256 - th
                             1));
                    2494     ;                               // smod = 0;    Fclk = system clock
                    2495     ;     S0RELL = 0xF3;             //Fclk = 8MHz, baud rate = 9600
                    2496                             ; SOURCE LINE # 629
0006 75AAF3         2497             MOV     S0RELL,#0F3H
                    2498     ;     S0RELH = 0x03;    
                    2499                             ; SOURCE LINE # 630
0009 75BA03         2500             MOV     S0RELH,#03H
                    2501     ; }
                    2502                             ; SOURCE LINE # 631
000C                2503     ?C0024:
000C 22             2504             RET     
                    2505     ; END OF sInitUART1
                    2506     
                    2507     ; 
                    2508     ; void sInitUART2(void)
                    2509     
----                2510             RSEG  ?PR?sInitUART2?INITIAL
0000                2511     sInitUART2:
                    2512                             ; SOURCE LINE # 633
                    2513     ; {
                    2514                             ; SOURCE LINE # 634
                    2515     ;     S1CON  = 0x90;                    //enable serial 1 reception, enable serial 0 multip
                             rocessor function
                    2516                             ; SOURCE LINE # 635
0000 759B90         2517             MOV     S1CON,#090H
                    2518     ;                                 //s1con.7 = 1: 8-bit UART(mode B)    s1con.7 = 0: 9-bit U
                             ART(mode A)
                    2519     ;     S1RELL = 0xE6;            //baud rate = Fclk / (32 * (2^10 - s0rel));
                    2520                             ; SOURCE LINE # 637
0003 759DE6         2521             MOV     S1RELL,#0E6H
                    2522     ;     S1RELH = 0x03;              //Fclk = 8MHz, baud rate = 9600
                    2523                             ; SOURCE LINE # 638
0006 75BB03         2524             MOV     S1RELH,#03H
                    2525     ; }
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    41

                    2526                             ; SOURCE LINE # 639
0009                2527     ?C0025:
0009 22             2528             RET     
                    2529     ; END OF sInitUART2
                    2530     
                    2531     ; 
                    2532     ; 
                    2533     ; void InitDAC(void)
                    2534     
----                2535             RSEG  ?PR?InitDAC?INITIAL
0000                2536     InitDAC:
                    2537             USING   0
                    2538                             ; SOURCE LINE # 642
                    2539     ; {
                    2540                             ; SOURCE LINE # 643
                    2541     ;               DAC1_PD=0;              //power up DAC1
                    2542                             ; SOURCE LINE # 644
0000 90E07A         2543             MOV     DPTR,#0E07AH
0003 E0             2544             MOVX    A,@DPTR
0004 FF             2545             MOV     R7,A
0005 EF             2546             MOV     A,R7
0006 54FB           2547             ANL     A,#0FBH
0008 FF             2548             MOV     R7,A
0009 EF             2549             MOV     A,R7
000A F0             2550             MOVX    @DPTR,A
                    2551     ;               DAC2_PD=0;              //power up DAC2
                    2552                             ; SOURCE LINE # 645
000B 90E07A         2553             MOV     DPTR,#0E07AH
000E E0             2554             MOVX    A,@DPTR
000F FF             2555             MOV     R7,A
0010 EF             2556             MOV     A,R7
0011 54FE           2557             ANL     A,#0FEH
0013 FF             2558             MOV     R7,A
0014 EF             2559             MOV     A,R7
0015 F0             2560             MOVX    @DPTR,A
                    2561     ;       DAC1_VREF=1;            //use 2.5V as vref
                    2562                             ; SOURCE LINE # 646
0016 90E07A         2563             MOV     DPTR,#0E07AH
0019 E0             2564             MOVX    A,@DPTR
001A FF             2565             MOV     R7,A
001B EF             2566             MOV     A,R7
001C 4408           2567             ORL     A,#08H
001E FF             2568             MOV     R7,A
001F EF             2569             MOV     A,R7
0020 F0             2570             MOVX    @DPTR,A
                    2571     ;       DAC2_VREF=1;            //use 2.5V as vref
                    2572                             ; SOURCE LINE # 647
0021 90E07A         2573             MOV     DPTR,#0E07AH
0024 E0             2574             MOVX    A,@DPTR
0025 FF             2575             MOV     R7,A
0026 EF             2576             MOV     A,R7
0027 4402           2577             ORL     A,#02H
0029 FF             2578             MOV     R7,A
002A EF             2579             MOV     A,R7
002B F0             2580             MOVX    @DPTR,A
                    2581     ;       ADC_DAC_SEL1=0;
                    2582                             ; SOURCE LINE # 648
002C 90E089         2583             MOV     DPTR,#0E089H
002F E0             2584             MOVX    A,@DPTR
0030 FF             2585             MOV     R7,A
0031 EF             2586             MOV     A,R7
0032 54FE           2587             ANL     A,#0FEH
0034 FF             2588             MOV     R7,A
0035 EF             2589             MOV     A,R7
0036 F0             2590             MOVX    @DPTR,A
                    2591     ;       ADC_DAC_SEL2=0;
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    42

                    2592                             ; SOURCE LINE # 649
0037 90E089         2593             MOV     DPTR,#0E089H
003A E0             2594             MOVX    A,@DPTR
003B FF             2595             MOV     R7,A
003C EF             2596             MOV     A,R7
003D 54FD           2597             ANL     A,#0FDH
003F FF             2598             MOV     R7,A
0040 EF             2599             MOV     A,R7
0041 F0             2600             MOVX    @DPTR,A
                    2601     ; }
                    2602                             ; SOURCE LINE # 650
0042                2603     ?C0026:
0042 22             2604             RET     
                    2605     ; END OF InitDAC
                    2606     
                    2607             END
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    43

SYMBOL TABLE LISTING
------ ----- -------


N A M E                        T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . . . . . . .  C ADDR   001EH   R   SEG=?PR?INITEXT?INITIAL
?C0002. . . . . . . . . . . .  C ADDR   0019H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0003. . . . . . . . . . . .  C ADDR   0039H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0004. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0005. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0006. . . . . . . . . . . .  C ADDR   002DH   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0007. . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0008. . . . . . . . . . . .  C ADDR   0037H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0009. . . . . . . . . . . .  C ADDR   0045H   R   SEG=?PR?INITISDDEBUG?INITIAL
?C0010. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?INITBREAKPOINT?INITIAL
?C0011. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
?C0012. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
?C0013. . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?INITADC?INITIAL
?C0014. . . . . . . . . . . .  C ADDR   01DAH   R   SEG=?PR?INITEPWM?INITIAL
?C0015. . . . . . . . . . . .  C ADDR   010BH   R   SEG=?PR?INITCOMPARATOR?INITIAL
?C0016. . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?INITWATCHDOG?INITIAL
?C0017. . . . . . . . . . . .  C ADDR   016DH   R   SEG=?PR?INITGPIO?INITIAL
?C0018. . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?INITTIMER01?INITIAL
?C0019. . . . . . . . . . . .  C ADDR   0071H   R   SEG=?PR?INITTIMER3?INITIAL
?C0020. . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?INITTIMER4?INITIAL
?C0021. . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?INITTIMER5?INITIAL
?C0022. . . . . . . . . . . .  C ADDR   0034H   R   SEG=?PR?INITTIMER6?INITIAL
?C0023. . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
?C0024. . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?SINITUART1?INITIAL
?C0025. . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?SINITUART2?INITIAL
?C0026. . . . . . . . . . . .  C ADDR   0042H   R   SEG=?PR?INITDAC?INITIAL
?PR?EPWMOUTPUTDISABLE?INITIAL  C SEG    000DH       REL=UNIT
?PR?EPWMOUTPUTENABLE?INITIAL.  C SEG    000DH       REL=UNIT
?PR?INITADC?INITIAL . . . . .  C SEG    009DH       REL=UNIT
?PR?INITBREAKPOINT?INITIAL. .  C SEG    000AH       REL=UNIT
?PR?INITCOMPARATOR?INITIAL. .  C SEG    010CH       REL=UNIT
?PR?INITDAC?INITIAL . . . . .  C SEG    0043H       REL=UNIT
?PR?INITEPWM?INITIAL. . . . .  C SEG    01DBH       REL=UNIT
?PR?INITEXT?INITIAL . . . . .  C SEG    001FH       REL=UNIT
?PR?INITGPIO?INITIAL. . . . .  C SEG    016EH       REL=UNIT
?PR?INITISDDEBUG?INITIAL. . .  C SEG    0046H       REL=UNIT
?PR?INITTIMER01?INITIAL . . .  C SEG    0023H       REL=UNIT
?PR?INITTIMER3?INITIAL. . . .  C SEG    0072H       REL=UNIT
?PR?INITTIMER4?INITIAL. . . .  C SEG    002DH       REL=UNIT
?PR?INITTIMER5?INITIAL. . . .  C SEG    0037H       REL=UNIT
?PR?INITTIMER6?INITIAL. . . .  C SEG    0035H       REL=UNIT
?PR?INITWATCHDOG?INITIAL. . .  C SEG    001EH       REL=UNIT
?PR?SINITUART1?INITIAL. . . .  C SEG    000DH       REL=UNIT
?PR?SINITUART2?INITIAL. . . .  C SEG    000AH       REL=UNIT
?PR?SYSTEMCLOCK?INITIAL . . .  C SEG    0053H       REL=UNIT
ACC . . . . . . . . . . . . .  D ADDR   00E0H   A   
ARCON . . . . . . . . . . . .  D ADDR   00EFH   A   
B . . . . . . . . . . . . . .  D ADDR   00F0H   A   
BPCTRL. . . . . . . . . . . .  D ADDR   0093H   A   
BREAKH. . . . . . . . . . . .  D ADDR   0095H   A   
BREAKL. . . . . . . . . . . .  D ADDR   0094H   A   
BSHCTL. . . . . . . . . . . .  D ADDR   00ABH   A   
BSHI_0. . . . . . . . . . . .  D ADDR   00ACH   A   
BSHI_1. . . . . . . . . . . .  D ADDR   00ADH   A   
BSHI_2. . . . . . . . . . . .  D ADDR   00AEH   A   
BSHI_3. . . . . . . . . . . .  D ADDR   00AFH   A   
BSHO_0. . . . . . . . . . . .  D ADDR   00BCH   A   
BSHO_1. . . . . . . . . . . .  D ADDR   00BDH   A   
BSHO_2. . . . . . . . . . . .  D ADDR   00BEH   A   
BSHO_3. . . . . . . . . . . .  D ADDR   00BFH   A   
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    44

CKCON . . . . . . . . . . . .  D ADDR   008EH   A   
CLK_DIV . . . . . . . . . . .  D ADDR   0091H   A   
CLK_PD_CON. . . . . . . . . .  D ADDR   008FH   A   
DPH . . . . . . . . . . . . .  D ADDR   0083H   A   
DPH1. . . . . . . . . . . . .  D ADDR   0085H   A   
DPL . . . . . . . . . . . . .  D ADDR   0082H   A   
DPL1. . . . . . . . . . . . .  D ADDR   0084H   A   
DPS . . . . . . . . . . . . .  D ADDR   0092H   A   
EADC. . . . . . . . . . . . .  B ADDR   00B8H.0 A   
EAL . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EPWMOUTPUTDISABLE . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTDISABLE?INITIAL
EPWMOUTPUTENABLE. . . . . . .  C ADDR   0000H   R   SEG=?PR?EPWMOUTPUTENABLE?INITIAL
ES. . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ES0 . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
EX0 . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EX2 . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
EX3 . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
EX4 . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
EX5 . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
EX6 . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
I2FR. . . . . . . . . . . . .  B ADDR   00C8H.5 A   
I3FR. . . . . . . . . . . . .  B ADDR   00C8H.6 A   
IADC. . . . . . . . . . . . .  B ADDR   00C0H.0 A   
IE. . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . .  B ADDR   0088H.3 A   
IEN0. . . . . . . . . . . . .  D ADDR   00A8H   A   
IEN1. . . . . . . . . . . . .  D ADDR   00B8H   A   
IEN2. . . . . . . . . . . . .  D ADDR   009AH   A   
IEX2. . . . . . . . . . . . .  B ADDR   00C0H.1 A   
IEX3. . . . . . . . . . . . .  B ADDR   00C0H.2 A   
IEX4. . . . . . . . . . . . .  B ADDR   00C0H.3 A   
IEX5. . . . . . . . . . . . .  B ADDR   00C0H.4 A   
IEX6. . . . . . . . . . . . .  B ADDR   00C0H.5 A   
INITADC . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITADC?INITIAL
INITBREAKPOINT. . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITBREAKPOINT?INITIAL
INITCOMPARATOR. . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITCOMPARATOR?INITIAL
INITDAC . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITDAC?INITIAL
INITEPWM. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEPWM?INITIAL
INITEXT . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITEXT?INITIAL
INITGPIO. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITGPIO?INITIAL
INITIAL . . . . . . . . . . .  N NUMB   -----       
INITISDDEBUG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITISDDEBUG?INITIAL
INITTIMER01 . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER01?INITIAL
INITTIMER3. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER3?INITIAL
INITTIMER4. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER4?INITIAL
INITTIMER5. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER5?INITIAL
INITTIMER6. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITTIMER6?INITIAL
INITWATCHDOG. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITWATCHDOG?INITIAL
INT_REG1. . . . . . . . . . .  D ADDR   00F9H   A   
INT_REG2. . . . . . . . . . .  D ADDR   00FAH   A   
INT_REG3. . . . . . . . . . .  D ADDR   00FDH   A   
INT_REG4. . . . . . . . . . .  D ADDR   00FEH   A   
IP0 . . . . . . . . . . . . .  D ADDR   00A9H   A   
IP1 . . . . . . . . . . . . .  D ADDR   00B9H   A   
IRCON . . . . . . . . . . . .  D ADDR   00C0H   A   
IT0 . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . .  B ADDR   0088H.2 A   
MD0 . . . . . . . . . . . . .  D ADDR   00E9H   A   
MD1 . . . . . . . . . . . . .  D ADDR   00EAH   A   
MD2 . . . . . . . . . . . . .  D ADDR   00EBH   A   
MD3 . . . . . . . . . . . . .  D ADDR   00ECH   A   
MD4 . . . . . . . . . . . . .  D ADDR   00EDH   A   
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    45

MD5 . . . . . . . . . . . . .  D ADDR   00EEH   A   
MEM_CONFIG. . . . . . . . . .  D ADDR   00E8H   A   
P0. . . . . . . . . . . . . .  D ADDR   0080H   A   
P00 . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01 . . . . . . . . . . . . .  B ADDR   0080H.1 A   
P02 . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03 . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04 . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05 . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06 . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07 . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P1. . . . . . . . . . . . . .  D ADDR   0090H   A   
P10 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11 . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12 . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13 . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14 . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16 . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17 . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1AQCSFRC . . . . . . . . . .  D ADDR   00B1H   A   
P1AQSFRC. . . . . . . . . . .  D ADDR   00A7H   A   
P1CMPA. . . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPA_H. . . . . . . . . . .  D ADDR   00A4H   A   
P1CMPA_L. . . . . . . . . . .  D ADDR   00A3H   A   
P1CMPB. . . . . . . . . . . .  D ADDR   00A5H   A   
P1CMPB_H. . . . . . . . . . .  D ADDR   00A6H   A   
P1CMPB_L. . . . . . . . . . .  D ADDR   00A5H   A   
P1ETCLR . . . . . . . . . . .  D ADDR   00B6H   A   
P1ETFLG . . . . . . . . . . .  D ADDR   00B5H   A   
P1ETFRC . . . . . . . . . . .  D ADDR   00B7H   A   
P1TBPRD . . . . . . . . . . .  D ADDR   00A1H   A   
P1TBPRD_H . . . . . . . . . .  D ADDR   00A2H   A   
P1TBPRD_L . . . . . . . . . .  D ADDR   00A1H   A   
P1TZCLR . . . . . . . . . . .  D ADDR   00B3H   A   
P1TZFLG . . . . . . . . . . .  D ADDR   00B2H   A   
P1TZFRC . . . . . . . . . . .  D ADDR   00B4H   A   
P2. . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20 . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21 . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P22 . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23 . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P24 . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P25 . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26 . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27 . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2AQCSFRC . . . . . . . . . .  D ADDR   00C9H   A   
P2AQSFRC. . . . . . . . . . .  D ADDR   00C7H   A   
P2CMPA. . . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPA_H. . . . . . . . . . .  D ADDR   00C4H   A   
P2CMPA_L. . . . . . . . . . .  D ADDR   00C3H   A   
P2CMPB. . . . . . . . . . . .  D ADDR   00C5H   A   
P2CMPB_H. . . . . . . . . . .  D ADDR   00C6H   A   
P2CMPB_L. . . . . . . . . . .  D ADDR   00C5H   A   
P2ETCLR . . . . . . . . . . .  D ADDR   00CEH   A   
P2ETFLG . . . . . . . . . . .  D ADDR   00CDH   A   
P2ETFRC . . . . . . . . . . .  D ADDR   00CFH   A   
P2TBPRD . . . . . . . . . . .  D ADDR   00C1H   A   
P2TBPRD_H . . . . . . . . . .  D ADDR   00C2H   A   
P2TBPRD_L . . . . . . . . . .  D ADDR   00C1H   A   
P2TZCLR . . . . . . . . . . .  D ADDR   00CBH   A   
P2TZFLG . . . . . . . . . . .  D ADDR   00CAH   A   
P2TZFRC . . . . . . . . . . .  D ADDR   00CCH   A   
P3. . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30 . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31 . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    46

P32 . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33 . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P34 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36 . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P37 . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3AQCSFRC . . . . . . . . . .  D ADDR   00D9H   A   
P3AQSFRC. . . . . . . . . . .  D ADDR   00D7H   A   
P3CMPA. . . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPA_H. . . . . . . . . . .  D ADDR   00D4H   A   
P3CMPA_L. . . . . . . . . . .  D ADDR   00D3H   A   
P3CMPB. . . . . . . . . . . .  D ADDR   00D5H   A   
P3CMPB_H. . . . . . . . . . .  D ADDR   00D6H   A   
P3CMPB_L. . . . . . . . . . .  D ADDR   00D5H   A   
P3ETCLR . . . . . . . . . . .  D ADDR   00DEH   A   
P3ETFLG . . . . . . . . . . .  D ADDR   00DDH   A   
P3ETFRC . . . . . . . . . . .  D ADDR   00DFH   A   
P3TBPRD . . . . . . . . . . .  D ADDR   00D1H   A   
P3TBPRD_H . . . . . . . . . .  D ADDR   00D2H   A   
P3TBPRD_L . . . . . . . . . .  D ADDR   00D1H   A   
P3TZCLR . . . . . . . . . . .  D ADDR   00DBH   A   
P3TZFLG . . . . . . . . . . .  D ADDR   00DAH   A   
P3TZFRC . . . . . . . . . . .  D ADDR   00DCH   A   
P4AQCSFRC . . . . . . . . . .  D ADDR   00F1H   A   
P4AQSFRC. . . . . . . . . . .  D ADDR   00E7H   A   
P4CMPA. . . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPA_H. . . . . . . . . . .  D ADDR   00E4H   A   
P4CMPA_L. . . . . . . . . . .  D ADDR   00E3H   A   
P4CMPB. . . . . . . . . . . .  D ADDR   00E5H   A   
P4CMPB_H. . . . . . . . . . .  D ADDR   00E6H   A   
P4CMPB_L. . . . . . . . . . .  D ADDR   00E5H   A   
P4ETCLR . . . . . . . . . . .  D ADDR   00F6H   A   
P4ETFLG . . . . . . . . . . .  D ADDR   00F5H   A   
P4ETFRC . . . . . . . . . . .  D ADDR   00F7H   A   
P4TBPRD . . . . . . . . . . .  D ADDR   00E1H   A   
P4TBPRD_H . . . . . . . . . .  D ADDR   00E2H   A   
P4TBPRD_L . . . . . . . . . .  D ADDR   00E1H   A   
P4TZCLR . . . . . . . . . . .  D ADDR   00F3H   A   
P4TZFLG . . . . . . . . . . .  D ADDR   00F2H   A   
P4TZFRC . . . . . . . . . . .  D ADDR   00F4H   A   
PCON. . . . . . . . . . . . .  D ADDR   0087H   A   
POWER_CON . . . . . . . . . .  D ADDR   0097H   A   
PSW . . . . . . . . . . . . .  D ADDR   00D0H   A   
RB80. . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN0. . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RI0 . . . . . . . . . . . . .  B ADDR   0098H.0 A   
S0BUF . . . . . . . . . . . .  D ADDR   0099H   A   
S0CON . . . . . . . . . . . .  D ADDR   0098H   A   
S0RELH. . . . . . . . . . . .  D ADDR   00BAH   A   
S0RELL. . . . . . . . . . . .  D ADDR   00AAH   A   
S1BUF . . . . . . . . . . . .  D ADDR   009CH   A   
S1CON . . . . . . . . . . . .  D ADDR   009BH   A   
S1RELH. . . . . . . . . . . .  D ADDR   00BBH   A   
S1RELL. . . . . . . . . . . .  D ADDR   009DH   A   
SBUF. . . . . . . . . . . . .  D ADDR   0099H   A   
SINITUART1. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART1?INITIAL
SINITUART2. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SINITUART2?INITIAL
SM0 . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM20. . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . .  D ADDR   0081H   A   
SRAM_CON. . . . . . . . . . .  D ADDR   00F8H   A   
SWDT. . . . . . . . . . . . .  B ADDR   00B8H.6 A   
SYSTEMCLOCK . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SYSTEMCLOCK?INITIAL
T2CON . . . . . . . . . . . .  D ADDR   00C8H   A   
A51 MACRO ASSEMBLER  INITIAL                                                              11/01/2018 12:43:23 PAGE    47

TB80. . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . . .  D ADDR   0088H   A   
TF0 . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . . . . . . .  D ADDR   008DH   A   
TI0 . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0 . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . . .  D ADDR   008BH   A   
TMOD. . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . .  B ADDR   0088H.6 A   
WDCON . . . . . . . . . . . .  D ADDR   00D8H   A   
WDCON_7 . . . . . . . . . . .  B ADDR   00D8H.7 A   
WDT . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
WDTREL. . . . . . . . . . . .  D ADDR   0086H   A   
__ISD_INIT. . . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
